"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/bills/reminders/route";
exports.ids = ["app/api/bills/reminders/route"];
exports.modules = {

/***/ "bcrypt":
/*!*************************!*\
  !*** external "bcrypt" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("bcrypt");

/***/ }),

/***/ "mysql2/promise":
/*!*********************************!*\
  !*** external "mysql2/promise" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("mysql2/promise");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "nodemailer":
/*!*****************************!*\
  !*** external "nodemailer" ***!
  \*****************************/
/***/ ((module) => {

module.exports = require("nodemailer");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fbills%2Freminders%2Froute&page=%2Fapi%2Fbills%2Freminders%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbills%2Freminders%2Froute.js&appDir=C%3A%5CUsers%5Cjoshu_mnu8z3u%5CDownloads%5CJ-H-Apartment%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cjoshu_mnu8z3u%5CDownloads%5CJ-H-Apartment&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fbills%2Freminders%2Froute&page=%2Fapi%2Fbills%2Freminders%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbills%2Freminders%2Froute.js&appDir=C%3A%5CUsers%5Cjoshu_mnu8z3u%5CDownloads%5CJ-H-Apartment%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cjoshu_mnu8z3u%5CDownloads%5CJ-H-Apartment&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_joshu_mnu8z3u_Downloads_J_H_Apartment_app_api_bills_reminders_route_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/bills/reminders/route.js */ \"(rsc)/./app/api/bills/reminders/route.js\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/bills/reminders/route\",\n        pathname: \"/api/bills/reminders\",\n        filename: \"route\",\n        bundlePath: \"app/api/bills/reminders/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\joshu_mnu8z3u\\\\Downloads\\\\J-H-Apartment\\\\app\\\\api\\\\bills\\\\reminders\\\\route.js\",\n    nextConfigOutput,\n    userland: C_Users_joshu_mnu8z3u_Downloads_J_H_Apartment_app_api_bills_reminders_route_js__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/bills/reminders/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZiaWxscyUyRnJlbWluZGVycyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGYmlsbHMlMkZyZW1pbmRlcnMlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZiaWxscyUyRnJlbWluZGVycyUyRnJvdXRlLmpzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNqb3NodV9tbnU4ejN1JTVDRG93bmxvYWRzJTVDSi1ILUFwYXJ0bWVudCU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q1VzZXJzJTVDam9zaHVfbW51OHozdSU1Q0Rvd25sb2FkcyU1Q0otSC1BcGFydG1lbnQmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ3dDO0FBQ3JIO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vai1oLWFwYXJ0bWVudC1uZXh0anMvPzgyMjQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiQzpcXFxcVXNlcnNcXFxcam9zaHVfbW51OHozdVxcXFxEb3dubG9hZHNcXFxcSi1ILUFwYXJ0bWVudFxcXFxhcHBcXFxcYXBpXFxcXGJpbGxzXFxcXHJlbWluZGVyc1xcXFxyb3V0ZS5qc1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYmlsbHMvcmVtaW5kZXJzL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYmlsbHMvcmVtaW5kZXJzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9iaWxscy9yZW1pbmRlcnMvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxVc2Vyc1xcXFxqb3NodV9tbnU4ejN1XFxcXERvd25sb2Fkc1xcXFxKLUgtQXBhcnRtZW50XFxcXGFwcFxcXFxhcGlcXFxcYmlsbHNcXFxccmVtaW5kZXJzXFxcXHJvdXRlLmpzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9iaWxscy9yZW1pbmRlcnMvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fbills%2Freminders%2Froute&page=%2Fapi%2Fbills%2Freminders%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbills%2Freminders%2Froute.js&appDir=C%3A%5CUsers%5Cjoshu_mnu8z3u%5CDownloads%5CJ-H-Apartment%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cjoshu_mnu8z3u%5CDownloads%5CJ-H-Apartment&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/bills/reminders/route.js":
/*!******************************************!*\
  !*** ./app/api/bills/reminders/route.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_database__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../lib/database */ \"(rsc)/./lib/database.js\");\n/* harmony import */ var _lib_database__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_lib_database__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../lib/auth */ \"(rsc)/./lib/auth.js\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_lib_auth__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _services_emailService__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../services/emailService */ \"(rsc)/./services/emailService.js\");\n/* harmony import */ var _models_bill__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../models/bill */ \"(rsc)/./models/bill.js\");\n/* harmony import */ var _models_bill__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_models_bill__WEBPACK_IMPORTED_MODULE_4__);\n\n\n\n\n\nasync function POST(request) {\n    try {\n        // Check authentication\n        const authResult = (0,_lib_auth__WEBPACK_IMPORTED_MODULE_2__.requireAuth)(request);\n        if (authResult.error) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                message: authResult.error\n            }, {\n                status: authResult.status\n            });\n        }\n        console.log(\"\\uD83D\\uDD14 Processing billing reminders...\");\n        // Get bills that need reminders (due within 3 days or overdue)\n        const billsNeedingReminders = await _models_bill__WEBPACK_IMPORTED_MODULE_4___default().getBillsNeedingReminders();\n        if (billsNeedingReminders.length === 0) {\n            console.log(\"âœ… No bills need reminders today\");\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                message: \"No bills need reminders today\",\n                bills_processed: 0,\n                reminders_sent: 0\n            });\n        }\n        console.log(`ðŸ“‹ Found ${billsNeedingReminders.length} bills needing reminders`);\n        // Filter bills that haven't had a reminder sent today\n        const today = new Date().toISOString().split(\"T\")[0];\n        const billsToRemind = [];\n        for (const bill of billsNeedingReminders){\n            // Check if reminder was already sent today for this bill\n            const [existingReminder] = await _lib_database__WEBPACK_IMPORTED_MODULE_1__.pool.execute(`\r\n        SELECT id FROM billing_reminders \r\n        WHERE bill_id = ? AND reminder_date = ?\r\n      `, [\n                bill.id,\n                today\n            ]);\n            if (existingReminder.length === 0) {\n                billsToRemind.push(bill);\n            }\n        }\n        if (billsToRemind.length === 0) {\n            console.log(\"âœ… All reminders for today have already been sent\");\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                message: \"All reminders for today have already been sent\",\n                bills_processed: billsNeedingReminders.length,\n                reminders_sent: 0\n            });\n        }\n        console.log(`ðŸ“§ Sending reminder for ${billsToRemind.length} bills`);\n        // Send email reminder to management\n        const emailResult = await _services_emailService__WEBPACK_IMPORTED_MODULE_3__[\"default\"].sendBillingReminderToManagement(billsToRemind);\n        let remindersSent = 0;\n        let errors = [];\n        if (emailResult.success) {\n            // Record reminders in database\n            for (const bill of billsToRemind){\n                try {\n                    await _lib_database__WEBPACK_IMPORTED_MODULE_1__.pool.execute(`\r\n            INSERT INTO billing_reminders \r\n            (bill_id, reminder_date, days_before_due, email_sent, email_sent_at) \r\n            VALUES (?, ?, ?, TRUE, NOW())\r\n          `, [\n                        bill.id,\n                        today,\n                        bill.days_until_due\n                    ]);\n                    // Also log in email_notifications table\n                    await _lib_database__WEBPACK_IMPORTED_MODULE_1__.pool.execute(`\r\n            INSERT INTO email_notifications \r\n            (tenant_id, email_type, email_subject, recipient_email, status, sent_at) \r\n            VALUES (?, 'billing_reminder', ?, 'official.jhapartment@gmail.com', 'sent', NOW())\r\n          `, [\n                        bill.tenant_id,\n                        `Billing Reminder - ${bill.tenant_name} - Room ${bill.room_number}`\n                    ]);\n                    remindersSent++;\n                } catch (error) {\n                    console.error(`âŒ Failed to record reminder for bill ${bill.id}:`, error);\n                    errors.push({\n                        bill_id: bill.id,\n                        tenant_name: bill.tenant_name,\n                        error: error.message\n                    });\n                }\n            }\n            console.log(`âœ… Successfully sent billing reminder email with ${remindersSent} bills`);\n        } else {\n            console.error(\"âŒ Failed to send billing reminder email:\", emailResult.error);\n            // Record failed attempts\n            for (const bill of billsToRemind){\n                try {\n                    await _lib_database__WEBPACK_IMPORTED_MODULE_1__.pool.execute(`\r\n            INSERT INTO billing_reminders \r\n            (bill_id, reminder_date, days_before_due, email_sent, email_sent_at) \r\n            VALUES (?, ?, ?, FALSE, NULL)\r\n          `, [\n                        bill.id,\n                        today,\n                        bill.days_until_due\n                    ]);\n                    await _lib_database__WEBPACK_IMPORTED_MODULE_1__.pool.execute(`\r\n            INSERT INTO email_notifications \r\n            (tenant_id, email_type, email_subject, recipient_email, status, error_message) \r\n            VALUES (?, 'billing_reminder', ?, 'official.jhapartment@gmail.com', 'failed', ?)\r\n          `, [\n                        bill.tenant_id,\n                        `Billing Reminder - ${bill.tenant_name} - Room ${bill.room_number}`,\n                        emailResult.error\n                    ]);\n                } catch (recordError) {\n                    console.error(`âŒ Failed to record failed reminder for bill ${bill.id}:`, recordError);\n                }\n            }\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            message: emailResult.success ? `Billing reminder sent successfully for ${remindersSent} bills` : `Failed to send billing reminder: ${emailResult.error}`,\n            bills_processed: billsNeedingReminders.length,\n            bills_to_remind: billsToRemind.length,\n            reminders_sent: remindersSent,\n            email_result: emailResult,\n            errors: errors.length > 0 ? errors : undefined\n        });\n    } catch (error) {\n        console.error(\"âŒ Billing reminders error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            message: \"Internal server error\",\n            error: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n// GET endpoint to check what bills need reminders (for testing/preview)\nasync function GET(request) {\n    try {\n        // Check authentication\n        const authResult = (0,_lib_auth__WEBPACK_IMPORTED_MODULE_2__.requireAuth)(request);\n        if (authResult.error) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                message: authResult.error\n            }, {\n                status: authResult.status\n            });\n        }\n        // Get bills that need reminders\n        const billsNeedingReminders = await _models_bill__WEBPACK_IMPORTED_MODULE_4___default().getBillsNeedingReminders();\n        // Check which ones haven't had reminders sent today\n        const today = new Date().toISOString().split(\"T\")[0];\n        const billsWithReminderStatus = [];\n        for (const bill of billsNeedingReminders){\n            const [existingReminder] = await _lib_database__WEBPACK_IMPORTED_MODULE_1__.pool.execute(`\r\n        SELECT id, email_sent, email_sent_at FROM billing_reminders \r\n        WHERE bill_id = ? AND reminder_date = ?\r\n      `, [\n                bill.id,\n                today\n            ]);\n            billsWithReminderStatus.push({\n                ...bill,\n                reminder_sent_today: existingReminder.length > 0,\n                reminder_details: existingReminder[0] || null\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            bills_needing_reminders: billsNeedingReminders.length,\n            bills_without_reminders_today: billsWithReminderStatus.filter((b)=>!b.reminder_sent_today).length,\n            bills: billsWithReminderStatus\n        });\n    } catch (error) {\n        console.error(\"âŒ Get billing reminders error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            message: \"Internal server error\",\n            error: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFJLENBQUM7WUFDdkJDLFNBQVM7WUFDVHFDLHlCQUF5QmhDLHNCQUFzQkUsTUFBTTtZQUNyRCtCLCtCQUErQkosd0JBQXdCSyxNQUFNLENBQUNDLENBQUFBLElBQUssQ0FBQ0EsRUFBRUwsbUJBQW1CLEVBQUU1QixNQUFNO1lBQ2pHa0MsT0FBT1A7UUFDVDtJQUVGLEVBQUUsT0FBT3BDLE9BQU87UUFDZEssUUFBUUwsS0FBSyxDQUFDLGtDQUFrQ0E7UUFDaEQsT0FBT1IscURBQVlBLENBQUNTLElBQUksQ0FDdEI7WUFBRUMsU0FBUztZQUFPQyxTQUFTO1lBQXlCSCxPQUFPQSxNQUFNRyxPQUFPO1FBQUMsR0FDekU7WUFBRUMsUUFBUTtRQUFJO0lBRWxCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9qLWgtYXBhcnRtZW50LW5leHRqcy8uL2FwcC9hcGkvYmlsbHMvcmVtaW5kZXJzL3JvdXRlLmpzPzk3OGIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInXHJcbmltcG9ydCB7IHBvb2wgfSBmcm9tICcuLi8uLi8uLi8uLi9saWIvZGF0YWJhc2UnXHJcbmltcG9ydCB7IHJlcXVpcmVBdXRoIH0gZnJvbSAnLi4vLi4vLi4vLi4vbGliL2F1dGgnXHJcbmltcG9ydCBlbWFpbFNlcnZpY2UgZnJvbSAnLi4vLi4vLi4vLi4vc2VydmljZXMvZW1haWxTZXJ2aWNlJ1xyXG5pbXBvcnQgQmlsbCBmcm9tICcuLi8uLi8uLi8uLi9tb2RlbHMvYmlsbCdcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3QpIHtcclxuICB0cnkge1xyXG4gICAgLy8gQ2hlY2sgYXV0aGVudGljYXRpb25cclxuICAgIGNvbnN0IGF1dGhSZXN1bHQgPSByZXF1aXJlQXV0aChyZXF1ZXN0KVxyXG4gICAgaWYgKGF1dGhSZXN1bHQuZXJyb3IpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6IGF1dGhSZXN1bHQuZXJyb3IgfSxcclxuICAgICAgICB7IHN0YXR1czogYXV0aFJlc3VsdC5zdGF0dXMgfVxyXG4gICAgICApXHJcbiAgICB9XHJcblxyXG4gICAgY29uc29sZS5sb2coJ/CflJQgUHJvY2Vzc2luZyBiaWxsaW5nIHJlbWluZGVycy4uLicpXHJcblxyXG4gICAgLy8gR2V0IGJpbGxzIHRoYXQgbmVlZCByZW1pbmRlcnMgKGR1ZSB3aXRoaW4gMyBkYXlzIG9yIG92ZXJkdWUpXHJcbiAgICBjb25zdCBiaWxsc05lZWRpbmdSZW1pbmRlcnMgPSBhd2FpdCBCaWxsLmdldEJpbGxzTmVlZGluZ1JlbWluZGVycygpXHJcbiAgICBcclxuICAgIGlmIChiaWxsc05lZWRpbmdSZW1pbmRlcnMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCfinIUgTm8gYmlsbHMgbmVlZCByZW1pbmRlcnMgdG9kYXknKVxyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgbWVzc2FnZTogJ05vIGJpbGxzIG5lZWQgcmVtaW5kZXJzIHRvZGF5JyxcclxuICAgICAgICBiaWxsc19wcm9jZXNzZWQ6IDAsXHJcbiAgICAgICAgcmVtaW5kZXJzX3NlbnQ6IDBcclxuICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBjb25zb2xlLmxvZyhg8J+TiyBGb3VuZCAke2JpbGxzTmVlZGluZ1JlbWluZGVycy5sZW5ndGh9IGJpbGxzIG5lZWRpbmcgcmVtaW5kZXJzYClcclxuXHJcbiAgICAvLyBGaWx0ZXIgYmlsbHMgdGhhdCBoYXZlbid0IGhhZCBhIHJlbWluZGVyIHNlbnQgdG9kYXlcclxuICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF1cclxuICAgIGNvbnN0IGJpbGxzVG9SZW1pbmQgPSBbXVxyXG5cclxuICAgIGZvciAoY29uc3QgYmlsbCBvZiBiaWxsc05lZWRpbmdSZW1pbmRlcnMpIHtcclxuICAgICAgLy8gQ2hlY2sgaWYgcmVtaW5kZXIgd2FzIGFscmVhZHkgc2VudCB0b2RheSBmb3IgdGhpcyBiaWxsXHJcbiAgICAgIGNvbnN0IFtleGlzdGluZ1JlbWluZGVyXSA9IGF3YWl0IHBvb2wuZXhlY3V0ZShgXHJcbiAgICAgICAgU0VMRUNUIGlkIEZST00gYmlsbGluZ19yZW1pbmRlcnMgXHJcbiAgICAgICAgV0hFUkUgYmlsbF9pZCA9ID8gQU5EIHJlbWluZGVyX2RhdGUgPSA/XHJcbiAgICAgIGAsIFtiaWxsLmlkLCB0b2RheV0pXHJcblxyXG4gICAgICBpZiAoZXhpc3RpbmdSZW1pbmRlci5sZW5ndGggPT09IDApIHtcclxuICAgICAgICBiaWxsc1RvUmVtaW5kLnB1c2goYmlsbClcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChiaWxsc1RvUmVtaW5kLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICBjb25zb2xlLmxvZygn4pyFIEFsbCByZW1pbmRlcnMgZm9yIHRvZGF5IGhhdmUgYWxyZWFkeSBiZWVuIHNlbnQnKVxyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgbWVzc2FnZTogJ0FsbCByZW1pbmRlcnMgZm9yIHRvZGF5IGhhdmUgYWxyZWFkeSBiZWVuIHNlbnQnLFxyXG4gICAgICAgIGJpbGxzX3Byb2Nlc3NlZDogYmlsbHNOZWVkaW5nUmVtaW5kZXJzLmxlbmd0aCxcclxuICAgICAgICByZW1pbmRlcnNfc2VudDogMFxyXG4gICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnNvbGUubG9nKGDwn5OnIFNlbmRpbmcgcmVtaW5kZXIgZm9yICR7YmlsbHNUb1JlbWluZC5sZW5ndGh9IGJpbGxzYClcclxuXHJcbiAgICAvLyBTZW5kIGVtYWlsIHJlbWluZGVyIHRvIG1hbmFnZW1lbnRcclxuICAgIGNvbnN0IGVtYWlsUmVzdWx0ID0gYXdhaXQgZW1haWxTZXJ2aWNlLnNlbmRCaWxsaW5nUmVtaW5kZXJUb01hbmFnZW1lbnQoYmlsbHNUb1JlbWluZClcclxuICAgIFxyXG4gICAgbGV0IHJlbWluZGVyc1NlbnQgPSAwXHJcbiAgICBsZXQgZXJyb3JzID0gW11cclxuXHJcbiAgICBpZiAoZW1haWxSZXN1bHQuc3VjY2Vzcykge1xyXG4gICAgICAvLyBSZWNvcmQgcmVtaW5kZXJzIGluIGRhdGFiYXNlXHJcbiAgICAgIGZvciAoY29uc3QgYmlsbCBvZiBiaWxsc1RvUmVtaW5kKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGF3YWl0IHBvb2wuZXhlY3V0ZShgXHJcbiAgICAgICAgICAgIElOU0VSVCBJTlRPIGJpbGxpbmdfcmVtaW5kZXJzIFxyXG4gICAgICAgICAgICAoYmlsbF9pZCwgcmVtaW5kZXJfZGF0ZSwgZGF5c19iZWZvcmVfZHVlLCBlbWFpbF9zZW50LCBlbWFpbF9zZW50X2F0KSBcclxuICAgICAgICAgICAgVkFMVUVTICg/LCA/LCA/LCBUUlVFLCBOT1coKSlcclxuICAgICAgICAgIGAsIFtiaWxsLmlkLCB0b2RheSwgYmlsbC5kYXlzX3VudGlsX2R1ZV0pXHJcblxyXG4gICAgICAgICAgLy8gQWxzbyBsb2cgaW4gZW1haWxfbm90aWZpY2F0aW9ucyB0YWJsZVxyXG4gICAgICAgICAgYXdhaXQgcG9vbC5leGVjdXRlKGBcclxuICAgICAgICAgICAgSU5TRVJUIElOVE8gZW1haWxfbm90aWZpY2F0aW9ucyBcclxuICAgICAgICAgICAgKHRlbmFudF9pZCwgZW1haWxfdHlwZSwgZW1haWxfc3ViamVjdCwgcmVjaXBpZW50X2VtYWlsLCBzdGF0dXMsIHNlbnRfYXQpIFxyXG4gICAgICAgICAgICBWQUxVRVMgKD8sICdiaWxsaW5nX3JlbWluZGVyJywgPywgJ29mZmljaWFsLmpoYXBhcnRtZW50QGdtYWlsLmNvbScsICdzZW50JywgTk9XKCkpXHJcbiAgICAgICAgICBgLCBbYmlsbC50ZW5hbnRfaWQsIGBCaWxsaW5nIFJlbWluZGVyIC0gJHtiaWxsLnRlbmFudF9uYW1lfSAtIFJvb20gJHtiaWxsLnJvb21fbnVtYmVyfWBdKVxyXG5cclxuICAgICAgICAgIHJlbWluZGVyc1NlbnQrK1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGDinYwgRmFpbGVkIHRvIHJlY29yZCByZW1pbmRlciBmb3IgYmlsbCAke2JpbGwuaWR9OmAsIGVycm9yKVxyXG4gICAgICAgICAgZXJyb3JzLnB1c2goe1xyXG4gICAgICAgICAgICBiaWxsX2lkOiBiaWxsLmlkLFxyXG4gICAgICAgICAgICB0ZW5hbnRfbmFtZTogYmlsbC50ZW5hbnRfbmFtZSxcclxuICAgICAgICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2VcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zb2xlLmxvZyhg4pyFIFN1Y2Nlc3NmdWxseSBzZW50IGJpbGxpbmcgcmVtaW5kZXIgZW1haWwgd2l0aCAke3JlbWluZGVyc1NlbnR9IGJpbGxzYClcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBGYWlsZWQgdG8gc2VuZCBiaWxsaW5nIHJlbWluZGVyIGVtYWlsOicsIGVtYWlsUmVzdWx0LmVycm9yKVxyXG4gICAgICBcclxuICAgICAgLy8gUmVjb3JkIGZhaWxlZCBhdHRlbXB0c1xyXG4gICAgICBmb3IgKGNvbnN0IGJpbGwgb2YgYmlsbHNUb1JlbWluZCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBhd2FpdCBwb29sLmV4ZWN1dGUoYFxyXG4gICAgICAgICAgICBJTlNFUlQgSU5UTyBiaWxsaW5nX3JlbWluZGVycyBcclxuICAgICAgICAgICAgKGJpbGxfaWQsIHJlbWluZGVyX2RhdGUsIGRheXNfYmVmb3JlX2R1ZSwgZW1haWxfc2VudCwgZW1haWxfc2VudF9hdCkgXHJcbiAgICAgICAgICAgIFZBTFVFUyAoPywgPywgPywgRkFMU0UsIE5VTEwpXHJcbiAgICAgICAgICBgLCBbYmlsbC5pZCwgdG9kYXksIGJpbGwuZGF5c191bnRpbF9kdWVdKVxyXG5cclxuICAgICAgICAgIGF3YWl0IHBvb2wuZXhlY3V0ZShgXHJcbiAgICAgICAgICAgIElOU0VSVCBJTlRPIGVtYWlsX25vdGlmaWNhdGlvbnMgXHJcbiAgICAgICAgICAgICh0ZW5hbnRfaWQsIGVtYWlsX3R5cGUsIGVtYWlsX3N1YmplY3QsIHJlY2lwaWVudF9lbWFpbCwgc3RhdHVzLCBlcnJvcl9tZXNzYWdlKSBcclxuICAgICAgICAgICAgVkFMVUVTICg/LCAnYmlsbGluZ19yZW1pbmRlcicsID8sICdvZmZpY2lhbC5qaGFwYXJ0bWVudEBnbWFpbC5jb20nLCAnZmFpbGVkJywgPylcclxuICAgICAgICAgIGAsIFtiaWxsLnRlbmFudF9pZCwgYEJpbGxpbmcgUmVtaW5kZXIgLSAke2JpbGwudGVuYW50X25hbWV9IC0gUm9vbSAke2JpbGwucm9vbV9udW1iZXJ9YCwgZW1haWxSZXN1bHQuZXJyb3JdKVxyXG4gICAgICAgIH0gY2F0Y2ggKHJlY29yZEVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGDinYwgRmFpbGVkIHRvIHJlY29yZCBmYWlsZWQgcmVtaW5kZXIgZm9yIGJpbGwgJHtiaWxsLmlkfTpgLCByZWNvcmRFcnJvcilcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICBtZXNzYWdlOiBlbWFpbFJlc3VsdC5zdWNjZXNzID8gXHJcbiAgICAgICAgYEJpbGxpbmcgcmVtaW5kZXIgc2VudCBzdWNjZXNzZnVsbHkgZm9yICR7cmVtaW5kZXJzU2VudH0gYmlsbHNgIDogXHJcbiAgICAgICAgYEZhaWxlZCB0byBzZW5kIGJpbGxpbmcgcmVtaW5kZXI6ICR7ZW1haWxSZXN1bHQuZXJyb3J9YCxcclxuICAgICAgYmlsbHNfcHJvY2Vzc2VkOiBiaWxsc05lZWRpbmdSZW1pbmRlcnMubGVuZ3RoLFxyXG4gICAgICBiaWxsc190b19yZW1pbmQ6IGJpbGxzVG9SZW1pbmQubGVuZ3RoLFxyXG4gICAgICByZW1pbmRlcnNfc2VudDogcmVtaW5kZXJzU2VudCxcclxuICAgICAgZW1haWxfcmVzdWx0OiBlbWFpbFJlc3VsdCxcclxuICAgICAgZXJyb3JzOiBlcnJvcnMubGVuZ3RoID4gMCA/IGVycm9ycyA6IHVuZGVmaW5lZFxyXG4gICAgfSlcclxuXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBCaWxsaW5nIHJlbWluZGVycyBlcnJvcjonLCBlcnJvcilcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ0ludGVybmFsIHNlcnZlciBlcnJvcicsIGVycm9yOiBlcnJvci5tZXNzYWdlIH0sXHJcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgKVxyXG4gIH1cclxufVxyXG5cclxuLy8gR0VUIGVuZHBvaW50IHRvIGNoZWNrIHdoYXQgYmlsbHMgbmVlZCByZW1pbmRlcnMgKGZvciB0ZXN0aW5nL3ByZXZpZXcpXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdCkge1xyXG4gIHRyeSB7XHJcbiAgICAvLyBDaGVjayBhdXRoZW50aWNhdGlvblxyXG4gICAgY29uc3QgYXV0aFJlc3VsdCA9IHJlcXVpcmVBdXRoKHJlcXVlc3QpXHJcbiAgICBpZiAoYXV0aFJlc3VsdC5lcnJvcikge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogYXV0aFJlc3VsdC5lcnJvciB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiBhdXRoUmVzdWx0LnN0YXR1cyB9XHJcbiAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICAvLyBHZXQgYmlsbHMgdGhhdCBuZWVkIHJlbWluZGVyc1xyXG4gICAgY29uc3QgYmlsbHNOZWVkaW5nUmVtaW5kZXJzID0gYXdhaXQgQmlsbC5nZXRCaWxsc05lZWRpbmdSZW1pbmRlcnMoKVxyXG4gICAgXHJcbiAgICAvLyBDaGVjayB3aGljaCBvbmVzIGhhdmVuJ3QgaGFkIHJlbWluZGVycyBzZW50IHRvZGF5XHJcbiAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdXHJcbiAgICBjb25zdCBiaWxsc1dpdGhSZW1pbmRlclN0YXR1cyA9IFtdXHJcblxyXG4gICAgZm9yIChjb25zdCBiaWxsIG9mIGJpbGxzTmVlZGluZ1JlbWluZGVycykge1xyXG4gICAgICBjb25zdCBbZXhpc3RpbmdSZW1pbmRlcl0gPSBhd2FpdCBwb29sLmV4ZWN1dGUoYFxyXG4gICAgICAgIFNFTEVDVCBpZCwgZW1haWxfc2VudCwgZW1haWxfc2VudF9hdCBGUk9NIGJpbGxpbmdfcmVtaW5kZXJzIFxyXG4gICAgICAgIFdIRVJFIGJpbGxfaWQgPSA/IEFORCByZW1pbmRlcl9kYXRlID0gP1xyXG4gICAgICBgLCBbYmlsbC5pZCwgdG9kYXldKVxyXG5cclxuICAgICAgYmlsbHNXaXRoUmVtaW5kZXJTdGF0dXMucHVzaCh7XHJcbiAgICAgICAgLi4uYmlsbCxcclxuICAgICAgICByZW1pbmRlcl9zZW50X3RvZGF5OiBleGlzdGluZ1JlbWluZGVyLmxlbmd0aCA+IDAsXHJcbiAgICAgICAgcmVtaW5kZXJfZGV0YWlsczogZXhpc3RpbmdSZW1pbmRlclswXSB8fCBudWxsXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcclxuICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgYmlsbHNfbmVlZGluZ19yZW1pbmRlcnM6IGJpbGxzTmVlZGluZ1JlbWluZGVycy5sZW5ndGgsXHJcbiAgICAgIGJpbGxzX3dpdGhvdXRfcmVtaW5kZXJzX3RvZGF5OiBiaWxsc1dpdGhSZW1pbmRlclN0YXR1cy5maWx0ZXIoYiA9PiAhYi5yZW1pbmRlcl9zZW50X3RvZGF5KS5sZW5ndGgsXHJcbiAgICAgIGJpbGxzOiBiaWxsc1dpdGhSZW1pbmRlclN0YXR1c1xyXG4gICAgfSlcclxuXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBHZXQgYmlsbGluZyByZW1pbmRlcnMgZXJyb3I6JywgZXJyb3IpXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9LFxyXG4gICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgIClcclxuICB9XHJcbn0gIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsInBvb2wiLCJyZXF1aXJlQXV0aCIsImVtYWlsU2VydmljZSIsIkJpbGwiLCJQT1NUIiwicmVxdWVzdCIsImF1dGhSZXN1bHQiLCJlcnJvciIsImpzb24iLCJzdWNjZXNzIiwibWVzc2FnZSIsInN0YXR1cyIsImNvbnNvbGUiLCJsb2ciLCJiaWxsc05lZWRpbmdSZW1pbmRlcnMiLCJnZXRCaWxsc05lZWRpbmdSZW1pbmRlcnMiLCJsZW5ndGgiLCJiaWxsc19wcm9jZXNzZWQiLCJyZW1pbmRlcnNfc2VudCIsInRvZGF5IiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwic3BsaXQiLCJiaWxsc1RvUmVtaW5kIiwiYmlsbCIsImV4aXN0aW5nUmVtaW5kZXIiLCJleGVjdXRlIiwiaWQiLCJwdXNoIiwiZW1haWxSZXN1bHQiLCJzZW5kQmlsbGluZ1JlbWluZGVyVG9NYW5hZ2VtZW50IiwicmVtaW5kZXJzU2VudCIsImVycm9ycyIsImRheXNfdW50aWxfZHVlIiwidGVuYW50X2lkIiwidGVuYW50X25hbWUiLCJyb29tX251bWJlciIsImJpbGxfaWQiLCJyZWNvcmRFcnJvciIsImJpbGxzX3RvX3JlbWluZCIsImVtYWlsX3Jlc3VsdCIsInVuZGVmaW5lZCIsIkdFVCIsImJpbGxzV2l0aFJlbWluZGVyU3RhdHVzIiwicmVtaW5kZXJfc2VudF90b2RheSIsInJlbWluZGVyX2RldGFpbHMiLCJiaWxsc19uZWVkaW5nX3JlbWluZGVycyIsImJpbGxzX3dpdGhvdXRfcmVtaW5kZXJzX3RvZGF5IiwiZmlsdGVyIiwiYiIsImJpbGxzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/bills/reminders/route.js\n");

/***/ }),

/***/ "(rsc)/./config/database.js":
/*!****************************!*\
  !*** ./config/database.js ***!
  \****************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nconst mysql = __webpack_require__(/*! mysql2/promise */ \"mysql2/promise\");\nconst dotenv = __webpack_require__(/*! dotenv */ \"(rsc)/../../node_modules/dotenv/lib/main.js\");\ndotenv.config();\n// Database connection pool\nconst pool = mysql.createPool({\n    host: \"localhost\" || 0,\n    user: \"root\" || 0,\n    password:  false || \"\",\n    database: \"jh_apartment\" || 0,\n    port: \"3306\" || 0,\n    waitForConnections: true,\n    connectionLimit: 10,\n    queueLimit: 0\n});\n// Test database connection\nasync function testConnection() {\n    try {\n        const connection = await pool.getConnection();\n        console.log(\"Database connection successful\");\n        connection.release();\n        return true;\n    } catch (error) {\n        console.error(\"Database connection failed:\", error);\n        return false;\n    }\n}\nmodule.exports = {\n    pool,\n    testConnection\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9jb25maWcvZGF0YWJhc2UuanMiLCJtYXBwaW5ncyI6IjtBQUFBLE1BQU1BLFFBQVFDLG1CQUFPQSxDQUFDO0FBQ3RCLE1BQU1DLFNBQVNELG1CQUFPQSxDQUFDO0FBRXZCQyxPQUFPQyxNQUFNO0FBRWIsMkJBQTJCO0FBQzNCLE1BQU1DLE9BQU9KLE1BQU1LLFVBQVUsQ0FBQztJQUM1QkMsTUFBTUMsV0FBbUIsSUFBSTtJQUM3QkcsTUFBTUgsTUFBbUIsSUFBSTtJQUM3QkssVUFBVUwsTUFBdUIsSUFBSTtJQUNyQ08sVUFBVVAsY0FBbUIsSUFBSTtJQUNqQ1MsTUFBTVQsTUFBbUIsSUFBSSxDQUFJO0lBQ2pDVyxvQkFBb0I7SUFDcEJDLGlCQUFpQjtJQUNqQkMsWUFBWTtBQUNkO0FBRUEsMkJBQTJCO0FBQzNCLGVBQWVDO0lBQ2IsSUFBSTtRQUNGLE1BQU1DLGFBQWEsTUFBTWxCLEtBQUttQixhQUFhO1FBQzNDQyxRQUFRQyxHQUFHLENBQUM7UUFDWkgsV0FBV0ksT0FBTztRQUNsQixPQUFPO0lBQ1QsRUFBRSxPQUFPQyxPQUFPO1FBQ2RILFFBQVFHLEtBQUssQ0FBQywrQkFBK0JBO1FBQzdDLE9BQU87SUFDVDtBQUNGO0FBRUFDLE9BQU9DLE9BQU8sR0FBRztJQUNmekI7SUFDQWlCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9qLWgtYXBhcnRtZW50LW5leHRqcy8uL2NvbmZpZy9kYXRhYmFzZS5qcz82OTJhIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG15c3FsID0gcmVxdWlyZSgnbXlzcWwyL3Byb21pc2UnKTtcclxuY29uc3QgZG90ZW52ID0gcmVxdWlyZSgnZG90ZW52Jyk7XHJcblxyXG5kb3RlbnYuY29uZmlnKCk7XHJcblxyXG4vLyBEYXRhYmFzZSBjb25uZWN0aW9uIHBvb2xcclxuY29uc3QgcG9vbCA9IG15c3FsLmNyZWF0ZVBvb2woe1xyXG4gIGhvc3Q6IHByb2Nlc3MuZW52LkRCX0hPU1QgfHwgJ2xvY2FsaG9zdCcsXHJcbiAgdXNlcjogcHJvY2Vzcy5lbnYuREJfVVNFUiB8fCAncm9vdCcsXHJcbiAgcGFzc3dvcmQ6IHByb2Nlc3MuZW52LkRCX1BBU1NXT1JEIHx8ICcnLFxyXG4gIGRhdGFiYXNlOiBwcm9jZXNzLmVudi5EQl9OQU1FIHx8ICdqaF9hcGFydG1lbnQnLFxyXG4gIHBvcnQ6IHByb2Nlc3MuZW52LkRCX1BPUlQgfHwgMzMwNixcclxuICB3YWl0Rm9yQ29ubmVjdGlvbnM6IHRydWUsXHJcbiAgY29ubmVjdGlvbkxpbWl0OiAxMCxcclxuICBxdWV1ZUxpbWl0OiAwXHJcbn0pO1xyXG5cclxuLy8gVGVzdCBkYXRhYmFzZSBjb25uZWN0aW9uXHJcbmFzeW5jIGZ1bmN0aW9uIHRlc3RDb25uZWN0aW9uKCkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBjb25uZWN0aW9uID0gYXdhaXQgcG9vbC5nZXRDb25uZWN0aW9uKCk7XHJcbiAgICBjb25zb2xlLmxvZygnRGF0YWJhc2UgY29ubmVjdGlvbiBzdWNjZXNzZnVsJyk7XHJcbiAgICBjb25uZWN0aW9uLnJlbGVhc2UoKTtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZDonLCBlcnJvcik7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICBwb29sLFxyXG4gIHRlc3RDb25uZWN0aW9uXHJcbn07ICJdLCJuYW1lcyI6WyJteXNxbCIsInJlcXVpcmUiLCJkb3RlbnYiLCJjb25maWciLCJwb29sIiwiY3JlYXRlUG9vbCIsImhvc3QiLCJwcm9jZXNzIiwiZW52IiwiREJfSE9TVCIsInVzZXIiLCJEQl9VU0VSIiwicGFzc3dvcmQiLCJEQl9QQVNTV09SRCIsImRhdGFiYXNlIiwiREJfTkFNRSIsInBvcnQiLCJEQl9QT1JUIiwid2FpdEZvckNvbm5lY3Rpb25zIiwiY29ubmVjdGlvbkxpbWl0IiwicXVldWVMaW1pdCIsInRlc3RDb25uZWN0aW9uIiwiY29ubmVjdGlvbiIsImdldENvbm5lY3Rpb24iLCJjb25zb2xlIiwibG9nIiwicmVsZWFzZSIsImVycm9yIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./config/database.js\n");

/***/ }),

/***/ "(rsc)/./lib/auth.js":
/*!*********************!*\
  !*** ./lib/auth.js ***!
  \*********************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nconst jwt = __webpack_require__(/*! jsonwebtoken */ \"(rsc)/./node_modules/jsonwebtoken/index.js\");\nconst bcrypt = __webpack_require__(/*! bcrypt */ \"bcrypt\");\nconst JWT_SECRET = \"your-super-secret-jwt-key-change-this-in-production\" || 0;\n// Generate JWT token\nfunction generateToken(user) {\n    return jwt.sign({\n        id: user.id,\n        username: user.username,\n        role: user.role\n    }, JWT_SECRET, {\n        expiresIn: \"24h\"\n    });\n}\n// Verify JWT token\nfunction verifyToken(token) {\n    try {\n        return jwt.verify(token, JWT_SECRET);\n    } catch (error) {\n        return null;\n    }\n}\n// Hash password\nasync function hashPassword(password) {\n    try {\n        const saltRounds = 10;\n        return await bcrypt.hash(password, saltRounds);\n    } catch (error) {\n        throw new Error(\"Error hashing password\");\n    }\n}\n// Compare password\nasync function comparePassword(password, hashedPassword) {\n    try {\n        return await bcrypt.compare(password, hashedPassword);\n    } catch (error) {\n        throw new Error(\"Error comparing passwords\");\n    }\n}\n// Middleware to verify authentication\nfunction requireAuth(req) {\n    // For Next.js API routes, get the authorization header\n    const authHeader = req.headers.get ? req.headers.get(\"authorization\") : req.headers.authorization;\n    const token = authHeader?.replace(\"Bearer \", \"\");\n    if (!token) {\n        return {\n            error: \"No token provided\",\n            status: 401\n        };\n    }\n    const decoded = verifyToken(token);\n    if (!decoded) {\n        return {\n            error: \"Invalid token\",\n            status: 401\n        };\n    }\n    return {\n        user: decoded\n    };\n}\nmodule.exports = {\n    generateToken,\n    verifyToken,\n    hashPassword,\n    comparePassword,\n    requireAuth\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvYXV0aC5qcyIsIm1hcHBpbmdzIjoiO0FBQUEsTUFBTUEsTUFBTUMsbUJBQU9BLENBQUM7QUFDcEIsTUFBTUMsU0FBU0QsbUJBQU9BLENBQUM7QUFFdkIsTUFBTUUsYUFBYUMscURBQXNCLElBQUk7QUFFN0MscUJBQXFCO0FBQ3JCLFNBQVNFLGNBQWNDLElBQUk7SUFDekIsT0FBT1AsSUFBSVEsSUFBSSxDQUNiO1FBQ0VDLElBQUlGLEtBQUtFLEVBQUU7UUFDWEMsVUFBVUgsS0FBS0csUUFBUTtRQUN2QkMsTUFBTUosS0FBS0ksSUFBSTtJQUNqQixHQUNBUixZQUNBO1FBQUVTLFdBQVc7SUFBTTtBQUV2QjtBQUVBLG1CQUFtQjtBQUNuQixTQUFTQyxZQUFZQyxLQUFLO0lBQ3hCLElBQUk7UUFDRixPQUFPZCxJQUFJZSxNQUFNLENBQUNELE9BQU9YO0lBQzNCLEVBQUUsT0FBT2EsT0FBTztRQUNkLE9BQU87SUFDVDtBQUNGO0FBRUEsZ0JBQWdCO0FBQ2hCLGVBQWVDLGFBQWFDLFFBQVE7SUFDbEMsSUFBSTtRQUNGLE1BQU1DLGFBQWE7UUFDbkIsT0FBTyxNQUFNakIsT0FBT2tCLElBQUksQ0FBQ0YsVUFBVUM7SUFDckMsRUFBRSxPQUFPSCxPQUFPO1FBQ2QsTUFBTSxJQUFJSyxNQUFNO0lBQ2xCO0FBQ0Y7QUFFQSxtQkFBbUI7QUFDbkIsZUFBZUMsZ0JBQWdCSixRQUFRLEVBQUVLLGNBQWM7SUFDckQsSUFBSTtRQUNGLE9BQU8sTUFBTXJCLE9BQU9zQixPQUFPLENBQUNOLFVBQVVLO0lBQ3hDLEVBQUUsT0FBT1AsT0FBTztRQUNkLE1BQU0sSUFBSUssTUFBTTtJQUNsQjtBQUNGO0FBRUEsc0NBQXNDO0FBQ3RDLFNBQVNJLFlBQVlDLEdBQUc7SUFDdEIsdURBQXVEO0lBQ3ZELE1BQU1DLGFBQWFELElBQUlFLE9BQU8sQ0FBQ0MsR0FBRyxHQUFHSCxJQUFJRSxPQUFPLENBQUNDLEdBQUcsQ0FBQyxtQkFBbUJILElBQUlFLE9BQU8sQ0FBQ0UsYUFBYTtJQUNqRyxNQUFNaEIsUUFBUWEsWUFBWUksUUFBUSxXQUFXO0lBRTdDLElBQUksQ0FBQ2pCLE9BQU87UUFDVixPQUFPO1lBQUVFLE9BQU87WUFBcUJnQixRQUFRO1FBQUk7SUFDbkQ7SUFFQSxNQUFNQyxVQUFVcEIsWUFBWUM7SUFDNUIsSUFBSSxDQUFDbUIsU0FBUztRQUNaLE9BQU87WUFBRWpCLE9BQU87WUFBaUJnQixRQUFRO1FBQUk7SUFDL0M7SUFFQSxPQUFPO1FBQUV6QixNQUFNMEI7SUFBUTtBQUN6QjtBQUVBQyxPQUFPQyxPQUFPLEdBQUc7SUFDZjdCO0lBQ0FPO0lBQ0FJO0lBQ0FLO0lBQ0FHO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9qLWgtYXBhcnRtZW50LW5leHRqcy8uL2xpYi9hdXRoLmpzPzI4N2IiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7XHJcbmNvbnN0IGJjcnlwdCA9IHJlcXVpcmUoJ2JjcnlwdCcpO1xyXG5cclxuY29uc3QgSldUX1NFQ1JFVCA9IHByb2Nlc3MuZW52LkpXVF9TRUNSRVQgfHwgJ3lvdXItc2VjcmV0LWtleS1oZXJlJztcclxuXHJcbi8vIEdlbmVyYXRlIEpXVCB0b2tlblxyXG5mdW5jdGlvbiBnZW5lcmF0ZVRva2VuKHVzZXIpIHtcclxuICByZXR1cm4gand0LnNpZ24oXHJcbiAgICB7IFxyXG4gICAgICBpZDogdXNlci5pZCwgXHJcbiAgICAgIHVzZXJuYW1lOiB1c2VyLnVzZXJuYW1lLCBcclxuICAgICAgcm9sZTogdXNlci5yb2xlIFxyXG4gICAgfSxcclxuICAgIEpXVF9TRUNSRVQsXHJcbiAgICB7IGV4cGlyZXNJbjogJzI0aCcgfVxyXG4gICk7XHJcbn1cclxuXHJcbi8vIFZlcmlmeSBKV1QgdG9rZW5cclxuZnVuY3Rpb24gdmVyaWZ5VG9rZW4odG9rZW4pIHtcclxuICB0cnkge1xyXG4gICAgcmV0dXJuIGp3dC52ZXJpZnkodG9rZW4sIEpXVF9TRUNSRVQpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbn1cclxuXHJcbi8vIEhhc2ggcGFzc3dvcmRcclxuYXN5bmMgZnVuY3Rpb24gaGFzaFBhc3N3b3JkKHBhc3N3b3JkKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHNhbHRSb3VuZHMgPSAxMDtcclxuICAgIHJldHVybiBhd2FpdCBiY3J5cHQuaGFzaChwYXNzd29yZCwgc2FsdFJvdW5kcyk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcignRXJyb3IgaGFzaGluZyBwYXNzd29yZCcpO1xyXG4gIH1cclxufVxyXG5cclxuLy8gQ29tcGFyZSBwYXNzd29yZFxyXG5hc3luYyBmdW5jdGlvbiBjb21wYXJlUGFzc3dvcmQocGFzc3dvcmQsIGhhc2hlZFBhc3N3b3JkKSB7XHJcbiAgdHJ5IHtcclxuICAgIHJldHVybiBhd2FpdCBiY3J5cHQuY29tcGFyZShwYXNzd29yZCwgaGFzaGVkUGFzc3dvcmQpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0Vycm9yIGNvbXBhcmluZyBwYXNzd29yZHMnKTtcclxuICB9XHJcbn1cclxuXHJcbi8vIE1pZGRsZXdhcmUgdG8gdmVyaWZ5IGF1dGhlbnRpY2F0aW9uXHJcbmZ1bmN0aW9uIHJlcXVpcmVBdXRoKHJlcSkge1xyXG4gIC8vIEZvciBOZXh0LmpzIEFQSSByb3V0ZXMsIGdldCB0aGUgYXV0aG9yaXphdGlvbiBoZWFkZXJcclxuICBjb25zdCBhdXRoSGVhZGVyID0gcmVxLmhlYWRlcnMuZ2V0ID8gcmVxLmhlYWRlcnMuZ2V0KCdhdXRob3JpemF0aW9uJykgOiByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uO1xyXG4gIGNvbnN0IHRva2VuID0gYXV0aEhlYWRlcj8ucmVwbGFjZSgnQmVhcmVyICcsICcnKTtcclxuICBcclxuICBpZiAoIXRva2VuKSB7XHJcbiAgICByZXR1cm4geyBlcnJvcjogJ05vIHRva2VuIHByb3ZpZGVkJywgc3RhdHVzOiA0MDEgfTtcclxuICB9XHJcblxyXG4gIGNvbnN0IGRlY29kZWQgPSB2ZXJpZnlUb2tlbih0b2tlbik7XHJcbiAgaWYgKCFkZWNvZGVkKSB7XHJcbiAgICByZXR1cm4geyBlcnJvcjogJ0ludmFsaWQgdG9rZW4nLCBzdGF0dXM6IDQwMSB9O1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHsgdXNlcjogZGVjb2RlZCB9O1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICBnZW5lcmF0ZVRva2VuLFxyXG4gIHZlcmlmeVRva2VuLFxyXG4gIGhhc2hQYXNzd29yZCxcclxuICBjb21wYXJlUGFzc3dvcmQsXHJcbiAgcmVxdWlyZUF1dGhcclxufTsgIl0sIm5hbWVzIjpbImp3dCIsInJlcXVpcmUiLCJiY3J5cHQiLCJKV1RfU0VDUkVUIiwicHJvY2VzcyIsImVudiIsImdlbmVyYXRlVG9rZW4iLCJ1c2VyIiwic2lnbiIsImlkIiwidXNlcm5hbWUiLCJyb2xlIiwiZXhwaXJlc0luIiwidmVyaWZ5VG9rZW4iLCJ0b2tlbiIsInZlcmlmeSIsImVycm9yIiwiaGFzaFBhc3N3b3JkIiwicGFzc3dvcmQiLCJzYWx0Um91bmRzIiwiaGFzaCIsIkVycm9yIiwiY29tcGFyZVBhc3N3b3JkIiwiaGFzaGVkUGFzc3dvcmQiLCJjb21wYXJlIiwicmVxdWlyZUF1dGgiLCJyZXEiLCJhdXRoSGVhZGVyIiwiaGVhZGVycyIsImdldCIsImF1dGhvcml6YXRpb24iLCJyZXBsYWNlIiwic3RhdHVzIiwiZGVjb2RlZCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/auth.js\n");

/***/ }),

/***/ "(rsc)/./lib/database.js":
/*!*************************!*\
  !*** ./lib/database.js ***!
  \*************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nconst mysql = __webpack_require__(/*! mysql2/promise */ \"mysql2/promise\");\n// Database connection pool\nconst pool = mysql.createPool({\n    host: \"localhost\" || 0,\n    user: \"root\" || 0,\n    password:  false || \"\",\n    database: \"jh_apartment\" || 0,\n    port: \"3306\" || 0,\n    waitForConnections: true,\n    connectionLimit: 10,\n    queueLimit: 0\n});\n// Test database connection\nasync function testConnection() {\n    try {\n        const connection = await pool.getConnection();\n        console.log(\"Database connection successful\");\n        connection.release();\n        return true;\n    } catch (error) {\n        console.error(\"Database connection failed:\", error);\n        return false;\n    }\n}\nmodule.exports = {\n    pool,\n    testConnection\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZGF0YWJhc2UuanMiLCJtYXBwaW5ncyI6IjtBQUFBLE1BQU1BLFFBQVFDLG1CQUFPQSxDQUFDO0FBRXRCLDJCQUEyQjtBQUMzQixNQUFNQyxPQUFPRixNQUFNRyxVQUFVLENBQUM7SUFDNUJDLE1BQU1DLFdBQW1CLElBQUk7SUFDN0JHLE1BQU1ILE1BQW1CLElBQUk7SUFDN0JLLFVBQVVMLE1BQXVCLElBQUk7SUFDckNPLFVBQVVQLGNBQW1CLElBQUk7SUFDakNTLE1BQU1ULE1BQW1CLElBQUksQ0FBSTtJQUNqQ1csb0JBQW9CO0lBQ3BCQyxpQkFBaUI7SUFDakJDLFlBQVk7QUFDZDtBQUVBLDJCQUEyQjtBQUMzQixlQUFlQztJQUNiLElBQUk7UUFDRixNQUFNQyxhQUFhLE1BQU1sQixLQUFLbUIsYUFBYTtRQUMzQ0MsUUFBUUMsR0FBRyxDQUFDO1FBQ1pILFdBQVdJLE9BQU87UUFDbEIsT0FBTztJQUNULEVBQUUsT0FBT0MsT0FBTztRQUNkSCxRQUFRRyxLQUFLLENBQUMsK0JBQStCQTtRQUM3QyxPQUFPO0lBQ1Q7QUFDRjtBQUVBQyxPQUFPQyxPQUFPLEdBQUc7SUFDZnpCO0lBQ0FpQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vai1oLWFwYXJ0bWVudC1uZXh0anMvLi9saWIvZGF0YWJhc2UuanM/ZWVhNSJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBteXNxbCA9IHJlcXVpcmUoJ215c3FsMi9wcm9taXNlJyk7XHJcblxyXG4vLyBEYXRhYmFzZSBjb25uZWN0aW9uIHBvb2xcclxuY29uc3QgcG9vbCA9IG15c3FsLmNyZWF0ZVBvb2woe1xyXG4gIGhvc3Q6IHByb2Nlc3MuZW52LkRCX0hPU1QgfHwgJ2xvY2FsaG9zdCcsXHJcbiAgdXNlcjogcHJvY2Vzcy5lbnYuREJfVVNFUiB8fCAncm9vdCcsXHJcbiAgcGFzc3dvcmQ6IHByb2Nlc3MuZW52LkRCX1BBU1NXT1JEIHx8ICcnLFxyXG4gIGRhdGFiYXNlOiBwcm9jZXNzLmVudi5EQl9OQU1FIHx8ICdqaF9hcGFydG1lbnQnLFxyXG4gIHBvcnQ6IHByb2Nlc3MuZW52LkRCX1BPUlQgfHwgMzMwNixcclxuICB3YWl0Rm9yQ29ubmVjdGlvbnM6IHRydWUsXHJcbiAgY29ubmVjdGlvbkxpbWl0OiAxMCxcclxuICBxdWV1ZUxpbWl0OiAwXHJcbn0pO1xyXG5cclxuLy8gVGVzdCBkYXRhYmFzZSBjb25uZWN0aW9uXHJcbmFzeW5jIGZ1bmN0aW9uIHRlc3RDb25uZWN0aW9uKCkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBjb25uZWN0aW9uID0gYXdhaXQgcG9vbC5nZXRDb25uZWN0aW9uKCk7XHJcbiAgICBjb25zb2xlLmxvZygnRGF0YWJhc2UgY29ubmVjdGlvbiBzdWNjZXNzZnVsJyk7XHJcbiAgICBjb25uZWN0aW9uLnJlbGVhc2UoKTtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZDonLCBlcnJvcik7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICBwb29sLFxyXG4gIHRlc3RDb25uZWN0aW9uXHJcbn07ICJdLCJuYW1lcyI6WyJteXNxbCIsInJlcXVpcmUiLCJwb29sIiwiY3JlYXRlUG9vbCIsImhvc3QiLCJwcm9jZXNzIiwiZW52IiwiREJfSE9TVCIsInVzZXIiLCJEQl9VU0VSIiwicGFzc3dvcmQiLCJEQl9QQVNTV09SRCIsImRhdGFiYXNlIiwiREJfTkFNRSIsInBvcnQiLCJEQl9QT1JUIiwid2FpdEZvckNvbm5lY3Rpb25zIiwiY29ubmVjdGlvbkxpbWl0IiwicXVldWVMaW1pdCIsInRlc3RDb25uZWN0aW9uIiwiY29ubmVjdGlvbiIsImdldENvbm5lY3Rpb24iLCJjb25zb2xlIiwibG9nIiwicmVsZWFzZSIsImVycm9yIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/database.js\n");

/***/ }),

/***/ "(rsc)/./models/bill.js":
/*!************************!*\
  !*** ./models/bill.js ***!
  \************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nconst { pool } = __webpack_require__(/*! ../config/database */ \"(rsc)/./config/database.js\");\nconst Setting = __webpack_require__(/*! ./setting */ \"(rsc)/./models/setting.js\");\nclass Bill {\n    // Get all bills with tenant and room details\n    static async findAll() {\n        try {\n            const [rows] = await pool.execute(`\n        SELECT b.*, t.name as tenant_name, r.room_number, br.name as branch_name\n        FROM bills b\n        JOIN tenants t ON b.tenant_id = t.id\n        JOIN rooms r ON b.room_id = r.id\n        JOIN branches br ON r.branch_id = br.id\n        ORDER BY b.bill_date DESC\n      `);\n            return rows;\n        } catch (error) {\n            console.error(\"Error finding all bills:\", error);\n            throw error;\n        }\n    }\n    // Get unpaid bills\n    static async findUnpaid() {\n        try {\n            const [rows] = await pool.execute(`\n        SELECT b.*, t.name as tenant_name, r.room_number, br.name as branch_name\n        FROM bills b\n        JOIN tenants t ON b.tenant_id = t.id\n        JOIN rooms r ON b.room_id = r.id\n        JOIN branches br ON r.branch_id = br.id\n        WHERE b.status = 'unpaid' OR b.status = 'partial'\n        ORDER BY b.bill_date\n      `);\n            return rows;\n        } catch (error) {\n            console.error(\"Error finding unpaid bills:\", error);\n            throw error;\n        }\n    }\n    // Get active bills (unpaid/partial)\n    static async findActive() {\n        try {\n            const [rows] = await pool.execute(`\n        SELECT b.*, t.name as tenant_name, r.room_number, br.name as branch_name\n        FROM bills b\n        JOIN tenants t ON b.tenant_id = t.id\n        JOIN rooms r ON b.room_id = r.id\n        JOIN branches br ON r.branch_id = br.id\n        WHERE b.status IN ('unpaid', 'partial')\n        ORDER BY b.bill_date DESC\n      `);\n            return rows;\n        } catch (error) {\n            console.error(\"Error finding active bills:\", error);\n            throw error;\n        }\n    }\n    // Get paid bills (archived)\n    static async findPaid() {\n        try {\n            const [rows] = await pool.execute(`\n        SELECT b.*, t.name as tenant_name, r.room_number, br.name as branch_name,\n               p.payment_date as paid_date\n        FROM bills b\n        JOIN tenants t ON b.tenant_id = t.id\n        JOIN rooms r ON b.room_id = r.id\n        JOIN branches br ON r.branch_id = br.id\n        LEFT JOIN (\n          SELECT bill_id, MAX(payment_date) as payment_date\n          FROM payments\n          GROUP BY bill_id\n        ) p ON b.id = p.bill_id\n        WHERE b.status = 'paid'\n        ORDER BY b.bill_date DESC\n      `);\n            return rows;\n        } catch (error) {\n            console.error(\"Error finding paid bills:\", error);\n            throw error;\n        }\n    }\n    // Get bills by tenant ID\n    static async findByTenantId(tenantId) {\n        try {\n            const [rows] = await pool.execute(`\n        SELECT b.*, r.room_number, br.name as branch_name,\n          (SELECT SUM(amount) FROM payments WHERE bill_id = b.id) as paid_amount\n        FROM bills b\n        JOIN rooms r ON b.room_id = r.id\n        JOIN branches br ON r.branch_id = br.id\n        WHERE b.tenant_id = ?\n        ORDER BY b.bill_date DESC\n      `, [\n                tenantId\n            ]);\n            return rows;\n        } catch (error) {\n            console.error(\"Error finding bills by tenant ID:\", error);\n            throw error;\n        }\n    }\n    // Get bill by ID with payments\n    static async findById(id) {\n        try {\n            const [bills] = await pool.execute(`\n        SELECT b.*, t.name as tenant_name, r.room_number, br.name as branch_name\n        FROM bills b\n        JOIN tenants t ON b.tenant_id = t.id\n        JOIN rooms r ON b.room_id = r.id\n        JOIN branches br ON r.branch_id = br.id\n        WHERE b.id = ?\n      `, [\n                id\n            ]);\n            if (!bills.length) {\n                return null;\n            }\n            const bill = bills[0];\n            // Get payments for this bill\n            const [payments] = await pool.execute(\"SELECT * FROM payments WHERE bill_id = ? ORDER BY payment_date DESC\", [\n                id\n            ]);\n            bill.payments = payments;\n            bill.paid_amount = payments.reduce((sum, payment)=>sum + Number(payment.amount), 0);\n            return bill;\n        } catch (error) {\n            console.error(\"Error finding bill by ID:\", error);\n            throw error;\n        }\n    }\n    // Create a new comprehensive bill\n    static async create(billData) {\n        const { tenant_id, room_id, bill_date, rent_from, rent_to, rent_amount, electric_present_reading = 0, electric_previous_reading = 0, electric_consumption = 0, electric_amount = 0, electric_reading_date, electric_previous_date, water_amount, extra_fee_amount = 0, extra_fee_description = null, total_amount, status = \"unpaid\", notes, prepared_by } = billData;\n        try {\n            // Get current rates from settings\n            const rates = await Setting.getBillingRates();\n            const finalElectricRate = billData.electric_rate_per_kwh || rates.electric_rate_per_kwh;\n            const finalWaterAmount = water_amount || rates.water_fixed_amount;\n            // Convert undefined values to null for SQL compatibility\n            const sqlParams = [\n                tenant_id ?? null,\n                room_id ?? null,\n                bill_date ?? null,\n                rent_from ?? null,\n                rent_to ?? null,\n                rent_amount ?? null,\n                electric_present_reading ?? 0,\n                electric_previous_reading ?? 0,\n                electric_consumption ?? 0,\n                finalElectricRate ?? null,\n                electric_amount ?? 0,\n                electric_reading_date ?? null,\n                electric_previous_date ?? null,\n                finalWaterAmount ?? null,\n                extra_fee_amount ?? 0,\n                extra_fee_description ?? null,\n                total_amount ?? null,\n                status ?? \"unpaid\",\n                notes ?? null,\n                prepared_by ?? null\n            ];\n            const [result] = await pool.execute(`\n        INSERT INTO bills (\n          tenant_id, room_id, bill_date, rent_from, rent_to, rent_amount,\n          electric_present_reading, electric_previous_reading, electric_consumption, \n          electric_rate_per_kwh, electric_amount, electric_reading_date, electric_previous_date,\n          water_amount, extra_fee_amount, extra_fee_description, total_amount, status, notes, prepared_by\n        ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\n      `, sqlParams);\n            return {\n                id: result.insertId,\n                ...billData,\n                electric_rate_per_kwh: finalElectricRate,\n                water_amount: finalWaterAmount\n            };\n        } catch (error) {\n            console.error(\"Error creating new bill:\", error);\n            throw error;\n        }\n    }\n    // Update bill\n    static async update(id, billData) {\n        const { bill_date, rent_from, rent_to, rent_amount, electric_present_reading, electric_previous_reading, electric_consumption, electric_rate_per_kwh, electric_amount, electric_reading_date, electric_previous_date, water_amount, total_amount, status, notes, prepared_by } = billData;\n        try {\n            // Convert undefined values to null for SQL compatibility\n            const sqlParams = [\n                bill_date ?? null,\n                rent_from ?? null,\n                rent_to ?? null,\n                rent_amount ?? null,\n                electric_present_reading ?? null,\n                electric_previous_reading ?? null,\n                electric_consumption ?? null,\n                electric_rate_per_kwh ?? null,\n                electric_amount ?? null,\n                electric_reading_date ?? null,\n                electric_previous_date ?? null,\n                water_amount ?? null,\n                total_amount ?? null,\n                status ?? null,\n                notes ?? null,\n                prepared_by ?? null,\n                id\n            ];\n            await pool.execute(`\n        UPDATE bills SET \n          bill_date = ?, rent_from = ?, rent_to = ?, rent_amount = ?,\n          electric_present_reading = ?, electric_previous_reading = ?, electric_consumption = ?, \n          electric_rate_per_kwh = ?, electric_amount = ?, electric_reading_date = ?, electric_previous_date = ?,\n          water_amount = ?, total_amount = ?, status = ?, notes = ?, prepared_by = ?\n        WHERE id = ?\n      `, sqlParams);\n            return {\n                id,\n                ...billData\n            };\n        } catch (error) {\n            console.error(\"Error updating bill:\", error);\n            throw error;\n        }\n    }\n    // Delete bill\n    static async delete(id) {\n        try {\n            await pool.execute(\"DELETE FROM bills WHERE id = ?\", [\n                id\n            ]);\n            return true;\n        } catch (error) {\n            console.error(\"Error deleting bill:\", error);\n            throw error;\n        }\n    }\n    // Update bill status\n    static async updateStatus(id, status) {\n        try {\n            await pool.execute(\"UPDATE bills SET status = ? WHERE id = ?\", [\n                status,\n                id\n            ]);\n            return true;\n        } catch (error) {\n            console.error(\"Error updating bill status:\", error);\n            throw error;\n        }\n    }\n    // Calculate consumption and amounts based on readings and current rates\n    static async calculateUtilityAmounts(presentReading, previousReading) {\n        try {\n            const rates = await Setting.getBillingRates();\n            const consumption = Math.max(0, presentReading - previousReading);\n            const electricAmount = consumption * rates.electric_rate_per_kwh;\n            return {\n                consumption,\n                electricAmount,\n                waterAmount: rates.water_fixed_amount,\n                electricRate: rates.electric_rate_per_kwh\n            };\n        } catch (error) {\n            console.error(\"Error calculating utility amounts:\", error);\n            throw error;\n        }\n    }\n    // Get billing stats\n    static async getStats() {\n        try {\n            const [rows] = await pool.execute(`\n        SELECT\n          COUNT(*) as total_bills,\n          SUM(total_amount) as total_amount,\n          SUM(CASE WHEN status = 'paid' THEN total_amount ELSE 0 END) as paid_amount,\n          SUM(CASE WHEN (status = 'unpaid' OR status = 'partial') THEN total_amount ELSE 0 END) as unpaid_amount,\n          COUNT(CASE WHEN status = 'unpaid' OR status = 'partial' THEN 1 END) as unpaid_bills,\n          SUM(rent_amount) as total_rent,\n          SUM(electric_amount) as total_electric,\n          SUM(water_amount) as total_water\n        FROM bills\n      `);\n            return rows[0];\n        } catch (error) {\n            console.error(\"Error getting billing stats:\", error);\n            throw error;\n        }\n    }\n    // AUTOMATIC BILLING METHODS - DISABLED\n    // Note: Automatic billing has been disabled. Bills must be created manually.\n    /*\n  // Get bills that need next cycle generation (current period ended)\n  static async getBillsNeedingNextCycle() {\n    // DISABLED - Automatic billing cycles removed\n    return [];\n  }\n\n  // Generate next billing cycle\n  static async generateNextCycle(tenantId, roomId, lastBillEndDate, previousElectricReading, monthlyRent) {\n    // DISABLED - Automatic billing cycles removed\n    throw new Error('Automatic billing cycles have been disabled. Please create bills manually.');\n  }\n\n  // Process all automatic billing cycles\n  static async processAutomaticCycles() {\n    // DISABLED - Automatic billing cycles removed\n    return [];\n        }\n  */ // Get bills needing electricity reading update (3 days before cycle ends)\n    static async getBillsNeedingElectricUpdate() {\n        try {\n            const [rows] = await pool.execute(`\n        SELECT \n          b.*,\n          t.name as tenant_name,\n          t.email as tenant_email,\n          r.room_number,\n          r.monthly_rent,\n          br.name as branch_name,\n          br.address as branch_address\n        FROM bills b\n        INNER JOIN tenants t ON b.tenant_id = t.id\n        INNER JOIN rooms r ON b.room_id = r.id\n        INNER JOIN branches br ON r.branch_id = br.id\n        WHERE b.status = 'unpaid'\n        AND b.electric_consumption = 0\n        AND DATEDIFF(b.rent_to, CURDATE()) <= 3\n        AND DATEDIFF(b.rent_to, CURDATE()) >= 0\n        ORDER BY b.rent_to ASC\n      `);\n            return rows;\n        } catch (error) {\n            console.error(\"Error finding bills needing electric update:\", error);\n            throw error;\n        }\n    }\n    // Update electricity reading and auto-calculate amounts\n    static async updateElectricReading(billId, presentReading, readingDate) {\n        try {\n            // Get current bill\n            const bill = await this.findById(billId);\n            if (!bill) {\n                throw new Error(\"Bill not found\");\n            }\n            const previousReading = parseFloat(bill.electric_previous_reading) || 0;\n            const currentReading = parseFloat(presentReading) || 0;\n            // Calculate consumption\n            const consumption = Math.max(0, currentReading - previousReading);\n            // Get current electric rate\n            const Setting = __webpack_require__(/*! ./setting */ \"(rsc)/./models/setting.js\");\n            const rates = await Setting.getBillingRates();\n            const electricAmount = consumption * rates.electric_rate_per_kwh;\n            // Calculate new total\n            const newTotal = parseFloat(bill.rent_amount) + electricAmount + parseFloat(bill.water_amount);\n            // Update bill\n            const [result] = await pool.execute(`\n        UPDATE bills SET \n          electric_present_reading = ?,\n          electric_consumption = ?,\n          electric_amount = ?,\n          electric_reading_date = ?,\n          total_amount = ?,\n          notes = CONCAT(COALESCE(notes, ''), ' | Electric reading updated: ', ?, ' kWh on ', ?)\n        WHERE id = ?\n      `, [\n                currentReading,\n                consumption,\n                electricAmount,\n                readingDate,\n                newTotal,\n                currentReading,\n                readingDate,\n                billId\n            ]);\n            return {\n                success: true,\n                previousReading,\n                currentReading,\n                consumption,\n                electricAmount,\n                newTotal,\n                message: `Electric reading updated: ${consumption} kWh consumed, â‚±${electricAmount.toFixed(2)} charged`\n            };\n        } catch (error) {\n            console.error(\"Error updating electric reading:\", error);\n            throw error;\n        }\n    }\n    // Mark bill as ready to send (finalized)\n    static async markAsReadyToSend(billId) {\n        try {\n            const [result] = await pool.execute(`\n        UPDATE bills SET \n          notes = CONCAT(COALESCE(notes, ''), ' | Bill finalized and ready to send'),\n          updated_at = CURRENT_TIMESTAMP\n        WHERE id = ?\n      `, [\n                billId\n            ]);\n            return result.affectedRows > 0;\n        } catch (error) {\n            console.error(\"Error marking bill as ready to send:\", error);\n            throw error;\n        }\n    }\n    // Get bills needing billing reminders (3 days before due date and overdue)\n    static async getBillsNeedingReminders() {\n        try {\n            const [rows] = await pool.execute(`\n        SELECT \n          b.*,\n          t.name as tenant_name,\n          t.email as tenant_email,\n          r.room_number,\n          r.monthly_rent,\n          br.name as branch_name,\n          br.address as branch_address,\n          COALESCE(SUM(p.amount), 0) as total_paid,\n          (b.total_amount - COALESCE(SUM(p.amount), 0)) as remaining_balance,\n          DATEDIFF(b.rent_to, CURDATE()) as days_until_due\n        FROM bills b\n        INNER JOIN tenants t ON b.tenant_id = t.id\n        INNER JOIN rooms r ON b.room_id = r.id\n        INNER JOIN branches br ON r.branch_id = br.id\n        LEFT JOIN payments p ON b.id = p.bill_id\n        WHERE b.status IN ('unpaid', 'partial')\n        AND DATEDIFF(b.rent_to, CURDATE()) <= 3\n        GROUP BY b.id\n        ORDER BY b.rent_to ASC, br.name, r.room_number\n      `);\n            return rows;\n        } catch (error) {\n            console.error(\"Error finding bills needing reminders:\", error);\n            throw error;\n        }\n    }\n}\nmodule.exports = Bill;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LGVBQWVjLE9BQU8sQ0FBQyxHQUFHLFFBQVEsQ0FBQztZQUN6RztRQUNGLEVBQUUsT0FBT3hFLE9BQU87WUFDZEMsUUFBUUQsS0FBSyxDQUFDLG9DQUFvQ0E7WUFDbEQsTUFBTUE7UUFDUjtJQUNGO0lBRUEseUNBQXlDO0lBQ3pDLGFBQWF5RSxrQkFBa0JULE1BQU0sRUFBRTtRQUNyQyxJQUFJO1lBQ0YsTUFBTSxDQUFDakIsT0FBTyxHQUFHLE1BQU10RCxLQUFLTSxPQUFPLENBQUMsQ0FBQzs7Ozs7TUFLckMsQ0FBQyxFQUFFO2dCQUFDaUU7YUFBTztZQUVYLE9BQU9qQixPQUFPMkIsWUFBWSxHQUFHO1FBQy9CLEVBQUUsT0FBTzFFLE9BQU87WUFDZEMsUUFBUUQsS0FBSyxDQUFDLHdDQUF3Q0E7WUFDdEQsTUFBTUE7UUFDUjtJQUNGO0lBRUEsMkVBQTJFO0lBQzNFLGFBQWEyRSwyQkFBMkI7UUFDdEMsSUFBSTtZQUNGLE1BQU0sQ0FBQzdFLEtBQUssR0FBRyxNQUFNTCxLQUFLTSxPQUFPLENBQUMsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O01BcUJuQyxDQUFDO1lBRUQsT0FBT0Q7UUFDVCxFQUFFLE9BQU9FLE9BQU87WUFDZEMsUUFBUUQsS0FBSyxDQUFDLDBDQUEwQ0E7WUFDeEQsTUFBTUE7UUFDUjtJQUNGO0FBQ0Y7QUFFQTRFLE9BQU9DLE9BQU8sR0FBR2pGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vai1oLWFwYXJ0bWVudC1uZXh0anMvLi9tb2RlbHMvYmlsbC5qcz81OGE5Il0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgcG9vbCB9ID0gcmVxdWlyZSgnLi4vY29uZmlnL2RhdGFiYXNlJyk7XG5jb25zdCBTZXR0aW5nID0gcmVxdWlyZSgnLi9zZXR0aW5nJyk7XG5cbmNsYXNzIEJpbGwge1xuICAvLyBHZXQgYWxsIGJpbGxzIHdpdGggdGVuYW50IGFuZCByb29tIGRldGFpbHNcbiAgc3RhdGljIGFzeW5jIGZpbmRBbGwoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IFtyb3dzXSA9IGF3YWl0IHBvb2wuZXhlY3V0ZShgXG4gICAgICAgIFNFTEVDVCBiLiosIHQubmFtZSBhcyB0ZW5hbnRfbmFtZSwgci5yb29tX251bWJlciwgYnIubmFtZSBhcyBicmFuY2hfbmFtZVxuICAgICAgICBGUk9NIGJpbGxzIGJcbiAgICAgICAgSk9JTiB0ZW5hbnRzIHQgT04gYi50ZW5hbnRfaWQgPSB0LmlkXG4gICAgICAgIEpPSU4gcm9vbXMgciBPTiBiLnJvb21faWQgPSByLmlkXG4gICAgICAgIEpPSU4gYnJhbmNoZXMgYnIgT04gci5icmFuY2hfaWQgPSBici5pZFxuICAgICAgICBPUkRFUiBCWSBiLmJpbGxfZGF0ZSBERVNDXG4gICAgICBgKTtcbiAgICAgIHJldHVybiByb3dzO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmaW5kaW5nIGFsbCBiaWxsczonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvLyBHZXQgdW5wYWlkIGJpbGxzXG4gIHN0YXRpYyBhc3luYyBmaW5kVW5wYWlkKCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBbcm93c10gPSBhd2FpdCBwb29sLmV4ZWN1dGUoYFxuICAgICAgICBTRUxFQ1QgYi4qLCB0Lm5hbWUgYXMgdGVuYW50X25hbWUsIHIucm9vbV9udW1iZXIsIGJyLm5hbWUgYXMgYnJhbmNoX25hbWVcbiAgICAgICAgRlJPTSBiaWxscyBiXG4gICAgICAgIEpPSU4gdGVuYW50cyB0IE9OIGIudGVuYW50X2lkID0gdC5pZFxuICAgICAgICBKT0lOIHJvb21zIHIgT04gYi5yb29tX2lkID0gci5pZFxuICAgICAgICBKT0lOIGJyYW5jaGVzIGJyIE9OIHIuYnJhbmNoX2lkID0gYnIuaWRcbiAgICAgICAgV0hFUkUgYi5zdGF0dXMgPSAndW5wYWlkJyBPUiBiLnN0YXR1cyA9ICdwYXJ0aWFsJ1xuICAgICAgICBPUkRFUiBCWSBiLmJpbGxfZGF0ZVxuICAgICAgYCk7XG4gICAgICByZXR1cm4gcm93cztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmluZGluZyB1bnBhaWQgYmlsbHM6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLy8gR2V0IGFjdGl2ZSBiaWxscyAodW5wYWlkL3BhcnRpYWwpXG4gIHN0YXRpYyBhc3luYyBmaW5kQWN0aXZlKCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBbcm93c10gPSBhd2FpdCBwb29sLmV4ZWN1dGUoYFxuICAgICAgICBTRUxFQ1QgYi4qLCB0Lm5hbWUgYXMgdGVuYW50X25hbWUsIHIucm9vbV9udW1iZXIsIGJyLm5hbWUgYXMgYnJhbmNoX25hbWVcbiAgICAgICAgRlJPTSBiaWxscyBiXG4gICAgICAgIEpPSU4gdGVuYW50cyB0IE9OIGIudGVuYW50X2lkID0gdC5pZFxuICAgICAgICBKT0lOIHJvb21zIHIgT04gYi5yb29tX2lkID0gci5pZFxuICAgICAgICBKT0lOIGJyYW5jaGVzIGJyIE9OIHIuYnJhbmNoX2lkID0gYnIuaWRcbiAgICAgICAgV0hFUkUgYi5zdGF0dXMgSU4gKCd1bnBhaWQnLCAncGFydGlhbCcpXG4gICAgICAgIE9SREVSIEJZIGIuYmlsbF9kYXRlIERFU0NcbiAgICAgIGApO1xuICAgICAgcmV0dXJuIHJvd3M7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZpbmRpbmcgYWN0aXZlIGJpbGxzOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8vIEdldCBwYWlkIGJpbGxzIChhcmNoaXZlZClcbiAgc3RhdGljIGFzeW5jIGZpbmRQYWlkKCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBbcm93c10gPSBhd2FpdCBwb29sLmV4ZWN1dGUoYFxuICAgICAgICBTRUxFQ1QgYi4qLCB0Lm5hbWUgYXMgdGVuYW50X25hbWUsIHIucm9vbV9udW1iZXIsIGJyLm5hbWUgYXMgYnJhbmNoX25hbWUsXG4gICAgICAgICAgICAgICBwLnBheW1lbnRfZGF0ZSBhcyBwYWlkX2RhdGVcbiAgICAgICAgRlJPTSBiaWxscyBiXG4gICAgICAgIEpPSU4gdGVuYW50cyB0IE9OIGIudGVuYW50X2lkID0gdC5pZFxuICAgICAgICBKT0lOIHJvb21zIHIgT04gYi5yb29tX2lkID0gci5pZFxuICAgICAgICBKT0lOIGJyYW5jaGVzIGJyIE9OIHIuYnJhbmNoX2lkID0gYnIuaWRcbiAgICAgICAgTEVGVCBKT0lOIChcbiAgICAgICAgICBTRUxFQ1QgYmlsbF9pZCwgTUFYKHBheW1lbnRfZGF0ZSkgYXMgcGF5bWVudF9kYXRlXG4gICAgICAgICAgRlJPTSBwYXltZW50c1xuICAgICAgICAgIEdST1VQIEJZIGJpbGxfaWRcbiAgICAgICAgKSBwIE9OIGIuaWQgPSBwLmJpbGxfaWRcbiAgICAgICAgV0hFUkUgYi5zdGF0dXMgPSAncGFpZCdcbiAgICAgICAgT1JERVIgQlkgYi5iaWxsX2RhdGUgREVTQ1xuICAgICAgYCk7XG4gICAgICByZXR1cm4gcm93cztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmluZGluZyBwYWlkIGJpbGxzOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8vIEdldCBiaWxscyBieSB0ZW5hbnQgSURcbiAgc3RhdGljIGFzeW5jIGZpbmRCeVRlbmFudElkKHRlbmFudElkKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IFtyb3dzXSA9IGF3YWl0IHBvb2wuZXhlY3V0ZShgXG4gICAgICAgIFNFTEVDVCBiLiosIHIucm9vbV9udW1iZXIsIGJyLm5hbWUgYXMgYnJhbmNoX25hbWUsXG4gICAgICAgICAgKFNFTEVDVCBTVU0oYW1vdW50KSBGUk9NIHBheW1lbnRzIFdIRVJFIGJpbGxfaWQgPSBiLmlkKSBhcyBwYWlkX2Ftb3VudFxuICAgICAgICBGUk9NIGJpbGxzIGJcbiAgICAgICAgSk9JTiByb29tcyByIE9OIGIucm9vbV9pZCA9IHIuaWRcbiAgICAgICAgSk9JTiBicmFuY2hlcyBiciBPTiByLmJyYW5jaF9pZCA9IGJyLmlkXG4gICAgICAgIFdIRVJFIGIudGVuYW50X2lkID0gP1xuICAgICAgICBPUkRFUiBCWSBiLmJpbGxfZGF0ZSBERVNDXG4gICAgICBgLCBbdGVuYW50SWRdKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIHJvd3M7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZpbmRpbmcgYmlsbHMgYnkgdGVuYW50IElEOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8vIEdldCBiaWxsIGJ5IElEIHdpdGggcGF5bWVudHNcbiAgc3RhdGljIGFzeW5jIGZpbmRCeUlkKGlkKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IFtiaWxsc10gPSBhd2FpdCBwb29sLmV4ZWN1dGUoYFxuICAgICAgICBTRUxFQ1QgYi4qLCB0Lm5hbWUgYXMgdGVuYW50X25hbWUsIHIucm9vbV9udW1iZXIsIGJyLm5hbWUgYXMgYnJhbmNoX25hbWVcbiAgICAgICAgRlJPTSBiaWxscyBiXG4gICAgICAgIEpPSU4gdGVuYW50cyB0IE9OIGIudGVuYW50X2lkID0gdC5pZFxuICAgICAgICBKT0lOIHJvb21zIHIgT04gYi5yb29tX2lkID0gci5pZFxuICAgICAgICBKT0lOIGJyYW5jaGVzIGJyIE9OIHIuYnJhbmNoX2lkID0gYnIuaWRcbiAgICAgICAgV0hFUkUgYi5pZCA9ID9cbiAgICAgIGAsIFtpZF0pO1xuICAgICAgXG4gICAgICBpZiAoIWJpbGxzLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgYmlsbCA9IGJpbGxzWzBdO1xuICAgICAgXG4gICAgICAvLyBHZXQgcGF5bWVudHMgZm9yIHRoaXMgYmlsbFxuICAgICAgY29uc3QgW3BheW1lbnRzXSA9IGF3YWl0IHBvb2wuZXhlY3V0ZShcbiAgICAgICAgJ1NFTEVDVCAqIEZST00gcGF5bWVudHMgV0hFUkUgYmlsbF9pZCA9ID8gT1JERVIgQlkgcGF5bWVudF9kYXRlIERFU0MnLFxuICAgICAgICBbaWRdXG4gICAgICApO1xuICAgICAgXG4gICAgICBiaWxsLnBheW1lbnRzID0gcGF5bWVudHM7XG4gICAgICBiaWxsLnBhaWRfYW1vdW50ID0gcGF5bWVudHMucmVkdWNlKChzdW0sIHBheW1lbnQpID0+IHN1bSArIE51bWJlcihwYXltZW50LmFtb3VudCksIDApO1xuICAgICAgXG4gICAgICByZXR1cm4gYmlsbDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmluZGluZyBiaWxsIGJ5IElEOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8vIENyZWF0ZSBhIG5ldyBjb21wcmVoZW5zaXZlIGJpbGxcbiAgc3RhdGljIGFzeW5jIGNyZWF0ZShiaWxsRGF0YSkge1xuICAgIGNvbnN0IHsgXG4gICAgICB0ZW5hbnRfaWQsIFxuICAgICAgcm9vbV9pZCwgXG4gICAgICBiaWxsX2RhdGUsXG4gICAgICByZW50X2Zyb20sXG4gICAgICByZW50X3RvLFxuICAgICAgcmVudF9hbW91bnQsXG4gICAgICBlbGVjdHJpY19wcmVzZW50X3JlYWRpbmcgPSAwLFxuICAgICAgZWxlY3RyaWNfcHJldmlvdXNfcmVhZGluZyA9IDAsXG4gICAgICBlbGVjdHJpY19jb25zdW1wdGlvbiA9IDAsXG4gICAgICBlbGVjdHJpY19hbW91bnQgPSAwLFxuICAgICAgZWxlY3RyaWNfcmVhZGluZ19kYXRlLFxuICAgICAgZWxlY3RyaWNfcHJldmlvdXNfZGF0ZSxcbiAgICAgIHdhdGVyX2Ftb3VudCxcbiAgICAgIGV4dHJhX2ZlZV9hbW91bnQgPSAwLFxuICAgICAgZXh0cmFfZmVlX2Rlc2NyaXB0aW9uID0gbnVsbCxcbiAgICAgIHRvdGFsX2Ftb3VudCxcbiAgICAgIHN0YXR1cyA9ICd1bnBhaWQnLFxuICAgICAgbm90ZXMsXG4gICAgICBwcmVwYXJlZF9ieVxuICAgIH0gPSBiaWxsRGF0YTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgLy8gR2V0IGN1cnJlbnQgcmF0ZXMgZnJvbSBzZXR0aW5nc1xuICAgICAgY29uc3QgcmF0ZXMgPSBhd2FpdCBTZXR0aW5nLmdldEJpbGxpbmdSYXRlcygpO1xuICAgICAgY29uc3QgZmluYWxFbGVjdHJpY1JhdGUgPSBiaWxsRGF0YS5lbGVjdHJpY19yYXRlX3Blcl9rd2ggfHwgcmF0ZXMuZWxlY3RyaWNfcmF0ZV9wZXJfa3doO1xuICAgICAgY29uc3QgZmluYWxXYXRlckFtb3VudCA9IHdhdGVyX2Ftb3VudCB8fCByYXRlcy53YXRlcl9maXhlZF9hbW91bnQ7XG4gICAgICBcbiAgICAgIC8vIENvbnZlcnQgdW5kZWZpbmVkIHZhbHVlcyB0byBudWxsIGZvciBTUUwgY29tcGF0aWJpbGl0eVxuICAgICAgY29uc3Qgc3FsUGFyYW1zID0gW1xuICAgICAgICB0ZW5hbnRfaWQgPz8gbnVsbCxcbiAgICAgICAgcm9vbV9pZCA/PyBudWxsLFxuICAgICAgICBiaWxsX2RhdGUgPz8gbnVsbCxcbiAgICAgICAgcmVudF9mcm9tID8/IG51bGwsXG4gICAgICAgIHJlbnRfdG8gPz8gbnVsbCxcbiAgICAgICAgcmVudF9hbW91bnQgPz8gbnVsbCxcbiAgICAgICAgZWxlY3RyaWNfcHJlc2VudF9yZWFkaW5nID8/IDAsXG4gICAgICAgIGVsZWN0cmljX3ByZXZpb3VzX3JlYWRpbmcgPz8gMCxcbiAgICAgICAgZWxlY3RyaWNfY29uc3VtcHRpb24gPz8gMCxcbiAgICAgICAgZmluYWxFbGVjdHJpY1JhdGUgPz8gbnVsbCxcbiAgICAgICAgZWxlY3RyaWNfYW1vdW50ID8/IDAsXG4gICAgICAgIGVsZWN0cmljX3JlYWRpbmdfZGF0ZSA/PyBudWxsLFxuICAgICAgICBlbGVjdHJpY19wcmV2aW91c19kYXRlID8/IG51bGwsXG4gICAgICAgIGZpbmFsV2F0ZXJBbW91bnQgPz8gbnVsbCxcbiAgICAgICAgZXh0cmFfZmVlX2Ftb3VudCA/PyAwLFxuICAgICAgICBleHRyYV9mZWVfZGVzY3JpcHRpb24gPz8gbnVsbCxcbiAgICAgICAgdG90YWxfYW1vdW50ID8/IG51bGwsXG4gICAgICAgIHN0YXR1cyA/PyAndW5wYWlkJyxcbiAgICAgICAgbm90ZXMgPz8gbnVsbCxcbiAgICAgICAgcHJlcGFyZWRfYnkgPz8gbnVsbFxuICAgICAgXTtcbiAgICAgIFxuICAgICAgY29uc3QgW3Jlc3VsdF0gPSBhd2FpdCBwb29sLmV4ZWN1dGUoYFxuICAgICAgICBJTlNFUlQgSU5UTyBiaWxscyAoXG4gICAgICAgICAgdGVuYW50X2lkLCByb29tX2lkLCBiaWxsX2RhdGUsIHJlbnRfZnJvbSwgcmVudF90bywgcmVudF9hbW91bnQsXG4gICAgICAgICAgZWxlY3RyaWNfcHJlc2VudF9yZWFkaW5nLCBlbGVjdHJpY19wcmV2aW91c19yZWFkaW5nLCBlbGVjdHJpY19jb25zdW1wdGlvbiwgXG4gICAgICAgICAgZWxlY3RyaWNfcmF0ZV9wZXJfa3doLCBlbGVjdHJpY19hbW91bnQsIGVsZWN0cmljX3JlYWRpbmdfZGF0ZSwgZWxlY3RyaWNfcHJldmlvdXNfZGF0ZSxcbiAgICAgICAgICB3YXRlcl9hbW91bnQsIGV4dHJhX2ZlZV9hbW91bnQsIGV4dHJhX2ZlZV9kZXNjcmlwdGlvbiwgdG90YWxfYW1vdW50LCBzdGF0dXMsIG5vdGVzLCBwcmVwYXJlZF9ieVxuICAgICAgICApIFZBTFVFUyAoPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPylcbiAgICAgIGAsIHNxbFBhcmFtcyk7XG4gICAgICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGlkOiByZXN1bHQuaW5zZXJ0SWQsXG4gICAgICAgIC4uLmJpbGxEYXRhLFxuICAgICAgICBlbGVjdHJpY19yYXRlX3Blcl9rd2g6IGZpbmFsRWxlY3RyaWNSYXRlLFxuICAgICAgICB3YXRlcl9hbW91bnQ6IGZpbmFsV2F0ZXJBbW91bnRcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIG5ldyBiaWxsOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8vIFVwZGF0ZSBiaWxsXG4gIHN0YXRpYyBhc3luYyB1cGRhdGUoaWQsIGJpbGxEYXRhKSB7XG4gICAgY29uc3QgeyBcbiAgICAgIGJpbGxfZGF0ZSxcbiAgICAgIHJlbnRfZnJvbSxcbiAgICAgIHJlbnRfdG8sXG4gICAgICByZW50X2Ftb3VudCxcbiAgICAgIGVsZWN0cmljX3ByZXNlbnRfcmVhZGluZyxcbiAgICAgIGVsZWN0cmljX3ByZXZpb3VzX3JlYWRpbmcsXG4gICAgICBlbGVjdHJpY19jb25zdW1wdGlvbixcbiAgICAgIGVsZWN0cmljX3JhdGVfcGVyX2t3aCxcbiAgICAgIGVsZWN0cmljX2Ftb3VudCxcbiAgICAgIGVsZWN0cmljX3JlYWRpbmdfZGF0ZSxcbiAgICAgIGVsZWN0cmljX3ByZXZpb3VzX2RhdGUsXG4gICAgICB3YXRlcl9hbW91bnQsXG4gICAgICB0b3RhbF9hbW91bnQsXG4gICAgICBzdGF0dXMsXG4gICAgICBub3RlcyxcbiAgICAgIHByZXBhcmVkX2J5XG4gICAgfSA9IGJpbGxEYXRhO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICAvLyBDb252ZXJ0IHVuZGVmaW5lZCB2YWx1ZXMgdG8gbnVsbCBmb3IgU1FMIGNvbXBhdGliaWxpdHlcbiAgICAgIGNvbnN0IHNxbFBhcmFtcyA9IFtcbiAgICAgICAgYmlsbF9kYXRlID8/IG51bGwsXG4gICAgICAgIHJlbnRfZnJvbSA/PyBudWxsLFxuICAgICAgICByZW50X3RvID8/IG51bGwsXG4gICAgICAgIHJlbnRfYW1vdW50ID8/IG51bGwsXG4gICAgICAgIGVsZWN0cmljX3ByZXNlbnRfcmVhZGluZyA/PyBudWxsLFxuICAgICAgICBlbGVjdHJpY19wcmV2aW91c19yZWFkaW5nID8/IG51bGwsXG4gICAgICAgIGVsZWN0cmljX2NvbnN1bXB0aW9uID8/IG51bGwsXG4gICAgICAgIGVsZWN0cmljX3JhdGVfcGVyX2t3aCA/PyBudWxsLFxuICAgICAgICBlbGVjdHJpY19hbW91bnQgPz8gbnVsbCxcbiAgICAgICAgZWxlY3RyaWNfcmVhZGluZ19kYXRlID8/IG51bGwsXG4gICAgICAgIGVsZWN0cmljX3ByZXZpb3VzX2RhdGUgPz8gbnVsbCxcbiAgICAgICAgd2F0ZXJfYW1vdW50ID8/IG51bGwsXG4gICAgICAgIHRvdGFsX2Ftb3VudCA/PyBudWxsLFxuICAgICAgICBzdGF0dXMgPz8gbnVsbCxcbiAgICAgICAgbm90ZXMgPz8gbnVsbCxcbiAgICAgICAgcHJlcGFyZWRfYnkgPz8gbnVsbCxcbiAgICAgICAgaWRcbiAgICAgIF07XG4gICAgICBcbiAgICAgIGF3YWl0IHBvb2wuZXhlY3V0ZShgXG4gICAgICAgIFVQREFURSBiaWxscyBTRVQgXG4gICAgICAgICAgYmlsbF9kYXRlID0gPywgcmVudF9mcm9tID0gPywgcmVudF90byA9ID8sIHJlbnRfYW1vdW50ID0gPyxcbiAgICAgICAgICBlbGVjdHJpY19wcmVzZW50X3JlYWRpbmcgPSA/LCBlbGVjdHJpY19wcmV2aW91c19yZWFkaW5nID0gPywgZWxlY3RyaWNfY29uc3VtcHRpb24gPSA/LCBcbiAgICAgICAgICBlbGVjdHJpY19yYXRlX3Blcl9rd2ggPSA/LCBlbGVjdHJpY19hbW91bnQgPSA/LCBlbGVjdHJpY19yZWFkaW5nX2RhdGUgPSA/LCBlbGVjdHJpY19wcmV2aW91c19kYXRlID0gPyxcbiAgICAgICAgICB3YXRlcl9hbW91bnQgPSA/LCB0b3RhbF9hbW91bnQgPSA/LCBzdGF0dXMgPSA/LCBub3RlcyA9ID8sIHByZXBhcmVkX2J5ID0gP1xuICAgICAgICBXSEVSRSBpZCA9ID9cbiAgICAgIGAsIHNxbFBhcmFtcyk7XG4gICAgICBcbiAgICAgIHJldHVybiB7IGlkLCAuLi5iaWxsRGF0YSB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBiaWxsOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8vIERlbGV0ZSBiaWxsXG4gIHN0YXRpYyBhc3luYyBkZWxldGUoaWQpIHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgcG9vbC5leGVjdXRlKCdERUxFVEUgRlJPTSBiaWxscyBXSEVSRSBpZCA9ID8nLCBbaWRdKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZWxldGluZyBiaWxsOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8vIFVwZGF0ZSBiaWxsIHN0YXR1c1xuICBzdGF0aWMgYXN5bmMgdXBkYXRlU3RhdHVzKGlkLCBzdGF0dXMpIHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgcG9vbC5leGVjdXRlKFxuICAgICAgICAnVVBEQVRFIGJpbGxzIFNFVCBzdGF0dXMgPSA/IFdIRVJFIGlkID0gPycsXG4gICAgICAgIFtzdGF0dXMsIGlkXVxuICAgICAgKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBiaWxsIHN0YXR1czonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuXG5cbiAgLy8gQ2FsY3VsYXRlIGNvbnN1bXB0aW9uIGFuZCBhbW91bnRzIGJhc2VkIG9uIHJlYWRpbmdzIGFuZCBjdXJyZW50IHJhdGVzXG4gIHN0YXRpYyBhc3luYyBjYWxjdWxhdGVVdGlsaXR5QW1vdW50cyhwcmVzZW50UmVhZGluZywgcHJldmlvdXNSZWFkaW5nKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJhdGVzID0gYXdhaXQgU2V0dGluZy5nZXRCaWxsaW5nUmF0ZXMoKTtcbiAgICAgIGNvbnN0IGNvbnN1bXB0aW9uID0gTWF0aC5tYXgoMCwgcHJlc2VudFJlYWRpbmcgLSBwcmV2aW91c1JlYWRpbmcpO1xuICAgICAgY29uc3QgZWxlY3RyaWNBbW91bnQgPSBjb25zdW1wdGlvbiAqIHJhdGVzLmVsZWN0cmljX3JhdGVfcGVyX2t3aDtcbiAgICAgIFxuICAgICAgcmV0dXJuIHsgXG4gICAgICAgIGNvbnN1bXB0aW9uLCBcbiAgICAgICAgZWxlY3RyaWNBbW91bnQsXG4gICAgICAgIHdhdGVyQW1vdW50OiByYXRlcy53YXRlcl9maXhlZF9hbW91bnQsXG4gICAgICAgIGVsZWN0cmljUmF0ZTogcmF0ZXMuZWxlY3RyaWNfcmF0ZV9wZXJfa3doXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjYWxjdWxhdGluZyB1dGlsaXR5IGFtb3VudHM6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLy8gR2V0IGJpbGxpbmcgc3RhdHNcbiAgc3RhdGljIGFzeW5jIGdldFN0YXRzKCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBbcm93c10gPSBhd2FpdCBwb29sLmV4ZWN1dGUoYFxuICAgICAgICBTRUxFQ1RcbiAgICAgICAgICBDT1VOVCgqKSBhcyB0b3RhbF9iaWxscyxcbiAgICAgICAgICBTVU0odG90YWxfYW1vdW50KSBhcyB0b3RhbF9hbW91bnQsXG4gICAgICAgICAgU1VNKENBU0UgV0hFTiBzdGF0dXMgPSAncGFpZCcgVEhFTiB0b3RhbF9hbW91bnQgRUxTRSAwIEVORCkgYXMgcGFpZF9hbW91bnQsXG4gICAgICAgICAgU1VNKENBU0UgV0hFTiAoc3RhdHVzID0gJ3VucGFpZCcgT1Igc3RhdHVzID0gJ3BhcnRpYWwnKSBUSEVOIHRvdGFsX2Ftb3VudCBFTFNFIDAgRU5EKSBhcyB1bnBhaWRfYW1vdW50LFxuICAgICAgICAgIENPVU5UKENBU0UgV0hFTiBzdGF0dXMgPSAndW5wYWlkJyBPUiBzdGF0dXMgPSAncGFydGlhbCcgVEhFTiAxIEVORCkgYXMgdW5wYWlkX2JpbGxzLFxuICAgICAgICAgIFNVTShyZW50X2Ftb3VudCkgYXMgdG90YWxfcmVudCxcbiAgICAgICAgICBTVU0oZWxlY3RyaWNfYW1vdW50KSBhcyB0b3RhbF9lbGVjdHJpYyxcbiAgICAgICAgICBTVU0od2F0ZXJfYW1vdW50KSBhcyB0b3RhbF93YXRlclxuICAgICAgICBGUk9NIGJpbGxzXG4gICAgICBgKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIHJvd3NbMF07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgYmlsbGluZyBzdGF0czonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvLyBBVVRPTUFUSUMgQklMTElORyBNRVRIT0RTIC0gRElTQUJMRURcbiAgLy8gTm90ZTogQXV0b21hdGljIGJpbGxpbmcgaGFzIGJlZW4gZGlzYWJsZWQuIEJpbGxzIG11c3QgYmUgY3JlYXRlZCBtYW51YWxseS5cbiAgXG4gIC8qXG4gIC8vIEdldCBiaWxscyB0aGF0IG5lZWQgbmV4dCBjeWNsZSBnZW5lcmF0aW9uIChjdXJyZW50IHBlcmlvZCBlbmRlZClcbiAgc3RhdGljIGFzeW5jIGdldEJpbGxzTmVlZGluZ05leHRDeWNsZSgpIHtcbiAgICAvLyBESVNBQkxFRCAtIEF1dG9tYXRpYyBiaWxsaW5nIGN5Y2xlcyByZW1vdmVkXG4gICAgcmV0dXJuIFtdO1xuICB9XG5cbiAgLy8gR2VuZXJhdGUgbmV4dCBiaWxsaW5nIGN5Y2xlXG4gIHN0YXRpYyBhc3luYyBnZW5lcmF0ZU5leHRDeWNsZSh0ZW5hbnRJZCwgcm9vbUlkLCBsYXN0QmlsbEVuZERhdGUsIHByZXZpb3VzRWxlY3RyaWNSZWFkaW5nLCBtb250aGx5UmVudCkge1xuICAgIC8vIERJU0FCTEVEIC0gQXV0b21hdGljIGJpbGxpbmcgY3ljbGVzIHJlbW92ZWRcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0F1dG9tYXRpYyBiaWxsaW5nIGN5Y2xlcyBoYXZlIGJlZW4gZGlzYWJsZWQuIFBsZWFzZSBjcmVhdGUgYmlsbHMgbWFudWFsbHkuJyk7XG4gIH1cblxuICAvLyBQcm9jZXNzIGFsbCBhdXRvbWF0aWMgYmlsbGluZyBjeWNsZXNcbiAgc3RhdGljIGFzeW5jIHByb2Nlc3NBdXRvbWF0aWNDeWNsZXMoKSB7XG4gICAgLy8gRElTQUJMRUQgLSBBdXRvbWF0aWMgYmlsbGluZyBjeWNsZXMgcmVtb3ZlZFxuICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuICAqL1xuXG4gIC8vIEdldCBiaWxscyBuZWVkaW5nIGVsZWN0cmljaXR5IHJlYWRpbmcgdXBkYXRlICgzIGRheXMgYmVmb3JlIGN5Y2xlIGVuZHMpXG4gIHN0YXRpYyBhc3luYyBnZXRCaWxsc05lZWRpbmdFbGVjdHJpY1VwZGF0ZSgpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgW3Jvd3NdID0gYXdhaXQgcG9vbC5leGVjdXRlKGBcbiAgICAgICAgU0VMRUNUIFxuICAgICAgICAgIGIuKixcbiAgICAgICAgICB0Lm5hbWUgYXMgdGVuYW50X25hbWUsXG4gICAgICAgICAgdC5lbWFpbCBhcyB0ZW5hbnRfZW1haWwsXG4gICAgICAgICAgci5yb29tX251bWJlcixcbiAgICAgICAgICByLm1vbnRobHlfcmVudCxcbiAgICAgICAgICBici5uYW1lIGFzIGJyYW5jaF9uYW1lLFxuICAgICAgICAgIGJyLmFkZHJlc3MgYXMgYnJhbmNoX2FkZHJlc3NcbiAgICAgICAgRlJPTSBiaWxscyBiXG4gICAgICAgIElOTkVSIEpPSU4gdGVuYW50cyB0IE9OIGIudGVuYW50X2lkID0gdC5pZFxuICAgICAgICBJTk5FUiBKT0lOIHJvb21zIHIgT04gYi5yb29tX2lkID0gci5pZFxuICAgICAgICBJTk5FUiBKT0lOIGJyYW5jaGVzIGJyIE9OIHIuYnJhbmNoX2lkID0gYnIuaWRcbiAgICAgICAgV0hFUkUgYi5zdGF0dXMgPSAndW5wYWlkJ1xuICAgICAgICBBTkQgYi5lbGVjdHJpY19jb25zdW1wdGlvbiA9IDBcbiAgICAgICAgQU5EIERBVEVESUZGKGIucmVudF90bywgQ1VSREFURSgpKSA8PSAzXG4gICAgICAgIEFORCBEQVRFRElGRihiLnJlbnRfdG8sIENVUkRBVEUoKSkgPj0gMFxuICAgICAgICBPUkRFUiBCWSBiLnJlbnRfdG8gQVNDXG4gICAgICBgKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIHJvd3M7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZpbmRpbmcgYmlsbHMgbmVlZGluZyBlbGVjdHJpYyB1cGRhdGU6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLy8gVXBkYXRlIGVsZWN0cmljaXR5IHJlYWRpbmcgYW5kIGF1dG8tY2FsY3VsYXRlIGFtb3VudHNcbiAgc3RhdGljIGFzeW5jIHVwZGF0ZUVsZWN0cmljUmVhZGluZyhiaWxsSWQsIHByZXNlbnRSZWFkaW5nLCByZWFkaW5nRGF0ZSkge1xuICAgIHRyeSB7XG4gICAgICAvLyBHZXQgY3VycmVudCBiaWxsXG4gICAgICBjb25zdCBiaWxsID0gYXdhaXQgdGhpcy5maW5kQnlJZChiaWxsSWQpO1xuICAgICAgaWYgKCFiaWxsKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQmlsbCBub3QgZm91bmQnKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcHJldmlvdXNSZWFkaW5nID0gcGFyc2VGbG9hdChiaWxsLmVsZWN0cmljX3ByZXZpb3VzX3JlYWRpbmcpIHx8IDA7XG4gICAgICBjb25zdCBjdXJyZW50UmVhZGluZyA9IHBhcnNlRmxvYXQocHJlc2VudFJlYWRpbmcpIHx8IDA7XG4gICAgICBcbiAgICAgIC8vIENhbGN1bGF0ZSBjb25zdW1wdGlvblxuICAgICAgY29uc3QgY29uc3VtcHRpb24gPSBNYXRoLm1heCgwLCBjdXJyZW50UmVhZGluZyAtIHByZXZpb3VzUmVhZGluZyk7XG4gICAgICBcbiAgICAgIC8vIEdldCBjdXJyZW50IGVsZWN0cmljIHJhdGVcbiAgICAgIGNvbnN0IFNldHRpbmcgPSByZXF1aXJlKCcuL3NldHRpbmcnKTtcbiAgICAgIGNvbnN0IHJhdGVzID0gYXdhaXQgU2V0dGluZy5nZXRCaWxsaW5nUmF0ZXMoKTtcbiAgICAgIGNvbnN0IGVsZWN0cmljQW1vdW50ID0gY29uc3VtcHRpb24gKiByYXRlcy5lbGVjdHJpY19yYXRlX3Blcl9rd2g7XG4gICAgICBcbiAgICAgIC8vIENhbGN1bGF0ZSBuZXcgdG90YWxcbiAgICAgIGNvbnN0IG5ld1RvdGFsID0gcGFyc2VGbG9hdChiaWxsLnJlbnRfYW1vdW50KSArIGVsZWN0cmljQW1vdW50ICsgcGFyc2VGbG9hdChiaWxsLndhdGVyX2Ftb3VudCk7XG5cbiAgICAgIC8vIFVwZGF0ZSBiaWxsXG4gICAgICBjb25zdCBbcmVzdWx0XSA9IGF3YWl0IHBvb2wuZXhlY3V0ZShgXG4gICAgICAgIFVQREFURSBiaWxscyBTRVQgXG4gICAgICAgICAgZWxlY3RyaWNfcHJlc2VudF9yZWFkaW5nID0gPyxcbiAgICAgICAgICBlbGVjdHJpY19jb25zdW1wdGlvbiA9ID8sXG4gICAgICAgICAgZWxlY3RyaWNfYW1vdW50ID0gPyxcbiAgICAgICAgICBlbGVjdHJpY19yZWFkaW5nX2RhdGUgPSA/LFxuICAgICAgICAgIHRvdGFsX2Ftb3VudCA9ID8sXG4gICAgICAgICAgbm90ZXMgPSBDT05DQVQoQ09BTEVTQ0Uobm90ZXMsICcnKSwgJyB8IEVsZWN0cmljIHJlYWRpbmcgdXBkYXRlZDogJywgPywgJyBrV2ggb24gJywgPylcbiAgICAgICAgV0hFUkUgaWQgPSA/XG4gICAgICBgLCBbXG4gICAgICAgIGN1cnJlbnRSZWFkaW5nLFxuICAgICAgICBjb25zdW1wdGlvbixcbiAgICAgICAgZWxlY3RyaWNBbW91bnQsXG4gICAgICAgIHJlYWRpbmdEYXRlLFxuICAgICAgICBuZXdUb3RhbCxcbiAgICAgICAgY3VycmVudFJlYWRpbmcsXG4gICAgICAgIHJlYWRpbmdEYXRlLFxuICAgICAgICBiaWxsSWRcbiAgICAgIF0pO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBwcmV2aW91c1JlYWRpbmcsXG4gICAgICAgIGN1cnJlbnRSZWFkaW5nLFxuICAgICAgICBjb25zdW1wdGlvbixcbiAgICAgICAgZWxlY3RyaWNBbW91bnQsXG4gICAgICAgIG5ld1RvdGFsLFxuICAgICAgICBtZXNzYWdlOiBgRWxlY3RyaWMgcmVhZGluZyB1cGRhdGVkOiAke2NvbnN1bXB0aW9ufSBrV2ggY29uc3VtZWQsIOKCsSR7ZWxlY3RyaWNBbW91bnQudG9GaXhlZCgyKX0gY2hhcmdlZGBcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIGVsZWN0cmljIHJlYWRpbmc6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLy8gTWFyayBiaWxsIGFzIHJlYWR5IHRvIHNlbmQgKGZpbmFsaXplZClcbiAgc3RhdGljIGFzeW5jIG1hcmtBc1JlYWR5VG9TZW5kKGJpbGxJZCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBbcmVzdWx0XSA9IGF3YWl0IHBvb2wuZXhlY3V0ZShgXG4gICAgICAgIFVQREFURSBiaWxscyBTRVQgXG4gICAgICAgICAgbm90ZXMgPSBDT05DQVQoQ09BTEVTQ0Uobm90ZXMsICcnKSwgJyB8IEJpbGwgZmluYWxpemVkIGFuZCByZWFkeSB0byBzZW5kJyksXG4gICAgICAgICAgdXBkYXRlZF9hdCA9IENVUlJFTlRfVElNRVNUQU1QXG4gICAgICAgIFdIRVJFIGlkID0gP1xuICAgICAgYCwgW2JpbGxJZF0pO1xuXG4gICAgICByZXR1cm4gcmVzdWx0LmFmZmVjdGVkUm93cyA+IDA7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIG1hcmtpbmcgYmlsbCBhcyByZWFkeSB0byBzZW5kOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8vIEdldCBiaWxscyBuZWVkaW5nIGJpbGxpbmcgcmVtaW5kZXJzICgzIGRheXMgYmVmb3JlIGR1ZSBkYXRlIGFuZCBvdmVyZHVlKVxuICBzdGF0aWMgYXN5bmMgZ2V0QmlsbHNOZWVkaW5nUmVtaW5kZXJzKCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBbcm93c10gPSBhd2FpdCBwb29sLmV4ZWN1dGUoYFxuICAgICAgICBTRUxFQ1QgXG4gICAgICAgICAgYi4qLFxuICAgICAgICAgIHQubmFtZSBhcyB0ZW5hbnRfbmFtZSxcbiAgICAgICAgICB0LmVtYWlsIGFzIHRlbmFudF9lbWFpbCxcbiAgICAgICAgICByLnJvb21fbnVtYmVyLFxuICAgICAgICAgIHIubW9udGhseV9yZW50LFxuICAgICAgICAgIGJyLm5hbWUgYXMgYnJhbmNoX25hbWUsXG4gICAgICAgICAgYnIuYWRkcmVzcyBhcyBicmFuY2hfYWRkcmVzcyxcbiAgICAgICAgICBDT0FMRVNDRShTVU0ocC5hbW91bnQpLCAwKSBhcyB0b3RhbF9wYWlkLFxuICAgICAgICAgIChiLnRvdGFsX2Ftb3VudCAtIENPQUxFU0NFKFNVTShwLmFtb3VudCksIDApKSBhcyByZW1haW5pbmdfYmFsYW5jZSxcbiAgICAgICAgICBEQVRFRElGRihiLnJlbnRfdG8sIENVUkRBVEUoKSkgYXMgZGF5c191bnRpbF9kdWVcbiAgICAgICAgRlJPTSBiaWxscyBiXG4gICAgICAgIElOTkVSIEpPSU4gdGVuYW50cyB0IE9OIGIudGVuYW50X2lkID0gdC5pZFxuICAgICAgICBJTk5FUiBKT0lOIHJvb21zIHIgT04gYi5yb29tX2lkID0gci5pZFxuICAgICAgICBJTk5FUiBKT0lOIGJyYW5jaGVzIGJyIE9OIHIuYnJhbmNoX2lkID0gYnIuaWRcbiAgICAgICAgTEVGVCBKT0lOIHBheW1lbnRzIHAgT04gYi5pZCA9IHAuYmlsbF9pZFxuICAgICAgICBXSEVSRSBiLnN0YXR1cyBJTiAoJ3VucGFpZCcsICdwYXJ0aWFsJylcbiAgICAgICAgQU5EIERBVEVESUZGKGIucmVudF90bywgQ1VSREFURSgpKSA8PSAzXG4gICAgICAgIEdST1VQIEJZIGIuaWRcbiAgICAgICAgT1JERVIgQlkgYi5yZW50X3RvIEFTQywgYnIubmFtZSwgci5yb29tX251bWJlclxuICAgICAgYCk7XG4gICAgICBcbiAgICAgIHJldHVybiByb3dzO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmaW5kaW5nIGJpbGxzIG5lZWRpbmcgcmVtaW5kZXJzOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEJpbGw7ICJdLCJuYW1lcyI6WyJwb29sIiwicmVxdWlyZSIsIlNldHRpbmciLCJCaWxsIiwiZmluZEFsbCIsInJvd3MiLCJleGVjdXRlIiwiZXJyb3IiLCJjb25zb2xlIiwiZmluZFVucGFpZCIsImZpbmRBY3RpdmUiLCJmaW5kUGFpZCIsImZpbmRCeVRlbmFudElkIiwidGVuYW50SWQiLCJmaW5kQnlJZCIsImlkIiwiYmlsbHMiLCJsZW5ndGgiLCJiaWxsIiwicGF5bWVudHMiLCJwYWlkX2Ftb3VudCIsInJlZHVjZSIsInN1bSIsInBheW1lbnQiLCJOdW1iZXIiLCJhbW91bnQiLCJjcmVhdGUiLCJiaWxsRGF0YSIsInRlbmFudF9pZCIsInJvb21faWQiLCJiaWxsX2RhdGUiLCJyZW50X2Zyb20iLCJyZW50X3RvIiwicmVudF9hbW91bnQiLCJlbGVjdHJpY19wcmVzZW50X3JlYWRpbmciLCJlbGVjdHJpY19wcmV2aW91c19yZWFkaW5nIiwiZWxlY3RyaWNfY29uc3VtcHRpb24iLCJlbGVjdHJpY19hbW91bnQiLCJlbGVjdHJpY19yZWFkaW5nX2RhdGUiLCJlbGVjdHJpY19wcmV2aW91c19kYXRlIiwid2F0ZXJfYW1vdW50IiwiZXh0cmFfZmVlX2Ftb3VudCIsImV4dHJhX2ZlZV9kZXNjcmlwdGlvbiIsInRvdGFsX2Ftb3VudCIsInN0YXR1cyIsIm5vdGVzIiwicHJlcGFyZWRfYnkiLCJyYXRlcyIsImdldEJpbGxpbmdSYXRlcyIsImZpbmFsRWxlY3RyaWNSYXRlIiwiZWxlY3RyaWNfcmF0ZV9wZXJfa3doIiwiZmluYWxXYXRlckFtb3VudCIsIndhdGVyX2ZpeGVkX2Ftb3VudCIsInNxbFBhcmFtcyIsInJlc3VsdCIsImluc2VydElkIiwidXBkYXRlIiwiZGVsZXRlIiwidXBkYXRlU3RhdHVzIiwiY2FsY3VsYXRlVXRpbGl0eUFtb3VudHMiLCJwcmVzZW50UmVhZGluZyIsInByZXZpb3VzUmVhZGluZyIsImNvbnN1bXB0aW9uIiwiTWF0aCIsIm1heCIsImVsZWN0cmljQW1vdW50Iiwid2F0ZXJBbW91bnQiLCJlbGVjdHJpY1JhdGUiLCJnZXRTdGF0cyIsImdldEJpbGxzTmVlZGluZ0VsZWN0cmljVXBkYXRlIiwidXBkYXRlRWxlY3RyaWNSZWFkaW5nIiwiYmlsbElkIiwicmVhZGluZ0RhdGUiLCJFcnJvciIsInBhcnNlRmxvYXQiLCJjdXJyZW50UmVhZGluZyIsIm5ld1RvdGFsIiwic3VjY2VzcyIsIm1lc3NhZ2UiLCJ0b0ZpeGVkIiwibWFya0FzUmVhZHlUb1NlbmQiLCJhZmZlY3RlZFJvd3MiLCJnZXRCaWxsc05lZWRpbmdSZW1pbmRlcnMiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./models/bill.js\n");

/***/ }),

/***/ "(rsc)/./models/setting.js":
/*!***************************!*\
  !*** ./models/setting.js ***!
  \***************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nconst { pool } = __webpack_require__(/*! ../config/database */ \"(rsc)/./config/database.js\");\nclass Setting {\n    // Get all settings\n    static async findAll() {\n        try {\n            const [rows] = await pool.execute(\"SELECT * FROM settings ORDER BY setting_key\");\n            return rows;\n        } catch (error) {\n            console.error(\"Error finding all settings:\", error);\n            throw error;\n        }\n    }\n    // Get setting by key\n    static async findByKey(key) {\n        try {\n            const [rows] = await pool.execute(\"SELECT * FROM settings WHERE setting_key = ?\", [\n                key\n            ]);\n            return rows[0] || null;\n        } catch (error) {\n            console.error(\"Error finding setting by key:\", error);\n            throw error;\n        }\n    }\n    // Get setting value by key\n    static async getValue(key) {\n        try {\n            const setting = await this.findByKey(key);\n            return setting ? parseFloat(setting.setting_value) : null;\n        } catch (error) {\n            console.error(\"Error getting setting value:\", error);\n            throw error;\n        }\n    }\n    // Update setting value (create if doesn't exist)\n    static async updateValue(key, value, description = null) {\n        try {\n            // Use INSERT ... ON DUPLICATE KEY UPDATE for upsert functionality\n            const [result] = await pool.execute(`\r\n        INSERT INTO settings (setting_key, setting_value, description) \r\n        VALUES (?, ?, ?)\r\n        ON DUPLICATE KEY UPDATE \r\n        setting_value = VALUES(setting_value),\r\n        description = COALESCE(VALUES(description), description)\r\n      `, [\n                key,\n                value,\n                description\n            ]);\n            return true; // Always return true since upsert always succeeds\n        } catch (error) {\n            console.error(\"Error updating setting:\", error);\n            throw error;\n        }\n    }\n    // Create new setting\n    static async create(key, value, description = null) {\n        try {\n            const [result] = await pool.execute(\"INSERT INTO settings (setting_key, setting_value, description) VALUES (?, ?, ?)\", [\n                key,\n                value,\n                description\n            ]);\n            return {\n                id: result.insertId,\n                setting_key: key,\n                setting_value: value,\n                description\n            };\n        } catch (error) {\n            console.error(\"Error creating setting:\", error);\n            throw error;\n        }\n    }\n    // Get current rates for billing\n    static async getBillingRates() {\n        try {\n            const electricRate = await this.getValue(\"electric_rate_per_kwh\") || 12.00;\n            const waterAmount = await this.getValue(\"water_fixed_amount\") || 200.00;\n            const roomRate = await this.getValue(\"default_room_rate\") || 3500.00;\n            return {\n                electric_rate_per_kwh: electricRate,\n                water_fixed_amount: waterAmount,\n                default_room_rate: roomRate\n            };\n        } catch (error) {\n            console.error(\"Error getting billing rates:\", error);\n            throw error;\n        }\n    }\n    // Update multiple billing rates at once\n    static async updateBillingRates(rates) {\n        try {\n            const updates = [];\n            if (rates.electric_rate_per_kwh !== undefined) {\n                updates.push(this.updateValue(\"electric_rate_per_kwh\", rates.electric_rate_per_kwh));\n            }\n            if (rates.water_fixed_amount !== undefined) {\n                updates.push(this.updateValue(\"water_fixed_amount\", rates.water_fixed_amount));\n            }\n            if (rates.default_room_rate !== undefined) {\n                updates.push(this.updateValue(\"default_room_rate\", rates.default_room_rate));\n            }\n            await Promise.all(updates);\n            return true;\n        } catch (error) {\n            console.error(\"Error updating billing rates:\", error);\n            throw error;\n        }\n    }\n}\nmodule.exports = Setting;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FBQyx5QkFBeUJnQixNQUFNSixxQkFBcUI7WUFDcEY7WUFFQSxJQUFJSSxNQUFNSCxrQkFBa0IsS0FBS0ssV0FBVztnQkFDMUNELFFBQVFFLElBQUksQ0FBQyxJQUFJLENBQUNuQixXQUFXLENBQUMsc0JBQXNCZ0IsTUFBTUgsa0JBQWtCO1lBQzlFO1lBRUEsSUFBSUcsTUFBTUYsaUJBQWlCLEtBQUtJLFdBQVc7Z0JBQ3pDRCxRQUFRRSxJQUFJLENBQUMsSUFBSSxDQUFDbkIsV0FBVyxDQUFDLHFCQUFxQmdCLE1BQU1GLGlCQUFpQjtZQUM1RTtZQUVBLE1BQU1NLFFBQVFDLEdBQUcsQ0FBQ0o7WUFDbEIsT0FBTztRQUNULEVBQUUsT0FBT3pCLE9BQU87WUFDZEMsUUFBUUQsS0FBSyxDQUFDLGlDQUFpQ0E7WUFDL0MsTUFBTUE7UUFDUjtJQUNGO0FBQ0Y7QUFFQThCLE9BQU9DLE9BQU8sR0FBR25DIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vai1oLWFwYXJ0bWVudC1uZXh0anMvLi9tb2RlbHMvc2V0dGluZy5qcz9mNDBkIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgcG9vbCB9ID0gcmVxdWlyZSgnLi4vY29uZmlnL2RhdGFiYXNlJyk7XHJcblxyXG5jbGFzcyBTZXR0aW5nIHtcclxuICAvLyBHZXQgYWxsIHNldHRpbmdzXHJcbiAgc3RhdGljIGFzeW5jIGZpbmRBbGwoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBbcm93c10gPSBhd2FpdCBwb29sLmV4ZWN1dGUoXHJcbiAgICAgICAgJ1NFTEVDVCAqIEZST00gc2V0dGluZ3MgT1JERVIgQlkgc2V0dGluZ19rZXknXHJcbiAgICAgICk7XHJcbiAgICAgIHJldHVybiByb3dzO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmluZGluZyBhbGwgc2V0dGluZ3M6JywgZXJyb3IpO1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIEdldCBzZXR0aW5nIGJ5IGtleVxyXG4gIHN0YXRpYyBhc3luYyBmaW5kQnlLZXkoa2V5KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBbcm93c10gPSBhd2FpdCBwb29sLmV4ZWN1dGUoXHJcbiAgICAgICAgJ1NFTEVDVCAqIEZST00gc2V0dGluZ3MgV0hFUkUgc2V0dGluZ19rZXkgPSA/JyxcclxuICAgICAgICBba2V5XVxyXG4gICAgICApO1xyXG4gICAgICByZXR1cm4gcm93c1swXSB8fCBudWxsO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmluZGluZyBzZXR0aW5nIGJ5IGtleTonLCBlcnJvcik7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gR2V0IHNldHRpbmcgdmFsdWUgYnkga2V5XHJcbiAgc3RhdGljIGFzeW5jIGdldFZhbHVlKGtleSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3Qgc2V0dGluZyA9IGF3YWl0IHRoaXMuZmluZEJ5S2V5KGtleSk7XHJcbiAgICAgIHJldHVybiBzZXR0aW5nID8gcGFyc2VGbG9hdChzZXR0aW5nLnNldHRpbmdfdmFsdWUpIDogbnVsbDtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgc2V0dGluZyB2YWx1ZTonLCBlcnJvcik7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gVXBkYXRlIHNldHRpbmcgdmFsdWUgKGNyZWF0ZSBpZiBkb2Vzbid0IGV4aXN0KVxyXG4gIHN0YXRpYyBhc3luYyB1cGRhdGVWYWx1ZShrZXksIHZhbHVlLCBkZXNjcmlwdGlvbiA9IG51bGwpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIFVzZSBJTlNFUlQgLi4uIE9OIERVUExJQ0FURSBLRVkgVVBEQVRFIGZvciB1cHNlcnQgZnVuY3Rpb25hbGl0eVxyXG4gICAgICBjb25zdCBbcmVzdWx0XSA9IGF3YWl0IHBvb2wuZXhlY3V0ZShgXHJcbiAgICAgICAgSU5TRVJUIElOVE8gc2V0dGluZ3MgKHNldHRpbmdfa2V5LCBzZXR0aW5nX3ZhbHVlLCBkZXNjcmlwdGlvbikgXHJcbiAgICAgICAgVkFMVUVTICg/LCA/LCA/KVxyXG4gICAgICAgIE9OIERVUExJQ0FURSBLRVkgVVBEQVRFIFxyXG4gICAgICAgIHNldHRpbmdfdmFsdWUgPSBWQUxVRVMoc2V0dGluZ192YWx1ZSksXHJcbiAgICAgICAgZGVzY3JpcHRpb24gPSBDT0FMRVNDRShWQUxVRVMoZGVzY3JpcHRpb24pLCBkZXNjcmlwdGlvbilcclxuICAgICAgYCwgW2tleSwgdmFsdWUsIGRlc2NyaXB0aW9uXSk7XHJcbiAgICAgIFxyXG4gICAgICByZXR1cm4gdHJ1ZTsgLy8gQWx3YXlzIHJldHVybiB0cnVlIHNpbmNlIHVwc2VydCBhbHdheXMgc3VjY2VlZHNcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIHNldHRpbmc6JywgZXJyb3IpO1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIENyZWF0ZSBuZXcgc2V0dGluZ1xyXG4gIHN0YXRpYyBhc3luYyBjcmVhdGUoa2V5LCB2YWx1ZSwgZGVzY3JpcHRpb24gPSBudWxsKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBbcmVzdWx0XSA9IGF3YWl0IHBvb2wuZXhlY3V0ZShcclxuICAgICAgICAnSU5TRVJUIElOVE8gc2V0dGluZ3MgKHNldHRpbmdfa2V5LCBzZXR0aW5nX3ZhbHVlLCBkZXNjcmlwdGlvbikgVkFMVUVTICg/LCA/LCA/KScsXHJcbiAgICAgICAgW2tleSwgdmFsdWUsIGRlc2NyaXB0aW9uXVxyXG4gICAgICApO1xyXG4gICAgICBcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBpZDogcmVzdWx0Lmluc2VydElkLFxyXG4gICAgICAgIHNldHRpbmdfa2V5OiBrZXksXHJcbiAgICAgICAgc2V0dGluZ192YWx1ZTogdmFsdWUsXHJcbiAgICAgICAgZGVzY3JpcHRpb25cclxuICAgICAgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIHNldHRpbmc6JywgZXJyb3IpO1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIEdldCBjdXJyZW50IHJhdGVzIGZvciBiaWxsaW5nXHJcbiAgc3RhdGljIGFzeW5jIGdldEJpbGxpbmdSYXRlcygpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGVsZWN0cmljUmF0ZSA9IGF3YWl0IHRoaXMuZ2V0VmFsdWUoJ2VsZWN0cmljX3JhdGVfcGVyX2t3aCcpIHx8IDEyLjAwO1xyXG4gICAgICBjb25zdCB3YXRlckFtb3VudCA9IGF3YWl0IHRoaXMuZ2V0VmFsdWUoJ3dhdGVyX2ZpeGVkX2Ftb3VudCcpIHx8IDIwMC4wMDtcclxuICAgICAgY29uc3Qgcm9vbVJhdGUgPSBhd2FpdCB0aGlzLmdldFZhbHVlKCdkZWZhdWx0X3Jvb21fcmF0ZScpIHx8IDM1MDAuMDA7XHJcbiAgICAgIFxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIGVsZWN0cmljX3JhdGVfcGVyX2t3aDogZWxlY3RyaWNSYXRlLFxyXG4gICAgICAgIHdhdGVyX2ZpeGVkX2Ftb3VudDogd2F0ZXJBbW91bnQsXHJcbiAgICAgICAgZGVmYXVsdF9yb29tX3JhdGU6IHJvb21SYXRlXHJcbiAgICAgIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIGJpbGxpbmcgcmF0ZXM6JywgZXJyb3IpO1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIFVwZGF0ZSBtdWx0aXBsZSBiaWxsaW5nIHJhdGVzIGF0IG9uY2VcclxuICBzdGF0aWMgYXN5bmMgdXBkYXRlQmlsbGluZ1JhdGVzKHJhdGVzKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCB1cGRhdGVzID0gW107XHJcbiAgICAgIFxyXG4gICAgICBpZiAocmF0ZXMuZWxlY3RyaWNfcmF0ZV9wZXJfa3doICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICB1cGRhdGVzLnB1c2godGhpcy51cGRhdGVWYWx1ZSgnZWxlY3RyaWNfcmF0ZV9wZXJfa3doJywgcmF0ZXMuZWxlY3RyaWNfcmF0ZV9wZXJfa3doKSk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGlmIChyYXRlcy53YXRlcl9maXhlZF9hbW91bnQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHVwZGF0ZXMucHVzaCh0aGlzLnVwZGF0ZVZhbHVlKCd3YXRlcl9maXhlZF9hbW91bnQnLCByYXRlcy53YXRlcl9maXhlZF9hbW91bnQpKTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgaWYgKHJhdGVzLmRlZmF1bHRfcm9vbV9yYXRlICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICB1cGRhdGVzLnB1c2godGhpcy51cGRhdGVWYWx1ZSgnZGVmYXVsdF9yb29tX3JhdGUnLCByYXRlcy5kZWZhdWx0X3Jvb21fcmF0ZSkpO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBhd2FpdCBQcm9taXNlLmFsbCh1cGRhdGVzKTtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBiaWxsaW5nIHJhdGVzOicsIGVycm9yKTtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFNldHRpbmc7ICJdLCJuYW1lcyI6WyJwb29sIiwicmVxdWlyZSIsIlNldHRpbmciLCJmaW5kQWxsIiwicm93cyIsImV4ZWN1dGUiLCJlcnJvciIsImNvbnNvbGUiLCJmaW5kQnlLZXkiLCJrZXkiLCJnZXRWYWx1ZSIsInNldHRpbmciLCJwYXJzZUZsb2F0Iiwic2V0dGluZ192YWx1ZSIsInVwZGF0ZVZhbHVlIiwidmFsdWUiLCJkZXNjcmlwdGlvbiIsInJlc3VsdCIsImNyZWF0ZSIsImlkIiwiaW5zZXJ0SWQiLCJzZXR0aW5nX2tleSIsImdldEJpbGxpbmdSYXRlcyIsImVsZWN0cmljUmF0ZSIsIndhdGVyQW1vdW50Iiwicm9vbVJhdGUiLCJlbGVjdHJpY19yYXRlX3Blcl9rd2giLCJ3YXRlcl9maXhlZF9hbW91bnQiLCJkZWZhdWx0X3Jvb21fcmF0ZSIsInVwZGF0ZUJpbGxpbmdSYXRlcyIsInJhdGVzIiwidXBkYXRlcyIsInVuZGVmaW5lZCIsInB1c2giLCJQcm9taXNlIiwiYWxsIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./models/setting.js\n");

/***/ }),

/***/ "(rsc)/./services/emailService.js":
/*!**********************************!*\
  !*** ./services/emailService.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var nodemailer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! nodemailer */ \"nodemailer\");\n/* harmony import */ var nodemailer__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(nodemailer__WEBPACK_IMPORTED_MODULE_0__);\n\n// Create email transporter\nconst createTransporter = ()=>{\n    return nodemailer__WEBPACK_IMPORTED_MODULE_0___default().createTransport({\n        service: \"gmail\",\n        auth: {\n            user: \"official.jhapartment@gmail.com\" || 0,\n            pass: \"gcme okaj qiyf ubki\" || 0 // Replace with your Gmail App Password\n        }\n    });\n};\n// Format currency for display\nconst formatCurrency = (amount)=>{\n    return new Intl.NumberFormat(\"en-PH\", {\n        style: \"currency\",\n        currency: \"PHP\"\n    }).format(amount);\n};\n// Format date for display\nconst formatDate = (date)=>{\n    if (!date) return \"N/A\";\n    try {\n        const dateObj = new Date(date);\n        if (isNaN(dateObj.getTime())) return \"N/A\";\n        return new Intl.DateTimeFormat(\"en-PH\", {\n            year: \"numeric\",\n            month: \"long\",\n            day: \"numeric\"\n        }).format(dateObj);\n    } catch (error) {\n        return \"N/A\";\n    }\n};\n// Generate HTML bill template\nconst generateBillHTML = (bill)=>{\n    const electricReading = bill.electric_present_reading && bill.electric_previous_reading ? `${bill.electric_previous_reading} â†’ ${bill.electric_present_reading}` : \"N/A\";\n    const electricConsumption = bill.electric_consumption || 0;\n    return `\n    <!DOCTYPE html>\n    <html>\n    <head>\n      <meta charset=\"utf-8\">\n      <style>\n        body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background-color: #f4f4f4; }\n        .bill-container { max-width: 600px; margin: 0 auto; background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }\n        .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; text-align: center; }\n        .header h1 { margin: 0; font-size: 28px; }\n        .header p { margin: 5px 0 0 0; opacity: 0.9; }\n        .content { padding: 30px; }\n        .bill-info { background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 25px; }\n        .bill-info h3 { margin: 0 0 15px 0; color: #333; }\n        .info-row { display: flex; justify-content: space-between; margin-bottom: 10px; }\n        .info-label { font-weight: bold; color: #666; }\n        .info-value { color: #333; }\n        .charges-section { margin-bottom: 25px; }\n        .charges-section h3 { border-bottom: 2px solid #667eea; padding-bottom: 10px; margin-bottom: 20px; color: #333; }\n        .charge-item { display: flex; justify-content: space-between; padding: 15px; margin-bottom: 10px; border-radius: 6px; }\n        .charge-rent { background: #e3f2fd; border-left: 4px solid #2196f3; }\n        .charge-electric { background: #fff3e0; border-left: 4px solid #ff9800; }\n        .charge-water { background: #e8f5e8; border-left: 4px solid #4caf50; }\n        .total-section { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 8px; text-align: center; }\n        .total-amount { font-size: 32px; font-weight: bold; margin: 10px 0; }\n        .footer { padding: 20px; text-align: center; color: #666; border-top: 1px solid #eee; }\n        .payment-note { background: #f0f8ff; border: 1px solid #b3d9ff; padding: 15px; border-radius: 6px; margin: 20px 0; }\n      </style>\n    </head>\n    <body>\n      <div class=\"bill-container\">\n        <!-- Header -->\n        <div class=\"header\">\n          <h1>${bill.branch_name || \"JH APARTMENT\"}</h1>\n          <p>${bill.branch_address || \"Patin-ay, Prosperidad, Agusan del Sur\"}</p>\n        </div>\n\n        <!-- Content -->\n        <div class=\"content\">\n          <!-- Bill Information -->\n          <div class=\"bill-info\">\n            <h3>Bill Information</h3>\n            <div class=\"info-row\">\n              <span class=\"info-label\">Tenant Name:</span>\n              <span class=\"info-value\">${bill.tenant_name}</span>\n            </div>\n            <div class=\"info-row\">\n              <span class=\"info-label\">Room Number:</span>\n              <span class=\"info-value\">${bill.room_number}</span>\n            </div>\n            <div class=\"info-row\">\n              <span class=\"info-label\">Bill Period:</span>\n              <span class=\"info-value\">${formatDate(bill.rent_from)} - ${formatDate(bill.rent_to)}</span>\n            </div>\n            <div class=\"info-row\">\n              <span class=\"info-label\">Bill Date:</span>\n              <span class=\"info-value\">${formatDate(bill.bill_date)}</span>\n            </div>\n            <div class=\"info-row\">\n              <span class=\"info-label\">Due Date:</span>\n              <span class=\"info-value\">${formatDate(bill.rent_to)}</span>\n            </div>\n          </div>\n\n          <!-- Charges Breakdown -->\n          <div class=\"charges-section\">\n            <h3>Charges Breakdown</h3>\n            \n            <!-- Rent -->\n            <div class=\"charge-item charge-rent\">\n              <div>\n                <strong>Monthly Rent</strong>\n                <br><small>Period: ${formatDate(bill.rent_from)} - ${formatDate(bill.rent_to)}</small>\n              </div>\n              <div style=\"text-align: right;\">\n                <strong>${formatCurrency(bill.rent_amount)}</strong>\n              </div>\n            </div>\n\n            <!-- Electric -->\n            <div class=\"charge-item charge-electric\">\n              <div>\n                <strong>Electricity</strong>\n                <br><small>Reading: ${electricReading} (${electricConsumption} kWh)</small>\n                <br><small>Rate: â‚±${bill.electric_rate_per_kwh}/kWh</small>\n              </div>\n              <div style=\"text-align: right;\">\n                <strong>${formatCurrency(bill.electric_amount || 0)}</strong>\n              </div>\n            </div>\n\n            <!-- Water -->\n            <div class=\"charge-item charge-water\">\n              <div>\n                <strong>Water</strong>\n                <br><small>Fixed monthly charge</small>\n              </div>\n              <div style=\"text-align: right;\">\n                <strong>${formatCurrency(bill.water_amount)}</strong>\n              </div>\n            </div>\n\n            ${bill.extra_fee_amount > 0 ? `\n            <!-- Extra Fees -->\n            <div class=\"charge-item\" style=\"background: #f3e5f5; border-left: 4px solid #9c27b0;\">\n              <div>\n                <strong>Extra Fees</strong>\n                <br><small>${bill.extra_fee_description || \"Additional charges\"}</small>\n              </div>\n              <div style=\"text-align: right;\">\n                <strong>${formatCurrency(bill.extra_fee_amount)}</strong>\n              </div>\n            </div>\n            ` : \"\"}\n          </div>\n\n          <!-- Total -->\n          <div class=\"total-section\">\n            <div>Total Amount Due</div>\n            <div class=\"total-amount\">${formatCurrency(bill.total_amount)}</div>\n            <div>Status: ${bill.status.toUpperCase()}</div>\n          </div>\n\n          <!-- Payment Note -->\n          <div class=\"payment-note\">\n            <strong>Payment Instructions:</strong><br>\n            Please pay your bill on or before the due date to avoid any late fees. \n            Contact the management office for payment methods and assistance.\n          </div>\n        </div>\n\n        <!-- Footer -->\n        <div class=\"footer\">\n          <p>This is an automatically generated bill. For questions or concerns, please contact the management office.</p>\n          <p><strong>Generated on:</strong> ${formatDate(new Date())}</p>\n        </div>\n      </div>\n    </body>\n    </html>\n  `;\n};\n// Send bill to tenant via email\nconst sendBillToTenant = async (bill, recipientEmail, customMessage = \"\")=>{\n    try {\n        const transporter = createTransporter();\n        const subject = `Monthly Bill - Room ${bill.room_number} - ${formatDate(bill.bill_date)}`;\n        const htmlContent = generateBillHTML(bill);\n        let textMessage = `\nDear ${bill.tenant_name},\n\nYour monthly bill for Room ${bill.room_number} is ready.\n\nBill Period: ${formatDate(bill.rent_from)} - ${formatDate(bill.rent_to)}\nTotal Amount: ${formatCurrency(bill.total_amount)}\nDue Date: ${formatDate(bill.rent_to)}\n\nBreakdown:\n- Rent: ${formatCurrency(bill.rent_amount)}\n- Electricity: ${formatCurrency(bill.electric_amount || 0)}\n- Water: ${formatCurrency(bill.water_amount)}${bill.extra_fee_amount > 0 ? `\n- Extra Fees: ${formatCurrency(bill.extra_fee_amount)} (${bill.extra_fee_description || \"Additional charges\"})` : \"\"}\n\nPlease pay on or before the due date.\n\nThank you,\n${bill.branch_name || \"JH Apartment\"} Management\n    `;\n        if (customMessage) {\n            textMessage = `${customMessage}\\n\\n${textMessage}`;\n        }\n        const mailOptions = {\n            from: \"official.jhapartment@gmail.com\" || 0,\n            to: recipientEmail,\n            subject: subject,\n            text: textMessage,\n            html: htmlContent,\n            attachments: [] // Could add PDF attachment in the future\n        };\n        const result = await transporter.sendMail(mailOptions);\n        return {\n            success: true,\n            messageId: result.messageId,\n            message: \"Email sent successfully\"\n        };\n    } catch (error) {\n        console.error(\"Email sending error:\", error);\n        return {\n            success: false,\n            error: error.message\n        };\n    }\n};\n// Test email configuration\nconst testEmailConfig = async ()=>{\n    try {\n        const transporter = createTransporter();\n        await transporter.verify();\n        return {\n            success: true,\n            message: \"Email configuration is valid\"\n        };\n    } catch (error) {\n        return {\n            success: false,\n            error: error.message\n        };\n    }\n};\n// Send receipt to tenant via email\nconst sendReceiptToTenant = async (bill, payments, recipientEmail, pdfBuffer)=>{\n    try {\n        const transporter = createTransporter();\n        const subject = `Payment Receipt - Room ${bill.room_number} - ${formatDate(new Date())}`;\n        let textMessage = `\nDear ${bill.tenant_name},\n\nThank you for your payment! Please find your official receipt attached.\n\nReceipt Details:\n- Bill Period: ${formatDate(bill.rent_from)} - ${formatDate(bill.rent_to)}\n- Total Amount: ${formatCurrency(bill.total_amount)}\n- Amount Paid: ${formatCurrency(payments.reduce((sum, p)=>sum + parseFloat(p.amount), 0))}\n- Payment Date: ${formatDate(payments[payments.length - 1].payment_date)}\n- Status: FULLY PAID\n\nThis receipt serves as official proof of payment.\n\nThank you for choosing ${bill.branch_name || \"J&H Apartment\"}!\n\nBest regards,\n${bill.branch_name || \"J&H Apartment\"} Management\n    `;\n        const mailOptions = {\n            from: \"official.jhapartment@gmail.com\" || 0,\n            to: recipientEmail,\n            subject: subject,\n            text: textMessage,\n            attachments: [\n                {\n                    filename: `receipt-${bill.id}-${Date.now()}.pdf`,\n                    content: pdfBuffer,\n                    contentType: \"application/pdf\"\n                }\n            ]\n        };\n        const result = await transporter.sendMail(mailOptions);\n        return {\n            success: true,\n            message: \"Receipt sent successfully via email\",\n            messageId: result.messageId\n        };\n    } catch (error) {\n        console.error(\"Receipt email sending error:\", error);\n        return {\n            success: false,\n            error: error.message\n        };\n    }\n};\n// Send welcome email to new tenant\nconst sendWelcomeEmail = async (tenant, roomInfo)=>{\n    try {\n        // Emails are now enabled - attempting to send welcome email\n        const transporter = createTransporter();\n        const subject = `Welcome to J&H Apartment! - Room ${roomInfo.room_number}`;\n        const htmlContent = `\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <meta charset=\"utf-8\">\n        <style>\n          body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background-color: #f4f4f4; }\n          .email-container { max-width: 600px; margin: 0 auto; background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }\n          .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; text-align: center; }\n          .header h1 { margin: 0; font-size: 28px; }\n          .content { padding: 30px; }\n          .welcome-section { background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0; }\n          .info-box { background: #e3f2fd; border-left: 4px solid #2196f3; padding: 15px; margin: 15px 0; }\n          .deposit-info { background: #fff3e0; border-left: 4px solid #ff9800; padding: 15px; margin: 15px 0; }\n          .contract-info { background: #e8f5e8; border-left: 4px solid #4caf50; padding: 15px; margin: 15px 0; }\n          .footer { padding: 20px; text-align: center; color: #666; border-top: 1px solid #eee; }\n        </style>\n      </head>\n      <body>\n        <div class=\"email-container\">\n          <div class=\"header\">\n            <h1>ðŸ  Welcome to J&H Apartment!</h1>\n            <p>Your new home awaits you</p>\n          </div>\n          \n          <div class=\"content\">\n            <div class=\"welcome-section\">\n              <h2>Dear ${tenant.name},</h2>\n              <p>We are thrilled to welcome you to J&H Apartment! Thank you for choosing us as your new home. We're committed to providing you with a comfortable and pleasant living experience.</p>\n            </div>\n            \n            <div class=\"info-box\">\n              <h3>ðŸ“‹ Your Tenancy Details</h3>\n              <p><strong>Room Number:</strong> ${roomInfo.room_number}</p>\n              <p><strong>Monthly Rent:</strong> ${formatCurrency(roomInfo.monthly_rent)}</p>\n              <p><strong>Contract Start:</strong> ${formatDate(tenant.contract_start_date)}</p>\n              <p><strong>Contract End:</strong> ${formatDate(tenant.contract_end_date)}</p>\n              <p><strong>Contract Duration:</strong> ${tenant.contract_duration_months} months</p>\n            </div>\n            \n            <div class=\"deposit-info\">\n              <h3>ðŸ’° Deposit Information</h3>\n              <p><strong>Advance Payment:</strong> ${formatCurrency(tenant.advance_payment)}</p>\n              <p><strong>Security Deposit:</strong> ${formatCurrency(tenant.security_deposit)}</p>\n              <p><strong>Total Required:</strong> ${formatCurrency(parseFloat(tenant.advance_payment) + parseFloat(tenant.security_deposit))}</p>\n              <p><em>A separate deposit receipt will be sent to you once payment is confirmed.</em></p>\n            </div>\n            \n            <div class=\"contract-info\">\n              <h3>ðŸ“‹ Important Information</h3>\n              <ul>\n                <li>Your rent is due monthly in advance</li>\n                <li>Water and electricity bills will be calculated based on usage</li>\n                <li>We'll notify you 1 month before your contract expires</li>\n                <li>Please keep your deposit receipts for future reference</li>\n                <li>Contact management for any maintenance requests</li>\n              </ul>\n            </div>\n            \n            <div class=\"welcome-section\">\n              <h3>ðŸ“ž Contact Information</h3>\n              <p><strong>Management Office:</strong> Available during business hours</p>\n              <p><strong>Email:</strong> official.jhapartment@gmail.com</p>\n              <p><strong>Address:</strong> Patin-ay, Prosperidad, Agusan Del Sur</p>\n            </div>\n            \n            <div style=\"text-align: center; margin: 30px 0;\">\n              <p style=\"font-size: 18px; color: #667eea;\"><strong>Welcome to your new home! ðŸ¡</strong></p>\n            </div>\n          </div>\n          \n          <div class=\"footer\">\n            <p>This email was sent automatically by J&H Apartment Management System</p>\n            <p>If you have any questions, please contact our management office</p>\n          </div>\n        </div>\n      </body>\n      </html>\n    `;\n        const textContent = `\nDear ${tenant.name},\n\nWelcome to J&H Apartment! \n\nYour Tenancy Details:\n- Room Number: ${roomInfo.room_number}\n- Monthly Rent: ${formatCurrency(roomInfo.monthly_rent)}\n- Contract Period: ${formatDate(tenant.contract_start_date)} to ${formatDate(tenant.contract_end_date)}\n- Duration: ${tenant.contract_duration_months} months\n\nDeposit Information:\n- Advance Payment: ${formatCurrency(tenant.advance_payment)}\n- Security Deposit: ${formatCurrency(tenant.security_deposit)}\n- Total Required: ${formatCurrency(parseFloat(tenant.advance_payment) + parseFloat(tenant.security_deposit))}\n\nImportant Notes:\n- Monthly rent is due in advance\n- We'll notify you 1 month before contract expiry\n- Keep deposit receipts for reference\n- Contact management for maintenance requests\n\nWelcome to your new home!\n\nBest regards,\nJ&H Apartment Management\n    `;\n        const mailOptions = {\n            from: \"official.jhapartment@gmail.com\" || 0,\n            to: tenant.email,\n            subject: subject,\n            text: textContent,\n            html: htmlContent\n        };\n        const result = await transporter.sendMail(mailOptions);\n        return {\n            success: true,\n            messageId: result.messageId,\n            message: \"Welcome email sent successfully\"\n        };\n    } catch (error) {\n        console.error(\"Welcome email sending error:\", error);\n        return {\n            success: false,\n            error: error.message\n        };\n    }\n};\n// Send deposit receipt email\nconst sendDepositReceiptEmail = async (tenant, roomInfo, depositReceiptBuffer)=>{\n    try {\n        // Emails are now enabled - attempting to send deposit receipt email\n        const transporter = createTransporter();\n        const subject = `Deposit Receipt - Room ${roomInfo.room_number} - J&H Apartment`;\n        const htmlContent = `\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <meta charset=\"utf-8\">\n        <style>\n          body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background-color: #f4f4f4; }\n          .email-container { max-width: 600px; margin: 0 auto; background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }\n          .header { background: linear-gradient(135deg, #28a745 0%, #20c997 100%); color: white; padding: 30px; text-align: center; }\n          .content { padding: 30px; }\n          .receipt-info { background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0; }\n          .amount-box { background: #e8f5e8; border: 2px solid #28a745; padding: 20px; border-radius: 8px; text-align: center; margin: 20px 0; }\n          .footer { padding: 20px; text-align: center; color: #666; border-top: 1px solid #eee; }\n        </style>\n      </head>\n      <body>\n        <div class=\"email-container\">\n          <div class=\"header\">\n            <h1>ðŸ’° Deposit Receipt</h1>\n            <p>Official Payment Confirmation</p>\n          </div>\n          \n          <div class=\"content\">\n            <div class=\"receipt-info\">\n              <h3>Dear ${tenant.name},</h3>\n              <p>Thank you for your payment! We have received your advance payment and security deposit for Room ${roomInfo.room_number}.</p>\n            </div>\n            \n            <div class=\"amount-box\">\n              <h3>Payment Summary</h3>\n              <p><strong>Advance Payment:</strong> ${formatCurrency(tenant.advance_payment)}</p>\n              <p><strong>Security Deposit:</strong> ${formatCurrency(tenant.security_deposit)}</p>\n              <hr style=\"margin: 15px 0;\">\n              <p style=\"font-size: 18px;\"><strong>Total Paid: ${formatCurrency(parseFloat(tenant.advance_payment) + parseFloat(tenant.security_deposit))}</strong></p>\n            </div>\n            \n            <div class=\"receipt-info\">\n              <h3>ðŸ“‹ Receipt Details</h3>\n              <p><strong>Receipt Date:</strong> ${formatDate(new Date())}</p>\n              <p><strong>Tenant:</strong> ${tenant.name}</p>\n              <p><strong>Room:</strong> ${roomInfo.room_number}</p>\n              <p><strong>Contract Period:</strong> ${formatDate(tenant.contract_start_date)} to ${formatDate(tenant.contract_end_date)}</p>\n            </div>\n            \n            <div style=\"background: #fff3cd; border: 1px solid #ffeaa7; padding: 15px; border-radius: 6px; margin: 20px 0;\">\n              <h4>ðŸ“„ Official Receipt Attached</h4>\n              <p>Please find your official deposit receipt attached to this email. Keep this receipt for your records as proof of payment.</p>\n            </div>\n            \n            <div style=\"text-align: center; margin: 30px 0;\">\n              <p style=\"color: #28a745; font-weight: bold;\">âœ… Payment Confirmed - Welcome to J&H Apartment!</p>\n            </div>\n          </div>\n          \n          <div class=\"footer\">\n            <p>This receipt is automatically generated and serves as official proof of payment</p>\n            <p>For any questions, please contact our management office</p>\n          </div>\n        </div>\n      </body>\n      </html>\n    `;\n        const textContent = `\nDear ${tenant.name},\n\nDEPOSIT RECEIPT - J&H APARTMENT\n\nThank you for your payment! We have received your deposits for Room ${roomInfo.room_number}.\n\nPayment Summary:\n- Advance Payment: ${formatCurrency(tenant.advance_payment)}\n- Security Deposit: ${formatCurrency(tenant.security_deposit)}\n- Total Paid: ${formatCurrency(parseFloat(tenant.advance_payment) + parseFloat(tenant.security_deposit))}\n\nReceipt Details:\n- Date: ${formatDate(new Date())}\n- Tenant: ${tenant.name}\n- Room: ${roomInfo.room_number}\n- Contract: ${formatDate(tenant.contract_start_date)} to ${formatDate(tenant.contract_end_date)}\n\nYour official receipt is attached to this email. Please keep it for your records.\n\nWelcome to J&H Apartment!\n\nBest regards,\nJ&H Apartment Management\n    `;\n        const mailOptions = {\n            from: \"official.jhapartment@gmail.com\" || 0,\n            to: tenant.email,\n            subject: subject,\n            text: textContent,\n            html: htmlContent,\n            attachments: [\n                {\n                    filename: `deposit-receipt-${tenant.id}-${Date.now()}.pdf`,\n                    content: depositReceiptBuffer,\n                    contentType: \"application/pdf\"\n                }\n            ]\n        };\n        const result = await transporter.sendMail(mailOptions);\n        return {\n            success: true,\n            messageId: result.messageId,\n            message: \"Deposit receipt email sent successfully\"\n        };\n    } catch (error) {\n        console.error(\"Deposit receipt email sending error:\", error);\n        return {\n            success: false,\n            error: error.message\n        };\n    }\n};\n// Send contract expiry notification\nconst sendContractExpiryNotification = async (tenant, roomInfo)=>{\n    try {\n        // Emails are now enabled - attempting to send contract expiry notification\n        const transporter = createTransporter();\n        const subject = `Contract Expiry Notice - Room ${roomInfo.room_number} - Action Required`;\n        const daysUntilExpiry = Math.ceil((new Date(tenant.contract_end_date) - new Date()) / (1000 * 60 * 60 * 24));\n        const htmlContent = `\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <meta charset=\"utf-8\">\n        <style>\n          body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background-color: #f4f4f4; }\n          .email-container { max-width: 600px; margin: 0 auto; background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }\n          .header { background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%); color: white; padding: 30px; text-align: center; }\n          .content { padding: 30px; }\n          .notice-box { background: #fff3cd; border: 2px solid #ffc107; padding: 20px; border-radius: 8px; margin: 20px 0; }\n          .info-section { background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0; }\n          .action-box { background: #e3f2fd; border-left: 4px solid #2196f3; padding: 20px; margin: 20px 0; }\n          .footer { padding: 20px; text-align: center; color: #666; border-top: 1px solid #eee; }\n        </style>\n      </head>\n      <body>\n        <div class=\"email-container\">\n          <div class=\"header\">\n            <h1>âš ï¸ Contract Expiry Notice</h1>\n            <p>Important: Action Required</p>\n          </div>\n          \n          <div class=\"content\">\n            <div class=\"notice-box\">\n              <h3>Dear ${tenant.name},</h3>\n              <p style=\"font-size: 16px;\"><strong>Your tenancy contract will expire in ${daysUntilExpiry} days.</strong></p>\n              <p>Contract End Date: <strong>${formatDate(tenant.contract_end_date)}</strong></p>\n            </div>\n            \n            <div class=\"info-section\">\n              <h3>ðŸ“‹ Current Contract Details</h3>\n              <p><strong>Room Number:</strong> ${roomInfo.room_number}</p>\n              <p><strong>Contract Start:</strong> ${formatDate(tenant.contract_start_date)}</p>\n              <p><strong>Contract End:</strong> ${formatDate(tenant.contract_end_date)}</p>\n              <p><strong>Monthly Rent:</strong> ${formatCurrency(roomInfo.monthly_rent)}</p>\n            </div>\n            \n            <div class=\"action-box\">\n              <h3>ðŸ”„ Renewal Options</h3>\n              <p>If you wish to continue staying with us, please contact our management office to discuss renewal terms:</p>\n              <ul>\n                <li>Standard 6-month contract renewal</li>\n                <li>Custom contract duration options available</li>\n                <li>Current rent rates may apply</li>\n                <li>New contract to be signed before expiry date</li>\n              </ul>\n            </div>\n            \n            <div style=\"background: #f8d7da; border: 1px solid #f5c6cb; padding: 15px; border-radius: 6px; margin: 20px 0;\">\n              <h4>â° Important Deadlines</h4>\n              <p><strong>Please notify us of your intentions by:</strong> ${formatDate(new Date(Date.now() + 7 * 24 * 60 * 60 * 1000))}</p>\n              <p>This will allow us sufficient time to process your renewal or arrange for a smooth transition.</p>\n            </div>\n            \n            <div class=\"info-section\">\n              <h3>ðŸ“ž Contact Management</h3>\n              <p><strong>Email:</strong> official.jhapartment@gmail.com</p>\n              <p><strong>Visit:</strong> Management Office during business hours</p>\n              <p><strong>Address:</strong> Patin-ay, Prosperidad, Agusan Del Sur</p>\n            </div>\n            \n            <div style=\"text-align: center; margin: 30px 0;\">\n              <p style=\"color: #ff6b6b; font-weight: bold;\">âš ï¸ Please respond within 7 days to avoid any complications</p>\n            </div>\n          </div>\n          \n          <div class=\"footer\">\n            <p>This is an automated reminder sent 30 days before contract expiry</p>\n            <p>Thank you for being a valued tenant at J&H Apartment</p>\n          </div>\n        </div>\n      </body>\n      </html>\n    `;\n        const textContent = `\nDear ${tenant.name},\n\nCONTRACT EXPIRY NOTICE - J&H APARTMENT\n\nYour tenancy contract will expire in ${daysUntilExpiry} days.\n\nContract Details:\n- Room: ${roomInfo.room_number}\n- Contract End: ${formatDate(tenant.contract_end_date)}\n- Monthly Rent: ${formatCurrency(roomInfo.monthly_rent)}\n\nRenewal Options:\n- Standard 6-month renewal available\n- Custom duration options\n- Contact management office to discuss terms\n\nImportant:\nPlease notify us of your intentions by ${formatDate(new Date(Date.now() + 7 * 24 * 60 * 60 * 1000))}\n\nContact Information:\nEmail: official.jhapartment@gmail.com\nVisit: Management Office during business hours\n\nPlease respond within 7 days to avoid complications.\n\nThank you for being a valued tenant.\n\nBest regards,\nJ&H Apartment Management\n    `;\n        const mailOptions = {\n            from: \"official.jhapartment@gmail.com\" || 0,\n            to: tenant.email,\n            subject: subject,\n            text: textContent,\n            html: htmlContent\n        };\n        const result = await transporter.sendMail(mailOptions);\n        return {\n            success: true,\n            messageId: result.messageId,\n            message: \"Contract expiry notification sent successfully\"\n        };\n    } catch (error) {\n        console.error(\"Contract expiry email sending error:\", error);\n        return {\n            success: false,\n            error: error.message\n        };\n    }\n};\n// Send departure notification email\nconst sendDepartureEmail = async (recipientEmail, departureInfo)=>{\n    try {\n        const transporter = createTransporter();\n        const subject = `Departure Confirmation - Room ${departureInfo.room_number} - J&H Apartment`;\n        const htmlContent = `\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <meta charset=\"utf-8\">\n        <style>\n          body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background-color: #f4f4f4; }\n          .email-container { max-width: 600px; margin: 0 auto; background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }\n          .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; text-align: center; }\n          .content { padding: 30px; }\n          .info-section { background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0; }\n          .summary-box { background: #e3f2fd; border-left: 4px solid #2196f3; padding: 20px; margin: 20px 0; }\n          .refund-box { background: #e8f5e8; border-left: 4px solid #4caf50; padding: 20px; margin: 20px 0; }\n          .footer { padding: 20px; text-align: center; color: #666; border-top: 1px solid #eee; }\n          .status-badge { display: inline-block; padding: 5px 15px; border-radius: 20px; font-size: 12px; font-weight: bold; }\n          .completed { background: #d4edda; color: #155724; }\n          .early { background: #fff3cd; color: #856404; }\n        </style>\n      </head>\n      <body>\n        <div class=\"email-container\">\n          <div class=\"header\">\n            <h1>ðŸ  Departure Confirmation</h1>\n            <p>J&H Apartment - Thank You for Staying With Us</p>\n          </div>\n          \n          <div class=\"content\">\n            <h3>Dear ${departureInfo.tenant_name},</h3>\n            <p>We confirm that your tenancy at J&H Apartment has been processed and your records have been updated.</p>\n            \n            <div class=\"info-section\">\n              <h3>ðŸ“‹ Tenancy Summary</h3>\n              <p><strong>Room Number:</strong> ${departureInfo.room_number}</p>\n              <p><strong>Branch:</strong> ${departureInfo.branch_name}</p>\n              <p><strong>Tenancy Period:</strong> ${formatDate(departureInfo.rent_start)} - ${formatDate(departureInfo.rent_end)}</p>\n              <p><strong>Contract Status:</strong> \n                <span class=\"status-badge ${departureInfo.contract_completed ? \"completed\" : \"early\"}\">\n                  ${departureInfo.contract_completed ? \"Contract Completed\" : \"Early Departure\"}\n                </span>\n              </p>\n              <p><strong>Departure Reason:</strong> ${departureInfo.reason_for_leaving?.replace(\"_\", \" \") || \"Not specified\"}</p>\n            </div>\n            \n            <div class=\"summary-box\">\n              <h3>ðŸ’° Financial Summary</h3>\n              <p><strong>Total Bills Paid:</strong> ${formatCurrency(departureInfo.total_bills_paid || 0)}</p>\n              ${departureInfo.total_bills_unpaid > 0 ? `\n                <p><strong>Outstanding Amount:</strong> <span style=\"color: #dc3545;\">${formatCurrency(departureInfo.total_bills_unpaid)}</span></p>\n                <p><small style=\"color: #dc3545;\">Please settle any outstanding amounts as soon as possible.</small></p>\n              ` : `\n                <p style=\"color: #28a745;\"><strong>âœ… All bills have been settled</strong></p>\n              `}\n            </div>\n            \n            ${departureInfo.security_deposit_refund > 0 ? `\n            <div class=\"refund-box\">\n              <h3>ðŸ’µ Security Deposit Refund</h3>\n              <p><strong>Refund Amount:</strong> ${formatCurrency(departureInfo.security_deposit_refund)}</p>\n              <p>Your security deposit refund will be processed according to our standard procedures. Please contact the management office for refund collection details.</p>\n            </div>\n            ` : \"\"}\n            \n            <div class=\"info-section\">\n              <h3>ðŸ“ž Contact Information</h3>\n              <p>If you have any questions or need assistance, please contact us:</p>\n              <p><strong>Email:</strong> official.jhapartment@gmail.com</p>\n              <p><strong>Address:</strong> Patin-ay, Prosperidad, Agusan Del Sur</p>\n            </div>\n            \n            <div style=\"text-align: center; margin: 30px 0; padding: 20px; background: #f0f8ff; border-radius: 8px;\">\n              <h3>ðŸ™ Thank You!</h3>\n              <p>Thank you for choosing J&H Apartment as your home. We appreciate your tenancy and wish you all the best in your future endeavors.</p>\n              <p><em>You're always welcome back!</em></p>\n            </div>\n          </div>\n          \n          <div class=\"footer\">\n            <p>This is an automated confirmation email</p>\n            <p>J&H Apartment Management Team</p>\n          </div>\n        </div>\n      </body>\n      </html>\n    `;\n        const textContent = `\nDear ${departureInfo.tenant_name},\n\nDEPARTURE CONFIRMATION - J&H APARTMENT\n\nWe confirm that your tenancy has been processed and your records have been updated.\n\nTenancy Summary:\n- Room: ${departureInfo.room_number}\n- Branch: ${departureInfo.branch_name}\n- Period: ${formatDate(departureInfo.rent_start)} - ${formatDate(departureInfo.rent_end)}\n- Status: ${departureInfo.contract_completed ? \"Contract Completed\" : \"Early Departure\"}\n- Reason: ${departureInfo.reason_for_leaving?.replace(\"_\", \" \") || \"Not specified\"}\n\nFinancial Summary:\n- Total Bills Paid: ${formatCurrency(departureInfo.total_bills_paid || 0)}\n${departureInfo.total_bills_unpaid > 0 ? `- Outstanding Amount: ${formatCurrency(departureInfo.total_bills_unpaid)}` : \"- All bills settled âœ…\"}\n\n${departureInfo.security_deposit_refund > 0 ? `\nSecurity Deposit Refund: ${formatCurrency(departureInfo.security_deposit_refund)}\nPlease contact the management office for refund collection details.\n` : \"\"}\n\nContact Information:\nEmail: official.jhapartment@gmail.com\nAddress: Patin-ay, Prosperidad, Agusan Del Sur\n\nThank you for choosing J&H Apartment as your home. We appreciate your tenancy and wish you all the best!\n\nYou're always welcome back!\n\nBest regards,\nJ&H Apartment Management Team\n    `;\n        const mailOptions = {\n            from: \"official.jhapartment@gmail.com\" || 0,\n            to: recipientEmail,\n            subject: subject,\n            text: textContent,\n            html: htmlContent\n        };\n        const result = await transporter.sendMail(mailOptions);\n        return {\n            success: true,\n            messageId: result.messageId,\n            message: \"Departure email sent successfully\"\n        };\n    } catch (error) {\n        console.error(\"Departure email sending error:\", error);\n        return {\n            success: false,\n            error: error.message\n        };\n    }\n};\n// Send monthly business report\nconst sendMonthlyReport = async (recipientEmail, reportData)=>{\n    try {\n        const transporter = createTransporter();\n        const monthName = reportData.report_period.month_name;\n        const totalRevenue = reportData.financial_summary.total_revenue.toLocaleString();\n        const occupancyRate = reportData.occupancy_metrics.occupancy_rate;\n        const activeTenants = reportData.tenant_statistics.active_tenants;\n        const revenueGrowth = reportData.financial_summary.revenue_growth;\n        // Create branch performance table\n        const branchTable = reportData.branch_performance.map((branch)=>`\n      <tr>\n        <td style=\"padding: 8px; border: 1px solid #ddd;\">${branch.branch_name}</td>\n        <td style=\"padding: 8px; border: 1px solid #ddd; text-align: center;\">${branch.occupied_rooms}/${branch.total_rooms}</td>\n        <td style=\"padding: 8px; border: 1px solid #ddd; text-align: center;\">${branch.occupancy_rate}%</td>\n        <td style=\"padding: 8px; border: 1px solid #ddd; text-align: right;\">â‚±${branch.revenue.toLocaleString()}</td>\n      </tr>\n    `).join(\"\");\n        // Create payment methods table\n        const paymentTable = reportData.payment_analysis.by_method.map((method)=>`\n      <tr>\n        <td style=\"padding: 8px; border: 1px solid #ddd;\">${method.payment_method}</td>\n        <td style=\"padding: 8px; border: 1px solid #ddd; text-align: center;\">${method.transaction_count}</td>\n        <td style=\"padding: 8px; border: 1px solid #ddd; text-align: right;\">â‚±${method.total_amount.toLocaleString()}</td>\n        <td style=\"padding: 8px; border: 1px solid #ddd; text-align: center;\">${method.percentage}%</td>\n      </tr>\n    `).join(\"\");\n        // Create top performers table\n        const topPerformersTable = reportData.top_performers.map((tenant)=>`\n      <tr>\n        <td style=\"padding: 8px; border: 1px solid #ddd;\">${tenant.tenant_name}</td>\n        <td style=\"padding: 8px; border: 1px solid #ddd; text-align: center;\">${tenant.room_number}</td>\n        <td style=\"padding: 8px; border: 1px solid #ddd; text-align: right;\">â‚±${tenant.total_paid.toLocaleString()}</td>\n      </tr>\n    `).join(\"\");\n        const htmlContent = `\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <meta charset=\"utf-8\">\n        <title>Monthly Business Report - ${monthName}</title>\n        <style>\n          body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }\n          .container { max-width: 800px; margin: 0 auto; padding: 20px; }\n          .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; text-align: center; border-radius: 10px; margin-bottom: 30px; }\n          .metric-card { background: #f8f9fa; border-left: 4px solid #007bff; padding: 20px; margin: 15px 0; border-radius: 5px; }\n          .metric-value { font-size: 2em; font-weight: bold; color: #007bff; }\n          .metric-label { color: #666; font-size: 0.9em; }\n          .growth-positive { color: #28a745; }\n          .growth-negative { color: #dc3545; }\n          .section { margin: 30px 0; }\n          .section-title { font-size: 1.5em; color: #333; border-bottom: 2px solid #007bff; padding-bottom: 10px; margin-bottom: 20px; }\n          table { width: 100%; border-collapse: collapse; margin: 15px 0; }\n          th { background: #007bff; color: white; padding: 12px; text-align: left; }\n          .summary-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 20px 0; }\n          .alert { background: #fff3cd; border: 1px solid #ffeaa7; color: #856404; padding: 15px; border-radius: 5px; margin: 15px 0; }\n          .footer { text-align: center; margin-top: 40px; padding: 20px; background: #f8f9fa; border-radius: 5px; }\n        </style>\n      </head>\n      <body>\n        <div class=\"container\">\n          <div class=\"header\">\n            <h1>ðŸ“Š J&H Apartment Monthly Report</h1>\n            <h2>${monthName}</h2>\n            <p>Generated on ${new Date(reportData.report_period.generated_at).toLocaleDateString()}</p>\n          </div>\n\n          <!-- Executive Summary -->\n          <div class=\"section\">\n            <h2 class=\"section-title\">ðŸ“ˆ Executive Summary</h2>\n            <div class=\"summary-grid\">\n              <div class=\"metric-card\">\n                <div class=\"metric-value\">â‚±${totalRevenue}</div>\n                <div class=\"metric-label\">Total Revenue</div>\n                <div class=\"${revenueGrowth >= 0 ? \"growth-positive\" : \"growth-negative\"}\">\n                  ${revenueGrowth >= 0 ? \"â†—\" : \"â†˜\"} ${Math.abs(revenueGrowth)}% vs last month\n                </div>\n              </div>\n              <div class=\"metric-card\">\n                <div class=\"metric-value\">${occupancyRate}%</div>\n                <div class=\"metric-label\">Occupancy Rate</div>\n                <div class=\"metric-label\">${reportData.occupancy_metrics.occupied_rooms}/${reportData.occupancy_metrics.total_rooms} rooms occupied</div>\n              </div>\n              <div class=\"metric-card\">\n                <div class=\"metric-value\">${activeTenants}</div>\n                <div class=\"metric-label\">Active Tenants</div>\n                <div class=\"metric-label\">Net change: ${reportData.tenant_statistics.net_tenant_change >= 0 ? \"+\" : \"\"}${reportData.tenant_statistics.net_tenant_change}</div>\n              </div>\n              <div class=\"metric-card\">\n                <div class=\"metric-value\">${reportData.financial_summary.collection_rate}%</div>\n                <div class=\"metric-label\">Collection Rate</div>\n                <div class=\"metric-label\">â‚±${reportData.financial_summary.total_billed.toLocaleString()} billed</div>\n              </div>\n            </div>\n          </div>\n\n          <!-- Financial Performance -->\n          <div class=\"section\">\n            <h2 class=\"section-title\">ðŸ’° Financial Performance</h2>\n            <div class=\"summary-grid\">\n              <div class=\"metric-card\">\n                <div class=\"metric-value\">${reportData.financial_summary.total_transactions}</div>\n                <div class=\"metric-label\">Total Transactions</div>\n              </div>\n              <div class=\"metric-card\">\n                <div class=\"metric-value\">â‚±${reportData.outstanding_summary.total_outstanding.toLocaleString()}</div>\n                <div class=\"metric-label\">Outstanding Amount</div>\n                <div class=\"metric-label\">${reportData.outstanding_summary.unpaid_bills_count + reportData.outstanding_summary.partial_bills_count} bills pending</div>\n              </div>\n            </div>\n\n            <h3>Payment Methods Breakdown</h3>\n            <table>\n              <thead>\n                <tr>\n                  <th>Payment Method</th>\n                  <th>Transactions</th>\n                  <th>Amount</th>\n                  <th>Percentage</th>\n                </tr>\n              </thead>\n              <tbody>\n                ${paymentTable}\n              </tbody>\n            </table>\n          </div>\n\n          <!-- Branch Performance -->\n          <div class=\"section\">\n            <h2 class=\"section-title\">ðŸ¢ Branch Performance</h2>\n            <table>\n              <thead>\n                <tr>\n                  <th>Branch</th>\n                  <th>Occupancy</th>\n                  <th>Rate</th>\n                  <th>Revenue</th>\n                </tr>\n              </thead>\n              <tbody>\n                ${branchTable}\n              </tbody>\n            </table>\n          </div>\n\n          <!-- Tenant Statistics -->\n          <div class=\"section\">\n            <h2 class=\"section-title\">ðŸ‘¥ Tenant Statistics</h2>\n            <div class=\"summary-grid\">\n              <div class=\"metric-card\">\n                <div class=\"metric-value\">${reportData.tenant_statistics.new_tenants}</div>\n                <div class=\"metric-label\">New Tenants</div>\n              </div>\n              <div class=\"metric-card\">\n                <div class=\"metric-value\">${reportData.tenant_statistics.departed_tenants}</div>\n                <div class=\"metric-label\">Departed Tenants</div>\n              </div>\n              <div class=\"metric-card\">\n                <div class=\"metric-value\">${reportData.tenant_statistics.expiring_contracts}</div>\n                <div class=\"metric-label\">Expiring Contracts</div>\n                <div class=\"metric-label\">Next 30 days</div>\n              </div>\n            </div>\n          </div>\n\n          <!-- Top Performers -->\n          ${reportData.top_performers.length > 0 ? `\n          <div class=\"section\">\n            <h2 class=\"section-title\">ðŸŒŸ Top Paying Tenants</h2>\n            <table>\n              <thead>\n                <tr>\n                  <th>Tenant Name</th>\n                  <th>Room</th>\n                  <th>Amount Paid</th>\n                </tr>\n              </thead>\n              <tbody>\n                ${topPerformersTable}\n              </tbody>\n            </table>\n          </div>\n          ` : \"\"}\n\n          <!-- Alerts & Recommendations -->\n          ${reportData.outstanding_summary.total_outstanding > 0 ? `\n          <div class=\"alert\">\n            <strong>âš ï¸ Action Required:</strong> There are â‚±${reportData.outstanding_summary.total_outstanding.toLocaleString()} in outstanding payments that need attention.\n          </div>\n          ` : \"\"}\n\n          ${reportData.tenant_statistics.expiring_contracts > 0 ? `\n          <div class=\"alert\">\n            <strong>ðŸ“… Contract Renewals:</strong> ${reportData.tenant_statistics.expiring_contracts} contracts are expiring in the next 30 days.\n          </div>\n          ` : \"\"}\n\n          ${occupancyRate < 80 ? `\n          <div class=\"alert\">\n            <strong>ðŸ  Occupancy Alert:</strong> Current occupancy rate is ${occupancyRate}%. Consider marketing strategies to increase occupancy.\n          </div>\n          ` : \"\"}\n\n          <div class=\"footer\">\n            <p><strong>J&H Apartment Management System</strong></p>\n            <p>This report was automatically generated on ${new Date().toLocaleDateString()}</p>\n            <p>For questions or support, please contact the management team.</p>\n          </div>\n        </div>\n      </body>\n      </html>\n    `;\n        const textContent = `\nJ&H APARTMENT MONTHLY REPORT - ${monthName}\nGenerated: ${new Date(reportData.report_period.generated_at).toLocaleDateString()}\n\nEXECUTIVE SUMMARY\n=================\nTotal Revenue: â‚±${totalRevenue} (${revenueGrowth >= 0 ? \"+\" : \"\"}${revenueGrowth}% vs last month)\nOccupancy Rate: ${occupancyRate}% (${reportData.occupancy_metrics.occupied_rooms}/${reportData.occupancy_metrics.total_rooms} rooms)\nActive Tenants: ${activeTenants} (Net change: ${reportData.tenant_statistics.net_tenant_change >= 0 ? \"+\" : \"\"}${reportData.tenant_statistics.net_tenant_change})\nCollection Rate: ${reportData.financial_summary.collection_rate}%\n\nFINANCIAL PERFORMANCE\n=====================\nTotal Transactions: ${reportData.financial_summary.total_transactions}\nTotal Billed: â‚±${reportData.financial_summary.total_billed.toLocaleString()}\nOutstanding Amount: â‚±${reportData.outstanding_summary.total_outstanding.toLocaleString()}\n\nTENANT STATISTICS\n=================\nNew Tenants: ${reportData.tenant_statistics.new_tenants}\nDeparted Tenants: ${reportData.tenant_statistics.departed_tenants}\nExpiring Contracts (30 days): ${reportData.tenant_statistics.expiring_contracts}\n\nBRANCH PERFORMANCE\n==================\n${reportData.branch_performance.map((branch)=>`${branch.branch_name}: ${branch.occupancy_rate}% occupancy, â‚±${branch.revenue.toLocaleString()} revenue`).join(\"\\n\")}\n\nThis report was automatically generated by J&H Apartment Management System.\n    `;\n        const mailOptions = {\n            from: process.env.EMAIL_FROM || \"official.jhapartment@gmail.com\",\n            to: recipientEmail,\n            subject: `ðŸ“Š Monthly Business Report - ${monthName} | J&H Apartment`,\n            text: textContent,\n            html: htmlContent\n        };\n        const result = await transporter.sendMail(mailOptions);\n        console.log(\"Monthly report email sent successfully:\", result.messageId);\n        return {\n            success: true,\n            message: \"Monthly report email sent successfully\",\n            messageId: result.messageId\n        };\n    } catch (error) {\n        console.error(\"Error sending monthly report email:\", error);\n        throw error;\n    }\n};\n// Send billing reminder to management office\nconst sendBillingReminderToManagement = async (bills)=>{\n    try {\n        const transporter = createTransporter();\n        const subject = `Billing Reminder - ${bills.length} Bill${bills.length > 1 ? \"s\" : \"\"} Due Soon`;\n        // Group bills by due date\n        const billsByDueDate = bills.reduce((acc, bill)=>{\n            const dueDate = formatDate(bill.rent_to);\n            if (!acc[dueDate]) {\n                acc[dueDate] = [];\n            }\n            acc[dueDate].push(bill);\n            return acc;\n        }, {});\n        const htmlContent = `\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <meta charset=\"utf-8\">\n        <style>\n          body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background-color: #f4f4f4; }\n          .email-container { max-width: 800px; margin: 0 auto; background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }\n          .header { background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%); color: white; padding: 30px; text-align: center; }\n          .content { padding: 30px; }\n          .alert-box { background: #fff3cd; border: 2px solid #ffc107; padding: 20px; border-radius: 8px; margin: 20px 0; }\n          .bills-section { margin: 20px 0; }\n          .due-date-group { margin-bottom: 30px; }\n          .due-date-header { background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 15px; }\n          .bill-item { background: #ffffff; border: 1px solid #dee2e6; padding: 15px; margin-bottom: 10px; border-radius: 6px; display: flex; justify-content: space-between; align-items: center; }\n          .bill-info { flex: 1; }\n          .bill-amount { font-weight: bold; color: #dc3545; }\n          .overdue { border-left: 4px solid #dc3545; }\n          .due-today { border-left: 4px solid #fd7e14; }\n          .due-soon { border-left: 4px solid #ffc107; }\n          .footer { padding: 20px; text-align: center; color: #666; border-top: 1px solid #eee; }\n          .summary-stats { display: flex; justify-content: space-around; background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0; }\n          .stat-item { text-align: center; }\n          .stat-number { font-size: 24px; font-weight: bold; color: #dc3545; }\n          .stat-label { font-size: 12px; color: #666; text-transform: uppercase; }\n        </style>\n      </head>\n      <body>\n        <div class=\"email-container\">\n          <div class=\"header\">\n            <h1>ðŸ”” Billing Reminder</h1>\n            <p>Bills requiring attention</p>\n          </div>\n          \n          <div class=\"content\">\n            <div class=\"alert-box\">\n              <h3>âš ï¸ Action Required</h3>\n              <p>The following bills are due within the next 3 days and require immediate attention:</p>\n            </div>\n            \n            <div class=\"summary-stats\">\n              <div class=\"stat-item\">\n                <div class=\"stat-number\">${bills.length}</div>\n                <div class=\"stat-label\">Total Bills</div>\n              </div>\n              <div class=\"stat-item\">\n                <div class=\"stat-number\">${formatCurrency(bills.reduce((sum, bill)=>sum + parseFloat(bill.total_amount || 0), 0))}</div>\n                <div class=\"stat-label\">Total Amount</div>\n              </div>\n              <div class=\"stat-item\">\n                <div class=\"stat-number\">${bills.filter((bill)=>{\n            const daysUntilDue = Math.ceil((new Date(bill.rent_to) - new Date()) / (1000 * 60 * 60 * 24));\n            return daysUntilDue <= 0;\n        }).length}</div>\n                <div class=\"stat-label\">Overdue</div>\n              </div>\n            </div>\n            \n            <div class=\"bills-section\">\n              ${Object.entries(billsByDueDate).map(([dueDate, dateBills])=>{\n            const daysUntilDue = Math.ceil((new Date(dateBills[0].rent_to) - new Date()) / (1000 * 60 * 60 * 24));\n            let dueDateClass = \"due-soon\";\n            let dueDateLabel = `Due in ${daysUntilDue} day${daysUntilDue !== 1 ? \"s\" : \"\"}`;\n            if (daysUntilDue <= 0) {\n                dueDateClass = \"overdue\";\n                dueDateLabel = `Overdue by ${Math.abs(daysUntilDue)} day${Math.abs(daysUntilDue) !== 1 ? \"s\" : \"\"}`;\n            } else if (daysUntilDue === 0) {\n                dueDateClass = \"due-today\";\n                dueDateLabel = \"Due Today\";\n            }\n            return `\n                  <div class=\"due-date-group\">\n                    <div class=\"due-date-header ${dueDateClass}\">\n                      <h3>ðŸ“… ${dueDate} - ${dueDateLabel}</h3>\n                      <p>${dateBills.length} bill${dateBills.length > 1 ? \"s\" : \"\"} â€¢ Total: ${formatCurrency(dateBills.reduce((sum, bill)=>sum + parseFloat(bill.total_amount || 0), 0))}</p>\n                    </div>\n                    ${dateBills.map((bill)=>`\n                      <div class=\"bill-item ${dueDateClass}\">\n                        <div class=\"bill-info\">\n                          <strong>${bill.tenant_name}</strong> - Room ${bill.room_number}\n                          <br>\n                          <small>${bill.branch_name} â€¢ Period: ${formatDate(bill.rent_from)} - ${formatDate(bill.rent_to)}</small>\n                          ${bill.status === \"partial\" ? `<br><small style=\"color: #ffc107;\">âš ï¸ Partially paid</small>` : \"\"}\n                        </div>\n                        <div class=\"bill-amount\">\n                          ${bill.status === \"partial\" ? `${formatCurrency(bill.remaining_balance || bill.total_amount)}<br><small>of ${formatCurrency(bill.total_amount)}</small>` : formatCurrency(bill.total_amount)}\n                        </div>\n                      </div>\n                    `).join(\"\")}\n                  </div>\n                `;\n        }).join(\"\")}\n            </div>\n            \n            <div style=\"background: #e3f2fd; border-left: 4px solid #2196f3; padding: 20px; margin: 20px 0;\">\n              <h3>ðŸ“‹ Recommended Actions</h3>\n              <ul>\n                <li>Contact tenants with overdue bills immediately</li>\n                <li>Send payment reminders to tenants with bills due today</li>\n                <li>Prepare collection notices for persistent overdue accounts</li>\n                <li>Update payment records as payments are received</li>\n              </ul>\n            </div>\n          </div>\n          \n          <div class=\"footer\">\n            <p>This is an automated billing reminder sent daily at 9:00 AM</p>\n            <p>Generated on: ${formatDate(new Date())} at ${new Date().toLocaleTimeString()}</p>\n          </div>\n        </div>\n      </body>\n      </html>\n    `;\n        const textContent = `\nBILLING REMINDER - J&H APARTMENT MANAGEMENT\n\n${bills.length} Bill${bills.length > 1 ? \"s\" : \"\"} Due Soon\n\nSummary:\n- Total Bills: ${bills.length}\n- Total Amount: ${formatCurrency(bills.reduce((sum, bill)=>sum + parseFloat(bill.total_amount || 0), 0))}\n- Overdue Bills: ${bills.filter((bill)=>{\n            const daysUntilDue = Math.ceil((new Date(bill.rent_to) - new Date()) / (1000 * 60 * 60 * 24));\n            return daysUntilDue <= 0;\n        }).length}\n\nBills by Due Date:\n${Object.entries(billsByDueDate).map(([dueDate, dateBills])=>{\n            const daysUntilDue = Math.ceil((new Date(dateBills[0].rent_to) - new Date()) / (1000 * 60 * 60 * 24));\n            let dueDateLabel = `Due in ${daysUntilDue} day${daysUntilDue !== 1 ? \"s\" : \"\"}`;\n            if (daysUntilDue <= 0) {\n                dueDateLabel = `Overdue by ${Math.abs(daysUntilDue)} day${Math.abs(daysUntilDue) !== 1 ? \"s\" : \"\"}`;\n            } else if (daysUntilDue === 0) {\n                dueDateLabel = \"Due Today\";\n            }\n            return `\n${dueDate} - ${dueDateLabel}\n${dateBills.map((bill)=>`  â€¢ ${bill.tenant_name} - Room ${bill.room_number} (${bill.branch_name})\n    Amount: ${bill.status === \"partial\" ? `${formatCurrency(bill.remaining_balance || bill.total_amount)} of ${formatCurrency(bill.total_amount)}` : formatCurrency(bill.total_amount)}${bill.status === \"partial\" ? \" (Partially Paid)\" : \"\"}`).join(\"\\n\")}`;\n        }).join(\"\\n\")}\n\nRecommended Actions:\n- Contact tenants with overdue bills immediately\n- Send payment reminders to tenants with bills due today\n- Prepare collection notices for persistent overdue accounts\n- Update payment records as payments are received\n\nGenerated on: ${formatDate(new Date())} at ${new Date().toLocaleTimeString()}\n    `;\n        const mailOptions = {\n            from: \"official.jhapartment@gmail.com\" || 0,\n            to: \"official.jhapartment@gmail.com\",\n            subject: subject,\n            text: textContent,\n            html: htmlContent\n        };\n        const result = await transporter.sendMail(mailOptions);\n        return {\n            success: true,\n            messageId: result.messageId,\n            message: \"Billing reminder sent to management successfully\",\n            billsCount: bills.length\n        };\n    } catch (error) {\n        console.error(\"Billing reminder email sending error:\", error);\n        return {\n            success: false,\n            error: error.message\n        };\n    }\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n    sendBillToTenant,\n    sendReceiptToTenant,\n    testEmailConfig,\n    generateBillHTML,\n    sendWelcomeEmail,\n    sendDepositReceiptEmail,\n    sendContractExpiryNotification,\n    sendDepartureEmail,\n    sendMonthlyReport,\n    sendBillingReminderToManagement\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEtBQUttQixZQUFZLEVBQUUsSUFBSSxFQUFFdEMsZUFBZW1CLEtBQUttQixZQUFZLEVBQUUsQ0FBQyxHQUN4R3RDLGVBQWVtQixLQUFLbUIsWUFBWSxFQUNqQyxFQUFFbkIsS0FBS29CLE1BQU0sS0FBSyxZQUFZLHNCQUFzQixHQUFHLENBQUMsRUFDM0R5RixJQUFJLENBQUMsTUFBTSxDQUFDO1FBQ2QsR0FBR0EsSUFBSSxDQUFDLE1BQU07Ozs7Ozs7O2NBUUEsRUFBRXpILFdBQVcsSUFBSUcsUUFBUSxJQUFJLEVBQUUsSUFBSUEsT0FBTytKLGtCQUFrQixHQUFHO0lBQ3pFLENBQUM7UUFFRCxNQUFNekgsY0FBYztZQUNsQkMsTUFBTXRELGdDQUFzQixJQUFJO1lBQ2hDdUQsSUFBSTtZQUNKTCxTQUFTQTtZQUNUTSxNQUFNbUM7WUFDTmxDLE1BQU1OO1FBQ1I7UUFFQSxNQUFNUSxTQUFTLE1BQU1WLFlBQVlXLFFBQVEsQ0FBQ1A7UUFFMUMsT0FBTztZQUNMUSxTQUFTO1lBQ1RDLFdBQVdILE9BQU9HLFNBQVM7WUFDM0JDLFNBQVM7WUFDVGdILFlBQVlkLE1BQU12RixNQUFNO1FBQzFCO0lBQ0YsRUFBRSxPQUFPcEQsT0FBTztRQUNkMEMsUUFBUTFDLEtBQUssQ0FBQyx5Q0FBeUNBO1FBQ3ZELE9BQU87WUFDTHVDLFNBQVM7WUFDVHZDLE9BQU9BLE1BQU15QyxPQUFPO1FBQ3RCO0lBQ0Y7QUFDRjtBQUVBLGlFQUFlO0lBQ2JqQjtJQUNBcUI7SUFDQUY7SUFDQTFDO0lBQ0EwRDtJQUNBWTtJQUNBRTtJQUNBSTtJQUNBVTtJQUNBbUQ7QUFDRixDQUFDLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9qLWgtYXBhcnRtZW50LW5leHRqcy8uL3NlcnZpY2VzL2VtYWlsU2VydmljZS5qcz9hYjM5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBub2RlbWFpbGVyIGZyb20gJ25vZGVtYWlsZXInXG5cbi8vIENyZWF0ZSBlbWFpbCB0cmFuc3BvcnRlclxuY29uc3QgY3JlYXRlVHJhbnNwb3J0ZXIgPSAoKSA9PiB7XG4gIHJldHVybiBub2RlbWFpbGVyLmNyZWF0ZVRyYW5zcG9ydCh7XG4gICAgc2VydmljZTogJ2dtYWlsJywgLy8gWW91IGNhbiBjaGFuZ2UgdGhpcyB0byB5b3VyIHByZWZlcnJlZCBlbWFpbCBzZXJ2aWNlXG4gICAgYXV0aDoge1xuICAgICAgdXNlcjogcHJvY2Vzcy5lbnYuRU1BSUxfVVNFUiB8fCAnb2ZmaWNpYWwuamhhcGFydG1lbnRAZ21haWwuY29tJyxcbiAgICAgIHBhc3M6IHByb2Nlc3MuZW52LkVNQUlMX1BBU1MgfHwgJ2djbWUgb2thaiBxaXlmIHVia2knIC8vIFJlcGxhY2Ugd2l0aCB5b3VyIEdtYWlsIEFwcCBQYXNzd29yZFxuICAgIH1cbiAgfSlcbn1cblxuLy8gRm9ybWF0IGN1cnJlbmN5IGZvciBkaXNwbGF5XG5jb25zdCBmb3JtYXRDdXJyZW5jeSA9IChhbW91bnQpID0+IHtcbiAgcmV0dXJuIG5ldyBJbnRsLk51bWJlckZvcm1hdCgnZW4tUEgnLCB7XG4gICAgc3R5bGU6ICdjdXJyZW5jeScsXG4gICAgY3VycmVuY3k6ICdQSFAnXG4gIH0pLmZvcm1hdChhbW91bnQpO1xufTtcblxuLy8gRm9ybWF0IGRhdGUgZm9yIGRpc3BsYXlcbmNvbnN0IGZvcm1hdERhdGUgPSAoZGF0ZSkgPT4ge1xuICBpZiAoIWRhdGUpIHJldHVybiAnTi9BJztcbiAgXG4gIHRyeSB7XG4gICAgY29uc3QgZGF0ZU9iaiA9IG5ldyBEYXRlKGRhdGUpO1xuICAgIGlmIChpc05hTihkYXRlT2JqLmdldFRpbWUoKSkpIHJldHVybiAnTi9BJztcbiAgICBcbiAgICByZXR1cm4gbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQoJ2VuLVBIJywge1xuICAgICAgeWVhcjogJ251bWVyaWMnLFxuICAgICAgbW9udGg6ICdsb25nJyxcbiAgICAgIGRheTogJ251bWVyaWMnXG4gICAgfSkuZm9ybWF0KGRhdGVPYmopO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiAnTi9BJztcbiAgfVxufTtcblxuLy8gR2VuZXJhdGUgSFRNTCBiaWxsIHRlbXBsYXRlXG5jb25zdCBnZW5lcmF0ZUJpbGxIVE1MID0gKGJpbGwpID0+IHtcbiAgY29uc3QgZWxlY3RyaWNSZWFkaW5nID0gYmlsbC5lbGVjdHJpY19wcmVzZW50X3JlYWRpbmcgJiYgYmlsbC5lbGVjdHJpY19wcmV2aW91c19yZWFkaW5nIFxuICAgID8gYCR7YmlsbC5lbGVjdHJpY19wcmV2aW91c19yZWFkaW5nfSDihpIgJHtiaWxsLmVsZWN0cmljX3ByZXNlbnRfcmVhZGluZ31gIFxuICAgIDogJ04vQSc7XG4gIFxuICBjb25zdCBlbGVjdHJpY0NvbnN1bXB0aW9uID0gYmlsbC5lbGVjdHJpY19jb25zdW1wdGlvbiB8fCAwO1xuICBcbiAgcmV0dXJuIGBcbiAgICA8IURPQ1RZUEUgaHRtbD5cbiAgICA8aHRtbD5cbiAgICA8aGVhZD5cbiAgICAgIDxtZXRhIGNoYXJzZXQ9XCJ1dGYtOFwiPlxuICAgICAgPHN0eWxlPlxuICAgICAgICBib2R5IHsgZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmOyBtYXJnaW46IDA7IHBhZGRpbmc6IDIwcHg7IGJhY2tncm91bmQtY29sb3I6ICNmNGY0ZjQ7IH1cbiAgICAgICAgLmJpbGwtY29udGFpbmVyIHsgbWF4LXdpZHRoOiA2MDBweDsgbWFyZ2luOiAwIGF1dG87IGJhY2tncm91bmQ6IHdoaXRlOyBib3JkZXItcmFkaXVzOiA4cHg7IG92ZXJmbG93OiBoaWRkZW47IGJveC1zaGFkb3c6IDAgMnB4IDEwcHggcmdiYSgwLDAsMCwwLjEpOyB9XG4gICAgICAgIC5oZWFkZXIgeyBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjNjY3ZWVhIDAlLCAjNzY0YmEyIDEwMCUpOyBjb2xvcjogd2hpdGU7IHBhZGRpbmc6IDMwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsgfVxuICAgICAgICAuaGVhZGVyIGgxIHsgbWFyZ2luOiAwOyBmb250LXNpemU6IDI4cHg7IH1cbiAgICAgICAgLmhlYWRlciBwIHsgbWFyZ2luOiA1cHggMCAwIDA7IG9wYWNpdHk6IDAuOTsgfVxuICAgICAgICAuY29udGVudCB7IHBhZGRpbmc6IDMwcHg7IH1cbiAgICAgICAgLmJpbGwtaW5mbyB7IGJhY2tncm91bmQ6ICNmOGY5ZmE7IHBhZGRpbmc6IDIwcHg7IGJvcmRlci1yYWRpdXM6IDhweDsgbWFyZ2luLWJvdHRvbTogMjVweDsgfVxuICAgICAgICAuYmlsbC1pbmZvIGgzIHsgbWFyZ2luOiAwIDAgMTVweCAwOyBjb2xvcjogIzMzMzsgfVxuICAgICAgICAuaW5mby1yb3cgeyBkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IG1hcmdpbi1ib3R0b206IDEwcHg7IH1cbiAgICAgICAgLmluZm8tbGFiZWwgeyBmb250LXdlaWdodDogYm9sZDsgY29sb3I6ICM2NjY7IH1cbiAgICAgICAgLmluZm8tdmFsdWUgeyBjb2xvcjogIzMzMzsgfVxuICAgICAgICAuY2hhcmdlcy1zZWN0aW9uIHsgbWFyZ2luLWJvdHRvbTogMjVweDsgfVxuICAgICAgICAuY2hhcmdlcy1zZWN0aW9uIGgzIHsgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICM2NjdlZWE7IHBhZGRpbmctYm90dG9tOiAxMHB4OyBtYXJnaW4tYm90dG9tOiAyMHB4OyBjb2xvcjogIzMzMzsgfVxuICAgICAgICAuY2hhcmdlLWl0ZW0geyBkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IHBhZGRpbmc6IDE1cHg7IG1hcmdpbi1ib3R0b206IDEwcHg7IGJvcmRlci1yYWRpdXM6IDZweDsgfVxuICAgICAgICAuY2hhcmdlLXJlbnQgeyBiYWNrZ3JvdW5kOiAjZTNmMmZkOyBib3JkZXItbGVmdDogNHB4IHNvbGlkICMyMTk2ZjM7IH1cbiAgICAgICAgLmNoYXJnZS1lbGVjdHJpYyB7IGJhY2tncm91bmQ6ICNmZmYzZTA7IGJvcmRlci1sZWZ0OiA0cHggc29saWQgI2ZmOTgwMDsgfVxuICAgICAgICAuY2hhcmdlLXdhdGVyIHsgYmFja2dyb3VuZDogI2U4ZjVlODsgYm9yZGVyLWxlZnQ6IDRweCBzb2xpZCAjNGNhZjUwOyB9XG4gICAgICAgIC50b3RhbC1zZWN0aW9uIHsgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzY2N2VlYSAwJSwgIzc2NGJhMiAxMDAlKTsgY29sb3I6IHdoaXRlOyBwYWRkaW5nOiAyMHB4OyBib3JkZXItcmFkaXVzOiA4cHg7IHRleHQtYWxpZ246IGNlbnRlcjsgfVxuICAgICAgICAudG90YWwtYW1vdW50IHsgZm9udC1zaXplOiAzMnB4OyBmb250LXdlaWdodDogYm9sZDsgbWFyZ2luOiAxMHB4IDA7IH1cbiAgICAgICAgLmZvb3RlciB7IHBhZGRpbmc6IDIwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsgY29sb3I6ICM2NjY7IGJvcmRlci10b3A6IDFweCBzb2xpZCAjZWVlOyB9XG4gICAgICAgIC5wYXltZW50LW5vdGUgeyBiYWNrZ3JvdW5kOiAjZjBmOGZmOyBib3JkZXI6IDFweCBzb2xpZCAjYjNkOWZmOyBwYWRkaW5nOiAxNXB4OyBib3JkZXItcmFkaXVzOiA2cHg7IG1hcmdpbjogMjBweCAwOyB9XG4gICAgICA8L3N0eWxlPlxuICAgIDwvaGVhZD5cbiAgICA8Ym9keT5cbiAgICAgIDxkaXYgY2xhc3M9XCJiaWxsLWNvbnRhaW5lclwiPlxuICAgICAgICA8IS0tIEhlYWRlciAtLT5cbiAgICAgICAgPGRpdiBjbGFzcz1cImhlYWRlclwiPlxuICAgICAgICAgIDxoMT4ke2JpbGwuYnJhbmNoX25hbWUgfHwgJ0pIIEFQQVJUTUVOVCd9PC9oMT5cbiAgICAgICAgICA8cD4ke2JpbGwuYnJhbmNoX2FkZHJlc3MgfHwgJ1BhdGluLWF5LCBQcm9zcGVyaWRhZCwgQWd1c2FuIGRlbCBTdXInfTwvcD5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgPCEtLSBDb250ZW50IC0tPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiY29udGVudFwiPlxuICAgICAgICAgIDwhLS0gQmlsbCBJbmZvcm1hdGlvbiAtLT5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiYmlsbC1pbmZvXCI+XG4gICAgICAgICAgICA8aDM+QmlsbCBJbmZvcm1hdGlvbjwvaDM+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaW5mby1yb3dcIj5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJpbmZvLWxhYmVsXCI+VGVuYW50IE5hbWU6PC9zcGFuPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImluZm8tdmFsdWVcIj4ke2JpbGwudGVuYW50X25hbWV9PC9zcGFuPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaW5mby1yb3dcIj5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJpbmZvLWxhYmVsXCI+Um9vbSBOdW1iZXI6PC9zcGFuPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImluZm8tdmFsdWVcIj4ke2JpbGwucm9vbV9udW1iZXJ9PC9zcGFuPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaW5mby1yb3dcIj5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJpbmZvLWxhYmVsXCI+QmlsbCBQZXJpb2Q6PC9zcGFuPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImluZm8tdmFsdWVcIj4ke2Zvcm1hdERhdGUoYmlsbC5yZW50X2Zyb20pfSAtICR7Zm9ybWF0RGF0ZShiaWxsLnJlbnRfdG8pfTwvc3Bhbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImluZm8tcm93XCI+XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiaW5mby1sYWJlbFwiPkJpbGwgRGF0ZTo8L3NwYW4+XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiaW5mby12YWx1ZVwiPiR7Zm9ybWF0RGF0ZShiaWxsLmJpbGxfZGF0ZSl9PC9zcGFuPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaW5mby1yb3dcIj5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJpbmZvLWxhYmVsXCI+RHVlIERhdGU6PC9zcGFuPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImluZm8tdmFsdWVcIj4ke2Zvcm1hdERhdGUoYmlsbC5yZW50X3RvKX08L3NwYW4+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIDwhLS0gQ2hhcmdlcyBCcmVha2Rvd24gLS0+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImNoYXJnZXMtc2VjdGlvblwiPlxuICAgICAgICAgICAgPGgzPkNoYXJnZXMgQnJlYWtkb3duPC9oMz5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgPCEtLSBSZW50IC0tPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNoYXJnZS1pdGVtIGNoYXJnZS1yZW50XCI+XG4gICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgPHN0cm9uZz5Nb250aGx5IFJlbnQ8L3N0cm9uZz5cbiAgICAgICAgICAgICAgICA8YnI+PHNtYWxsPlBlcmlvZDogJHtmb3JtYXREYXRlKGJpbGwucmVudF9mcm9tKX0gLSAke2Zvcm1hdERhdGUoYmlsbC5yZW50X3RvKX08L3NtYWxsPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdiBzdHlsZT1cInRleHQtYWxpZ246IHJpZ2h0O1wiPlxuICAgICAgICAgICAgICAgIDxzdHJvbmc+JHtmb3JtYXRDdXJyZW5jeShiaWxsLnJlbnRfYW1vdW50KX08L3N0cm9uZz5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgPCEtLSBFbGVjdHJpYyAtLT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjaGFyZ2UtaXRlbSBjaGFyZ2UtZWxlY3RyaWNcIj5cbiAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICA8c3Ryb25nPkVsZWN0cmljaXR5PC9zdHJvbmc+XG4gICAgICAgICAgICAgICAgPGJyPjxzbWFsbD5SZWFkaW5nOiAke2VsZWN0cmljUmVhZGluZ30gKCR7ZWxlY3RyaWNDb25zdW1wdGlvbn0ga1doKTwvc21hbGw+XG4gICAgICAgICAgICAgICAgPGJyPjxzbWFsbD5SYXRlOiDigrEke2JpbGwuZWxlY3RyaWNfcmF0ZV9wZXJfa3dofS9rV2g8L3NtYWxsPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdiBzdHlsZT1cInRleHQtYWxpZ246IHJpZ2h0O1wiPlxuICAgICAgICAgICAgICAgIDxzdHJvbmc+JHtmb3JtYXRDdXJyZW5jeShiaWxsLmVsZWN0cmljX2Ftb3VudCB8fCAwKX08L3N0cm9uZz5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgPCEtLSBXYXRlciAtLT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjaGFyZ2UtaXRlbSBjaGFyZ2Utd2F0ZXJcIj5cbiAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICA8c3Ryb25nPldhdGVyPC9zdHJvbmc+XG4gICAgICAgICAgICAgICAgPGJyPjxzbWFsbD5GaXhlZCBtb250aGx5IGNoYXJnZTwvc21hbGw+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IHN0eWxlPVwidGV4dC1hbGlnbjogcmlnaHQ7XCI+XG4gICAgICAgICAgICAgICAgPHN0cm9uZz4ke2Zvcm1hdEN1cnJlbmN5KGJpbGwud2F0ZXJfYW1vdW50KX08L3N0cm9uZz5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgJHtiaWxsLmV4dHJhX2ZlZV9hbW91bnQgPiAwID8gYFxuICAgICAgICAgICAgPCEtLSBFeHRyYSBGZWVzIC0tPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNoYXJnZS1pdGVtXCIgc3R5bGU9XCJiYWNrZ3JvdW5kOiAjZjNlNWY1OyBib3JkZXItbGVmdDogNHB4IHNvbGlkICM5YzI3YjA7XCI+XG4gICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgPHN0cm9uZz5FeHRyYSBGZWVzPC9zdHJvbmc+XG4gICAgICAgICAgICAgICAgPGJyPjxzbWFsbD4ke2JpbGwuZXh0cmFfZmVlX2Rlc2NyaXB0aW9uIHx8ICdBZGRpdGlvbmFsIGNoYXJnZXMnfTwvc21hbGw+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IHN0eWxlPVwidGV4dC1hbGlnbjogcmlnaHQ7XCI+XG4gICAgICAgICAgICAgICAgPHN0cm9uZz4ke2Zvcm1hdEN1cnJlbmN5KGJpbGwuZXh0cmFfZmVlX2Ftb3VudCl9PC9zdHJvbmc+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBgIDogJyd9XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICA8IS0tIFRvdGFsIC0tPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0b3RhbC1zZWN0aW9uXCI+XG4gICAgICAgICAgICA8ZGl2PlRvdGFsIEFtb3VudCBEdWU8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0b3RhbC1hbW91bnRcIj4ke2Zvcm1hdEN1cnJlbmN5KGJpbGwudG90YWxfYW1vdW50KX08L2Rpdj5cbiAgICAgICAgICAgIDxkaXY+U3RhdHVzOiAke2JpbGwuc3RhdHVzLnRvVXBwZXJDYXNlKCl9PC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICA8IS0tIFBheW1lbnQgTm90ZSAtLT5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwicGF5bWVudC1ub3RlXCI+XG4gICAgICAgICAgICA8c3Ryb25nPlBheW1lbnQgSW5zdHJ1Y3Rpb25zOjwvc3Ryb25nPjxicj5cbiAgICAgICAgICAgIFBsZWFzZSBwYXkgeW91ciBiaWxsIG9uIG9yIGJlZm9yZSB0aGUgZHVlIGRhdGUgdG8gYXZvaWQgYW55IGxhdGUgZmVlcy4gXG4gICAgICAgICAgICBDb250YWN0IHRoZSBtYW5hZ2VtZW50IG9mZmljZSBmb3IgcGF5bWVudCBtZXRob2RzIGFuZCBhc3Npc3RhbmNlLlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICA8IS0tIEZvb3RlciAtLT5cbiAgICAgICAgPGRpdiBjbGFzcz1cImZvb3RlclwiPlxuICAgICAgICAgIDxwPlRoaXMgaXMgYW4gYXV0b21hdGljYWxseSBnZW5lcmF0ZWQgYmlsbC4gRm9yIHF1ZXN0aW9ucyBvciBjb25jZXJucywgcGxlYXNlIGNvbnRhY3QgdGhlIG1hbmFnZW1lbnQgb2ZmaWNlLjwvcD5cbiAgICAgICAgICA8cD48c3Ryb25nPkdlbmVyYXRlZCBvbjo8L3N0cm9uZz4gJHtmb3JtYXREYXRlKG5ldyBEYXRlKCkpfTwvcD5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2JvZHk+XG4gICAgPC9odG1sPlxuICBgO1xufTtcblxuLy8gU2VuZCBiaWxsIHRvIHRlbmFudCB2aWEgZW1haWxcbmNvbnN0IHNlbmRCaWxsVG9UZW5hbnQgPSBhc3luYyAoYmlsbCwgcmVjaXBpZW50RW1haWwsIGN1c3RvbU1lc3NhZ2UgPSAnJykgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHRyYW5zcG9ydGVyID0gY3JlYXRlVHJhbnNwb3J0ZXIoKTtcbiAgICBcbiAgICBjb25zdCBzdWJqZWN0ID0gYE1vbnRobHkgQmlsbCAtIFJvb20gJHtiaWxsLnJvb21fbnVtYmVyfSAtICR7Zm9ybWF0RGF0ZShiaWxsLmJpbGxfZGF0ZSl9YDtcbiAgICBjb25zdCBodG1sQ29udGVudCA9IGdlbmVyYXRlQmlsbEhUTUwoYmlsbCk7XG4gICAgXG4gICAgbGV0IHRleHRNZXNzYWdlID0gYFxuRGVhciAke2JpbGwudGVuYW50X25hbWV9LFxuXG5Zb3VyIG1vbnRobHkgYmlsbCBmb3IgUm9vbSAke2JpbGwucm9vbV9udW1iZXJ9IGlzIHJlYWR5LlxuXG5CaWxsIFBlcmlvZDogJHtmb3JtYXREYXRlKGJpbGwucmVudF9mcm9tKX0gLSAke2Zvcm1hdERhdGUoYmlsbC5yZW50X3RvKX1cblRvdGFsIEFtb3VudDogJHtmb3JtYXRDdXJyZW5jeShiaWxsLnRvdGFsX2Ftb3VudCl9XG5EdWUgRGF0ZTogJHtmb3JtYXREYXRlKGJpbGwucmVudF90byl9XG5cbkJyZWFrZG93bjpcbi0gUmVudDogJHtmb3JtYXRDdXJyZW5jeShiaWxsLnJlbnRfYW1vdW50KX1cbi0gRWxlY3RyaWNpdHk6ICR7Zm9ybWF0Q3VycmVuY3koYmlsbC5lbGVjdHJpY19hbW91bnQgfHwgMCl9XG4tIFdhdGVyOiAke2Zvcm1hdEN1cnJlbmN5KGJpbGwud2F0ZXJfYW1vdW50KX0ke2JpbGwuZXh0cmFfZmVlX2Ftb3VudCA+IDAgPyBgXG4tIEV4dHJhIEZlZXM6ICR7Zm9ybWF0Q3VycmVuY3koYmlsbC5leHRyYV9mZWVfYW1vdW50KX0gKCR7YmlsbC5leHRyYV9mZWVfZGVzY3JpcHRpb24gfHwgJ0FkZGl0aW9uYWwgY2hhcmdlcyd9KWAgOiAnJ31cblxuUGxlYXNlIHBheSBvbiBvciBiZWZvcmUgdGhlIGR1ZSBkYXRlLlxuXG5UaGFuayB5b3UsXG4ke2JpbGwuYnJhbmNoX25hbWUgfHwgJ0pIIEFwYXJ0bWVudCd9IE1hbmFnZW1lbnRcbiAgICBgO1xuXG4gICAgaWYgKGN1c3RvbU1lc3NhZ2UpIHtcbiAgICAgIHRleHRNZXNzYWdlID0gYCR7Y3VzdG9tTWVzc2FnZX1cXG5cXG4ke3RleHRNZXNzYWdlfWA7XG4gICAgfVxuXG4gICAgY29uc3QgbWFpbE9wdGlvbnMgPSB7XG4gICAgICBmcm9tOiBwcm9jZXNzLmVudi5FTUFJTF9VU0VSIHx8ICdub3JlcGx5QGpoYXBhcnRtZW50LmNvbScsXG4gICAgICB0bzogcmVjaXBpZW50RW1haWwsXG4gICAgICBzdWJqZWN0OiBzdWJqZWN0LFxuICAgICAgdGV4dDogdGV4dE1lc3NhZ2UsXG4gICAgICBodG1sOiBodG1sQ29udGVudCxcbiAgICAgIGF0dGFjaG1lbnRzOiBbXSAvLyBDb3VsZCBhZGQgUERGIGF0dGFjaG1lbnQgaW4gdGhlIGZ1dHVyZVxuICAgIH07XG5cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0cmFuc3BvcnRlci5zZW5kTWFpbChtYWlsT3B0aW9ucyk7XG4gICAgXG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBtZXNzYWdlSWQ6IHJlc3VsdC5tZXNzYWdlSWQsXG4gICAgICBtZXNzYWdlOiAnRW1haWwgc2VudCBzdWNjZXNzZnVsbHknXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFbWFpbCBzZW5kaW5nIGVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBlcnJvcjogZXJyb3IubWVzc2FnZVxuICAgIH07XG4gIH1cbn07XG5cbi8vIFRlc3QgZW1haWwgY29uZmlndXJhdGlvblxuY29uc3QgdGVzdEVtYWlsQ29uZmlnID0gYXN5bmMgKCkgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHRyYW5zcG9ydGVyID0gY3JlYXRlVHJhbnNwb3J0ZXIoKTtcbiAgICBhd2FpdCB0cmFuc3BvcnRlci52ZXJpZnkoKTtcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBtZXNzYWdlOiAnRW1haWwgY29uZmlndXJhdGlvbiBpcyB2YWxpZCcgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcbiAgfVxufTtcblxuLy8gU2VuZCByZWNlaXB0IHRvIHRlbmFudCB2aWEgZW1haWxcbmNvbnN0IHNlbmRSZWNlaXB0VG9UZW5hbnQgPSBhc3luYyAoYmlsbCwgcGF5bWVudHMsIHJlY2lwaWVudEVtYWlsLCBwZGZCdWZmZXIpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB0cmFuc3BvcnRlciA9IGNyZWF0ZVRyYW5zcG9ydGVyKCk7XG4gICAgXG4gICAgY29uc3Qgc3ViamVjdCA9IGBQYXltZW50IFJlY2VpcHQgLSBSb29tICR7YmlsbC5yb29tX251bWJlcn0gLSAke2Zvcm1hdERhdGUobmV3IERhdGUoKSl9YDtcbiAgICBcbiAgICBsZXQgdGV4dE1lc3NhZ2UgPSBgXG5EZWFyICR7YmlsbC50ZW5hbnRfbmFtZX0sXG5cblRoYW5rIHlvdSBmb3IgeW91ciBwYXltZW50ISBQbGVhc2UgZmluZCB5b3VyIG9mZmljaWFsIHJlY2VpcHQgYXR0YWNoZWQuXG5cblJlY2VpcHQgRGV0YWlsczpcbi0gQmlsbCBQZXJpb2Q6ICR7Zm9ybWF0RGF0ZShiaWxsLnJlbnRfZnJvbSl9IC0gJHtmb3JtYXREYXRlKGJpbGwucmVudF90byl9XG4tIFRvdGFsIEFtb3VudDogJHtmb3JtYXRDdXJyZW5jeShiaWxsLnRvdGFsX2Ftb3VudCl9XG4tIEFtb3VudCBQYWlkOiAke2Zvcm1hdEN1cnJlbmN5KHBheW1lbnRzLnJlZHVjZSgoc3VtLCBwKSA9PiBzdW0gKyBwYXJzZUZsb2F0KHAuYW1vdW50KSwgMCkpfVxuLSBQYXltZW50IERhdGU6ICR7Zm9ybWF0RGF0ZShwYXltZW50c1twYXltZW50cy5sZW5ndGggLSAxXS5wYXltZW50X2RhdGUpfVxuLSBTdGF0dXM6IEZVTExZIFBBSURcblxuVGhpcyByZWNlaXB0IHNlcnZlcyBhcyBvZmZpY2lhbCBwcm9vZiBvZiBwYXltZW50LlxuXG5UaGFuayB5b3UgZm9yIGNob29zaW5nICR7YmlsbC5icmFuY2hfbmFtZSB8fCAnSiZIIEFwYXJ0bWVudCd9IVxuXG5CZXN0IHJlZ2FyZHMsXG4ke2JpbGwuYnJhbmNoX25hbWUgfHwgJ0omSCBBcGFydG1lbnQnfSBNYW5hZ2VtZW50XG4gICAgYDtcblxuICAgIGNvbnN0IG1haWxPcHRpb25zID0ge1xuICAgICAgZnJvbTogcHJvY2Vzcy5lbnYuRU1BSUxfVVNFUiB8fCAnbm9yZXBseUBqaGFwYXJ0bWVudC5jb20nLFxuICAgICAgdG86IHJlY2lwaWVudEVtYWlsLFxuICAgICAgc3ViamVjdDogc3ViamVjdCxcbiAgICAgIHRleHQ6IHRleHRNZXNzYWdlLFxuICAgICAgYXR0YWNobWVudHM6IFtcbiAgICAgICAge1xuICAgICAgICAgIGZpbGVuYW1lOiBgcmVjZWlwdC0ke2JpbGwuaWR9LSR7RGF0ZS5ub3coKX0ucGRmYCxcbiAgICAgICAgICBjb250ZW50OiBwZGZCdWZmZXIsXG4gICAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9wZGYnXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9O1xuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdHJhbnNwb3J0ZXIuc2VuZE1haWwobWFpbE9wdGlvbnMpO1xuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgbWVzc2FnZTogJ1JlY2VpcHQgc2VudCBzdWNjZXNzZnVsbHkgdmlhIGVtYWlsJyxcbiAgICAgIG1lc3NhZ2VJZDogcmVzdWx0Lm1lc3NhZ2VJZFxuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignUmVjZWlwdCBlbWFpbCBzZW5kaW5nIGVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBlcnJvcjogZXJyb3IubWVzc2FnZVxuICAgIH07XG4gIH1cbn07XG5cbi8vIFNlbmQgd2VsY29tZSBlbWFpbCB0byBuZXcgdGVuYW50XG5jb25zdCBzZW5kV2VsY29tZUVtYWlsID0gYXN5bmMgKHRlbmFudCwgcm9vbUluZm8pID0+IHtcbiAgdHJ5IHtcbiAgICAvLyBFbWFpbHMgYXJlIG5vdyBlbmFibGVkIC0gYXR0ZW1wdGluZyB0byBzZW5kIHdlbGNvbWUgZW1haWxcbiAgICBcbiAgICBjb25zdCB0cmFuc3BvcnRlciA9IGNyZWF0ZVRyYW5zcG9ydGVyKCk7XG4gICAgXG4gICAgY29uc3Qgc3ViamVjdCA9IGBXZWxjb21lIHRvIEomSCBBcGFydG1lbnQhIC0gUm9vbSAke3Jvb21JbmZvLnJvb21fbnVtYmVyfWA7XG4gICAgXG4gICAgY29uc3QgaHRtbENvbnRlbnQgPSBgXG4gICAgICA8IURPQ1RZUEUgaHRtbD5cbiAgICAgIDxodG1sPlxuICAgICAgPGhlYWQ+XG4gICAgICAgIDxtZXRhIGNoYXJzZXQ9XCJ1dGYtOFwiPlxuICAgICAgICA8c3R5bGU+XG4gICAgICAgICAgYm9keSB7IGZvbnQtZmFtaWx5OiBBcmlhbCwgc2Fucy1zZXJpZjsgbWFyZ2luOiAwOyBwYWRkaW5nOiAyMHB4OyBiYWNrZ3JvdW5kLWNvbG9yOiAjZjRmNGY0OyB9XG4gICAgICAgICAgLmVtYWlsLWNvbnRhaW5lciB7IG1heC13aWR0aDogNjAwcHg7IG1hcmdpbjogMCBhdXRvOyBiYWNrZ3JvdW5kOiB3aGl0ZTsgYm9yZGVyLXJhZGl1czogOHB4OyBvdmVyZmxvdzogaGlkZGVuOyBib3gtc2hhZG93OiAwIDJweCAxMHB4IHJnYmEoMCwwLDAsMC4xKTsgfVxuICAgICAgICAgIC5oZWFkZXIgeyBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjNjY3ZWVhIDAlLCAjNzY0YmEyIDEwMCUpOyBjb2xvcjogd2hpdGU7IHBhZGRpbmc6IDMwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsgfVxuICAgICAgICAgIC5oZWFkZXIgaDEgeyBtYXJnaW46IDA7IGZvbnQtc2l6ZTogMjhweDsgfVxuICAgICAgICAgIC5jb250ZW50IHsgcGFkZGluZzogMzBweDsgfVxuICAgICAgICAgIC53ZWxjb21lLXNlY3Rpb24geyBiYWNrZ3JvdW5kOiAjZjhmOWZhOyBwYWRkaW5nOiAyMHB4OyBib3JkZXItcmFkaXVzOiA4cHg7IG1hcmdpbjogMjBweCAwOyB9XG4gICAgICAgICAgLmluZm8tYm94IHsgYmFja2dyb3VuZDogI2UzZjJmZDsgYm9yZGVyLWxlZnQ6IDRweCBzb2xpZCAjMjE5NmYzOyBwYWRkaW5nOiAxNXB4OyBtYXJnaW46IDE1cHggMDsgfVxuICAgICAgICAgIC5kZXBvc2l0LWluZm8geyBiYWNrZ3JvdW5kOiAjZmZmM2UwOyBib3JkZXItbGVmdDogNHB4IHNvbGlkICNmZjk4MDA7IHBhZGRpbmc6IDE1cHg7IG1hcmdpbjogMTVweCAwOyB9XG4gICAgICAgICAgLmNvbnRyYWN0LWluZm8geyBiYWNrZ3JvdW5kOiAjZThmNWU4OyBib3JkZXItbGVmdDogNHB4IHNvbGlkICM0Y2FmNTA7IHBhZGRpbmc6IDE1cHg7IG1hcmdpbjogMTVweCAwOyB9XG4gICAgICAgICAgLmZvb3RlciB7IHBhZGRpbmc6IDIwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsgY29sb3I6ICM2NjY7IGJvcmRlci10b3A6IDFweCBzb2xpZCAjZWVlOyB9XG4gICAgICAgIDwvc3R5bGU+XG4gICAgICA8L2hlYWQ+XG4gICAgICA8Ym9keT5cbiAgICAgICAgPGRpdiBjbGFzcz1cImVtYWlsLWNvbnRhaW5lclwiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJoZWFkZXJcIj5cbiAgICAgICAgICAgIDxoMT7wn4+gIFdlbGNvbWUgdG8gSiZIIEFwYXJ0bWVudCE8L2gxPlxuICAgICAgICAgICAgPHA+WW91ciBuZXcgaG9tZSBhd2FpdHMgeW91PC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIFxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250ZW50XCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwid2VsY29tZS1zZWN0aW9uXCI+XG4gICAgICAgICAgICAgIDxoMj5EZWFyICR7dGVuYW50Lm5hbWV9LDwvaDI+XG4gICAgICAgICAgICAgIDxwPldlIGFyZSB0aHJpbGxlZCB0byB3ZWxjb21lIHlvdSB0byBKJkggQXBhcnRtZW50ISBUaGFuayB5b3UgZm9yIGNob29zaW5nIHVzIGFzIHlvdXIgbmV3IGhvbWUuIFdlJ3JlIGNvbW1pdHRlZCB0byBwcm92aWRpbmcgeW91IHdpdGggYSBjb21mb3J0YWJsZSBhbmQgcGxlYXNhbnQgbGl2aW5nIGV4cGVyaWVuY2UuPC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbmZvLWJveFwiPlxuICAgICAgICAgICAgICA8aDM+8J+TiyBZb3VyIFRlbmFuY3kgRGV0YWlsczwvaDM+XG4gICAgICAgICAgICAgIDxwPjxzdHJvbmc+Um9vbSBOdW1iZXI6PC9zdHJvbmc+ICR7cm9vbUluZm8ucm9vbV9udW1iZXJ9PC9wPlxuICAgICAgICAgICAgICA8cD48c3Ryb25nPk1vbnRobHkgUmVudDo8L3N0cm9uZz4gJHtmb3JtYXRDdXJyZW5jeShyb29tSW5mby5tb250aGx5X3JlbnQpfTwvcD5cbiAgICAgICAgICAgICAgPHA+PHN0cm9uZz5Db250cmFjdCBTdGFydDo8L3N0cm9uZz4gJHtmb3JtYXREYXRlKHRlbmFudC5jb250cmFjdF9zdGFydF9kYXRlKX08L3A+XG4gICAgICAgICAgICAgIDxwPjxzdHJvbmc+Q29udHJhY3QgRW5kOjwvc3Ryb25nPiAke2Zvcm1hdERhdGUodGVuYW50LmNvbnRyYWN0X2VuZF9kYXRlKX08L3A+XG4gICAgICAgICAgICAgIDxwPjxzdHJvbmc+Q29udHJhY3QgRHVyYXRpb246PC9zdHJvbmc+ICR7dGVuYW50LmNvbnRyYWN0X2R1cmF0aW9uX21vbnRoc30gbW9udGhzPC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZXBvc2l0LWluZm9cIj5cbiAgICAgICAgICAgICAgPGgzPvCfkrAgRGVwb3NpdCBJbmZvcm1hdGlvbjwvaDM+XG4gICAgICAgICAgICAgIDxwPjxzdHJvbmc+QWR2YW5jZSBQYXltZW50Ojwvc3Ryb25nPiAke2Zvcm1hdEN1cnJlbmN5KHRlbmFudC5hZHZhbmNlX3BheW1lbnQpfTwvcD5cbiAgICAgICAgICAgICAgPHA+PHN0cm9uZz5TZWN1cml0eSBEZXBvc2l0Ojwvc3Ryb25nPiAke2Zvcm1hdEN1cnJlbmN5KHRlbmFudC5zZWN1cml0eV9kZXBvc2l0KX08L3A+XG4gICAgICAgICAgICAgIDxwPjxzdHJvbmc+VG90YWwgUmVxdWlyZWQ6PC9zdHJvbmc+ICR7Zm9ybWF0Q3VycmVuY3kocGFyc2VGbG9hdCh0ZW5hbnQuYWR2YW5jZV9wYXltZW50KSArIHBhcnNlRmxvYXQodGVuYW50LnNlY3VyaXR5X2RlcG9zaXQpKX08L3A+XG4gICAgICAgICAgICAgIDxwPjxlbT5BIHNlcGFyYXRlIGRlcG9zaXQgcmVjZWlwdCB3aWxsIGJlIHNlbnQgdG8geW91IG9uY2UgcGF5bWVudCBpcyBjb25maXJtZWQuPC9lbT48L3A+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRyYWN0LWluZm9cIj5cbiAgICAgICAgICAgICAgPGgzPvCfk4sgSW1wb3J0YW50IEluZm9ybWF0aW9uPC9oMz5cbiAgICAgICAgICAgICAgPHVsPlxuICAgICAgICAgICAgICAgIDxsaT5Zb3VyIHJlbnQgaXMgZHVlIG1vbnRobHkgaW4gYWR2YW5jZTwvbGk+XG4gICAgICAgICAgICAgICAgPGxpPldhdGVyIGFuZCBlbGVjdHJpY2l0eSBiaWxscyB3aWxsIGJlIGNhbGN1bGF0ZWQgYmFzZWQgb24gdXNhZ2U8L2xpPlxuICAgICAgICAgICAgICAgIDxsaT5XZSdsbCBub3RpZnkgeW91IDEgbW9udGggYmVmb3JlIHlvdXIgY29udHJhY3QgZXhwaXJlczwvbGk+XG4gICAgICAgICAgICAgICAgPGxpPlBsZWFzZSBrZWVwIHlvdXIgZGVwb3NpdCByZWNlaXB0cyBmb3IgZnV0dXJlIHJlZmVyZW5jZTwvbGk+XG4gICAgICAgICAgICAgICAgPGxpPkNvbnRhY3QgbWFuYWdlbWVudCBmb3IgYW55IG1haW50ZW5hbmNlIHJlcXVlc3RzPC9saT5cbiAgICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwid2VsY29tZS1zZWN0aW9uXCI+XG4gICAgICAgICAgICAgIDxoMz7wn5OeIENvbnRhY3QgSW5mb3JtYXRpb248L2gzPlxuICAgICAgICAgICAgICA8cD48c3Ryb25nPk1hbmFnZW1lbnQgT2ZmaWNlOjwvc3Ryb25nPiBBdmFpbGFibGUgZHVyaW5nIGJ1c2luZXNzIGhvdXJzPC9wPlxuICAgICAgICAgICAgICA8cD48c3Ryb25nPkVtYWlsOjwvc3Ryb25nPiBvZmZpY2lhbC5qaGFwYXJ0bWVudEBnbWFpbC5jb208L3A+XG4gICAgICAgICAgICAgIDxwPjxzdHJvbmc+QWRkcmVzczo8L3N0cm9uZz4gUGF0aW4tYXksIFByb3NwZXJpZGFkLCBBZ3VzYW4gRGVsIFN1cjwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgXG4gICAgICAgICAgICA8ZGl2IHN0eWxlPVwidGV4dC1hbGlnbjogY2VudGVyOyBtYXJnaW46IDMwcHggMDtcIj5cbiAgICAgICAgICAgICAgPHAgc3R5bGU9XCJmb250LXNpemU6IDE4cHg7IGNvbG9yOiAjNjY3ZWVhO1wiPjxzdHJvbmc+V2VsY29tZSB0byB5b3VyIG5ldyBob21lISDwn4+hPC9zdHJvbmc+PC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImZvb3RlclwiPlxuICAgICAgICAgICAgPHA+VGhpcyBlbWFpbCB3YXMgc2VudCBhdXRvbWF0aWNhbGx5IGJ5IEomSCBBcGFydG1lbnQgTWFuYWdlbWVudCBTeXN0ZW08L3A+XG4gICAgICAgICAgICA8cD5JZiB5b3UgaGF2ZSBhbnkgcXVlc3Rpb25zLCBwbGVhc2UgY29udGFjdCBvdXIgbWFuYWdlbWVudCBvZmZpY2U8L3A+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9ib2R5PlxuICAgICAgPC9odG1sPlxuICAgIGA7XG4gICAgXG4gICAgY29uc3QgdGV4dENvbnRlbnQgPSBgXG5EZWFyICR7dGVuYW50Lm5hbWV9LFxuXG5XZWxjb21lIHRvIEomSCBBcGFydG1lbnQhIFxuXG5Zb3VyIFRlbmFuY3kgRGV0YWlsczpcbi0gUm9vbSBOdW1iZXI6ICR7cm9vbUluZm8ucm9vbV9udW1iZXJ9XG4tIE1vbnRobHkgUmVudDogJHtmb3JtYXRDdXJyZW5jeShyb29tSW5mby5tb250aGx5X3JlbnQpfVxuLSBDb250cmFjdCBQZXJpb2Q6ICR7Zm9ybWF0RGF0ZSh0ZW5hbnQuY29udHJhY3Rfc3RhcnRfZGF0ZSl9IHRvICR7Zm9ybWF0RGF0ZSh0ZW5hbnQuY29udHJhY3RfZW5kX2RhdGUpfVxuLSBEdXJhdGlvbjogJHt0ZW5hbnQuY29udHJhY3RfZHVyYXRpb25fbW9udGhzfSBtb250aHNcblxuRGVwb3NpdCBJbmZvcm1hdGlvbjpcbi0gQWR2YW5jZSBQYXltZW50OiAke2Zvcm1hdEN1cnJlbmN5KHRlbmFudC5hZHZhbmNlX3BheW1lbnQpfVxuLSBTZWN1cml0eSBEZXBvc2l0OiAke2Zvcm1hdEN1cnJlbmN5KHRlbmFudC5zZWN1cml0eV9kZXBvc2l0KX1cbi0gVG90YWwgUmVxdWlyZWQ6ICR7Zm9ybWF0Q3VycmVuY3kocGFyc2VGbG9hdCh0ZW5hbnQuYWR2YW5jZV9wYXltZW50KSArIHBhcnNlRmxvYXQodGVuYW50LnNlY3VyaXR5X2RlcG9zaXQpKX1cblxuSW1wb3J0YW50IE5vdGVzOlxuLSBNb250aGx5IHJlbnQgaXMgZHVlIGluIGFkdmFuY2Vcbi0gV2UnbGwgbm90aWZ5IHlvdSAxIG1vbnRoIGJlZm9yZSBjb250cmFjdCBleHBpcnlcbi0gS2VlcCBkZXBvc2l0IHJlY2VpcHRzIGZvciByZWZlcmVuY2Vcbi0gQ29udGFjdCBtYW5hZ2VtZW50IGZvciBtYWludGVuYW5jZSByZXF1ZXN0c1xuXG5XZWxjb21lIHRvIHlvdXIgbmV3IGhvbWUhXG5cbkJlc3QgcmVnYXJkcyxcbkomSCBBcGFydG1lbnQgTWFuYWdlbWVudFxuICAgIGA7XG5cbiAgICBjb25zdCBtYWlsT3B0aW9ucyA9IHtcbiAgICAgIGZyb206IHByb2Nlc3MuZW52LkVNQUlMX1VTRVIgfHwgJ29mZmljaWFsLmpoYXBhcnRtZW50QGdtYWlsLmNvbScsXG4gICAgICB0bzogdGVuYW50LmVtYWlsLFxuICAgICAgc3ViamVjdDogc3ViamVjdCxcbiAgICAgIHRleHQ6IHRleHRDb250ZW50LFxuICAgICAgaHRtbDogaHRtbENvbnRlbnRcbiAgICB9O1xuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdHJhbnNwb3J0ZXIuc2VuZE1haWwobWFpbE9wdGlvbnMpO1xuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgbWVzc2FnZUlkOiByZXN1bHQubWVzc2FnZUlkLFxuICAgICAgbWVzc2FnZTogJ1dlbGNvbWUgZW1haWwgc2VudCBzdWNjZXNzZnVsbHknXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdXZWxjb21lIGVtYWlsIHNlbmRpbmcgZXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlXG4gICAgfTtcbiAgfVxufTtcblxuLy8gU2VuZCBkZXBvc2l0IHJlY2VpcHQgZW1haWxcbmNvbnN0IHNlbmREZXBvc2l0UmVjZWlwdEVtYWlsID0gYXN5bmMgKHRlbmFudCwgcm9vbUluZm8sIGRlcG9zaXRSZWNlaXB0QnVmZmVyKSA9PiB7XG4gIHRyeSB7XG4gICAgLy8gRW1haWxzIGFyZSBub3cgZW5hYmxlZCAtIGF0dGVtcHRpbmcgdG8gc2VuZCBkZXBvc2l0IHJlY2VpcHQgZW1haWxcbiAgICBcbiAgICBjb25zdCB0cmFuc3BvcnRlciA9IGNyZWF0ZVRyYW5zcG9ydGVyKCk7XG4gICAgXG4gICAgY29uc3Qgc3ViamVjdCA9IGBEZXBvc2l0IFJlY2VpcHQgLSBSb29tICR7cm9vbUluZm8ucm9vbV9udW1iZXJ9IC0gSiZIIEFwYXJ0bWVudGA7XG4gICAgXG4gICAgY29uc3QgaHRtbENvbnRlbnQgPSBgXG4gICAgICA8IURPQ1RZUEUgaHRtbD5cbiAgICAgIDxodG1sPlxuICAgICAgPGhlYWQ+XG4gICAgICAgIDxtZXRhIGNoYXJzZXQ9XCJ1dGYtOFwiPlxuICAgICAgICA8c3R5bGU+XG4gICAgICAgICAgYm9keSB7IGZvbnQtZmFtaWx5OiBBcmlhbCwgc2Fucy1zZXJpZjsgbWFyZ2luOiAwOyBwYWRkaW5nOiAyMHB4OyBiYWNrZ3JvdW5kLWNvbG9yOiAjZjRmNGY0OyB9XG4gICAgICAgICAgLmVtYWlsLWNvbnRhaW5lciB7IG1heC13aWR0aDogNjAwcHg7IG1hcmdpbjogMCBhdXRvOyBiYWNrZ3JvdW5kOiB3aGl0ZTsgYm9yZGVyLXJhZGl1czogOHB4OyBvdmVyZmxvdzogaGlkZGVuOyBib3gtc2hhZG93OiAwIDJweCAxMHB4IHJnYmEoMCwwLDAsMC4xKTsgfVxuICAgICAgICAgIC5oZWFkZXIgeyBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjMjhhNzQ1IDAlLCAjMjBjOTk3IDEwMCUpOyBjb2xvcjogd2hpdGU7IHBhZGRpbmc6IDMwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsgfVxuICAgICAgICAgIC5jb250ZW50IHsgcGFkZGluZzogMzBweDsgfVxuICAgICAgICAgIC5yZWNlaXB0LWluZm8geyBiYWNrZ3JvdW5kOiAjZjhmOWZhOyBwYWRkaW5nOiAyMHB4OyBib3JkZXItcmFkaXVzOiA4cHg7IG1hcmdpbjogMjBweCAwOyB9XG4gICAgICAgICAgLmFtb3VudC1ib3ggeyBiYWNrZ3JvdW5kOiAjZThmNWU4OyBib3JkZXI6IDJweCBzb2xpZCAjMjhhNzQ1OyBwYWRkaW5nOiAyMHB4OyBib3JkZXItcmFkaXVzOiA4cHg7IHRleHQtYWxpZ246IGNlbnRlcjsgbWFyZ2luOiAyMHB4IDA7IH1cbiAgICAgICAgICAuZm9vdGVyIHsgcGFkZGluZzogMjBweDsgdGV4dC1hbGlnbjogY2VudGVyOyBjb2xvcjogIzY2NjsgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNlZWU7IH1cbiAgICAgICAgPC9zdHlsZT5cbiAgICAgIDwvaGVhZD5cbiAgICAgIDxib2R5PlxuICAgICAgICA8ZGl2IGNsYXNzPVwiZW1haWwtY29udGFpbmVyXCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImhlYWRlclwiPlxuICAgICAgICAgICAgPGgxPvCfkrAgRGVwb3NpdCBSZWNlaXB0PC9oMT5cbiAgICAgICAgICAgIDxwPk9mZmljaWFsIFBheW1lbnQgQ29uZmlybWF0aW9uPC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIFxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250ZW50XCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicmVjZWlwdC1pbmZvXCI+XG4gICAgICAgICAgICAgIDxoMz5EZWFyICR7dGVuYW50Lm5hbWV9LDwvaDM+XG4gICAgICAgICAgICAgIDxwPlRoYW5rIHlvdSBmb3IgeW91ciBwYXltZW50ISBXZSBoYXZlIHJlY2VpdmVkIHlvdXIgYWR2YW5jZSBwYXltZW50IGFuZCBzZWN1cml0eSBkZXBvc2l0IGZvciBSb29tICR7cm9vbUluZm8ucm9vbV9udW1iZXJ9LjwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYW1vdW50LWJveFwiPlxuICAgICAgICAgICAgICA8aDM+UGF5bWVudCBTdW1tYXJ5PC9oMz5cbiAgICAgICAgICAgICAgPHA+PHN0cm9uZz5BZHZhbmNlIFBheW1lbnQ6PC9zdHJvbmc+ICR7Zm9ybWF0Q3VycmVuY3kodGVuYW50LmFkdmFuY2VfcGF5bWVudCl9PC9wPlxuICAgICAgICAgICAgICA8cD48c3Ryb25nPlNlY3VyaXR5IERlcG9zaXQ6PC9zdHJvbmc+ICR7Zm9ybWF0Q3VycmVuY3kodGVuYW50LnNlY3VyaXR5X2RlcG9zaXQpfTwvcD5cbiAgICAgICAgICAgICAgPGhyIHN0eWxlPVwibWFyZ2luOiAxNXB4IDA7XCI+XG4gICAgICAgICAgICAgIDxwIHN0eWxlPVwiZm9udC1zaXplOiAxOHB4O1wiPjxzdHJvbmc+VG90YWwgUGFpZDogJHtmb3JtYXRDdXJyZW5jeShwYXJzZUZsb2F0KHRlbmFudC5hZHZhbmNlX3BheW1lbnQpICsgcGFyc2VGbG9hdCh0ZW5hbnQuc2VjdXJpdHlfZGVwb3NpdCkpfTwvc3Ryb25nPjwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicmVjZWlwdC1pbmZvXCI+XG4gICAgICAgICAgICAgIDxoMz7wn5OLIFJlY2VpcHQgRGV0YWlsczwvaDM+XG4gICAgICAgICAgICAgIDxwPjxzdHJvbmc+UmVjZWlwdCBEYXRlOjwvc3Ryb25nPiAke2Zvcm1hdERhdGUobmV3IERhdGUoKSl9PC9wPlxuICAgICAgICAgICAgICA8cD48c3Ryb25nPlRlbmFudDo8L3N0cm9uZz4gJHt0ZW5hbnQubmFtZX08L3A+XG4gICAgICAgICAgICAgIDxwPjxzdHJvbmc+Um9vbTo8L3N0cm9uZz4gJHtyb29tSW5mby5yb29tX251bWJlcn08L3A+XG4gICAgICAgICAgICAgIDxwPjxzdHJvbmc+Q29udHJhY3QgUGVyaW9kOjwvc3Ryb25nPiAke2Zvcm1hdERhdGUodGVuYW50LmNvbnRyYWN0X3N0YXJ0X2RhdGUpfSB0byAke2Zvcm1hdERhdGUodGVuYW50LmNvbnRyYWN0X2VuZF9kYXRlKX08L3A+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgPGRpdiBzdHlsZT1cImJhY2tncm91bmQ6ICNmZmYzY2Q7IGJvcmRlcjogMXB4IHNvbGlkICNmZmVhYTc7IHBhZGRpbmc6IDE1cHg7IGJvcmRlci1yYWRpdXM6IDZweDsgbWFyZ2luOiAyMHB4IDA7XCI+XG4gICAgICAgICAgICAgIDxoND7wn5OEIE9mZmljaWFsIFJlY2VpcHQgQXR0YWNoZWQ8L2g0PlxuICAgICAgICAgICAgICA8cD5QbGVhc2UgZmluZCB5b3VyIG9mZmljaWFsIGRlcG9zaXQgcmVjZWlwdCBhdHRhY2hlZCB0byB0aGlzIGVtYWlsLiBLZWVwIHRoaXMgcmVjZWlwdCBmb3IgeW91ciByZWNvcmRzIGFzIHByb29mIG9mIHBheW1lbnQuPC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJ0ZXh0LWFsaWduOiBjZW50ZXI7IG1hcmdpbjogMzBweCAwO1wiPlxuICAgICAgICAgICAgICA8cCBzdHlsZT1cImNvbG9yOiAjMjhhNzQ1OyBmb250LXdlaWdodDogYm9sZDtcIj7inIUgUGF5bWVudCBDb25maXJtZWQgLSBXZWxjb21lIHRvIEomSCBBcGFydG1lbnQhPC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImZvb3RlclwiPlxuICAgICAgICAgICAgPHA+VGhpcyByZWNlaXB0IGlzIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVkIGFuZCBzZXJ2ZXMgYXMgb2ZmaWNpYWwgcHJvb2Ygb2YgcGF5bWVudDwvcD5cbiAgICAgICAgICAgIDxwPkZvciBhbnkgcXVlc3Rpb25zLCBwbGVhc2UgY29udGFjdCBvdXIgbWFuYWdlbWVudCBvZmZpY2U8L3A+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9ib2R5PlxuICAgICAgPC9odG1sPlxuICAgIGA7XG4gICAgXG4gICAgY29uc3QgdGV4dENvbnRlbnQgPSBgXG5EZWFyICR7dGVuYW50Lm5hbWV9LFxuXG5ERVBPU0lUIFJFQ0VJUFQgLSBKJkggQVBBUlRNRU5UXG5cblRoYW5rIHlvdSBmb3IgeW91ciBwYXltZW50ISBXZSBoYXZlIHJlY2VpdmVkIHlvdXIgZGVwb3NpdHMgZm9yIFJvb20gJHtyb29tSW5mby5yb29tX251bWJlcn0uXG5cblBheW1lbnQgU3VtbWFyeTpcbi0gQWR2YW5jZSBQYXltZW50OiAke2Zvcm1hdEN1cnJlbmN5KHRlbmFudC5hZHZhbmNlX3BheW1lbnQpfVxuLSBTZWN1cml0eSBEZXBvc2l0OiAke2Zvcm1hdEN1cnJlbmN5KHRlbmFudC5zZWN1cml0eV9kZXBvc2l0KX1cbi0gVG90YWwgUGFpZDogJHtmb3JtYXRDdXJyZW5jeShwYXJzZUZsb2F0KHRlbmFudC5hZHZhbmNlX3BheW1lbnQpICsgcGFyc2VGbG9hdCh0ZW5hbnQuc2VjdXJpdHlfZGVwb3NpdCkpfVxuXG5SZWNlaXB0IERldGFpbHM6XG4tIERhdGU6ICR7Zm9ybWF0RGF0ZShuZXcgRGF0ZSgpKX1cbi0gVGVuYW50OiAke3RlbmFudC5uYW1lfVxuLSBSb29tOiAke3Jvb21JbmZvLnJvb21fbnVtYmVyfVxuLSBDb250cmFjdDogJHtmb3JtYXREYXRlKHRlbmFudC5jb250cmFjdF9zdGFydF9kYXRlKX0gdG8gJHtmb3JtYXREYXRlKHRlbmFudC5jb250cmFjdF9lbmRfZGF0ZSl9XG5cbllvdXIgb2ZmaWNpYWwgcmVjZWlwdCBpcyBhdHRhY2hlZCB0byB0aGlzIGVtYWlsLiBQbGVhc2Uga2VlcCBpdCBmb3IgeW91ciByZWNvcmRzLlxuXG5XZWxjb21lIHRvIEomSCBBcGFydG1lbnQhXG5cbkJlc3QgcmVnYXJkcyxcbkomSCBBcGFydG1lbnQgTWFuYWdlbWVudFxuICAgIGA7XG5cbiAgICBjb25zdCBtYWlsT3B0aW9ucyA9IHtcbiAgICAgIGZyb206IHByb2Nlc3MuZW52LkVNQUlMX1VTRVIgfHwgJ29mZmljaWFsLmpoYXBhcnRtZW50QGdtYWlsLmNvbScsXG4gICAgICB0bzogdGVuYW50LmVtYWlsLFxuICAgICAgc3ViamVjdDogc3ViamVjdCxcbiAgICAgIHRleHQ6IHRleHRDb250ZW50LFxuICAgICAgaHRtbDogaHRtbENvbnRlbnQsXG4gICAgICBhdHRhY2htZW50czogW1xuICAgICAgICB7XG4gICAgICAgICAgZmlsZW5hbWU6IGBkZXBvc2l0LXJlY2VpcHQtJHt0ZW5hbnQuaWR9LSR7RGF0ZS5ub3coKX0ucGRmYCxcbiAgICAgICAgICBjb250ZW50OiBkZXBvc2l0UmVjZWlwdEJ1ZmZlcixcbiAgICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL3BkZidcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH07XG5cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0cmFuc3BvcnRlci5zZW5kTWFpbChtYWlsT3B0aW9ucyk7XG4gICAgXG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBtZXNzYWdlSWQ6IHJlc3VsdC5tZXNzYWdlSWQsXG4gICAgICBtZXNzYWdlOiAnRGVwb3NpdCByZWNlaXB0IGVtYWlsIHNlbnQgc3VjY2Vzc2Z1bGx5J1xuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRGVwb3NpdCByZWNlaXB0IGVtYWlsIHNlbmRpbmcgZXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlXG4gICAgfTtcbiAgfVxufTtcblxuLy8gU2VuZCBjb250cmFjdCBleHBpcnkgbm90aWZpY2F0aW9uXG5jb25zdCBzZW5kQ29udHJhY3RFeHBpcnlOb3RpZmljYXRpb24gPSBhc3luYyAodGVuYW50LCByb29tSW5mbykgPT4ge1xuICB0cnkge1xuICAgIC8vIEVtYWlscyBhcmUgbm93IGVuYWJsZWQgLSBhdHRlbXB0aW5nIHRvIHNlbmQgY29udHJhY3QgZXhwaXJ5IG5vdGlmaWNhdGlvblxuICAgIFxuICAgIGNvbnN0IHRyYW5zcG9ydGVyID0gY3JlYXRlVHJhbnNwb3J0ZXIoKTtcbiAgICBcbiAgICBjb25zdCBzdWJqZWN0ID0gYENvbnRyYWN0IEV4cGlyeSBOb3RpY2UgLSBSb29tICR7cm9vbUluZm8ucm9vbV9udW1iZXJ9IC0gQWN0aW9uIFJlcXVpcmVkYDtcbiAgICBcbiAgICBjb25zdCBkYXlzVW50aWxFeHBpcnkgPSBNYXRoLmNlaWwoKG5ldyBEYXRlKHRlbmFudC5jb250cmFjdF9lbmRfZGF0ZSkgLSBuZXcgRGF0ZSgpKSAvICgxMDAwICogNjAgKiA2MCAqIDI0KSk7XG4gICAgXG4gICAgY29uc3QgaHRtbENvbnRlbnQgPSBgXG4gICAgICA8IURPQ1RZUEUgaHRtbD5cbiAgICAgIDxodG1sPlxuICAgICAgPGhlYWQ+XG4gICAgICAgIDxtZXRhIGNoYXJzZXQ9XCJ1dGYtOFwiPlxuICAgICAgICA8c3R5bGU+XG4gICAgICAgICAgYm9keSB7IGZvbnQtZmFtaWx5OiBBcmlhbCwgc2Fucy1zZXJpZjsgbWFyZ2luOiAwOyBwYWRkaW5nOiAyMHB4OyBiYWNrZ3JvdW5kLWNvbG9yOiAjZjRmNGY0OyB9XG4gICAgICAgICAgLmVtYWlsLWNvbnRhaW5lciB7IG1heC13aWR0aDogNjAwcHg7IG1hcmdpbjogMCBhdXRvOyBiYWNrZ3JvdW5kOiB3aGl0ZTsgYm9yZGVyLXJhZGl1czogOHB4OyBvdmVyZmxvdzogaGlkZGVuOyBib3gtc2hhZG93OiAwIDJweCAxMHB4IHJnYmEoMCwwLDAsMC4xKTsgfVxuICAgICAgICAgIC5oZWFkZXIgeyBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjZmY2YjZiIDAlLCAjZWU1YTI0IDEwMCUpOyBjb2xvcjogd2hpdGU7IHBhZGRpbmc6IDMwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsgfVxuICAgICAgICAgIC5jb250ZW50IHsgcGFkZGluZzogMzBweDsgfVxuICAgICAgICAgIC5ub3RpY2UtYm94IHsgYmFja2dyb3VuZDogI2ZmZjNjZDsgYm9yZGVyOiAycHggc29saWQgI2ZmYzEwNzsgcGFkZGluZzogMjBweDsgYm9yZGVyLXJhZGl1czogOHB4OyBtYXJnaW46IDIwcHggMDsgfVxuICAgICAgICAgIC5pbmZvLXNlY3Rpb24geyBiYWNrZ3JvdW5kOiAjZjhmOWZhOyBwYWRkaW5nOiAyMHB4OyBib3JkZXItcmFkaXVzOiA4cHg7IG1hcmdpbjogMjBweCAwOyB9XG4gICAgICAgICAgLmFjdGlvbi1ib3ggeyBiYWNrZ3JvdW5kOiAjZTNmMmZkOyBib3JkZXItbGVmdDogNHB4IHNvbGlkICMyMTk2ZjM7IHBhZGRpbmc6IDIwcHg7IG1hcmdpbjogMjBweCAwOyB9XG4gICAgICAgICAgLmZvb3RlciB7IHBhZGRpbmc6IDIwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsgY29sb3I6ICM2NjY7IGJvcmRlci10b3A6IDFweCBzb2xpZCAjZWVlOyB9XG4gICAgICAgIDwvc3R5bGU+XG4gICAgICA8L2hlYWQ+XG4gICAgICA8Ym9keT5cbiAgICAgICAgPGRpdiBjbGFzcz1cImVtYWlsLWNvbnRhaW5lclwiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJoZWFkZXJcIj5cbiAgICAgICAgICAgIDxoMT7imqDvuI8gQ29udHJhY3QgRXhwaXJ5IE5vdGljZTwvaDE+XG4gICAgICAgICAgICA8cD5JbXBvcnRhbnQ6IEFjdGlvbiBSZXF1aXJlZDwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICBcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29udGVudFwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm5vdGljZS1ib3hcIj5cbiAgICAgICAgICAgICAgPGgzPkRlYXIgJHt0ZW5hbnQubmFtZX0sPC9oMz5cbiAgICAgICAgICAgICAgPHAgc3R5bGU9XCJmb250LXNpemU6IDE2cHg7XCI+PHN0cm9uZz5Zb3VyIHRlbmFuY3kgY29udHJhY3Qgd2lsbCBleHBpcmUgaW4gJHtkYXlzVW50aWxFeHBpcnl9IGRheXMuPC9zdHJvbmc+PC9wPlxuICAgICAgICAgICAgICA8cD5Db250cmFjdCBFbmQgRGF0ZTogPHN0cm9uZz4ke2Zvcm1hdERhdGUodGVuYW50LmNvbnRyYWN0X2VuZF9kYXRlKX08L3N0cm9uZz48L3A+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImluZm8tc2VjdGlvblwiPlxuICAgICAgICAgICAgICA8aDM+8J+TiyBDdXJyZW50IENvbnRyYWN0IERldGFpbHM8L2gzPlxuICAgICAgICAgICAgICA8cD48c3Ryb25nPlJvb20gTnVtYmVyOjwvc3Ryb25nPiAke3Jvb21JbmZvLnJvb21fbnVtYmVyfTwvcD5cbiAgICAgICAgICAgICAgPHA+PHN0cm9uZz5Db250cmFjdCBTdGFydDo8L3N0cm9uZz4gJHtmb3JtYXREYXRlKHRlbmFudC5jb250cmFjdF9zdGFydF9kYXRlKX08L3A+XG4gICAgICAgICAgICAgIDxwPjxzdHJvbmc+Q29udHJhY3QgRW5kOjwvc3Ryb25nPiAke2Zvcm1hdERhdGUodGVuYW50LmNvbnRyYWN0X2VuZF9kYXRlKX08L3A+XG4gICAgICAgICAgICAgIDxwPjxzdHJvbmc+TW9udGhseSBSZW50Ojwvc3Ryb25nPiAke2Zvcm1hdEN1cnJlbmN5KHJvb21JbmZvLm1vbnRobHlfcmVudCl9PC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJhY3Rpb24tYm94XCI+XG4gICAgICAgICAgICAgIDxoMz7wn5SEIFJlbmV3YWwgT3B0aW9uczwvaDM+XG4gICAgICAgICAgICAgIDxwPklmIHlvdSB3aXNoIHRvIGNvbnRpbnVlIHN0YXlpbmcgd2l0aCB1cywgcGxlYXNlIGNvbnRhY3Qgb3VyIG1hbmFnZW1lbnQgb2ZmaWNlIHRvIGRpc2N1c3MgcmVuZXdhbCB0ZXJtczo8L3A+XG4gICAgICAgICAgICAgIDx1bD5cbiAgICAgICAgICAgICAgICA8bGk+U3RhbmRhcmQgNi1tb250aCBjb250cmFjdCByZW5ld2FsPC9saT5cbiAgICAgICAgICAgICAgICA8bGk+Q3VzdG9tIGNvbnRyYWN0IGR1cmF0aW9uIG9wdGlvbnMgYXZhaWxhYmxlPC9saT5cbiAgICAgICAgICAgICAgICA8bGk+Q3VycmVudCByZW50IHJhdGVzIG1heSBhcHBseTwvbGk+XG4gICAgICAgICAgICAgICAgPGxpPk5ldyBjb250cmFjdCB0byBiZSBzaWduZWQgYmVmb3JlIGV4cGlyeSBkYXRlPC9saT5cbiAgICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgXG4gICAgICAgICAgICA8ZGl2IHN0eWxlPVwiYmFja2dyb3VuZDogI2Y4ZDdkYTsgYm9yZGVyOiAxcHggc29saWQgI2Y1YzZjYjsgcGFkZGluZzogMTVweDsgYm9yZGVyLXJhZGl1czogNnB4OyBtYXJnaW46IDIwcHggMDtcIj5cbiAgICAgICAgICAgICAgPGg0PuKPsCBJbXBvcnRhbnQgRGVhZGxpbmVzPC9oND5cbiAgICAgICAgICAgICAgPHA+PHN0cm9uZz5QbGVhc2Ugbm90aWZ5IHVzIG9mIHlvdXIgaW50ZW50aW9ucyBieTo8L3N0cm9uZz4gJHtmb3JtYXREYXRlKG5ldyBEYXRlKERhdGUubm93KCkgKyA3ICogMjQgKiA2MCAqIDYwICogMTAwMCkpfTwvcD5cbiAgICAgICAgICAgICAgPHA+VGhpcyB3aWxsIGFsbG93IHVzIHN1ZmZpY2llbnQgdGltZSB0byBwcm9jZXNzIHlvdXIgcmVuZXdhbCBvciBhcnJhbmdlIGZvciBhIHNtb290aCB0cmFuc2l0aW9uLjwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaW5mby1zZWN0aW9uXCI+XG4gICAgICAgICAgICAgIDxoMz7wn5OeIENvbnRhY3QgTWFuYWdlbWVudDwvaDM+XG4gICAgICAgICAgICAgIDxwPjxzdHJvbmc+RW1haWw6PC9zdHJvbmc+IG9mZmljaWFsLmpoYXBhcnRtZW50QGdtYWlsLmNvbTwvcD5cbiAgICAgICAgICAgICAgPHA+PHN0cm9uZz5WaXNpdDo8L3N0cm9uZz4gTWFuYWdlbWVudCBPZmZpY2UgZHVyaW5nIGJ1c2luZXNzIGhvdXJzPC9wPlxuICAgICAgICAgICAgICA8cD48c3Ryb25nPkFkZHJlc3M6PC9zdHJvbmc+IFBhdGluLWF5LCBQcm9zcGVyaWRhZCwgQWd1c2FuIERlbCBTdXI8L3A+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgPGRpdiBzdHlsZT1cInRleHQtYWxpZ246IGNlbnRlcjsgbWFyZ2luOiAzMHB4IDA7XCI+XG4gICAgICAgICAgICAgIDxwIHN0eWxlPVwiY29sb3I6ICNmZjZiNmI7IGZvbnQtd2VpZ2h0OiBib2xkO1wiPuKaoO+4jyBQbGVhc2UgcmVzcG9uZCB3aXRoaW4gNyBkYXlzIHRvIGF2b2lkIGFueSBjb21wbGljYXRpb25zPC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImZvb3RlclwiPlxuICAgICAgICAgICAgPHA+VGhpcyBpcyBhbiBhdXRvbWF0ZWQgcmVtaW5kZXIgc2VudCAzMCBkYXlzIGJlZm9yZSBjb250cmFjdCBleHBpcnk8L3A+XG4gICAgICAgICAgICA8cD5UaGFuayB5b3UgZm9yIGJlaW5nIGEgdmFsdWVkIHRlbmFudCBhdCBKJkggQXBhcnRtZW50PC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvYm9keT5cbiAgICAgIDwvaHRtbD5cbiAgICBgO1xuICAgIFxuICAgIGNvbnN0IHRleHRDb250ZW50ID0gYFxuRGVhciAke3RlbmFudC5uYW1lfSxcblxuQ09OVFJBQ1QgRVhQSVJZIE5PVElDRSAtIEomSCBBUEFSVE1FTlRcblxuWW91ciB0ZW5hbmN5IGNvbnRyYWN0IHdpbGwgZXhwaXJlIGluICR7ZGF5c1VudGlsRXhwaXJ5fSBkYXlzLlxuXG5Db250cmFjdCBEZXRhaWxzOlxuLSBSb29tOiAke3Jvb21JbmZvLnJvb21fbnVtYmVyfVxuLSBDb250cmFjdCBFbmQ6ICR7Zm9ybWF0RGF0ZSh0ZW5hbnQuY29udHJhY3RfZW5kX2RhdGUpfVxuLSBNb250aGx5IFJlbnQ6ICR7Zm9ybWF0Q3VycmVuY3kocm9vbUluZm8ubW9udGhseV9yZW50KX1cblxuUmVuZXdhbCBPcHRpb25zOlxuLSBTdGFuZGFyZCA2LW1vbnRoIHJlbmV3YWwgYXZhaWxhYmxlXG4tIEN1c3RvbSBkdXJhdGlvbiBvcHRpb25zXG4tIENvbnRhY3QgbWFuYWdlbWVudCBvZmZpY2UgdG8gZGlzY3VzcyB0ZXJtc1xuXG5JbXBvcnRhbnQ6XG5QbGVhc2Ugbm90aWZ5IHVzIG9mIHlvdXIgaW50ZW50aW9ucyBieSAke2Zvcm1hdERhdGUobmV3IERhdGUoRGF0ZS5ub3coKSArIDcgKiAyNCAqIDYwICogNjAgKiAxMDAwKSl9XG5cbkNvbnRhY3QgSW5mb3JtYXRpb246XG5FbWFpbDogb2ZmaWNpYWwuamhhcGFydG1lbnRAZ21haWwuY29tXG5WaXNpdDogTWFuYWdlbWVudCBPZmZpY2UgZHVyaW5nIGJ1c2luZXNzIGhvdXJzXG5cblBsZWFzZSByZXNwb25kIHdpdGhpbiA3IGRheXMgdG8gYXZvaWQgY29tcGxpY2F0aW9ucy5cblxuVGhhbmsgeW91IGZvciBiZWluZyBhIHZhbHVlZCB0ZW5hbnQuXG5cbkJlc3QgcmVnYXJkcyxcbkomSCBBcGFydG1lbnQgTWFuYWdlbWVudFxuICAgIGA7XG5cbiAgICBjb25zdCBtYWlsT3B0aW9ucyA9IHtcbiAgICAgIGZyb206IHByb2Nlc3MuZW52LkVNQUlMX1VTRVIgfHwgJ29mZmljaWFsLmpoYXBhcnRtZW50QGdtYWlsLmNvbScsXG4gICAgICB0bzogdGVuYW50LmVtYWlsLFxuICAgICAgc3ViamVjdDogc3ViamVjdCxcbiAgICAgIHRleHQ6IHRleHRDb250ZW50LFxuICAgICAgaHRtbDogaHRtbENvbnRlbnRcbiAgICB9O1xuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdHJhbnNwb3J0ZXIuc2VuZE1haWwobWFpbE9wdGlvbnMpO1xuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgbWVzc2FnZUlkOiByZXN1bHQubWVzc2FnZUlkLFxuICAgICAgbWVzc2FnZTogJ0NvbnRyYWN0IGV4cGlyeSBub3RpZmljYXRpb24gc2VudCBzdWNjZXNzZnVsbHknXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdDb250cmFjdCBleHBpcnkgZW1haWwgc2VuZGluZyBlcnJvcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2VcbiAgICB9O1xuICB9XG59O1xuXG4vLyBTZW5kIGRlcGFydHVyZSBub3RpZmljYXRpb24gZW1haWxcbmNvbnN0IHNlbmREZXBhcnR1cmVFbWFpbCA9IGFzeW5jIChyZWNpcGllbnRFbWFpbCwgZGVwYXJ0dXJlSW5mbykgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHRyYW5zcG9ydGVyID0gY3JlYXRlVHJhbnNwb3J0ZXIoKTtcbiAgICBcbiAgICBjb25zdCBzdWJqZWN0ID0gYERlcGFydHVyZSBDb25maXJtYXRpb24gLSBSb29tICR7ZGVwYXJ0dXJlSW5mby5yb29tX251bWJlcn0gLSBKJkggQXBhcnRtZW50YDtcbiAgICBcbiAgICBjb25zdCBodG1sQ29udGVudCA9IGBcbiAgICAgIDwhRE9DVFlQRSBodG1sPlxuICAgICAgPGh0bWw+XG4gICAgICA8aGVhZD5cbiAgICAgICAgPG1ldGEgY2hhcnNldD1cInV0Zi04XCI+XG4gICAgICAgIDxzdHlsZT5cbiAgICAgICAgICBib2R5IHsgZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmOyBtYXJnaW46IDA7IHBhZGRpbmc6IDIwcHg7IGJhY2tncm91bmQtY29sb3I6ICNmNGY0ZjQ7IH1cbiAgICAgICAgICAuZW1haWwtY29udGFpbmVyIHsgbWF4LXdpZHRoOiA2MDBweDsgbWFyZ2luOiAwIGF1dG87IGJhY2tncm91bmQ6IHdoaXRlOyBib3JkZXItcmFkaXVzOiA4cHg7IG92ZXJmbG93OiBoaWRkZW47IGJveC1zaGFkb3c6IDAgMnB4IDEwcHggcmdiYSgwLDAsMCwwLjEpOyB9XG4gICAgICAgICAgLmhlYWRlciB7IGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICM2NjdlZWEgMCUsICM3NjRiYTIgMTAwJSk7IGNvbG9yOiB3aGl0ZTsgcGFkZGluZzogMzBweDsgdGV4dC1hbGlnbjogY2VudGVyOyB9XG4gICAgICAgICAgLmNvbnRlbnQgeyBwYWRkaW5nOiAzMHB4OyB9XG4gICAgICAgICAgLmluZm8tc2VjdGlvbiB7IGJhY2tncm91bmQ6ICNmOGY5ZmE7IHBhZGRpbmc6IDIwcHg7IGJvcmRlci1yYWRpdXM6IDhweDsgbWFyZ2luOiAyMHB4IDA7IH1cbiAgICAgICAgICAuc3VtbWFyeS1ib3ggeyBiYWNrZ3JvdW5kOiAjZTNmMmZkOyBib3JkZXItbGVmdDogNHB4IHNvbGlkICMyMTk2ZjM7IHBhZGRpbmc6IDIwcHg7IG1hcmdpbjogMjBweCAwOyB9XG4gICAgICAgICAgLnJlZnVuZC1ib3ggeyBiYWNrZ3JvdW5kOiAjZThmNWU4OyBib3JkZXItbGVmdDogNHB4IHNvbGlkICM0Y2FmNTA7IHBhZGRpbmc6IDIwcHg7IG1hcmdpbjogMjBweCAwOyB9XG4gICAgICAgICAgLmZvb3RlciB7IHBhZGRpbmc6IDIwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsgY29sb3I6ICM2NjY7IGJvcmRlci10b3A6IDFweCBzb2xpZCAjZWVlOyB9XG4gICAgICAgICAgLnN0YXR1cy1iYWRnZSB7IGRpc3BsYXk6IGlubGluZS1ibG9jazsgcGFkZGluZzogNXB4IDE1cHg7IGJvcmRlci1yYWRpdXM6IDIwcHg7IGZvbnQtc2l6ZTogMTJweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IH1cbiAgICAgICAgICAuY29tcGxldGVkIHsgYmFja2dyb3VuZDogI2Q0ZWRkYTsgY29sb3I6ICMxNTU3MjQ7IH1cbiAgICAgICAgICAuZWFybHkgeyBiYWNrZ3JvdW5kOiAjZmZmM2NkOyBjb2xvcjogIzg1NjQwNDsgfVxuICAgICAgICA8L3N0eWxlPlxuICAgICAgPC9oZWFkPlxuICAgICAgPGJvZHk+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJlbWFpbC1jb250YWluZXJcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiaGVhZGVyXCI+XG4gICAgICAgICAgICA8aDE+8J+PoCBEZXBhcnR1cmUgQ29uZmlybWF0aW9uPC9oMT5cbiAgICAgICAgICAgIDxwPkomSCBBcGFydG1lbnQgLSBUaGFuayBZb3UgZm9yIFN0YXlpbmcgV2l0aCBVczwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICBcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29udGVudFwiPlxuICAgICAgICAgICAgPGgzPkRlYXIgJHtkZXBhcnR1cmVJbmZvLnRlbmFudF9uYW1lfSw8L2gzPlxuICAgICAgICAgICAgPHA+V2UgY29uZmlybSB0aGF0IHlvdXIgdGVuYW5jeSBhdCBKJkggQXBhcnRtZW50IGhhcyBiZWVuIHByb2Nlc3NlZCBhbmQgeW91ciByZWNvcmRzIGhhdmUgYmVlbiB1cGRhdGVkLjwvcD5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImluZm8tc2VjdGlvblwiPlxuICAgICAgICAgICAgICA8aDM+8J+TiyBUZW5hbmN5IFN1bW1hcnk8L2gzPlxuICAgICAgICAgICAgICA8cD48c3Ryb25nPlJvb20gTnVtYmVyOjwvc3Ryb25nPiAke2RlcGFydHVyZUluZm8ucm9vbV9udW1iZXJ9PC9wPlxuICAgICAgICAgICAgICA8cD48c3Ryb25nPkJyYW5jaDo8L3N0cm9uZz4gJHtkZXBhcnR1cmVJbmZvLmJyYW5jaF9uYW1lfTwvcD5cbiAgICAgICAgICAgICAgPHA+PHN0cm9uZz5UZW5hbmN5IFBlcmlvZDo8L3N0cm9uZz4gJHtmb3JtYXREYXRlKGRlcGFydHVyZUluZm8ucmVudF9zdGFydCl9IC0gJHtmb3JtYXREYXRlKGRlcGFydHVyZUluZm8ucmVudF9lbmQpfTwvcD5cbiAgICAgICAgICAgICAgPHA+PHN0cm9uZz5Db250cmFjdCBTdGF0dXM6PC9zdHJvbmc+IFxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic3RhdHVzLWJhZGdlICR7ZGVwYXJ0dXJlSW5mby5jb250cmFjdF9jb21wbGV0ZWQgPyAnY29tcGxldGVkJyA6ICdlYXJseSd9XCI+XG4gICAgICAgICAgICAgICAgICAke2RlcGFydHVyZUluZm8uY29udHJhY3RfY29tcGxldGVkID8gJ0NvbnRyYWN0IENvbXBsZXRlZCcgOiAnRWFybHkgRGVwYXJ0dXJlJ31cbiAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgPHA+PHN0cm9uZz5EZXBhcnR1cmUgUmVhc29uOjwvc3Ryb25nPiAke2RlcGFydHVyZUluZm8ucmVhc29uX2Zvcl9sZWF2aW5nPy5yZXBsYWNlKCdfJywgJyAnKSB8fCAnTm90IHNwZWNpZmllZCd9PC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzdW1tYXJ5LWJveFwiPlxuICAgICAgICAgICAgICA8aDM+8J+SsCBGaW5hbmNpYWwgU3VtbWFyeTwvaDM+XG4gICAgICAgICAgICAgIDxwPjxzdHJvbmc+VG90YWwgQmlsbHMgUGFpZDo8L3N0cm9uZz4gJHtmb3JtYXRDdXJyZW5jeShkZXBhcnR1cmVJbmZvLnRvdGFsX2JpbGxzX3BhaWQgfHwgMCl9PC9wPlxuICAgICAgICAgICAgICAke2RlcGFydHVyZUluZm8udG90YWxfYmlsbHNfdW5wYWlkID4gMCA/IGBcbiAgICAgICAgICAgICAgICA8cD48c3Ryb25nPk91dHN0YW5kaW5nIEFtb3VudDo8L3N0cm9uZz4gPHNwYW4gc3R5bGU9XCJjb2xvcjogI2RjMzU0NTtcIj4ke2Zvcm1hdEN1cnJlbmN5KGRlcGFydHVyZUluZm8udG90YWxfYmlsbHNfdW5wYWlkKX08L3NwYW4+PC9wPlxuICAgICAgICAgICAgICAgIDxwPjxzbWFsbCBzdHlsZT1cImNvbG9yOiAjZGMzNTQ1O1wiPlBsZWFzZSBzZXR0bGUgYW55IG91dHN0YW5kaW5nIGFtb3VudHMgYXMgc29vbiBhcyBwb3NzaWJsZS48L3NtYWxsPjwvcD5cbiAgICAgICAgICAgICAgYCA6IGBcbiAgICAgICAgICAgICAgICA8cCBzdHlsZT1cImNvbG9yOiAjMjhhNzQ1O1wiPjxzdHJvbmc+4pyFIEFsbCBiaWxscyBoYXZlIGJlZW4gc2V0dGxlZDwvc3Ryb25nPjwvcD5cbiAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgXG4gICAgICAgICAgICAke2RlcGFydHVyZUluZm8uc2VjdXJpdHlfZGVwb3NpdF9yZWZ1bmQgPiAwID8gYFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInJlZnVuZC1ib3hcIj5cbiAgICAgICAgICAgICAgPGgzPvCfkrUgU2VjdXJpdHkgRGVwb3NpdCBSZWZ1bmQ8L2gzPlxuICAgICAgICAgICAgICA8cD48c3Ryb25nPlJlZnVuZCBBbW91bnQ6PC9zdHJvbmc+ICR7Zm9ybWF0Q3VycmVuY3koZGVwYXJ0dXJlSW5mby5zZWN1cml0eV9kZXBvc2l0X3JlZnVuZCl9PC9wPlxuICAgICAgICAgICAgICA8cD5Zb3VyIHNlY3VyaXR5IGRlcG9zaXQgcmVmdW5kIHdpbGwgYmUgcHJvY2Vzc2VkIGFjY29yZGluZyB0byBvdXIgc3RhbmRhcmQgcHJvY2VkdXJlcy4gUGxlYXNlIGNvbnRhY3QgdGhlIG1hbmFnZW1lbnQgb2ZmaWNlIGZvciByZWZ1bmQgY29sbGVjdGlvbiBkZXRhaWxzLjwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgYCA6ICcnfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaW5mby1zZWN0aW9uXCI+XG4gICAgICAgICAgICAgIDxoMz7wn5OeIENvbnRhY3QgSW5mb3JtYXRpb248L2gzPlxuICAgICAgICAgICAgICA8cD5JZiB5b3UgaGF2ZSBhbnkgcXVlc3Rpb25zIG9yIG5lZWQgYXNzaXN0YW5jZSwgcGxlYXNlIGNvbnRhY3QgdXM6PC9wPlxuICAgICAgICAgICAgICA8cD48c3Ryb25nPkVtYWlsOjwvc3Ryb25nPiBvZmZpY2lhbC5qaGFwYXJ0bWVudEBnbWFpbC5jb208L3A+XG4gICAgICAgICAgICAgIDxwPjxzdHJvbmc+QWRkcmVzczo8L3N0cm9uZz4gUGF0aW4tYXksIFByb3NwZXJpZGFkLCBBZ3VzYW4gRGVsIFN1cjwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgXG4gICAgICAgICAgICA8ZGl2IHN0eWxlPVwidGV4dC1hbGlnbjogY2VudGVyOyBtYXJnaW46IDMwcHggMDsgcGFkZGluZzogMjBweDsgYmFja2dyb3VuZDogI2YwZjhmZjsgYm9yZGVyLXJhZGl1czogOHB4O1wiPlxuICAgICAgICAgICAgICA8aDM+8J+ZjyBUaGFuayBZb3UhPC9oMz5cbiAgICAgICAgICAgICAgPHA+VGhhbmsgeW91IGZvciBjaG9vc2luZyBKJkggQXBhcnRtZW50IGFzIHlvdXIgaG9tZS4gV2UgYXBwcmVjaWF0ZSB5b3VyIHRlbmFuY3kgYW5kIHdpc2ggeW91IGFsbCB0aGUgYmVzdCBpbiB5b3VyIGZ1dHVyZSBlbmRlYXZvcnMuPC9wPlxuICAgICAgICAgICAgICA8cD48ZW0+WW91J3JlIGFsd2F5cyB3ZWxjb21lIGJhY2shPC9lbT48L3A+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICBcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9vdGVyXCI+XG4gICAgICAgICAgICA8cD5UaGlzIGlzIGFuIGF1dG9tYXRlZCBjb25maXJtYXRpb24gZW1haWw8L3A+XG4gICAgICAgICAgICA8cD5KJkggQXBhcnRtZW50IE1hbmFnZW1lbnQgVGVhbTwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2JvZHk+XG4gICAgICA8L2h0bWw+XG4gICAgYDtcbiAgICBcbiAgICBjb25zdCB0ZXh0Q29udGVudCA9IGBcbkRlYXIgJHtkZXBhcnR1cmVJbmZvLnRlbmFudF9uYW1lfSxcblxuREVQQVJUVVJFIENPTkZJUk1BVElPTiAtIEomSCBBUEFSVE1FTlRcblxuV2UgY29uZmlybSB0aGF0IHlvdXIgdGVuYW5jeSBoYXMgYmVlbiBwcm9jZXNzZWQgYW5kIHlvdXIgcmVjb3JkcyBoYXZlIGJlZW4gdXBkYXRlZC5cblxuVGVuYW5jeSBTdW1tYXJ5OlxuLSBSb29tOiAke2RlcGFydHVyZUluZm8ucm9vbV9udW1iZXJ9XG4tIEJyYW5jaDogJHtkZXBhcnR1cmVJbmZvLmJyYW5jaF9uYW1lfVxuLSBQZXJpb2Q6ICR7Zm9ybWF0RGF0ZShkZXBhcnR1cmVJbmZvLnJlbnRfc3RhcnQpfSAtICR7Zm9ybWF0RGF0ZShkZXBhcnR1cmVJbmZvLnJlbnRfZW5kKX1cbi0gU3RhdHVzOiAke2RlcGFydHVyZUluZm8uY29udHJhY3RfY29tcGxldGVkID8gJ0NvbnRyYWN0IENvbXBsZXRlZCcgOiAnRWFybHkgRGVwYXJ0dXJlJ31cbi0gUmVhc29uOiAke2RlcGFydHVyZUluZm8ucmVhc29uX2Zvcl9sZWF2aW5nPy5yZXBsYWNlKCdfJywgJyAnKSB8fCAnTm90IHNwZWNpZmllZCd9XG5cbkZpbmFuY2lhbCBTdW1tYXJ5OlxuLSBUb3RhbCBCaWxscyBQYWlkOiAke2Zvcm1hdEN1cnJlbmN5KGRlcGFydHVyZUluZm8udG90YWxfYmlsbHNfcGFpZCB8fCAwKX1cbiR7ZGVwYXJ0dXJlSW5mby50b3RhbF9iaWxsc191bnBhaWQgPiAwID8gYC0gT3V0c3RhbmRpbmcgQW1vdW50OiAke2Zvcm1hdEN1cnJlbmN5KGRlcGFydHVyZUluZm8udG90YWxfYmlsbHNfdW5wYWlkKX1gIDogJy0gQWxsIGJpbGxzIHNldHRsZWQg4pyFJ31cblxuJHtkZXBhcnR1cmVJbmZvLnNlY3VyaXR5X2RlcG9zaXRfcmVmdW5kID4gMCA/IGBcblNlY3VyaXR5IERlcG9zaXQgUmVmdW5kOiAke2Zvcm1hdEN1cnJlbmN5KGRlcGFydHVyZUluZm8uc2VjdXJpdHlfZGVwb3NpdF9yZWZ1bmQpfVxuUGxlYXNlIGNvbnRhY3QgdGhlIG1hbmFnZW1lbnQgb2ZmaWNlIGZvciByZWZ1bmQgY29sbGVjdGlvbiBkZXRhaWxzLlxuYCA6ICcnfVxuXG5Db250YWN0IEluZm9ybWF0aW9uOlxuRW1haWw6IG9mZmljaWFsLmpoYXBhcnRtZW50QGdtYWlsLmNvbVxuQWRkcmVzczogUGF0aW4tYXksIFByb3NwZXJpZGFkLCBBZ3VzYW4gRGVsIFN1clxuXG5UaGFuayB5b3UgZm9yIGNob29zaW5nIEomSCBBcGFydG1lbnQgYXMgeW91ciBob21lLiBXZSBhcHByZWNpYXRlIHlvdXIgdGVuYW5jeSBhbmQgd2lzaCB5b3UgYWxsIHRoZSBiZXN0IVxuXG5Zb3UncmUgYWx3YXlzIHdlbGNvbWUgYmFjayFcblxuQmVzdCByZWdhcmRzLFxuSiZIIEFwYXJ0bWVudCBNYW5hZ2VtZW50IFRlYW1cbiAgICBgO1xuXG4gICAgY29uc3QgbWFpbE9wdGlvbnMgPSB7XG4gICAgICBmcm9tOiBwcm9jZXNzLmVudi5FTUFJTF9VU0VSIHx8ICdvZmZpY2lhbC5qaGFwYXJ0bWVudEBnbWFpbC5jb20nLFxuICAgICAgdG86IHJlY2lwaWVudEVtYWlsLFxuICAgICAgc3ViamVjdDogc3ViamVjdCxcbiAgICAgIHRleHQ6IHRleHRDb250ZW50LFxuICAgICAgaHRtbDogaHRtbENvbnRlbnRcbiAgICB9O1xuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdHJhbnNwb3J0ZXIuc2VuZE1haWwobWFpbE9wdGlvbnMpO1xuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgbWVzc2FnZUlkOiByZXN1bHQubWVzc2FnZUlkLFxuICAgICAgbWVzc2FnZTogJ0RlcGFydHVyZSBlbWFpbCBzZW50IHN1Y2Nlc3NmdWxseSdcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0RlcGFydHVyZSBlbWFpbCBzZW5kaW5nIGVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBlcnJvcjogZXJyb3IubWVzc2FnZVxuICAgIH07XG4gIH1cbn07XG5cbi8vIFNlbmQgbW9udGhseSBidXNpbmVzcyByZXBvcnRcbmNvbnN0IHNlbmRNb250aGx5UmVwb3J0ID0gYXN5bmMgKHJlY2lwaWVudEVtYWlsLCByZXBvcnREYXRhKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgdHJhbnNwb3J0ZXIgPSBjcmVhdGVUcmFuc3BvcnRlcigpO1xuICAgIFxuICAgIGNvbnN0IG1vbnRoTmFtZSA9IHJlcG9ydERhdGEucmVwb3J0X3BlcmlvZC5tb250aF9uYW1lXG4gICAgY29uc3QgdG90YWxSZXZlbnVlID0gcmVwb3J0RGF0YS5maW5hbmNpYWxfc3VtbWFyeS50b3RhbF9yZXZlbnVlLnRvTG9jYWxlU3RyaW5nKClcbiAgICBjb25zdCBvY2N1cGFuY3lSYXRlID0gcmVwb3J0RGF0YS5vY2N1cGFuY3lfbWV0cmljcy5vY2N1cGFuY3lfcmF0ZVxuICAgIGNvbnN0IGFjdGl2ZVRlbmFudHMgPSByZXBvcnREYXRhLnRlbmFudF9zdGF0aXN0aWNzLmFjdGl2ZV90ZW5hbnRzXG4gICAgY29uc3QgcmV2ZW51ZUdyb3d0aCA9IHJlcG9ydERhdGEuZmluYW5jaWFsX3N1bW1hcnkucmV2ZW51ZV9ncm93dGhcblxuICAgIC8vIENyZWF0ZSBicmFuY2ggcGVyZm9ybWFuY2UgdGFibGVcbiAgICBjb25zdCBicmFuY2hUYWJsZSA9IHJlcG9ydERhdGEuYnJhbmNoX3BlcmZvcm1hbmNlLm1hcChicmFuY2ggPT4gYFxuICAgICAgPHRyPlxuICAgICAgICA8dGQgc3R5bGU9XCJwYWRkaW5nOiA4cHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7XCI+JHticmFuY2guYnJhbmNoX25hbWV9PC90ZD5cbiAgICAgICAgPHRkIHN0eWxlPVwicGFkZGluZzogOHB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyB0ZXh0LWFsaWduOiBjZW50ZXI7XCI+JHticmFuY2gub2NjdXBpZWRfcm9vbXN9LyR7YnJhbmNoLnRvdGFsX3Jvb21zfTwvdGQ+XG4gICAgICAgIDx0ZCBzdHlsZT1cInBhZGRpbmc6IDhweDsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsgdGV4dC1hbGlnbjogY2VudGVyO1wiPiR7YnJhbmNoLm9jY3VwYW5jeV9yYXRlfSU8L3RkPlxuICAgICAgICA8dGQgc3R5bGU9XCJwYWRkaW5nOiA4cHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7IHRleHQtYWxpZ246IHJpZ2h0O1wiPuKCsSR7YnJhbmNoLnJldmVudWUudG9Mb2NhbGVTdHJpbmcoKX08L3RkPlxuICAgICAgPC90cj5cbiAgICBgKS5qb2luKCcnKVxuXG4gICAgLy8gQ3JlYXRlIHBheW1lbnQgbWV0aG9kcyB0YWJsZVxuICAgIGNvbnN0IHBheW1lbnRUYWJsZSA9IHJlcG9ydERhdGEucGF5bWVudF9hbmFseXNpcy5ieV9tZXRob2QubWFwKG1ldGhvZCA9PiBgXG4gICAgICA8dHI+XG4gICAgICAgIDx0ZCBzdHlsZT1cInBhZGRpbmc6IDhweDsgYm9yZGVyOiAxcHggc29saWQgI2RkZDtcIj4ke21ldGhvZC5wYXltZW50X21ldGhvZH08L3RkPlxuICAgICAgICA8dGQgc3R5bGU9XCJwYWRkaW5nOiA4cHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7IHRleHQtYWxpZ246IGNlbnRlcjtcIj4ke21ldGhvZC50cmFuc2FjdGlvbl9jb3VudH08L3RkPlxuICAgICAgICA8dGQgc3R5bGU9XCJwYWRkaW5nOiA4cHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7IHRleHQtYWxpZ246IHJpZ2h0O1wiPuKCsSR7bWV0aG9kLnRvdGFsX2Ftb3VudC50b0xvY2FsZVN0cmluZygpfTwvdGQ+XG4gICAgICAgIDx0ZCBzdHlsZT1cInBhZGRpbmc6IDhweDsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsgdGV4dC1hbGlnbjogY2VudGVyO1wiPiR7bWV0aG9kLnBlcmNlbnRhZ2V9JTwvdGQ+XG4gICAgICA8L3RyPlxuICAgIGApLmpvaW4oJycpXG5cbiAgICAvLyBDcmVhdGUgdG9wIHBlcmZvcm1lcnMgdGFibGVcbiAgICBjb25zdCB0b3BQZXJmb3JtZXJzVGFibGUgPSByZXBvcnREYXRhLnRvcF9wZXJmb3JtZXJzLm1hcCh0ZW5hbnQgPT4gYFxuICAgICAgPHRyPlxuICAgICAgICA8dGQgc3R5bGU9XCJwYWRkaW5nOiA4cHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7XCI+JHt0ZW5hbnQudGVuYW50X25hbWV9PC90ZD5cbiAgICAgICAgPHRkIHN0eWxlPVwicGFkZGluZzogOHB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyB0ZXh0LWFsaWduOiBjZW50ZXI7XCI+JHt0ZW5hbnQucm9vbV9udW1iZXJ9PC90ZD5cbiAgICAgICAgPHRkIHN0eWxlPVwicGFkZGluZzogOHB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyB0ZXh0LWFsaWduOiByaWdodDtcIj7igrEke3RlbmFudC50b3RhbF9wYWlkLnRvTG9jYWxlU3RyaW5nKCl9PC90ZD5cbiAgICAgIDwvdHI+XG4gICAgYCkuam9pbignJylcblxuICAgIGNvbnN0IGh0bWxDb250ZW50ID0gYFxuICAgICAgPCFET0NUWVBFIGh0bWw+XG4gICAgICA8aHRtbD5cbiAgICAgIDxoZWFkPlxuICAgICAgICA8bWV0YSBjaGFyc2V0PVwidXRmLThcIj5cbiAgICAgICAgPHRpdGxlPk1vbnRobHkgQnVzaW5lc3MgUmVwb3J0IC0gJHttb250aE5hbWV9PC90aXRsZT5cbiAgICAgICAgPHN0eWxlPlxuICAgICAgICAgIGJvZHkgeyBmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7IGxpbmUtaGVpZ2h0OiAxLjY7IGNvbG9yOiAjMzMzOyB9XG4gICAgICAgICAgLmNvbnRhaW5lciB7IG1heC13aWR0aDogODAwcHg7IG1hcmdpbjogMCBhdXRvOyBwYWRkaW5nOiAyMHB4OyB9XG4gICAgICAgICAgLmhlYWRlciB7IGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICM2NjdlZWEgMCUsICM3NjRiYTIgMTAwJSk7IGNvbG9yOiB3aGl0ZTsgcGFkZGluZzogMzBweDsgdGV4dC1hbGlnbjogY2VudGVyOyBib3JkZXItcmFkaXVzOiAxMHB4OyBtYXJnaW4tYm90dG9tOiAzMHB4OyB9XG4gICAgICAgICAgLm1ldHJpYy1jYXJkIHsgYmFja2dyb3VuZDogI2Y4ZjlmYTsgYm9yZGVyLWxlZnQ6IDRweCBzb2xpZCAjMDA3YmZmOyBwYWRkaW5nOiAyMHB4OyBtYXJnaW46IDE1cHggMDsgYm9yZGVyLXJhZGl1czogNXB4OyB9XG4gICAgICAgICAgLm1ldHJpYy12YWx1ZSB7IGZvbnQtc2l6ZTogMmVtOyBmb250LXdlaWdodDogYm9sZDsgY29sb3I6ICMwMDdiZmY7IH1cbiAgICAgICAgICAubWV0cmljLWxhYmVsIHsgY29sb3I6ICM2NjY7IGZvbnQtc2l6ZTogMC45ZW07IH1cbiAgICAgICAgICAuZ3Jvd3RoLXBvc2l0aXZlIHsgY29sb3I6ICMyOGE3NDU7IH1cbiAgICAgICAgICAuZ3Jvd3RoLW5lZ2F0aXZlIHsgY29sb3I6ICNkYzM1NDU7IH1cbiAgICAgICAgICAuc2VjdGlvbiB7IG1hcmdpbjogMzBweCAwOyB9XG4gICAgICAgICAgLnNlY3Rpb24tdGl0bGUgeyBmb250LXNpemU6IDEuNWVtOyBjb2xvcjogIzMzMzsgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICMwMDdiZmY7IHBhZGRpbmctYm90dG9tOiAxMHB4OyBtYXJnaW4tYm90dG9tOiAyMHB4OyB9XG4gICAgICAgICAgdGFibGUgeyB3aWR0aDogMTAwJTsgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTsgbWFyZ2luOiAxNXB4IDA7IH1cbiAgICAgICAgICB0aCB7IGJhY2tncm91bmQ6ICMwMDdiZmY7IGNvbG9yOiB3aGl0ZTsgcGFkZGluZzogMTJweDsgdGV4dC1hbGlnbjogbGVmdDsgfVxuICAgICAgICAgIC5zdW1tYXJ5LWdyaWQgeyBkaXNwbGF5OiBncmlkOyBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdChhdXRvLWZpdCwgbWlubWF4KDIwMHB4LCAxZnIpKTsgZ2FwOiAxNXB4OyBtYXJnaW46IDIwcHggMDsgfVxuICAgICAgICAgIC5hbGVydCB7IGJhY2tncm91bmQ6ICNmZmYzY2Q7IGJvcmRlcjogMXB4IHNvbGlkICNmZmVhYTc7IGNvbG9yOiAjODU2NDA0OyBwYWRkaW5nOiAxNXB4OyBib3JkZXItcmFkaXVzOiA1cHg7IG1hcmdpbjogMTVweCAwOyB9XG4gICAgICAgICAgLmZvb3RlciB7IHRleHQtYWxpZ246IGNlbnRlcjsgbWFyZ2luLXRvcDogNDBweDsgcGFkZGluZzogMjBweDsgYmFja2dyb3VuZDogI2Y4ZjlmYTsgYm9yZGVyLXJhZGl1czogNXB4OyB9XG4gICAgICAgIDwvc3R5bGU+XG4gICAgICA8L2hlYWQ+XG4gICAgICA8Ym9keT5cbiAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRhaW5lclwiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJoZWFkZXJcIj5cbiAgICAgICAgICAgIDxoMT7wn5OKIEomSCBBcGFydG1lbnQgTW9udGhseSBSZXBvcnQ8L2gxPlxuICAgICAgICAgICAgPGgyPiR7bW9udGhOYW1lfTwvaDI+XG4gICAgICAgICAgICA8cD5HZW5lcmF0ZWQgb24gJHtuZXcgRGF0ZShyZXBvcnREYXRhLnJlcG9ydF9wZXJpb2QuZ2VuZXJhdGVkX2F0KS50b0xvY2FsZURhdGVTdHJpbmcoKX08L3A+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICA8IS0tIEV4ZWN1dGl2ZSBTdW1tYXJ5IC0tPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJzZWN0aW9uXCI+XG4gICAgICAgICAgICA8aDIgY2xhc3M9XCJzZWN0aW9uLXRpdGxlXCI+8J+TiCBFeGVjdXRpdmUgU3VtbWFyeTwvaDI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwic3VtbWFyeS1ncmlkXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtZXRyaWMtY2FyZFwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtZXRyaWMtdmFsdWVcIj7igrEke3RvdGFsUmV2ZW51ZX08L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibWV0cmljLWxhYmVsXCI+VG90YWwgUmV2ZW51ZTwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCIke3JldmVudWVHcm93dGggPj0gMCA/ICdncm93dGgtcG9zaXRpdmUnIDogJ2dyb3d0aC1uZWdhdGl2ZSd9XCI+XG4gICAgICAgICAgICAgICAgICAke3JldmVudWVHcm93dGggPj0gMCA/ICfihpcnIDogJ+KGmCd9ICR7TWF0aC5hYnMocmV2ZW51ZUdyb3d0aCl9JSB2cyBsYXN0IG1vbnRoXG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibWV0cmljLWNhcmRcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibWV0cmljLXZhbHVlXCI+JHtvY2N1cGFuY3lSYXRlfSU8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibWV0cmljLWxhYmVsXCI+T2NjdXBhbmN5IFJhdGU8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibWV0cmljLWxhYmVsXCI+JHtyZXBvcnREYXRhLm9jY3VwYW5jeV9tZXRyaWNzLm9jY3VwaWVkX3Jvb21zfS8ke3JlcG9ydERhdGEub2NjdXBhbmN5X21ldHJpY3MudG90YWxfcm9vbXN9IHJvb21zIG9jY3VwaWVkPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibWV0cmljLWNhcmRcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibWV0cmljLXZhbHVlXCI+JHthY3RpdmVUZW5hbnRzfTwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtZXRyaWMtbGFiZWxcIj5BY3RpdmUgVGVuYW50czwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtZXRyaWMtbGFiZWxcIj5OZXQgY2hhbmdlOiAke3JlcG9ydERhdGEudGVuYW50X3N0YXRpc3RpY3MubmV0X3RlbmFudF9jaGFuZ2UgPj0gMCA/ICcrJyA6ICcnfSR7cmVwb3J0RGF0YS50ZW5hbnRfc3RhdGlzdGljcy5uZXRfdGVuYW50X2NoYW5nZX08L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtZXRyaWMtY2FyZFwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtZXRyaWMtdmFsdWVcIj4ke3JlcG9ydERhdGEuZmluYW5jaWFsX3N1bW1hcnkuY29sbGVjdGlvbl9yYXRlfSU8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibWV0cmljLWxhYmVsXCI+Q29sbGVjdGlvbiBSYXRlPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1ldHJpYy1sYWJlbFwiPuKCsSR7cmVwb3J0RGF0YS5maW5hbmNpYWxfc3VtbWFyeS50b3RhbF9iaWxsZWQudG9Mb2NhbGVTdHJpbmcoKX0gYmlsbGVkPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICA8IS0tIEZpbmFuY2lhbCBQZXJmb3JtYW5jZSAtLT5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwic2VjdGlvblwiPlxuICAgICAgICAgICAgPGgyIGNsYXNzPVwic2VjdGlvbi10aXRsZVwiPvCfkrAgRmluYW5jaWFsIFBlcmZvcm1hbmNlPC9oMj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzdW1tYXJ5LWdyaWRcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1ldHJpYy1jYXJkXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1ldHJpYy12YWx1ZVwiPiR7cmVwb3J0RGF0YS5maW5hbmNpYWxfc3VtbWFyeS50b3RhbF90cmFuc2FjdGlvbnN9PC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1ldHJpYy1sYWJlbFwiPlRvdGFsIFRyYW5zYWN0aW9uczwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1ldHJpYy1jYXJkXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1ldHJpYy12YWx1ZVwiPuKCsSR7cmVwb3J0RGF0YS5vdXRzdGFuZGluZ19zdW1tYXJ5LnRvdGFsX291dHN0YW5kaW5nLnRvTG9jYWxlU3RyaW5nKCl9PC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1ldHJpYy1sYWJlbFwiPk91dHN0YW5kaW5nIEFtb3VudDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtZXRyaWMtbGFiZWxcIj4ke3JlcG9ydERhdGEub3V0c3RhbmRpbmdfc3VtbWFyeS51bnBhaWRfYmlsbHNfY291bnQgKyByZXBvcnREYXRhLm91dHN0YW5kaW5nX3N1bW1hcnkucGFydGlhbF9iaWxsc19jb3VudH0gYmlsbHMgcGVuZGluZzwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICA8aDM+UGF5bWVudCBNZXRob2RzIEJyZWFrZG93bjwvaDM+XG4gICAgICAgICAgICA8dGFibGU+XG4gICAgICAgICAgICAgIDx0aGVhZD5cbiAgICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgICA8dGg+UGF5bWVudCBNZXRob2Q8L3RoPlxuICAgICAgICAgICAgICAgICAgPHRoPlRyYW5zYWN0aW9uczwvdGg+XG4gICAgICAgICAgICAgICAgICA8dGg+QW1vdW50PC90aD5cbiAgICAgICAgICAgICAgICAgIDx0aD5QZXJjZW50YWdlPC90aD5cbiAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICA8L3RoZWFkPlxuICAgICAgICAgICAgICA8dGJvZHk+XG4gICAgICAgICAgICAgICAgJHtwYXltZW50VGFibGV9XG4gICAgICAgICAgICAgIDwvdGJvZHk+XG4gICAgICAgICAgICA8L3RhYmxlPlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgPCEtLSBCcmFuY2ggUGVyZm9ybWFuY2UgLS0+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cInNlY3Rpb25cIj5cbiAgICAgICAgICAgIDxoMiBjbGFzcz1cInNlY3Rpb24tdGl0bGVcIj7wn4+iIEJyYW5jaCBQZXJmb3JtYW5jZTwvaDI+XG4gICAgICAgICAgICA8dGFibGU+XG4gICAgICAgICAgICAgIDx0aGVhZD5cbiAgICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgICA8dGg+QnJhbmNoPC90aD5cbiAgICAgICAgICAgICAgICAgIDx0aD5PY2N1cGFuY3k8L3RoPlxuICAgICAgICAgICAgICAgICAgPHRoPlJhdGU8L3RoPlxuICAgICAgICAgICAgICAgICAgPHRoPlJldmVudWU8L3RoPlxuICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgIDwvdGhlYWQ+XG4gICAgICAgICAgICAgIDx0Ym9keT5cbiAgICAgICAgICAgICAgICAke2JyYW5jaFRhYmxlfVxuICAgICAgICAgICAgICA8L3Rib2R5PlxuICAgICAgICAgICAgPC90YWJsZT5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIDwhLS0gVGVuYW50IFN0YXRpc3RpY3MgLS0+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cInNlY3Rpb25cIj5cbiAgICAgICAgICAgIDxoMiBjbGFzcz1cInNlY3Rpb24tdGl0bGVcIj7wn5GlIFRlbmFudCBTdGF0aXN0aWNzPC9oMj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzdW1tYXJ5LWdyaWRcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1ldHJpYy1jYXJkXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1ldHJpYy12YWx1ZVwiPiR7cmVwb3J0RGF0YS50ZW5hbnRfc3RhdGlzdGljcy5uZXdfdGVuYW50c308L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibWV0cmljLWxhYmVsXCI+TmV3IFRlbmFudHM8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtZXRyaWMtY2FyZFwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtZXRyaWMtdmFsdWVcIj4ke3JlcG9ydERhdGEudGVuYW50X3N0YXRpc3RpY3MuZGVwYXJ0ZWRfdGVuYW50c308L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibWV0cmljLWxhYmVsXCI+RGVwYXJ0ZWQgVGVuYW50czwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1ldHJpYy1jYXJkXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1ldHJpYy12YWx1ZVwiPiR7cmVwb3J0RGF0YS50ZW5hbnRfc3RhdGlzdGljcy5leHBpcmluZ19jb250cmFjdHN9PC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1ldHJpYy1sYWJlbFwiPkV4cGlyaW5nIENvbnRyYWN0czwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtZXRyaWMtbGFiZWxcIj5OZXh0IDMwIGRheXM8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIDwhLS0gVG9wIFBlcmZvcm1lcnMgLS0+XG4gICAgICAgICAgJHtyZXBvcnREYXRhLnRvcF9wZXJmb3JtZXJzLmxlbmd0aCA+IDAgPyBgXG4gICAgICAgICAgPGRpdiBjbGFzcz1cInNlY3Rpb25cIj5cbiAgICAgICAgICAgIDxoMiBjbGFzcz1cInNlY3Rpb24tdGl0bGVcIj7wn4yfIFRvcCBQYXlpbmcgVGVuYW50czwvaDI+XG4gICAgICAgICAgICA8dGFibGU+XG4gICAgICAgICAgICAgIDx0aGVhZD5cbiAgICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgICA8dGg+VGVuYW50IE5hbWU8L3RoPlxuICAgICAgICAgICAgICAgICAgPHRoPlJvb208L3RoPlxuICAgICAgICAgICAgICAgICAgPHRoPkFtb3VudCBQYWlkPC90aD5cbiAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICA8L3RoZWFkPlxuICAgICAgICAgICAgICA8dGJvZHk+XG4gICAgICAgICAgICAgICAgJHt0b3BQZXJmb3JtZXJzVGFibGV9XG4gICAgICAgICAgICAgIDwvdGJvZHk+XG4gICAgICAgICAgICA8L3RhYmxlPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIGAgOiAnJ31cblxuICAgICAgICAgIDwhLS0gQWxlcnRzICYgUmVjb21tZW5kYXRpb25zIC0tPlxuICAgICAgICAgICR7cmVwb3J0RGF0YS5vdXRzdGFuZGluZ19zdW1tYXJ5LnRvdGFsX291dHN0YW5kaW5nID4gMCA/IGBcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiYWxlcnRcIj5cbiAgICAgICAgICAgIDxzdHJvbmc+4pqg77iPIEFjdGlvbiBSZXF1aXJlZDo8L3N0cm9uZz4gVGhlcmUgYXJlIOKCsSR7cmVwb3J0RGF0YS5vdXRzdGFuZGluZ19zdW1tYXJ5LnRvdGFsX291dHN0YW5kaW5nLnRvTG9jYWxlU3RyaW5nKCl9IGluIG91dHN0YW5kaW5nIHBheW1lbnRzIHRoYXQgbmVlZCBhdHRlbnRpb24uXG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgYCA6ICcnfVxuXG4gICAgICAgICAgJHtyZXBvcnREYXRhLnRlbmFudF9zdGF0aXN0aWNzLmV4cGlyaW5nX2NvbnRyYWN0cyA+IDAgPyBgXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImFsZXJ0XCI+XG4gICAgICAgICAgICA8c3Ryb25nPvCfk4UgQ29udHJhY3QgUmVuZXdhbHM6PC9zdHJvbmc+ICR7cmVwb3J0RGF0YS50ZW5hbnRfc3RhdGlzdGljcy5leHBpcmluZ19jb250cmFjdHN9IGNvbnRyYWN0cyBhcmUgZXhwaXJpbmcgaW4gdGhlIG5leHQgMzAgZGF5cy5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICBgIDogJyd9XG5cbiAgICAgICAgICAke29jY3VwYW5jeVJhdGUgPCA4MCA/IGBcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiYWxlcnRcIj5cbiAgICAgICAgICAgIDxzdHJvbmc+8J+PoCBPY2N1cGFuY3kgQWxlcnQ6PC9zdHJvbmc+IEN1cnJlbnQgb2NjdXBhbmN5IHJhdGUgaXMgJHtvY2N1cGFuY3lSYXRlfSUuIENvbnNpZGVyIG1hcmtldGluZyBzdHJhdGVnaWVzIHRvIGluY3JlYXNlIG9jY3VwYW5jeS5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICBgIDogJyd9XG5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9vdGVyXCI+XG4gICAgICAgICAgICA8cD48c3Ryb25nPkomSCBBcGFydG1lbnQgTWFuYWdlbWVudCBTeXN0ZW08L3N0cm9uZz48L3A+XG4gICAgICAgICAgICA8cD5UaGlzIHJlcG9ydCB3YXMgYXV0b21hdGljYWxseSBnZW5lcmF0ZWQgb24gJHtuZXcgRGF0ZSgpLnRvTG9jYWxlRGF0ZVN0cmluZygpfTwvcD5cbiAgICAgICAgICAgIDxwPkZvciBxdWVzdGlvbnMgb3Igc3VwcG9ydCwgcGxlYXNlIGNvbnRhY3QgdGhlIG1hbmFnZW1lbnQgdGVhbS48L3A+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9ib2R5PlxuICAgICAgPC9odG1sPlxuICAgIGBcblxuICAgIGNvbnN0IHRleHRDb250ZW50ID0gYFxuSiZIIEFQQVJUTUVOVCBNT05USExZIFJFUE9SVCAtICR7bW9udGhOYW1lfVxuR2VuZXJhdGVkOiAke25ldyBEYXRlKHJlcG9ydERhdGEucmVwb3J0X3BlcmlvZC5nZW5lcmF0ZWRfYXQpLnRvTG9jYWxlRGF0ZVN0cmluZygpfVxuXG5FWEVDVVRJVkUgU1VNTUFSWVxuPT09PT09PT09PT09PT09PT1cblRvdGFsIFJldmVudWU6IOKCsSR7dG90YWxSZXZlbnVlfSAoJHtyZXZlbnVlR3Jvd3RoID49IDAgPyAnKycgOiAnJ30ke3JldmVudWVHcm93dGh9JSB2cyBsYXN0IG1vbnRoKVxuT2NjdXBhbmN5IFJhdGU6ICR7b2NjdXBhbmN5UmF0ZX0lICgke3JlcG9ydERhdGEub2NjdXBhbmN5X21ldHJpY3Mub2NjdXBpZWRfcm9vbXN9LyR7cmVwb3J0RGF0YS5vY2N1cGFuY3lfbWV0cmljcy50b3RhbF9yb29tc30gcm9vbXMpXG5BY3RpdmUgVGVuYW50czogJHthY3RpdmVUZW5hbnRzfSAoTmV0IGNoYW5nZTogJHtyZXBvcnREYXRhLnRlbmFudF9zdGF0aXN0aWNzLm5ldF90ZW5hbnRfY2hhbmdlID49IDAgPyAnKycgOiAnJ30ke3JlcG9ydERhdGEudGVuYW50X3N0YXRpc3RpY3MubmV0X3RlbmFudF9jaGFuZ2V9KVxuQ29sbGVjdGlvbiBSYXRlOiAke3JlcG9ydERhdGEuZmluYW5jaWFsX3N1bW1hcnkuY29sbGVjdGlvbl9yYXRlfSVcblxuRklOQU5DSUFMIFBFUkZPUk1BTkNFXG49PT09PT09PT09PT09PT09PT09PT1cblRvdGFsIFRyYW5zYWN0aW9uczogJHtyZXBvcnREYXRhLmZpbmFuY2lhbF9zdW1tYXJ5LnRvdGFsX3RyYW5zYWN0aW9uc31cblRvdGFsIEJpbGxlZDog4oKxJHtyZXBvcnREYXRhLmZpbmFuY2lhbF9zdW1tYXJ5LnRvdGFsX2JpbGxlZC50b0xvY2FsZVN0cmluZygpfVxuT3V0c3RhbmRpbmcgQW1vdW50OiDigrEke3JlcG9ydERhdGEub3V0c3RhbmRpbmdfc3VtbWFyeS50b3RhbF9vdXRzdGFuZGluZy50b0xvY2FsZVN0cmluZygpfVxuXG5URU5BTlQgU1RBVElTVElDU1xuPT09PT09PT09PT09PT09PT1cbk5ldyBUZW5hbnRzOiAke3JlcG9ydERhdGEudGVuYW50X3N0YXRpc3RpY3MubmV3X3RlbmFudHN9XG5EZXBhcnRlZCBUZW5hbnRzOiAke3JlcG9ydERhdGEudGVuYW50X3N0YXRpc3RpY3MuZGVwYXJ0ZWRfdGVuYW50c31cbkV4cGlyaW5nIENvbnRyYWN0cyAoMzAgZGF5cyk6ICR7cmVwb3J0RGF0YS50ZW5hbnRfc3RhdGlzdGljcy5leHBpcmluZ19jb250cmFjdHN9XG5cbkJSQU5DSCBQRVJGT1JNQU5DRVxuPT09PT09PT09PT09PT09PT09XG4ke3JlcG9ydERhdGEuYnJhbmNoX3BlcmZvcm1hbmNlLm1hcChicmFuY2ggPT4gXG4gIGAke2JyYW5jaC5icmFuY2hfbmFtZX06ICR7YnJhbmNoLm9jY3VwYW5jeV9yYXRlfSUgb2NjdXBhbmN5LCDigrEke2JyYW5jaC5yZXZlbnVlLnRvTG9jYWxlU3RyaW5nKCl9IHJldmVudWVgXG4pLmpvaW4oJ1xcbicpfVxuXG5UaGlzIHJlcG9ydCB3YXMgYXV0b21hdGljYWxseSBnZW5lcmF0ZWQgYnkgSiZIIEFwYXJ0bWVudCBNYW5hZ2VtZW50IFN5c3RlbS5cbiAgICBgXG5cbiAgICBjb25zdCBtYWlsT3B0aW9ucyA9IHtcbiAgICAgIGZyb206IHByb2Nlc3MuZW52LkVNQUlMX0ZST00gfHwgJ29mZmljaWFsLmpoYXBhcnRtZW50QGdtYWlsLmNvbScsXG4gICAgICB0bzogcmVjaXBpZW50RW1haWwsXG4gICAgICBzdWJqZWN0OiBg8J+TiiBNb250aGx5IEJ1c2luZXNzIFJlcG9ydCAtICR7bW9udGhOYW1lfSB8IEomSCBBcGFydG1lbnRgLFxuICAgICAgdGV4dDogdGV4dENvbnRlbnQsXG4gICAgICBodG1sOiBodG1sQ29udGVudFxuICAgIH1cblxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRyYW5zcG9ydGVyLnNlbmRNYWlsKG1haWxPcHRpb25zKVxuICAgIGNvbnNvbGUubG9nKCdNb250aGx5IHJlcG9ydCBlbWFpbCBzZW50IHN1Y2Nlc3NmdWxseTonLCByZXN1bHQubWVzc2FnZUlkKVxuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgbWVzc2FnZTogJ01vbnRobHkgcmVwb3J0IGVtYWlsIHNlbnQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgIG1lc3NhZ2VJZDogcmVzdWx0Lm1lc3NhZ2VJZFxuICAgIH1cblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNlbmRpbmcgbW9udGhseSByZXBvcnQgZW1haWw6JywgZXJyb3IpXG4gICAgdGhyb3cgZXJyb3JcbiAgfVxufVxuXG4vLyBTZW5kIGJpbGxpbmcgcmVtaW5kZXIgdG8gbWFuYWdlbWVudCBvZmZpY2VcbmNvbnN0IHNlbmRCaWxsaW5nUmVtaW5kZXJUb01hbmFnZW1lbnQgPSBhc3luYyAoYmlsbHMpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB0cmFuc3BvcnRlciA9IGNyZWF0ZVRyYW5zcG9ydGVyKCk7XG4gICAgXG4gICAgY29uc3Qgc3ViamVjdCA9IGBCaWxsaW5nIFJlbWluZGVyIC0gJHtiaWxscy5sZW5ndGh9IEJpbGwke2JpbGxzLmxlbmd0aCA+IDEgPyAncycgOiAnJ30gRHVlIFNvb25gO1xuICAgIFxuICAgIC8vIEdyb3VwIGJpbGxzIGJ5IGR1ZSBkYXRlXG4gICAgY29uc3QgYmlsbHNCeUR1ZURhdGUgPSBiaWxscy5yZWR1Y2UoKGFjYywgYmlsbCkgPT4ge1xuICAgICAgY29uc3QgZHVlRGF0ZSA9IGZvcm1hdERhdGUoYmlsbC5yZW50X3RvKTtcbiAgICAgIGlmICghYWNjW2R1ZURhdGVdKSB7XG4gICAgICAgIGFjY1tkdWVEYXRlXSA9IFtdO1xuICAgICAgfVxuICAgICAgYWNjW2R1ZURhdGVdLnB1c2goYmlsbCk7XG4gICAgICByZXR1cm4gYWNjO1xuICAgIH0sIHt9KTtcbiAgICBcbiAgICBjb25zdCBodG1sQ29udGVudCA9IGBcbiAgICAgIDwhRE9DVFlQRSBodG1sPlxuICAgICAgPGh0bWw+XG4gICAgICA8aGVhZD5cbiAgICAgICAgPG1ldGEgY2hhcnNldD1cInV0Zi04XCI+XG4gICAgICAgIDxzdHlsZT5cbiAgICAgICAgICBib2R5IHsgZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmOyBtYXJnaW46IDA7IHBhZGRpbmc6IDIwcHg7IGJhY2tncm91bmQtY29sb3I6ICNmNGY0ZjQ7IH1cbiAgICAgICAgICAuZW1haWwtY29udGFpbmVyIHsgbWF4LXdpZHRoOiA4MDBweDsgbWFyZ2luOiAwIGF1dG87IGJhY2tncm91bmQ6IHdoaXRlOyBib3JkZXItcmFkaXVzOiA4cHg7IG92ZXJmbG93OiBoaWRkZW47IGJveC1zaGFkb3c6IDAgMnB4IDEwcHggcmdiYSgwLDAsMCwwLjEpOyB9XG4gICAgICAgICAgLmhlYWRlciB7IGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICNmZjZiNmIgMCUsICNlZTVhMjQgMTAwJSk7IGNvbG9yOiB3aGl0ZTsgcGFkZGluZzogMzBweDsgdGV4dC1hbGlnbjogY2VudGVyOyB9XG4gICAgICAgICAgLmNvbnRlbnQgeyBwYWRkaW5nOiAzMHB4OyB9XG4gICAgICAgICAgLmFsZXJ0LWJveCB7IGJhY2tncm91bmQ6ICNmZmYzY2Q7IGJvcmRlcjogMnB4IHNvbGlkICNmZmMxMDc7IHBhZGRpbmc6IDIwcHg7IGJvcmRlci1yYWRpdXM6IDhweDsgbWFyZ2luOiAyMHB4IDA7IH1cbiAgICAgICAgICAuYmlsbHMtc2VjdGlvbiB7IG1hcmdpbjogMjBweCAwOyB9XG4gICAgICAgICAgLmR1ZS1kYXRlLWdyb3VwIHsgbWFyZ2luLWJvdHRvbTogMzBweDsgfVxuICAgICAgICAgIC5kdWUtZGF0ZS1oZWFkZXIgeyBiYWNrZ3JvdW5kOiAjZjhmOWZhOyBwYWRkaW5nOiAxNXB4OyBib3JkZXItcmFkaXVzOiA4cHg7IG1hcmdpbi1ib3R0b206IDE1cHg7IH1cbiAgICAgICAgICAuYmlsbC1pdGVtIHsgYmFja2dyb3VuZDogI2ZmZmZmZjsgYm9yZGVyOiAxcHggc29saWQgI2RlZTJlNjsgcGFkZGluZzogMTVweDsgbWFyZ2luLWJvdHRvbTogMTBweDsgYm9yZGVyLXJhZGl1czogNnB4OyBkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IGFsaWduLWl0ZW1zOiBjZW50ZXI7IH1cbiAgICAgICAgICAuYmlsbC1pbmZvIHsgZmxleDogMTsgfVxuICAgICAgICAgIC5iaWxsLWFtb3VudCB7IGZvbnQtd2VpZ2h0OiBib2xkOyBjb2xvcjogI2RjMzU0NTsgfVxuICAgICAgICAgIC5vdmVyZHVlIHsgYm9yZGVyLWxlZnQ6IDRweCBzb2xpZCAjZGMzNTQ1OyB9XG4gICAgICAgICAgLmR1ZS10b2RheSB7IGJvcmRlci1sZWZ0OiA0cHggc29saWQgI2ZkN2UxNDsgfVxuICAgICAgICAgIC5kdWUtc29vbiB7IGJvcmRlci1sZWZ0OiA0cHggc29saWQgI2ZmYzEwNzsgfVxuICAgICAgICAgIC5mb290ZXIgeyBwYWRkaW5nOiAyMHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IGNvbG9yOiAjNjY2OyBib3JkZXItdG9wOiAxcHggc29saWQgI2VlZTsgfVxuICAgICAgICAgIC5zdW1tYXJ5LXN0YXRzIHsgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1hcm91bmQ7IGJhY2tncm91bmQ6ICNmOGY5ZmE7IHBhZGRpbmc6IDIwcHg7IGJvcmRlci1yYWRpdXM6IDhweDsgbWFyZ2luOiAyMHB4IDA7IH1cbiAgICAgICAgICAuc3RhdC1pdGVtIHsgdGV4dC1hbGlnbjogY2VudGVyOyB9XG4gICAgICAgICAgLnN0YXQtbnVtYmVyIHsgZm9udC1zaXplOiAyNHB4OyBmb250LXdlaWdodDogYm9sZDsgY29sb3I6ICNkYzM1NDU7IH1cbiAgICAgICAgICAuc3RhdC1sYWJlbCB7IGZvbnQtc2l6ZTogMTJweDsgY29sb3I6ICM2NjY7IHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7IH1cbiAgICAgICAgPC9zdHlsZT5cbiAgICAgIDwvaGVhZD5cbiAgICAgIDxib2R5PlxuICAgICAgICA8ZGl2IGNsYXNzPVwiZW1haWwtY29udGFpbmVyXCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImhlYWRlclwiPlxuICAgICAgICAgICAgPGgxPvCflJQgQmlsbGluZyBSZW1pbmRlcjwvaDE+XG4gICAgICAgICAgICA8cD5CaWxscyByZXF1aXJpbmcgYXR0ZW50aW9uPC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIFxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250ZW50XCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYWxlcnQtYm94XCI+XG4gICAgICAgICAgICAgIDxoMz7imqDvuI8gQWN0aW9uIFJlcXVpcmVkPC9oMz5cbiAgICAgICAgICAgICAgPHA+VGhlIGZvbGxvd2luZyBiaWxscyBhcmUgZHVlIHdpdGhpbiB0aGUgbmV4dCAzIGRheXMgYW5kIHJlcXVpcmUgaW1tZWRpYXRlIGF0dGVudGlvbjo8L3A+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInN1bW1hcnktc3RhdHNcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInN0YXQtaXRlbVwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzdGF0LW51bWJlclwiPiR7YmlsbHMubGVuZ3RofTwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzdGF0LWxhYmVsXCI+VG90YWwgQmlsbHM8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzdGF0LWl0ZW1cIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic3RhdC1udW1iZXJcIj4ke2Zvcm1hdEN1cnJlbmN5KGJpbGxzLnJlZHVjZSgoc3VtLCBiaWxsKSA9PiBzdW0gKyBwYXJzZUZsb2F0KGJpbGwudG90YWxfYW1vdW50IHx8IDApLCAwKSl9PC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInN0YXQtbGFiZWxcIj5Ub3RhbCBBbW91bnQ8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzdGF0LWl0ZW1cIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic3RhdC1udW1iZXJcIj4ke2JpbGxzLmZpbHRlcihiaWxsID0+IHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGRheXNVbnRpbER1ZSA9IE1hdGguY2VpbCgobmV3IERhdGUoYmlsbC5yZW50X3RvKSAtIG5ldyBEYXRlKCkpIC8gKDEwMDAgKiA2MCAqIDYwICogMjQpKTtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBkYXlzVW50aWxEdWUgPD0gMDtcbiAgICAgICAgICAgICAgICB9KS5sZW5ndGh9PC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInN0YXQtbGFiZWxcIj5PdmVyZHVlPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJiaWxscy1zZWN0aW9uXCI+XG4gICAgICAgICAgICAgICR7T2JqZWN0LmVudHJpZXMoYmlsbHNCeUR1ZURhdGUpLm1hcCgoW2R1ZURhdGUsIGRhdGVCaWxsc10pID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXlzVW50aWxEdWUgPSBNYXRoLmNlaWwoKG5ldyBEYXRlKGRhdGVCaWxsc1swXS5yZW50X3RvKSAtIG5ldyBEYXRlKCkpIC8gKDEwMDAgKiA2MCAqIDYwICogMjQpKTtcbiAgICAgICAgICAgICAgICBsZXQgZHVlRGF0ZUNsYXNzID0gJ2R1ZS1zb29uJztcbiAgICAgICAgICAgICAgICBsZXQgZHVlRGF0ZUxhYmVsID0gYER1ZSBpbiAke2RheXNVbnRpbER1ZX0gZGF5JHtkYXlzVW50aWxEdWUgIT09IDEgPyAncycgOiAnJ31gO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChkYXlzVW50aWxEdWUgPD0gMCkge1xuICAgICAgICAgICAgICAgICAgZHVlRGF0ZUNsYXNzID0gJ292ZXJkdWUnO1xuICAgICAgICAgICAgICAgICAgZHVlRGF0ZUxhYmVsID0gYE92ZXJkdWUgYnkgJHtNYXRoLmFicyhkYXlzVW50aWxEdWUpfSBkYXkke01hdGguYWJzKGRheXNVbnRpbER1ZSkgIT09IDEgPyAncycgOiAnJ31gO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF5c1VudGlsRHVlID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICBkdWVEYXRlQ2xhc3MgPSAnZHVlLXRvZGF5JztcbiAgICAgICAgICAgICAgICAgIGR1ZURhdGVMYWJlbCA9ICdEdWUgVG9kYXknO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gYFxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImR1ZS1kYXRlLWdyb3VwXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkdWUtZGF0ZS1oZWFkZXIgJHtkdWVEYXRlQ2xhc3N9XCI+XG4gICAgICAgICAgICAgICAgICAgICAgPGgzPvCfk4UgJHtkdWVEYXRlfSAtICR7ZHVlRGF0ZUxhYmVsfTwvaDM+XG4gICAgICAgICAgICAgICAgICAgICAgPHA+JHtkYXRlQmlsbHMubGVuZ3RofSBiaWxsJHtkYXRlQmlsbHMubGVuZ3RoID4gMSA/ICdzJyA6ICcnfSDigKIgVG90YWw6ICR7Zm9ybWF0Q3VycmVuY3koZGF0ZUJpbGxzLnJlZHVjZSgoc3VtLCBiaWxsKSA9PiBzdW0gKyBwYXJzZUZsb2F0KGJpbGwudG90YWxfYW1vdW50IHx8IDApLCAwKSl9PC9wPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgJHtkYXRlQmlsbHMubWFwKGJpbGwgPT4gYFxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJiaWxsLWl0ZW0gJHtkdWVEYXRlQ2xhc3N9XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYmlsbC1pbmZvXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxzdHJvbmc+JHtiaWxsLnRlbmFudF9uYW1lfTwvc3Ryb25nPiAtIFJvb20gJHtiaWxsLnJvb21fbnVtYmVyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8YnI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxzbWFsbD4ke2JpbGwuYnJhbmNoX25hbWV9IOKAoiBQZXJpb2Q6ICR7Zm9ybWF0RGF0ZShiaWxsLnJlbnRfZnJvbSl9IC0gJHtmb3JtYXREYXRlKGJpbGwucmVudF90byl9PC9zbWFsbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgJHtiaWxsLnN0YXR1cyA9PT0gJ3BhcnRpYWwnID8gYDxicj48c21hbGwgc3R5bGU9XCJjb2xvcjogI2ZmYzEwNztcIj7imqDvuI8gUGFydGlhbGx5IHBhaWQ8L3NtYWxsPmAgOiAnJ31cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImJpbGwtYW1vdW50XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICR7YmlsbC5zdGF0dXMgPT09ICdwYXJ0aWFsJyA/IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAke2Zvcm1hdEN1cnJlbmN5KGJpbGwucmVtYWluaW5nX2JhbGFuY2UgfHwgYmlsbC50b3RhbF9hbW91bnQpfTxicj48c21hbGw+b2YgJHtmb3JtYXRDdXJyZW5jeShiaWxsLnRvdGFsX2Ftb3VudCl9PC9zbWFsbD5gIDogXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0Q3VycmVuY3koYmlsbC50b3RhbF9hbW91bnQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICBgKS5qb2luKCcnKX1cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIGA7XG4gICAgICAgICAgICAgIH0pLmpvaW4oJycpfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJiYWNrZ3JvdW5kOiAjZTNmMmZkOyBib3JkZXItbGVmdDogNHB4IHNvbGlkICMyMTk2ZjM7IHBhZGRpbmc6IDIwcHg7IG1hcmdpbjogMjBweCAwO1wiPlxuICAgICAgICAgICAgICA8aDM+8J+TiyBSZWNvbW1lbmRlZCBBY3Rpb25zPC9oMz5cbiAgICAgICAgICAgICAgPHVsPlxuICAgICAgICAgICAgICAgIDxsaT5Db250YWN0IHRlbmFudHMgd2l0aCBvdmVyZHVlIGJpbGxzIGltbWVkaWF0ZWx5PC9saT5cbiAgICAgICAgICAgICAgICA8bGk+U2VuZCBwYXltZW50IHJlbWluZGVycyB0byB0ZW5hbnRzIHdpdGggYmlsbHMgZHVlIHRvZGF5PC9saT5cbiAgICAgICAgICAgICAgICA8bGk+UHJlcGFyZSBjb2xsZWN0aW9uIG5vdGljZXMgZm9yIHBlcnNpc3RlbnQgb3ZlcmR1ZSBhY2NvdW50czwvbGk+XG4gICAgICAgICAgICAgICAgPGxpPlVwZGF0ZSBwYXltZW50IHJlY29yZHMgYXMgcGF5bWVudHMgYXJlIHJlY2VpdmVkPC9saT5cbiAgICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIFxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb290ZXJcIj5cbiAgICAgICAgICAgIDxwPlRoaXMgaXMgYW4gYXV0b21hdGVkIGJpbGxpbmcgcmVtaW5kZXIgc2VudCBkYWlseSBhdCA5OjAwIEFNPC9wPlxuICAgICAgICAgICAgPHA+R2VuZXJhdGVkIG9uOiAke2Zvcm1hdERhdGUobmV3IERhdGUoKSl9IGF0ICR7bmV3IERhdGUoKS50b0xvY2FsZVRpbWVTdHJpbmcoKX08L3A+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9ib2R5PlxuICAgICAgPC9odG1sPlxuICAgIGA7XG4gICAgXG4gICAgY29uc3QgdGV4dENvbnRlbnQgPSBgXG5CSUxMSU5HIFJFTUlOREVSIC0gSiZIIEFQQVJUTUVOVCBNQU5BR0VNRU5UXG5cbiR7YmlsbHMubGVuZ3RofSBCaWxsJHtiaWxscy5sZW5ndGggPiAxID8gJ3MnIDogJyd9IER1ZSBTb29uXG5cblN1bW1hcnk6XG4tIFRvdGFsIEJpbGxzOiAke2JpbGxzLmxlbmd0aH1cbi0gVG90YWwgQW1vdW50OiAke2Zvcm1hdEN1cnJlbmN5KGJpbGxzLnJlZHVjZSgoc3VtLCBiaWxsKSA9PiBzdW0gKyBwYXJzZUZsb2F0KGJpbGwudG90YWxfYW1vdW50IHx8IDApLCAwKSl9XG4tIE92ZXJkdWUgQmlsbHM6ICR7YmlsbHMuZmlsdGVyKGJpbGwgPT4ge1xuICBjb25zdCBkYXlzVW50aWxEdWUgPSBNYXRoLmNlaWwoKG5ldyBEYXRlKGJpbGwucmVudF90bykgLSBuZXcgRGF0ZSgpKSAvICgxMDAwICogNjAgKiA2MCAqIDI0KSk7XG4gIHJldHVybiBkYXlzVW50aWxEdWUgPD0gMDtcbn0pLmxlbmd0aH1cblxuQmlsbHMgYnkgRHVlIERhdGU6XG4ke09iamVjdC5lbnRyaWVzKGJpbGxzQnlEdWVEYXRlKS5tYXAoKFtkdWVEYXRlLCBkYXRlQmlsbHNdKSA9PiB7XG4gIGNvbnN0IGRheXNVbnRpbER1ZSA9IE1hdGguY2VpbCgobmV3IERhdGUoZGF0ZUJpbGxzWzBdLnJlbnRfdG8pIC0gbmV3IERhdGUoKSkgLyAoMTAwMCAqIDYwICogNjAgKiAyNCkpO1xuICBsZXQgZHVlRGF0ZUxhYmVsID0gYER1ZSBpbiAke2RheXNVbnRpbER1ZX0gZGF5JHtkYXlzVW50aWxEdWUgIT09IDEgPyAncycgOiAnJ31gO1xuICBcbiAgaWYgKGRheXNVbnRpbER1ZSA8PSAwKSB7XG4gICAgZHVlRGF0ZUxhYmVsID0gYE92ZXJkdWUgYnkgJHtNYXRoLmFicyhkYXlzVW50aWxEdWUpfSBkYXkke01hdGguYWJzKGRheXNVbnRpbER1ZSkgIT09IDEgPyAncycgOiAnJ31gO1xuICB9IGVsc2UgaWYgKGRheXNVbnRpbER1ZSA9PT0gMCkge1xuICAgIGR1ZURhdGVMYWJlbCA9ICdEdWUgVG9kYXknO1xuICB9XG4gIFxuICByZXR1cm4gYFxuJHtkdWVEYXRlfSAtICR7ZHVlRGF0ZUxhYmVsfVxuJHtkYXRlQmlsbHMubWFwKGJpbGwgPT4gXG4gIGAgIOKAoiAke2JpbGwudGVuYW50X25hbWV9IC0gUm9vbSAke2JpbGwucm9vbV9udW1iZXJ9ICgke2JpbGwuYnJhbmNoX25hbWV9KVxuICAgIEFtb3VudDogJHtiaWxsLnN0YXR1cyA9PT0gJ3BhcnRpYWwnID8gXG4gICAgICBgJHtmb3JtYXRDdXJyZW5jeShiaWxsLnJlbWFpbmluZ19iYWxhbmNlIHx8IGJpbGwudG90YWxfYW1vdW50KX0gb2YgJHtmb3JtYXRDdXJyZW5jeShiaWxsLnRvdGFsX2Ftb3VudCl9YCA6IFxuICAgICAgZm9ybWF0Q3VycmVuY3koYmlsbC50b3RhbF9hbW91bnQpXG4gICAgfSR7YmlsbC5zdGF0dXMgPT09ICdwYXJ0aWFsJyA/ICcgKFBhcnRpYWxseSBQYWlkKScgOiAnJ31gXG4pLmpvaW4oJ1xcbicpfWA7XG59KS5qb2luKCdcXG4nKX1cblxuUmVjb21tZW5kZWQgQWN0aW9uczpcbi0gQ29udGFjdCB0ZW5hbnRzIHdpdGggb3ZlcmR1ZSBiaWxscyBpbW1lZGlhdGVseVxuLSBTZW5kIHBheW1lbnQgcmVtaW5kZXJzIHRvIHRlbmFudHMgd2l0aCBiaWxscyBkdWUgdG9kYXlcbi0gUHJlcGFyZSBjb2xsZWN0aW9uIG5vdGljZXMgZm9yIHBlcnNpc3RlbnQgb3ZlcmR1ZSBhY2NvdW50c1xuLSBVcGRhdGUgcGF5bWVudCByZWNvcmRzIGFzIHBheW1lbnRzIGFyZSByZWNlaXZlZFxuXG5HZW5lcmF0ZWQgb246ICR7Zm9ybWF0RGF0ZShuZXcgRGF0ZSgpKX0gYXQgJHtuZXcgRGF0ZSgpLnRvTG9jYWxlVGltZVN0cmluZygpfVxuICAgIGA7XG5cbiAgICBjb25zdCBtYWlsT3B0aW9ucyA9IHtcbiAgICAgIGZyb206IHByb2Nlc3MuZW52LkVNQUlMX1VTRVIgfHwgJ25vcmVwbHlAamhhcGFydG1lbnQuY29tJyxcbiAgICAgIHRvOiAnb2ZmaWNpYWwuamhhcGFydG1lbnRAZ21haWwuY29tJyxcbiAgICAgIHN1YmplY3Q6IHN1YmplY3QsXG4gICAgICB0ZXh0OiB0ZXh0Q29udGVudCxcbiAgICAgIGh0bWw6IGh0bWxDb250ZW50XG4gICAgfTtcblxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRyYW5zcG9ydGVyLnNlbmRNYWlsKG1haWxPcHRpb25zKTtcbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIG1lc3NhZ2VJZDogcmVzdWx0Lm1lc3NhZ2VJZCxcbiAgICAgIG1lc3NhZ2U6ICdCaWxsaW5nIHJlbWluZGVyIHNlbnQgdG8gbWFuYWdlbWVudCBzdWNjZXNzZnVsbHknLFxuICAgICAgYmlsbHNDb3VudDogYmlsbHMubGVuZ3RoXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdCaWxsaW5nIHJlbWluZGVyIGVtYWlsIHNlbmRpbmcgZXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlXG4gICAgfTtcbiAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQge1xuICBzZW5kQmlsbFRvVGVuYW50LFxuICBzZW5kUmVjZWlwdFRvVGVuYW50LFxuICB0ZXN0RW1haWxDb25maWcsXG4gIGdlbmVyYXRlQmlsbEhUTUwsXG4gIHNlbmRXZWxjb21lRW1haWwsXG4gIHNlbmREZXBvc2l0UmVjZWlwdEVtYWlsLFxuICBzZW5kQ29udHJhY3RFeHBpcnlOb3RpZmljYXRpb24sXG4gIHNlbmREZXBhcnR1cmVFbWFpbCxcbiAgc2VuZE1vbnRobHlSZXBvcnQsXG4gIHNlbmRCaWxsaW5nUmVtaW5kZXJUb01hbmFnZW1lbnRcbn07ICJdLCJuYW1lcyI6WyJub2RlbWFpbGVyIiwiY3JlYXRlVHJhbnNwb3J0ZXIiLCJjcmVhdGVUcmFuc3BvcnQiLCJzZXJ2aWNlIiwiYXV0aCIsInVzZXIiLCJwcm9jZXNzIiwiZW52IiwiRU1BSUxfVVNFUiIsInBhc3MiLCJFTUFJTF9QQVNTIiwiZm9ybWF0Q3VycmVuY3kiLCJhbW91bnQiLCJJbnRsIiwiTnVtYmVyRm9ybWF0Iiwic3R5bGUiLCJjdXJyZW5jeSIsImZvcm1hdCIsImZvcm1hdERhdGUiLCJkYXRlIiwiZGF0ZU9iaiIsIkRhdGUiLCJpc05hTiIsImdldFRpbWUiLCJEYXRlVGltZUZvcm1hdCIsInllYXIiLCJtb250aCIsImRheSIsImVycm9yIiwiZ2VuZXJhdGVCaWxsSFRNTCIsImJpbGwiLCJlbGVjdHJpY1JlYWRpbmciLCJlbGVjdHJpY19wcmVzZW50X3JlYWRpbmciLCJlbGVjdHJpY19wcmV2aW91c19yZWFkaW5nIiwiZWxlY3RyaWNDb25zdW1wdGlvbiIsImVsZWN0cmljX2NvbnN1bXB0aW9uIiwiYnJhbmNoX25hbWUiLCJicmFuY2hfYWRkcmVzcyIsInRlbmFudF9uYW1lIiwicm9vbV9udW1iZXIiLCJyZW50X2Zyb20iLCJyZW50X3RvIiwiYmlsbF9kYXRlIiwicmVudF9hbW91bnQiLCJlbGVjdHJpY19yYXRlX3Blcl9rd2giLCJlbGVjdHJpY19hbW91bnQiLCJ3YXRlcl9hbW91bnQiLCJleHRyYV9mZWVfYW1vdW50IiwiZXh0cmFfZmVlX2Rlc2NyaXB0aW9uIiwidG90YWxfYW1vdW50Iiwic3RhdHVzIiwidG9VcHBlckNhc2UiLCJzZW5kQmlsbFRvVGVuYW50IiwicmVjaXBpZW50RW1haWwiLCJjdXN0b21NZXNzYWdlIiwidHJhbnNwb3J0ZXIiLCJzdWJqZWN0IiwiaHRtbENvbnRlbnQiLCJ0ZXh0TWVzc2FnZSIsIm1haWxPcHRpb25zIiwiZnJvbSIsInRvIiwidGV4dCIsImh0bWwiLCJhdHRhY2htZW50cyIsInJlc3VsdCIsInNlbmRNYWlsIiwic3VjY2VzcyIsIm1lc3NhZ2VJZCIsIm1lc3NhZ2UiLCJjb25zb2xlIiwidGVzdEVtYWlsQ29uZmlnIiwidmVyaWZ5Iiwic2VuZFJlY2VpcHRUb1RlbmFudCIsInBheW1lbnRzIiwicGRmQnVmZmVyIiwicmVkdWNlIiwic3VtIiwicCIsInBhcnNlRmxvYXQiLCJsZW5ndGgiLCJwYXltZW50X2RhdGUiLCJmaWxlbmFtZSIsImlkIiwibm93IiwiY29udGVudCIsImNvbnRlbnRUeXBlIiwic2VuZFdlbGNvbWVFbWFpbCIsInRlbmFudCIsInJvb21JbmZvIiwibmFtZSIsIm1vbnRobHlfcmVudCIsImNvbnRyYWN0X3N0YXJ0X2RhdGUiLCJjb250cmFjdF9lbmRfZGF0ZSIsImNvbnRyYWN0X2R1cmF0aW9uX21vbnRocyIsImFkdmFuY2VfcGF5bWVudCIsInNlY3VyaXR5X2RlcG9zaXQiLCJ0ZXh0Q29udGVudCIsImVtYWlsIiwic2VuZERlcG9zaXRSZWNlaXB0RW1haWwiLCJkZXBvc2l0UmVjZWlwdEJ1ZmZlciIsInNlbmRDb250cmFjdEV4cGlyeU5vdGlmaWNhdGlvbiIsImRheXNVbnRpbEV4cGlyeSIsIk1hdGgiLCJjZWlsIiwic2VuZERlcGFydHVyZUVtYWlsIiwiZGVwYXJ0dXJlSW5mbyIsInJlbnRfc3RhcnQiLCJyZW50X2VuZCIsImNvbnRyYWN0X2NvbXBsZXRlZCIsInJlYXNvbl9mb3JfbGVhdmluZyIsInJlcGxhY2UiLCJ0b3RhbF9iaWxsc19wYWlkIiwidG90YWxfYmlsbHNfdW5wYWlkIiwic2VjdXJpdHlfZGVwb3NpdF9yZWZ1bmQiLCJzZW5kTW9udGhseVJlcG9ydCIsInJlcG9ydERhdGEiLCJtb250aE5hbWUiLCJyZXBvcnRfcGVyaW9kIiwibW9udGhfbmFtZSIsInRvdGFsUmV2ZW51ZSIsImZpbmFuY2lhbF9zdW1tYXJ5IiwidG90YWxfcmV2ZW51ZSIsInRvTG9jYWxlU3RyaW5nIiwib2NjdXBhbmN5UmF0ZSIsIm9jY3VwYW5jeV9tZXRyaWNzIiwib2NjdXBhbmN5X3JhdGUiLCJhY3RpdmVUZW5hbnRzIiwidGVuYW50X3N0YXRpc3RpY3MiLCJhY3RpdmVfdGVuYW50cyIsInJldmVudWVHcm93dGgiLCJyZXZlbnVlX2dyb3d0aCIsImJyYW5jaFRhYmxlIiwiYnJhbmNoX3BlcmZvcm1hbmNlIiwibWFwIiwiYnJhbmNoIiwib2NjdXBpZWRfcm9vbXMiLCJ0b3RhbF9yb29tcyIsInJldmVudWUiLCJqb2luIiwicGF5bWVudFRhYmxlIiwicGF5bWVudF9hbmFseXNpcyIsImJ5X21ldGhvZCIsIm1ldGhvZCIsInBheW1lbnRfbWV0aG9kIiwidHJhbnNhY3Rpb25fY291bnQiLCJwZXJjZW50YWdlIiwidG9wUGVyZm9ybWVyc1RhYmxlIiwidG9wX3BlcmZvcm1lcnMiLCJ0b3RhbF9wYWlkIiwiZ2VuZXJhdGVkX2F0IiwidG9Mb2NhbGVEYXRlU3RyaW5nIiwiYWJzIiwibmV0X3RlbmFudF9jaGFuZ2UiLCJjb2xsZWN0aW9uX3JhdGUiLCJ0b3RhbF9iaWxsZWQiLCJ0b3RhbF90cmFuc2FjdGlvbnMiLCJvdXRzdGFuZGluZ19zdW1tYXJ5IiwidG90YWxfb3V0c3RhbmRpbmciLCJ1bnBhaWRfYmlsbHNfY291bnQiLCJwYXJ0aWFsX2JpbGxzX2NvdW50IiwibmV3X3RlbmFudHMiLCJkZXBhcnRlZF90ZW5hbnRzIiwiZXhwaXJpbmdfY29udHJhY3RzIiwiRU1BSUxfRlJPTSIsImxvZyIsInNlbmRCaWxsaW5nUmVtaW5kZXJUb01hbmFnZW1lbnQiLCJiaWxscyIsImJpbGxzQnlEdWVEYXRlIiwiYWNjIiwiZHVlRGF0ZSIsInB1c2giLCJmaWx0ZXIiLCJkYXlzVW50aWxEdWUiLCJPYmplY3QiLCJlbnRyaWVzIiwiZGF0ZUJpbGxzIiwiZHVlRGF0ZUNsYXNzIiwiZHVlRGF0ZUxhYmVsIiwicmVtYWluaW5nX2JhbGFuY2UiLCJ0b0xvY2FsZVRpbWVTdHJpbmciLCJiaWxsc0NvdW50Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./services/emailService.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/semver","vendor-chunks/next","vendor-chunks/jsonwebtoken","vendor-chunks/jws","vendor-chunks/dotenv","vendor-chunks/ecdsa-sig-formatter","vendor-chunks/safe-buffer","vendor-chunks/ms","vendor-chunks/lodash.once","vendor-chunks/lodash.isstring","vendor-chunks/lodash.isplainobject","vendor-chunks/lodash.isnumber","vendor-chunks/lodash.isinteger","vendor-chunks/lodash.isboolean","vendor-chunks/lodash.includes","vendor-chunks/jwa","vendor-chunks/buffer-equal-constant-time"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fbills%2Freminders%2Froute&page=%2Fapi%2Fbills%2Freminders%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbills%2Freminders%2Froute.js&appDir=C%3A%5CUsers%5Cjoshu_mnu8z3u%5CDownloads%5CJ-H-Apartment%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cjoshu_mnu8z3u%5CDownloads%5CJ-H-Apartment&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();