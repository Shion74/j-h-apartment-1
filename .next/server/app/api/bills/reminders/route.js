/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/bills/reminders/route";
exports.ids = ["app/api/bills/reminders/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/@supabase/realtime-js/dist/main sync recursive":
/*!************************************************************!*\
  !*** ./node_modules/@supabase/realtime-js/dist/main/ sync ***!
  \************************************************************/
/***/ ((module) => {

function webpackEmptyContext(req) {
	var e = new Error("Cannot find module '" + req + "'");
	e.code = 'MODULE_NOT_FOUND';
	throw e;
}
webpackEmptyContext.keys = () => ([]);
webpackEmptyContext.resolve = webpackEmptyContext;
webpackEmptyContext.id = "(rsc)/./node_modules/@supabase/realtime-js/dist/main sync recursive";
module.exports = webpackEmptyContext;

/***/ }),

/***/ "bcrypt":
/*!*************************!*\
  !*** external "bcrypt" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("bcrypt");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "nodemailer":
/*!*****************************!*\
  !*** external "nodemailer" ***!
  \*****************************/
/***/ ((module) => {

"use strict";
module.exports = require("nodemailer");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "pg":
/*!*********************!*\
  !*** external "pg" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = import("pg");;

/***/ }),

/***/ "?32c4":
/*!****************************!*\
  !*** bufferutil (ignored) ***!
  \****************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?66e9":
/*!********************************!*\
  !*** utf-8-validate (ignored) ***!
  \********************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fbills%2Freminders%2Froute&page=%2Fapi%2Fbills%2Freminders%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbills%2Freminders%2Froute.js&appDir=C%3A%5CUsers%5Cjoshu_mnu8z3u%5CDownloads%5Cj-h-apartment-1%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cjoshu_mnu8z3u%5CDownloads%5Cj-h-apartment-1&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fbills%2Freminders%2Froute&page=%2Fapi%2Fbills%2Freminders%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbills%2Freminders%2Froute.js&appDir=C%3A%5CUsers%5Cjoshu_mnu8z3u%5CDownloads%5Cj-h-apartment-1%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cjoshu_mnu8z3u%5CDownloads%5Cj-h-apartment-1&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_joshu_mnu8z3u_Downloads_j_h_apartment_1_app_api_bills_reminders_route_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/bills/reminders/route.js */ \"(rsc)/./app/api/bills/reminders/route.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([C_Users_joshu_mnu8z3u_Downloads_j_h_apartment_1_app_api_bills_reminders_route_js__WEBPACK_IMPORTED_MODULE_3__]);\nC_Users_joshu_mnu8z3u_Downloads_j_h_apartment_1_app_api_bills_reminders_route_js__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/bills/reminders/route\",\n        pathname: \"/api/bills/reminders\",\n        filename: \"route\",\n        bundlePath: \"app/api/bills/reminders/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\joshu_mnu8z3u\\\\Downloads\\\\j-h-apartment-1\\\\app\\\\api\\\\bills\\\\reminders\\\\route.js\",\n    nextConfigOutput,\n    userland: C_Users_joshu_mnu8z3u_Downloads_j_h_apartment_1_app_api_bills_reminders_route_js__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/bills/reminders/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZiaWxscyUyRnJlbWluZGVycyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGYmlsbHMlMkZyZW1pbmRlcnMlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZiaWxscyUyRnJlbWluZGVycyUyRnJvdXRlLmpzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNqb3NodV9tbnU4ejN1JTVDRG93bmxvYWRzJTVDai1oLWFwYXJ0bWVudC0xJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDVXNlcnMlNUNqb3NodV9tbnU4ejN1JTVDRG93bmxvYWRzJTVDai1oLWFwYXJ0bWVudC0xJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUMwQztBQUN2SDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCxxQyIsInNvdXJjZXMiOlsid2VicGFjazovL2otaC1hcGFydG1lbnQtbmV4dGpzLz8xMjg5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFVzZXJzXFxcXGpvc2h1X21udTh6M3VcXFxcRG93bmxvYWRzXFxcXGotaC1hcGFydG1lbnQtMVxcXFxhcHBcXFxcYXBpXFxcXGJpbGxzXFxcXHJlbWluZGVyc1xcXFxyb3V0ZS5qc1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYmlsbHMvcmVtaW5kZXJzL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYmlsbHMvcmVtaW5kZXJzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9iaWxscy9yZW1pbmRlcnMvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxVc2Vyc1xcXFxqb3NodV9tbnU4ejN1XFxcXERvd25sb2Fkc1xcXFxqLWgtYXBhcnRtZW50LTFcXFxcYXBwXFxcXGFwaVxcXFxiaWxsc1xcXFxyZW1pbmRlcnNcXFxccm91dGUuanNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2JpbGxzL3JlbWluZGVycy9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fbills%2Freminders%2Froute&page=%2Fapi%2Fbills%2Freminders%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbills%2Freminders%2Froute.js&appDir=C%3A%5CUsers%5Cjoshu_mnu8z3u%5CDownloads%5Cj-h-apartment-1%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cjoshu_mnu8z3u%5CDownloads%5Cj-h-apartment-1&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/bills/reminders/route.js":
/*!******************************************!*\
  !*** ./app/api/bills/reminders/route.js ***!
  \******************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_database__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../lib/database */ \"(rsc)/./lib/database.js\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../lib/auth */ \"(rsc)/./lib/auth.js\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_lib_auth__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _services_emailService__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../services/emailService */ \"(rsc)/./services/emailService.js\");\n/* harmony import */ var _models_bill__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../models/bill */ \"(rsc)/./models/bill.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_database__WEBPACK_IMPORTED_MODULE_1__, _models_bill__WEBPACK_IMPORTED_MODULE_4__]);\n([_lib_database__WEBPACK_IMPORTED_MODULE_1__, _models_bill__WEBPACK_IMPORTED_MODULE_4__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\nasync function POST(request) {\n    try {\n        // Check authentication\n        const authResult = (0,_lib_auth__WEBPACK_IMPORTED_MODULE_2__.requireAuth)(request);\n        if (authResult.error) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                message: authResult.error\n            }, {\n                status: authResult.status\n            });\n        }\n        console.log(\"\\uD83D\\uDD14 Processing billing reminders...\");\n        // Get tenants that need bill creation reminders\n        const tenantsNeedingReminders = await _models_bill__WEBPACK_IMPORTED_MODULE_4__[\"default\"].getBillsNeedingReminders();\n        if (tenantsNeedingReminders.length === 0) {\n            console.log(\"✅ No tenants need bill creation reminders today\");\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                message: \"No tenants need bill creation reminders today\",\n                tenants_processed: 0,\n                reminders_sent: 0\n            });\n        }\n        console.log(`📋 Found ${tenantsNeedingReminders.length} tenants needing bill creation reminders`);\n        // Filter tenants that haven't had a reminder sent today\n        const today = new Date().toISOString().split(\"T\")[0];\n        const tenantsToRemind = [];\n        for (const tenant of tenantsNeedingReminders){\n            // Check if bill creation reminder was already sent today for this tenant\n            const existingReminderResult = await _lib_database__WEBPACK_IMPORTED_MODULE_1__.pool.query(`\r\n        SELECT id FROM billing_reminders \r\n        WHERE tenant_id = $1 AND reminder_date = $2 AND reminder_type = 'bill_creation'\r\n      `, [\n                tenant.tenant_id,\n                today\n            ]);\n            const existingReminder = existingReminderResult.rows;\n            if (existingReminder.length === 0) {\n                tenantsToRemind.push(tenant);\n            }\n        }\n        if (tenantsToRemind.length === 0) {\n            console.log(\"✅ All bill creation reminders for today have already been sent\");\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                message: \"All bill creation reminders for today have already been sent\",\n                tenants_processed: tenantsNeedingReminders.length,\n                reminders_sent: 0\n            });\n        }\n        console.log(`📧 Sending bill creation reminder for ${tenantsToRemind.length} tenants`);\n        // Send email reminder to management\n        const emailResult = await _services_emailService__WEBPACK_IMPORTED_MODULE_3__[\"default\"].sendBillingReminderToManagement(tenantsToRemind);\n        let remindersSent = 0;\n        let errors = [];\n        if (emailResult.success) {\n            // Record reminders in database\n            for (const tenant of tenantsToRemind){\n                try {\n                    await _lib_database__WEBPACK_IMPORTED_MODULE_1__.pool.query(`\r\n            INSERT INTO billing_reminders \r\n            (tenant_id, reminder_date, days_before_due, email_sent, email_sent_at, reminder_type) \r\n            VALUES ($1, $2, $3, TRUE, NOW(), 'bill_creation') RETURNING id\r\n          `, [\n                        tenant.tenant_id,\n                        today,\n                        tenant.days_until_due\n                    ]);\n                    // Also log in email_notifications table\n                    await _lib_database__WEBPACK_IMPORTED_MODULE_1__.pool.query(`\r\n            INSERT INTO email_notifications \r\n            (tenant_id, email_type, email_subject, recipient_email, status, sent_at) \r\n            VALUES ($1, 'bill_creation_reminder', $2, 'official.jhapartment@gmail.com', 'sent', NOW()) RETURNING id\r\n          `, [\n                        tenant.tenant_id,\n                        `Bill Creation Reminder - ${tenant.tenant_name} - Room ${tenant.room_number}`\n                    ]);\n                    remindersSent++;\n                } catch (error) {\n                    console.error(`❌ Failed to record reminder for tenant ${tenant.tenant_id}:`, error);\n                    errors.push({\n                        tenant_id: tenant.tenant_id,\n                        tenant_name: tenant.tenant_name,\n                        error: error.message\n                    });\n                }\n            }\n            console.log(`✅ Successfully sent bill creation reminder email for ${remindersSent} tenants`);\n        } else {\n            console.error(\"❌ Failed to send bill creation reminder email:\", emailResult.error);\n            // Record failed attempts\n            for (const tenant of tenantsToRemind){\n                try {\n                    await _lib_database__WEBPACK_IMPORTED_MODULE_1__.pool.query(`\r\n            INSERT INTO billing_reminders \r\n            (tenant_id, reminder_date, days_before_due, email_sent, email_sent_at, reminder_type) \r\n            VALUES ($1, $2, $3, FALSE, NULL, 'bill_creation') RETURNING id\r\n          `, [\n                        tenant.tenant_id,\n                        today,\n                        tenant.days_until_due\n                    ]);\n                    await _lib_database__WEBPACK_IMPORTED_MODULE_1__.pool.query(`\r\n            INSERT INTO email_notifications \r\n            (tenant_id, email_type, email_subject, recipient_email, status, error_message) \r\n            VALUES ($1, 'bill_creation_reminder', $2, 'official.jhapartment@gmail.com', 'failed', $3) RETURNING id\r\n          `, [\n                        tenant.tenant_id,\n                        `Bill Creation Reminder - ${tenant.tenant_name} - Room ${tenant.room_number}`,\n                        emailResult.error\n                    ]);\n                } catch (recordError) {\n                    console.error(`❌ Failed to record failed reminder for tenant ${tenant.tenant_id}:`, recordError);\n                }\n            }\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            message: emailResult.success ? `Bill creation reminder sent successfully for ${remindersSent} tenants` : `Failed to send bill creation reminder: ${emailResult.error}`,\n            tenants_processed: tenantsNeedingReminders.length,\n            tenants_to_remind: tenantsToRemind.length,\n            reminders_sent: remindersSent,\n            email_result: emailResult,\n            errors: errors.length > 0 ? errors : undefined\n        });\n    } catch (error) {\n        console.error(\"❌ Billing reminders error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            message: \"Internal server error\",\n            error: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n// GET endpoint to check what bills need reminders (for testing/preview)\nasync function GET(request) {\n    try {\n        // Check authentication\n        const authResult = (0,_lib_auth__WEBPACK_IMPORTED_MODULE_2__.requireAuth)(request);\n        if (authResult.error) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                message: authResult.error\n            }, {\n                status: authResult.status\n            });\n        }\n        // Get tenants that need bill creation reminders\n        const tenantsNeedingReminders = await _models_bill__WEBPACK_IMPORTED_MODULE_4__[\"default\"].getBillsNeedingReminders();\n        // Check which ones haven't had reminders sent today\n        const today = new Date().toISOString().split(\"T\")[0];\n        const tenantsWithReminderStatus = [];\n        for (const tenant of tenantsNeedingReminders){\n            const existingReminderResult = await _lib_database__WEBPACK_IMPORTED_MODULE_1__.pool.query(`\r\n        SELECT id, email_sent, email_sent_at FROM billing_reminders \r\n        WHERE tenant_id = $1 AND reminder_date = $2 AND reminder_type = 'bill_creation'\r\n      `, [\n                tenant.tenant_id,\n                today\n            ]);\n            const existingReminder = existingReminderResult.rows;\n            tenantsWithReminderStatus.push({\n                ...tenant,\n                reminder_sent_today: existingReminder.length > 0,\n                reminder_details: existingReminder[0] || null\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            tenants_needing_reminders: tenantsNeedingReminders.length,\n            tenants_without_reminders_today: tenantsWithReminderStatus.filter((t)=>!t.reminder_sent_today).length,\n            tenants: tenantsWithReminderStatus\n        });\n    } catch (error) {\n        console.error(\"❌ Get billing reminders error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            message: \"Internal server error\",\n            error: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2JpbGxzL3JlbWluZGVycy9yb3V0ZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUEwQztBQUNLO0FBQ0c7QUFDVTtBQUNsQjtBQUVuQyxlQUFlSyxLQUFLQyxPQUFPO0lBQ2hDLElBQUk7UUFDRix1QkFBdUI7UUFDdkIsTUFBTUMsYUFBYUwsc0RBQVdBLENBQUNJO1FBQy9CLElBQUlDLFdBQVdDLEtBQUssRUFBRTtZQUNwQixPQUFPUixxREFBWUEsQ0FBQ1MsSUFBSSxDQUN0QjtnQkFBRUMsU0FBUztnQkFBT0MsU0FBU0osV0FBV0MsS0FBSztZQUFDLEdBQzVDO2dCQUFFSSxRQUFRTCxXQUFXSyxNQUFNO1lBQUM7UUFFaEM7UUFFQUMsUUFBUUMsR0FBRyxDQUFDO1FBRVosZ0RBQWdEO1FBQ2hELE1BQU1DLDBCQUEwQixNQUFNWCxvREFBSUEsQ0FBQ1ksd0JBQXdCO1FBRW5FLElBQUlELHdCQUF3QkUsTUFBTSxLQUFLLEdBQUc7WUFDeENKLFFBQVFDLEdBQUcsQ0FBQztZQUNaLE9BQU9kLHFEQUFZQSxDQUFDUyxJQUFJLENBQUM7Z0JBQ3ZCQyxTQUFTO2dCQUNUQyxTQUFTO2dCQUNUTyxtQkFBbUI7Z0JBQ25CQyxnQkFBZ0I7WUFDbEI7UUFDRjtRQUVBTixRQUFRQyxHQUFHLENBQUMsQ0FBQyxTQUFTLEVBQUVDLHdCQUF3QkUsTUFBTSxDQUFDLHdDQUF3QyxDQUFDO1FBRWhHLHdEQUF3RDtRQUN4RCxNQUFNRyxRQUFRLElBQUlDLE9BQU9DLFdBQVcsR0FBR0MsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFO1FBQ3BELE1BQU1DLGtCQUFrQixFQUFFO1FBRTFCLEtBQUssTUFBTUMsVUFBVVYsd0JBQXlCO1lBQzVDLHlFQUF5RTtZQUN6RSxNQUFNVyx5QkFBeUIsTUFBTXpCLCtDQUFJQSxDQUFDMEIsS0FBSyxDQUFDLENBQUM7OztNQUdqRCxDQUFDLEVBQUU7Z0JBQUNGLE9BQU9HLFNBQVM7Z0JBQUVSO2FBQU07WUFFOUIsTUFB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LEdBQUc7Z0JBQy9DNkIsa0JBQWtCakIsZ0JBQWdCLENBQUMsRUFBRSxJQUFJO1lBQzNDO1FBQ0Y7UUFFQSxPQUFPN0IscURBQVlBLENBQUNTLElBQUksQ0FBQztZQUN2QkMsU0FBUztZQUNUcUMsMkJBQTJCaEMsd0JBQXdCRSxNQUFNO1lBQ3pEK0IsaUNBQWlDSiwwQkFBMEJLLE1BQU0sQ0FBQ0MsQ0FBQUEsSUFBSyxDQUFDQSxFQUFFTCxtQkFBbUIsRUFBRTVCLE1BQU07WUFDckdrQyxTQUFTUDtRQUNYO0lBRUYsRUFBRSxPQUFPcEMsT0FBTztRQUNkSyxRQUFRTCxLQUFLLENBQUMsa0NBQWtDQTtRQUNoRCxPQUFPUixxREFBWUEsQ0FBQ1MsSUFBSSxDQUN0QjtZQUFFQyxTQUFTO1lBQU9DLFNBQVM7WUFBeUJILE9BQU9BLE1BQU1HLE9BQU87UUFBQyxHQUN6RTtZQUFFQyxRQUFRO1FBQUk7SUFFbEI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2otaC1hcGFydG1lbnQtbmV4dGpzLy4vYXBwL2FwaS9iaWxscy9yZW1pbmRlcnMvcm91dGUuanM/OTc4YiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcidcclxuaW1wb3J0IHsgcG9vbCB9IGZyb20gJy4uLy4uLy4uLy4uL2xpYi9kYXRhYmFzZSdcclxuaW1wb3J0IHsgcmVxdWlyZUF1dGggfSBmcm9tICcuLi8uLi8uLi8uLi9saWIvYXV0aCdcclxuaW1wb3J0IGVtYWlsU2VydmljZSBmcm9tICcuLi8uLi8uLi8uLi9zZXJ2aWNlcy9lbWFpbFNlcnZpY2UnXHJcbmltcG9ydCBCaWxsIGZyb20gJy4uLy4uLy4uLy4uL21vZGVscy9iaWxsJ1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdCkge1xyXG4gIHRyeSB7XHJcbiAgICAvLyBDaGVjayBhdXRoZW50aWNhdGlvblxyXG4gICAgY29uc3QgYXV0aFJlc3VsdCA9IHJlcXVpcmVBdXRoKHJlcXVlc3QpXHJcbiAgICBpZiAoYXV0aFJlc3VsdC5lcnJvcikge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogYXV0aFJlc3VsdC5lcnJvciB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiBhdXRoUmVzdWx0LnN0YXR1cyB9XHJcbiAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICBjb25zb2xlLmxvZygn8J+UlCBQcm9jZXNzaW5nIGJpbGxpbmcgcmVtaW5kZXJzLi4uJylcclxuXHJcbiAgICAvLyBHZXQgdGVuYW50cyB0aGF0IG5lZWQgYmlsbCBjcmVhdGlvbiByZW1pbmRlcnNcclxuICAgIGNvbnN0IHRlbmFudHNOZWVkaW5nUmVtaW5kZXJzID0gYXdhaXQgQmlsbC5nZXRCaWxsc05lZWRpbmdSZW1pbmRlcnMoKVxyXG4gICAgXHJcbiAgICBpZiAodGVuYW50c05lZWRpbmdSZW1pbmRlcnMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCfinIUgTm8gdGVuYW50cyBuZWVkIGJpbGwgY3JlYXRpb24gcmVtaW5kZXJzIHRvZGF5JylcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgIG1lc3NhZ2U6ICdObyB0ZW5hbnRzIG5lZWQgYmlsbCBjcmVhdGlvbiByZW1pbmRlcnMgdG9kYXknLFxyXG4gICAgICAgIHRlbmFudHNfcHJvY2Vzc2VkOiAwLFxyXG4gICAgICAgIHJlbWluZGVyc19zZW50OiAwXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgY29uc29sZS5sb2coYPCfk4sgRm91bmQgJHt0ZW5hbnRzTmVlZGluZ1JlbWluZGVycy5sZW5ndGh9IHRlbmFudHMgbmVlZGluZyBiaWxsIGNyZWF0aW9uIHJlbWluZGVyc2ApXHJcblxyXG4gICAgLy8gRmlsdGVyIHRlbmFudHMgdGhhdCBoYXZlbid0IGhhZCBhIHJlbWluZGVyIHNlbnQgdG9kYXlcclxuICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF1cclxuICAgIGNvbnN0IHRlbmFudHNUb1JlbWluZCA9IFtdXHJcblxyXG4gICAgZm9yIChjb25zdCB0ZW5hbnQgb2YgdGVuYW50c05lZWRpbmdSZW1pbmRlcnMpIHtcclxuICAgICAgLy8gQ2hlY2sgaWYgYmlsbCBjcmVhdGlvbiByZW1pbmRlciB3YXMgYWxyZWFkeSBzZW50IHRvZGF5IGZvciB0aGlzIHRlbmFudFxyXG4gICAgICBjb25zdCBleGlzdGluZ1JlbWluZGVyUmVzdWx0ID0gYXdhaXQgcG9vbC5xdWVyeShgXHJcbiAgICAgICAgU0VMRUNUIGlkIEZST00gYmlsbGluZ19yZW1pbmRlcnMgXHJcbiAgICAgICAgV0hFUkUgdGVuYW50X2lkID0gJDEgQU5EIHJlbWluZGVyX2RhdGUgPSAkMiBBTkQgcmVtaW5kZXJfdHlwZSA9ICdiaWxsX2NyZWF0aW9uJ1xyXG4gICAgICBgLCBbdGVuYW50LnRlbmFudF9pZCwgdG9kYXldKVxyXG5cclxuICAgIGNvbnN0IGV4aXN0aW5nUmVtaW5kZXIgPSBleGlzdGluZ1JlbWluZGVyUmVzdWx0LnJvd3NcclxuICAgICAgaWYgKGV4aXN0aW5nUmVtaW5kZXIubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgdGVuYW50c1RvUmVtaW5kLnB1c2godGVuYW50KVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRlbmFudHNUb1JlbWluZC5sZW5ndGggPT09IDApIHtcclxuICAgICAgY29uc29sZS5sb2coJ+KchSBBbGwgYmlsbCBjcmVhdGlvbiByZW1pbmRlcnMgZm9yIHRvZGF5IGhhdmUgYWxyZWFkeSBiZWVuIHNlbnQnKVxyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgbWVzc2FnZTogJ0FsbCBiaWxsIGNyZWF0aW9uIHJlbWluZGVycyBmb3IgdG9kYXkgaGF2ZSBhbHJlYWR5IGJlZW4gc2VudCcsXHJcbiAgICAgICAgdGVuYW50c19wcm9jZXNzZWQ6IHRlbmFudHNOZWVkaW5nUmVtaW5kZXJzLmxlbmd0aCxcclxuICAgICAgICByZW1pbmRlcnNfc2VudDogMFxyXG4gICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnNvbGUubG9nKGDwn5OnIFNlbmRpbmcgYmlsbCBjcmVhdGlvbiByZW1pbmRlciBmb3IgJHt0ZW5hbnRzVG9SZW1pbmQubGVuZ3RofSB0ZW5hbnRzYClcclxuXHJcbiAgICAvLyBTZW5kIGVtYWlsIHJlbWluZGVyIHRvIG1hbmFnZW1lbnRcclxuICAgIGNvbnN0IGVtYWlsUmVzdWx0ID0gYXdhaXQgZW1haWxTZXJ2aWNlLnNlbmRCaWxsaW5nUmVtaW5kZXJUb01hbmFnZW1lbnQodGVuYW50c1RvUmVtaW5kKVxyXG4gICAgXHJcbiAgICBsZXQgcmVtaW5kZXJzU2VudCA9IDBcclxuICAgIGxldCBlcnJvcnMgPSBbXVxyXG5cclxuICAgIGlmIChlbWFpbFJlc3VsdC5zdWNjZXNzKSB7XHJcbiAgICAgIC8vIFJlY29yZCByZW1pbmRlcnMgaW4gZGF0YWJhc2VcclxuICAgICAgZm9yIChjb25zdCB0ZW5hbnQgb2YgdGVuYW50c1RvUmVtaW5kKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGF3YWl0IHBvb2wucXVlcnkoYFxyXG4gICAgICAgICAgICBJTlNFUlQgSU5UTyBiaWxsaW5nX3JlbWluZGVycyBcclxuICAgICAgICAgICAgKHRlbmFudF9pZCwgcmVtaW5kZXJfZGF0ZSwgZGF5c19iZWZvcmVfZHVlLCBlbWFpbF9zZW50LCBlbWFpbF9zZW50X2F0LCByZW1pbmRlcl90eXBlKSBcclxuICAgICAgICAgICAgVkFMVUVTICgkMSwgJDIsICQzLCBUUlVFLCBOT1coKSwgJ2JpbGxfY3JlYXRpb24nKSBSRVRVUk5JTkcgaWRcclxuICAgICAgICAgIGAsIFt0ZW5hbnQudGVuYW50X2lkLCB0b2RheSwgdGVuYW50LmRheXNfdW50aWxfZHVlXSlcclxuXHJcbiAgICAgICAgICAvLyBBbHNvIGxvZyBpbiBlbWFpbF9ub3RpZmljYXRpb25zIHRhYmxlXHJcbiAgICAgICAgICBhd2FpdCBwb29sLnF1ZXJ5KGBcclxuICAgICAgICAgICAgSU5TRVJUIElOVE8gZW1haWxfbm90aWZpY2F0aW9ucyBcclxuICAgICAgICAgICAgKHRlbmFudF9pZCwgZW1haWxfdHlwZSwgZW1haWxfc3ViamVjdCwgcmVjaXBpZW50X2VtYWlsLCBzdGF0dXMsIHNlbnRfYXQpIFxyXG4gICAgICAgICAgICBWQUxVRVMgKCQxLCAnYmlsbF9jcmVhdGlvbl9yZW1pbmRlcicsICQyLCAnb2ZmaWNpYWwuamhhcGFydG1lbnRAZ21haWwuY29tJywgJ3NlbnQnLCBOT1coKSkgUkVUVVJOSU5HIGlkXHJcbiAgICAgICAgICBgLCBbdGVuYW50LnRlbmFudF9pZCwgYEJpbGwgQ3JlYXRpb24gUmVtaW5kZXIgLSAke3RlbmFudC50ZW5hbnRfbmFtZX0gLSBSb29tICR7dGVuYW50LnJvb21fbnVtYmVyfWBdKVxyXG5cclxuICAgICAgICAgIHJlbWluZGVyc1NlbnQrK1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGDinYwgRmFpbGVkIHRvIHJlY29yZCByZW1pbmRlciBmb3IgdGVuYW50ICR7dGVuYW50LnRlbmFudF9pZH06YCwgZXJyb3IpXHJcbiAgICAgICAgICBlcnJvcnMucHVzaCh7XHJcbiAgICAgICAgICAgIHRlbmFudF9pZDogdGVuYW50LnRlbmFudF9pZCxcclxuICAgICAgICAgICAgdGVuYW50X25hbWU6IHRlbmFudC50ZW5hbnRfbmFtZSxcclxuICAgICAgICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2VcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zb2xlLmxvZyhg4pyFIFN1Y2Nlc3NmdWxseSBzZW50IGJpbGwgY3JlYXRpb24gcmVtaW5kZXIgZW1haWwgZm9yICR7cmVtaW5kZXJzU2VudH0gdGVuYW50c2ApXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgRmFpbGVkIHRvIHNlbmQgYmlsbCBjcmVhdGlvbiByZW1pbmRlciBlbWFpbDonLCBlbWFpbFJlc3VsdC5lcnJvcilcclxuICAgICAgXHJcbiAgICAgIC8vIFJlY29yZCBmYWlsZWQgYXR0ZW1wdHNcclxuICAgICAgZm9yIChjb25zdCB0ZW5hbnQgb2YgdGVuYW50c1RvUmVtaW5kKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGF3YWl0IHBvb2wucXVlcnkoYFxyXG4gICAgICAgICAgICBJTlNFUlQgSU5UTyBiaWxsaW5nX3JlbWluZGVycyBcclxuICAgICAgICAgICAgKHRlbmFudF9pZCwgcmVtaW5kZXJfZGF0ZSwgZGF5c19iZWZvcmVfZHVlLCBlbWFpbF9zZW50LCBlbWFpbF9zZW50X2F0LCByZW1pbmRlcl90eXBlKSBcclxuICAgICAgICAgICAgVkFMVUVTICgkMSwgJDIsICQzLCBGQUxTRSwgTlVMTCwgJ2JpbGxfY3JlYXRpb24nKSBSRVRVUk5JTkcgaWRcclxuICAgICAgICAgIGAsIFt0ZW5hbnQudGVuYW50X2lkLCB0b2RheSwgdGVuYW50LmRheXNfdW50aWxfZHVlXSlcclxuXHJcbiAgICAgICAgICBhd2FpdCBwb29sLnF1ZXJ5KGBcclxuICAgICAgICAgICAgSU5TRVJUIElOVE8gZW1haWxfbm90aWZpY2F0aW9ucyBcclxuICAgICAgICAgICAgKHRlbmFudF9pZCwgZW1haWxfdHlwZSwgZW1haWxfc3ViamVjdCwgcmVjaXBpZW50X2VtYWlsLCBzdGF0dXMsIGVycm9yX21lc3NhZ2UpIFxyXG4gICAgICAgICAgICBWQUxVRVMgKCQxLCAnYmlsbF9jcmVhdGlvbl9yZW1pbmRlcicsICQyLCAnb2ZmaWNpYWwuamhhcGFydG1lbnRAZ21haWwuY29tJywgJ2ZhaWxlZCcsICQzKSBSRVRVUk5JTkcgaWRcclxuICAgICAgICAgIGAsIFt0ZW5hbnQudGVuYW50X2lkLCBgQmlsbCBDcmVhdGlvbiBSZW1pbmRlciAtICR7dGVuYW50LnRlbmFudF9uYW1lfSAtIFJvb20gJHt0ZW5hbnQucm9vbV9udW1iZXJ9YCwgZW1haWxSZXN1bHQuZXJyb3JdKVxyXG4gICAgICAgIH0gY2F0Y2ggKHJlY29yZEVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGDinYwgRmFpbGVkIHRvIHJlY29yZCBmYWlsZWQgcmVtaW5kZXIgZm9yIHRlbmFudCAke3RlbmFudC50ZW5hbnRfaWR9OmAsIHJlY29yZEVycm9yKVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgIG1lc3NhZ2U6IGVtYWlsUmVzdWx0LnN1Y2Nlc3MgPyBcclxuICAgICAgICBgQmlsbCBjcmVhdGlvbiByZW1pbmRlciBzZW50IHN1Y2Nlc3NmdWxseSBmb3IgJHtyZW1pbmRlcnNTZW50fSB0ZW5hbnRzYCA6IFxyXG4gICAgICAgIGBGYWlsZWQgdG8gc2VuZCBiaWxsIGNyZWF0aW9uIHJlbWluZGVyOiAke2VtYWlsUmVzdWx0LmVycm9yfWAsXHJcbiAgICAgIHRlbmFudHNfcHJvY2Vzc2VkOiB0ZW5hbnRzTmVlZGluZ1JlbWluZGVycy5sZW5ndGgsXHJcbiAgICAgIHRlbmFudHNfdG9fcmVtaW5kOiB0ZW5hbnRzVG9SZW1pbmQubGVuZ3RoLFxyXG4gICAgICByZW1pbmRlcnNfc2VudDogcmVtaW5kZXJzU2VudCxcclxuICAgICAgZW1haWxfcmVzdWx0OiBlbWFpbFJlc3VsdCxcclxuICAgICAgZXJyb3JzOiBlcnJvcnMubGVuZ3RoID4gMCA/IGVycm9ycyA6IHVuZGVmaW5lZFxyXG4gICAgfSlcclxuXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBCaWxsaW5nIHJlbWluZGVycyBlcnJvcjonLCBlcnJvcilcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ0ludGVybmFsIHNlcnZlciBlcnJvcicsIGVycm9yOiBlcnJvci5tZXNzYWdlIH0sXHJcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgKVxyXG4gIH1cclxufVxyXG5cclxuLy8gR0VUIGVuZHBvaW50IHRvIGNoZWNrIHdoYXQgYmlsbHMgbmVlZCByZW1pbmRlcnMgKGZvciB0ZXN0aW5nL3ByZXZpZXcpXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdCkge1xyXG4gIHRyeSB7XHJcbiAgICAvLyBDaGVjayBhdXRoZW50aWNhdGlvblxyXG4gICAgY29uc3QgYXV0aFJlc3VsdCA9IHJlcXVpcmVBdXRoKHJlcXVlc3QpXHJcbiAgICBpZiAoYXV0aFJlc3VsdC5lcnJvcikge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogYXV0aFJlc3VsdC5lcnJvciB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiBhdXRoUmVzdWx0LnN0YXR1cyB9XHJcbiAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICAvLyBHZXQgdGVuYW50cyB0aGF0IG5lZWQgYmlsbCBjcmVhdGlvbiByZW1pbmRlcnNcclxuICAgIGNvbnN0IHRlbmFudHNOZWVkaW5nUmVtaW5kZXJzID0gYXdhaXQgQmlsbC5nZXRCaWxsc05lZWRpbmdSZW1pbmRlcnMoKVxyXG4gICAgXHJcbiAgICAvLyBDaGVjayB3aGljaCBvbmVzIGhhdmVuJ3QgaGFkIHJlbWluZGVycyBzZW50IHRvZGF5XHJcbiAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdXHJcbiAgICBjb25zdCB0ZW5hbnRzV2l0aFJlbWluZGVyU3RhdHVzID0gW11cclxuXHJcbiAgICBmb3IgKGNvbnN0IHRlbmFudCBvZiB0ZW5hbnRzTmVlZGluZ1JlbWluZGVycykge1xyXG4gICAgICBjb25zdCBleGlzdGluZ1JlbWluZGVyUmVzdWx0ID0gYXdhaXQgcG9vbC5xdWVyeShgXHJcbiAgICAgICAgU0VMRUNUIGlkLCBlbWFpbF9zZW50LCBlbWFpbF9zZW50X2F0IEZST00gYmlsbGluZ19yZW1pbmRlcnMgXHJcbiAgICAgICAgV0hFUkUgdGVuYW50X2lkID0gJDEgQU5EIHJlbWluZGVyX2RhdGUgPSAkMiBBTkQgcmVtaW5kZXJfdHlwZSA9ICdiaWxsX2NyZWF0aW9uJ1xyXG4gICAgICBgLCBbdGVuYW50LnRlbmFudF9pZCwgdG9kYXldKVxyXG5cclxuICAgIGNvbnN0IGV4aXN0aW5nUmVtaW5kZXIgPSBleGlzdGluZ1JlbWluZGVyUmVzdWx0LnJvd3NcclxuICAgICAgdGVuYW50c1dpdGhSZW1pbmRlclN0YXR1cy5wdXNoKHtcclxuICAgICAgICAuLi50ZW5hbnQsXHJcbiAgICAgICAgcmVtaW5kZXJfc2VudF90b2RheTogZXhpc3RpbmdSZW1pbmRlci5sZW5ndGggPiAwLFxyXG4gICAgICAgIHJlbWluZGVyX2RldGFpbHM6IGV4aXN0aW5nUmVtaW5kZXJbMF0gfHwgbnVsbFxyXG4gICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgIHRlbmFudHNfbmVlZGluZ19yZW1pbmRlcnM6IHRlbmFudHNOZWVkaW5nUmVtaW5kZXJzLmxlbmd0aCxcclxuICAgICAgdGVuYW50c193aXRob3V0X3JlbWluZGVyc190b2RheTogdGVuYW50c1dpdGhSZW1pbmRlclN0YXR1cy5maWx0ZXIodCA9PiAhdC5yZW1pbmRlcl9zZW50X3RvZGF5KS5sZW5ndGgsXHJcbiAgICAgIHRlbmFudHM6IHRlbmFudHNXaXRoUmVtaW5kZXJTdGF0dXNcclxuICAgIH0pXHJcblxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCfinYwgR2V0IGJpbGxpbmcgcmVtaW5kZXJzIGVycm9yOicsIGVycm9yKVxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJywgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSxcclxuICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICApXHJcbiAgfVxyXG59ICJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJwb29sIiwicmVxdWlyZUF1dGgiLCJlbWFpbFNlcnZpY2UiLCJCaWxsIiwiUE9TVCIsInJlcXVlc3QiLCJhdXRoUmVzdWx0IiwiZXJyb3IiLCJqc29uIiwic3VjY2VzcyIsIm1lc3NhZ2UiLCJzdGF0dXMiLCJjb25zb2xlIiwibG9nIiwidGVuYW50c05lZWRpbmdSZW1pbmRlcnMiLCJnZXRCaWxsc05lZWRpbmdSZW1pbmRlcnMiLCJsZW5ndGgiLCJ0ZW5hbnRzX3Byb2Nlc3NlZCIsInJlbWluZGVyc19zZW50IiwidG9kYXkiLCJEYXRlIiwidG9JU09TdHJpbmciLCJzcGxpdCIsInRlbmFudHNUb1JlbWluZCIsInRlbmFudCIsImV4aXN0aW5nUmVtaW5kZXJSZXN1bHQiLCJxdWVyeSIsInRlbmFudF9pZCIsImV4aXN0aW5nUmVtaW5kZXIiLCJyb3dzIiwicHVzaCIsImVtYWlsUmVzdWx0Iiwic2VuZEJpbGxpbmdSZW1pbmRlclRvTWFuYWdlbWVudCIsInJlbWluZGVyc1NlbnQiLCJlcnJvcnMiLCJkYXlzX3VudGlsX2R1ZSIsInRlbmFudF9uYW1lIiwicm9vbV9udW1iZXIiLCJyZWNvcmRFcnJvciIsInRlbmFudHNfdG9fcmVtaW5kIiwiZW1haWxfcmVzdWx0IiwidW5kZWZpbmVkIiwiR0VUIiwidGVuYW50c1dpdGhSZW1pbmRlclN0YXR1cyIsInJlbWluZGVyX3NlbnRfdG9kYXkiLCJyZW1pbmRlcl9kZXRhaWxzIiwidGVuYW50c19uZWVkaW5nX3JlbWluZGVycyIsInRlbmFudHNfd2l0aG91dF9yZW1pbmRlcnNfdG9kYXkiLCJmaWx0ZXIiLCJ0IiwidGVuYW50cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/bills/reminders/route.js\n");

/***/ }),

/***/ "(rsc)/./lib/auth.js":
/*!*********************!*\
  !*** ./lib/auth.js ***!
  \*********************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\nconst jwt = __webpack_require__(/*! jsonwebtoken */ \"(rsc)/./node_modules/jsonwebtoken/index.js\");\nconst bcrypt = __webpack_require__(/*! bcrypt */ \"bcrypt\");\nconst JWT_SECRET = \"your-jwt-secret-here\" || 0;\n// Generate JWT token\nfunction generateToken(user) {\n    return jwt.sign({\n        id: user.id,\n        username: user.username,\n        role: user.role\n    }, JWT_SECRET, {\n        expiresIn: \"24h\"\n    });\n}\n// Verify JWT token\nfunction verifyToken(token) {\n    try {\n        return jwt.verify(token, JWT_SECRET);\n    } catch (error) {\n        return null;\n    }\n}\n// Hash password\nasync function hashPassword(password) {\n    try {\n        const saltRounds = 10;\n        return await bcrypt.hash(password, saltRounds);\n    } catch (error) {\n        throw new Error(\"Error hashing password\");\n    }\n}\n// Compare password\nasync function comparePassword(password, hashedPassword) {\n    try {\n        return await bcrypt.compare(password, hashedPassword);\n    } catch (error) {\n        throw new Error(\"Error comparing passwords\");\n    }\n}\n// Middleware to verify authentication\nfunction requireAuth(req) {\n    // For Next.js API routes, get the authorization header\n    const authHeader = req.headers.get ? req.headers.get(\"authorization\") : req.headers.authorization;\n    const token = authHeader?.replace(\"Bearer \", \"\");\n    if (!token) {\n        return {\n            error: \"No token provided\",\n            status: 401\n        };\n    }\n    const decoded = verifyToken(token);\n    if (!decoded) {\n        return {\n            error: \"Invalid token\",\n            status: 401\n        };\n    }\n    return {\n        user: decoded\n    };\n}\nmodule.exports = {\n    generateToken,\n    verifyToken,\n    hashPassword,\n    comparePassword,\n    requireAuth\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvYXV0aC5qcyIsIm1hcHBpbmdzIjoiO0FBQUEsTUFBTUEsTUFBTUMsbUJBQU9BLENBQUM7QUFDcEIsTUFBTUMsU0FBU0QsbUJBQU9BLENBQUM7QUFFdkIsTUFBTUUsYUFBYUMsc0JBQXNCLElBQUk7QUFFN0MscUJBQXFCO0FBQ3JCLFNBQVNFLGNBQWNDLElBQUk7SUFDekIsT0FBT1AsSUFBSVEsSUFBSSxDQUNiO1FBQ0VDLElBQUlGLEtBQUtFLEVBQUU7UUFDWEMsVUFBVUgsS0FBS0csUUFBUTtRQUN2QkMsTUFBTUosS0FBS0ksSUFBSTtJQUNqQixHQUNBUixZQUNBO1FBQUVTLFdBQVc7SUFBTTtBQUV2QjtBQUVBLG1CQUFtQjtBQUNuQixTQUFTQyxZQUFZQyxLQUFLO0lBQ3hCLElBQUk7UUFDRixPQUFPZCxJQUFJZSxNQUFNLENBQUNELE9BQU9YO0lBQzNCLEVBQUUsT0FBT2EsT0FBTztRQUNkLE9BQU87SUFDVDtBQUNGO0FBRUEsZ0JBQWdCO0FBQ2hCLGVBQWVDLGFBQWFDLFFBQVE7SUFDbEMsSUFBSTtRQUNGLE1BQU1DLGFBQWE7UUFDbkIsT0FBTyxNQUFNakIsT0FBT2tCLElBQUksQ0FBQ0YsVUFBVUM7SUFDckMsRUFBRSxPQUFPSCxPQUFPO1FBQ2QsTUFBTSxJQUFJSyxNQUFNO0lBQ2xCO0FBQ0Y7QUFFQSxtQkFBbUI7QUFDbkIsZUFBZUMsZ0JBQWdCSixRQUFRLEVBQUVLLGNBQWM7SUFDckQsSUFBSTtRQUNGLE9BQU8sTUFBTXJCLE9BQU9zQixPQUFPLENBQUNOLFVBQVVLO0lBQ3hDLEVBQUUsT0FBT1AsT0FBTztRQUNkLE1BQU0sSUFBSUssTUFBTTtJQUNsQjtBQUNGO0FBRUEsc0NBQXNDO0FBQ3RDLFNBQVNJLFlBQVlDLEdBQUc7SUFDdEIsdURBQXVEO0lBQ3ZELE1BQU1DLGFBQWFELElBQUlFLE9BQU8sQ0FBQ0MsR0FBRyxHQUFHSCxJQUFJRSxPQUFPLENBQUNDLEdBQUcsQ0FBQyxtQkFBbUJILElBQUlFLE9BQU8sQ0FBQ0UsYUFBYTtJQUNqRyxNQUFNaEIsUUFBUWEsWUFBWUksUUFBUSxXQUFXO0lBRTdDLElBQUksQ0FBQ2pCLE9BQU87UUFDVixPQUFPO1lBQUVFLE9BQU87WUFBcUJnQixRQUFRO1FBQUk7SUFDbkQ7SUFFQSxNQUFNQyxVQUFVcEIsWUFBWUM7SUFDNUIsSUFBSSxDQUFDbUIsU0FBUztRQUNaLE9BQU87WUFBRWpCLE9BQU87WUFBaUJnQixRQUFRO1FBQUk7SUFDL0M7SUFFQSxPQUFPO1FBQUV6QixNQUFNMEI7SUFBUTtBQUN6QjtBQUVBQyxPQUFPQyxPQUFPLEdBQUc7SUFDZjdCO0lBQ0FPO0lBQ0FJO0lBQ0FLO0lBQ0FHO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9qLWgtYXBhcnRtZW50LW5leHRqcy8uL2xpYi9hdXRoLmpzPzI4N2IiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7XHJcbmNvbnN0IGJjcnlwdCA9IHJlcXVpcmUoJ2JjcnlwdCcpO1xyXG5cclxuY29uc3QgSldUX1NFQ1JFVCA9IHByb2Nlc3MuZW52LkpXVF9TRUNSRVQgfHwgJ3lvdXItc2VjcmV0LWtleS1oZXJlJztcclxuXHJcbi8vIEdlbmVyYXRlIEpXVCB0b2tlblxyXG5mdW5jdGlvbiBnZW5lcmF0ZVRva2VuKHVzZXIpIHtcclxuICByZXR1cm4gand0LnNpZ24oXHJcbiAgICB7IFxyXG4gICAgICBpZDogdXNlci5pZCwgXHJcbiAgICAgIHVzZXJuYW1lOiB1c2VyLnVzZXJuYW1lLCBcclxuICAgICAgcm9sZTogdXNlci5yb2xlIFxyXG4gICAgfSxcclxuICAgIEpXVF9TRUNSRVQsXHJcbiAgICB7IGV4cGlyZXNJbjogJzI0aCcgfVxyXG4gICk7XHJcbn1cclxuXHJcbi8vIFZlcmlmeSBKV1QgdG9rZW5cclxuZnVuY3Rpb24gdmVyaWZ5VG9rZW4odG9rZW4pIHtcclxuICB0cnkge1xyXG4gICAgcmV0dXJuIGp3dC52ZXJpZnkodG9rZW4sIEpXVF9TRUNSRVQpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbn1cclxuXHJcbi8vIEhhc2ggcGFzc3dvcmRcclxuYXN5bmMgZnVuY3Rpb24gaGFzaFBhc3N3b3JkKHBhc3N3b3JkKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHNhbHRSb3VuZHMgPSAxMDtcclxuICAgIHJldHVybiBhd2FpdCBiY3J5cHQuaGFzaChwYXNzd29yZCwgc2FsdFJvdW5kcyk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcignRXJyb3IgaGFzaGluZyBwYXNzd29yZCcpO1xyXG4gIH1cclxufVxyXG5cclxuLy8gQ29tcGFyZSBwYXNzd29yZFxyXG5hc3luYyBmdW5jdGlvbiBjb21wYXJlUGFzc3dvcmQocGFzc3dvcmQsIGhhc2hlZFBhc3N3b3JkKSB7XHJcbiAgdHJ5IHtcclxuICAgIHJldHVybiBhd2FpdCBiY3J5cHQuY29tcGFyZShwYXNzd29yZCwgaGFzaGVkUGFzc3dvcmQpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0Vycm9yIGNvbXBhcmluZyBwYXNzd29yZHMnKTtcclxuICB9XHJcbn1cclxuXHJcbi8vIE1pZGRsZXdhcmUgdG8gdmVyaWZ5IGF1dGhlbnRpY2F0aW9uXHJcbmZ1bmN0aW9uIHJlcXVpcmVBdXRoKHJlcSkge1xyXG4gIC8vIEZvciBOZXh0LmpzIEFQSSByb3V0ZXMsIGdldCB0aGUgYXV0aG9yaXphdGlvbiBoZWFkZXJcclxuICBjb25zdCBhdXRoSGVhZGVyID0gcmVxLmhlYWRlcnMuZ2V0ID8gcmVxLmhlYWRlcnMuZ2V0KCdhdXRob3JpemF0aW9uJykgOiByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uO1xyXG4gIGNvbnN0IHRva2VuID0gYXV0aEhlYWRlcj8ucmVwbGFjZSgnQmVhcmVyICcsICcnKTtcclxuICBcclxuICBpZiAoIXRva2VuKSB7XHJcbiAgICByZXR1cm4geyBlcnJvcjogJ05vIHRva2VuIHByb3ZpZGVkJywgc3RhdHVzOiA0MDEgfTtcclxuICB9XHJcblxyXG4gIGNvbnN0IGRlY29kZWQgPSB2ZXJpZnlUb2tlbih0b2tlbik7XHJcbiAgaWYgKCFkZWNvZGVkKSB7XHJcbiAgICByZXR1cm4geyBlcnJvcjogJ0ludmFsaWQgdG9rZW4nLCBzdGF0dXM6IDQwMSB9O1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHsgdXNlcjogZGVjb2RlZCB9O1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICBnZW5lcmF0ZVRva2VuLFxyXG4gIHZlcmlmeVRva2VuLFxyXG4gIGhhc2hQYXNzd29yZCxcclxuICBjb21wYXJlUGFzc3dvcmQsXHJcbiAgcmVxdWlyZUF1dGhcclxufTsgIl0sIm5hbWVzIjpbImp3dCIsInJlcXVpcmUiLCJiY3J5cHQiLCJKV1RfU0VDUkVUIiwicHJvY2VzcyIsImVudiIsImdlbmVyYXRlVG9rZW4iLCJ1c2VyIiwic2lnbiIsImlkIiwidXNlcm5hbWUiLCJyb2xlIiwiZXhwaXJlc0luIiwidmVyaWZ5VG9rZW4iLCJ0b2tlbiIsInZlcmlmeSIsImVycm9yIiwiaGFzaFBhc3N3b3JkIiwicGFzc3dvcmQiLCJzYWx0Um91bmRzIiwiaGFzaCIsIkVycm9yIiwiY29tcGFyZVBhc3N3b3JkIiwiaGFzaGVkUGFzc3dvcmQiLCJjb21wYXJlIiwicmVxdWlyZUF1dGgiLCJyZXEiLCJhdXRoSGVhZGVyIiwiaGVhZGVycyIsImdldCIsImF1dGhvcml6YXRpb24iLCJyZXBsYWNlIiwic3RhdHVzIiwiZGVjb2RlZCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/auth.js\n");

/***/ }),

/***/ "(rsc)/./lib/database.js":
/*!*************************!*\
  !*** ./lib/database.js ***!
  \*************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   pool: () => (/* binding */ pool),\n/* harmony export */   supabase: () => (/* binding */ supabase),\n/* harmony export */   testConnection: () => (/* binding */ testConnection)\n/* harmony export */ });\n/* harmony import */ var pg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pg */ \"pg\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([pg__WEBPACK_IMPORTED_MODULE_0__]);\npg__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n// Supabase client\nconst supabaseUrl = \"https://qalxoheykkdfqsakvcad.supabase.co\";\nconst supabaseKey = process.env.SUPABASE_KEY || \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFhbHhvaGV5a2tkZnFzYWt2Y2FkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk5MjI4ODAsImV4cCI6MjA2NTQ5ODg4MH0.i-Mc45-v-j14QLidCt73idarVbvEMzVVWwtDM1ROCWA\";\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_1__.createClient)(supabaseUrl, supabaseKey);\n// PostgreSQL connection pool\nconst pool = new pg__WEBPACK_IMPORTED_MODULE_0__.Pool({\n    host: \"aws-0-ap-southeast-1.pooler.supabase.com\",\n    port: 6543,\n    database: \"postgres\",\n    user: \"postgres.qalxoheykkdfqsakvcad\",\n    password: process.env.SUPABASE_DB_PASSWORD || \"E$rNc9z?Wtpgq&%\",\n    ssl: {\n        rejectUnauthorized: false\n    }\n});\n// Test database connection\nasync function testConnection() {\n    try {\n        const client = await pool.connect();\n        console.log(\"PostgreSQL database connection successful\");\n        client.release();\n        return true;\n    } catch (error) {\n        console.error(\"Database connection failed:\", error);\n        return false;\n    }\n}\n\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZGF0YWJhc2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBeUI7QUFDMkI7QUFFcEQsa0JBQWtCO0FBQ2xCLE1BQU1FLGNBQWM7QUFDcEIsTUFBTUMsY0FBY0MsUUFBUUMsR0FBRyxDQUFDQyxZQUFZLElBQUk7QUFDaEQsTUFBTUMsV0FBV04sbUVBQVlBLENBQUNDLGFBQWFDO0FBRTNDLDZCQUE2QjtBQUM3QixNQUFNSyxPQUFPLElBQUlSLG9DQUFJQSxDQUFDO0lBQ3BCUyxNQUFNO0lBQ05DLE1BQU07SUFDTkMsVUFBVTtJQUNWQyxNQUFNO0lBQ05DLFVBQVVULFFBQVFDLEdBQUcsQ0FBQ1Msb0JBQW9CLElBQUk7SUFDOUNDLEtBQUs7UUFBRUMsb0JBQW9CO0lBQU07QUFDbkM7QUFFQSwyQkFBMkI7QUFDM0IsZUFBZUM7SUFDYixJQUFJO1FBQ0YsTUFBTUMsU0FBUyxNQUFNVixLQUFLVyxPQUFPO1FBQ2pDQyxRQUFRQyxHQUFHLENBQUM7UUFDWkgsT0FBT0ksT0FBTztRQUNkLE9BQU87SUFDVCxFQUFFLE9BQU9DLE9BQU87UUFDZEgsUUFBUUcsS0FBSyxDQUFDLCtCQUErQkE7UUFDN0MsT0FBTztJQUNUO0FBQ0Y7QUFFMEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9qLWgtYXBhcnRtZW50LW5leHRqcy8uL2xpYi9kYXRhYmFzZS5qcz9lZWE1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBvb2wgfSBmcm9tICdwZydcclxuaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJ1xyXG5cclxuLy8gU3VwYWJhc2UgY2xpZW50XHJcbmNvbnN0IHN1cGFiYXNlVXJsID0gJ2h0dHBzOi8vcWFseG9oZXlra2RmcXNha3ZjYWQuc3VwYWJhc2UuY28nXHJcbmNvbnN0IHN1cGFiYXNlS2V5ID0gcHJvY2Vzcy5lbnYuU1VQQUJBU0VfS0VZIHx8ICdleUpoYkdjaU9pSklVekkxTmlJc0luUjVjQ0k2SWtwWFZDSjkuZXlKcGMzTWlPaUp6ZFhCaFltRnpaU0lzSW5KbFppSTZJbkZoYkhodmFHVjVhMnRrWm5GellXdDJZMkZrSWl3aWNtOXNaU0k2SW1GdWIyNGlMQ0pwWVhRaU9qRTNORGs1TWpJNE9EQXNJbVY0Y0NJNk1qQTJOVFE1T0RnNE1IMC5pLU1jNDUtdi1qMTRRTGlkQ3Q3M2lkYXJWYnZFTXpWVld3dERNMVJPQ1dBJ1xyXG5jb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VLZXkpXHJcblxyXG4vLyBQb3N0Z3JlU1FMIGNvbm5lY3Rpb24gcG9vbFxyXG5jb25zdCBwb29sID0gbmV3IFBvb2woe1xyXG4gIGhvc3Q6ICdhd3MtMC1hcC1zb3V0aGVhc3QtMS5wb29sZXIuc3VwYWJhc2UuY29tJyxcclxuICBwb3J0OiA2NTQzLFxyXG4gIGRhdGFiYXNlOiAncG9zdGdyZXMnLFxyXG4gIHVzZXI6ICdwb3N0Z3Jlcy5xYWx4b2hleWtrZGZxc2FrdmNhZCcsXHJcbiAgcGFzc3dvcmQ6IHByb2Nlc3MuZW52LlNVUEFCQVNFX0RCX1BBU1NXT1JEIHx8ICdFJHJOYzl6P1d0cGdxJiUnLFxyXG4gIHNzbDogeyByZWplY3RVbmF1dGhvcml6ZWQ6IGZhbHNlIH1cclxufSlcclxuXHJcbi8vIFRlc3QgZGF0YWJhc2UgY29ubmVjdGlvblxyXG5hc3luYyBmdW5jdGlvbiB0ZXN0Q29ubmVjdGlvbigpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgY2xpZW50ID0gYXdhaXQgcG9vbC5jb25uZWN0KCk7XHJcbiAgICBjb25zb2xlLmxvZygnUG9zdGdyZVNRTCBkYXRhYmFzZSBjb25uZWN0aW9uIHN1Y2Nlc3NmdWwnKTtcclxuICAgIGNsaWVudC5yZWxlYXNlKCk7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRGF0YWJhc2UgY29ubmVjdGlvbiBmYWlsZWQ6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IHsgcG9vbCwgc3VwYWJhc2UsIHRlc3RDb25uZWN0aW9uIH07ICJdLCJuYW1lcyI6WyJQb29sIiwiY3JlYXRlQ2xpZW50Iiwic3VwYWJhc2VVcmwiLCJzdXBhYmFzZUtleSIsInByb2Nlc3MiLCJlbnYiLCJTVVBBQkFTRV9LRVkiLCJzdXBhYmFzZSIsInBvb2wiLCJob3N0IiwicG9ydCIsImRhdGFiYXNlIiwidXNlciIsInBhc3N3b3JkIiwiU1VQQUJBU0VfREJfUEFTU1dPUkQiLCJzc2wiLCJyZWplY3RVbmF1dGhvcml6ZWQiLCJ0ZXN0Q29ubmVjdGlvbiIsImNsaWVudCIsImNvbm5lY3QiLCJjb25zb2xlIiwibG9nIiwicmVsZWFzZSIsImVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/database.js\n");

/***/ }),

/***/ "(rsc)/./models/bill.js":
/*!************************!*\
  !*** ./models/bill.js ***!
  \************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _lib_database_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/database.js */ \"(rsc)/./lib/database.js\");\n/* harmony import */ var _setting_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./setting.js */ \"(rsc)/./models/setting.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_database_js__WEBPACK_IMPORTED_MODULE_0__, _setting_js__WEBPACK_IMPORTED_MODULE_1__]);\n([_lib_database_js__WEBPACK_IMPORTED_MODULE_0__, _setting_js__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\nclass Bill {\n    // Get all bills with tenant and room details\n    static async findAll() {\n        try {\n            const result = await _lib_database_js__WEBPACK_IMPORTED_MODULE_0__.pool.query(`\n        SELECT b.*, t.name as tenant_name, r.room_number, br.name as branch_name\n        FROM bills b\n        JOIN tenants t ON b.tenant_id = t.id\n        JOIN rooms r ON b.room_id = r.id\n        JOIN branches br ON r.branch_id = br.id\n        ORDER BY b.bill_date DESC\n      `);\n            return result.rows;\n        } catch (error) {\n            console.error(\"Error finding all bills:\", error);\n            throw error;\n        }\n    }\n    // Get unpaid bills\n    static async findUnpaid() {\n        try {\n            const result = await _lib_database_js__WEBPACK_IMPORTED_MODULE_0__.pool.query(`\n        SELECT b.*, t.name as tenant_name, r.room_number, br.name as branch_name\n        FROM bills b\n        JOIN tenants t ON b.tenant_id = t.id\n        JOIN rooms r ON b.room_id = r.id\n        JOIN branches br ON r.branch_id = br.id\n        WHERE b.status = 'unpaid' OR b.status = 'partial'\n        ORDER BY b.bill_date\n      `);\n            return result.rows;\n        } catch (error) {\n            console.error(\"Error finding unpaid bills:\", error);\n            throw error;\n        }\n    }\n    // Get active bills (unpaid/partial)\n    static async findActive() {\n        try {\n            const result = await _lib_database_js__WEBPACK_IMPORTED_MODULE_0__.pool.query(`\n        SELECT b.*, t.name as tenant_name, r.room_number, br.name as branch_name\n        FROM bills b\n        JOIN tenants t ON b.tenant_id = t.id\n        JOIN rooms r ON b.room_id = r.id\n        JOIN branches br ON r.branch_id = br.id\n        WHERE b.status IN ('unpaid', 'partial')\n        ORDER BY b.bill_date DESC\n      `);\n            return result.rows;\n        } catch (error) {\n            console.error(\"Error finding active bills:\", error);\n            throw error;\n        }\n    }\n    // Get paid bills (archived)\n    static async findPaid() {\n        try {\n            const result = await _lib_database_js__WEBPACK_IMPORTED_MODULE_0__.pool.query(`\n        SELECT b.*, t.name as tenant_name, r.room_number, br.name as branch_name,\n               p.payment_date as paid_date\n        FROM bills b\n        JOIN tenants t ON b.tenant_id = t.id\n        JOIN rooms r ON b.room_id = r.id\n        JOIN branches br ON r.branch_id = br.id\n        LEFT JOIN (\n          SELECT bill_id, MAX(payment_date) as payment_date\n          FROM payments\n          GROUP BY bill_id\n        ) p ON b.id = p.bill_id\n        WHERE b.status = 'paid'\n        ORDER BY b.bill_date DESC\n      `);\n            return result.rows;\n        } catch (error) {\n            console.error(\"Error finding paid bills:\", error);\n            throw error;\n        }\n    }\n    // Get bills by tenant ID\n    static async findByTenantId(tenantId) {\n        try {\n            const result = await _lib_database_js__WEBPACK_IMPORTED_MODULE_0__.pool.query(`\n        SELECT b.*, r.room_number, br.name as branch_name,\n          (SELECT SUM(amount) FROM payments WHERE bill_id = b.id) as paid_amount\n        FROM bills b\n        JOIN rooms r ON b.room_id = r.id\n        JOIN branches br ON r.branch_id = br.id\n        WHERE b.tenant_id = $1\n        ORDER BY b.bill_date DESC\n      `, [\n                tenantId\n            ]);\n            return result.rows;\n        } catch (error) {\n            console.error(\"Error finding bills by tenant ID:\", error);\n            throw error;\n        }\n    }\n    // Get bill by ID with payments\n    static async findById(id) {\n        try {\n            const result = await _lib_database_js__WEBPACK_IMPORTED_MODULE_0__.pool.query(`\n        SELECT b.*, t.name as tenant_name, r.room_number, br.name as branch_name\n        FROM bills b\n        JOIN tenants t ON b.tenant_id = t.id\n        JOIN rooms r ON b.room_id = r.id\n        JOIN branches br ON r.branch_id = br.id\n        WHERE b.id = $1\n      `, [\n                id\n            ]);\n            if (!result.rows.length) {\n                return null;\n            }\n            const bill = result.rows[0];\n            // Get payments for this bill\n            const paymentsResult = await _lib_database_js__WEBPACK_IMPORTED_MODULE_0__.pool.query(\"SELECT * FROM payments WHERE bill_id = $1 ORDER BY payment_date DESC\", [\n                id\n            ]);\n            bill.payments = paymentsResult.rows;\n            bill.paid_amount = paymentsResult.rows.reduce((sum, payment)=>sum + Number(payment.amount), 0);\n            return bill;\n        } catch (error) {\n            console.error(\"Error finding bill by ID:\", error);\n            throw error;\n        }\n    }\n    // Create a new comprehensive bill\n    static async create(billData) {\n        const { tenant_id, room_id, bill_date, rent_from, rent_to, rent_amount, electric_present_reading = 0, electric_previous_reading = 0, electric_consumption = 0, electric_amount = 0, electric_reading_date, electric_previous_date, water_amount, extra_fee_amount = 0, extra_fee_description = null, total_amount, status = \"unpaid\", notes, prepared_by } = billData;\n        try {\n            // Get current rates from settings\n            const rates = await _setting_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getBillingRates();\n            const finalElectricRate = billData.electric_rate_per_kwh || rates.electric_rate_per_kwh;\n            const finalWaterAmount = water_amount || rates.water_fixed_amount;\n            // Convert undefined values to null for SQL compatibility\n            const sqlParams = [\n                tenant_id ?? null,\n                room_id ?? null,\n                bill_date ?? null,\n                rent_from ?? null,\n                rent_to ?? null,\n                rent_amount ?? null,\n                electric_present_reading ?? 0,\n                electric_previous_reading ?? 0,\n                electric_consumption ?? 0,\n                finalElectricRate ?? null,\n                electric_amount ?? 0,\n                electric_reading_date ?? null,\n                electric_previous_date ?? null,\n                finalWaterAmount ?? null,\n                extra_fee_amount ?? 0,\n                extra_fee_description ?? null,\n                total_amount ?? null,\n                status ?? \"unpaid\",\n                notes ?? null,\n                prepared_by ?? null\n            ];\n            const result = await _lib_database_js__WEBPACK_IMPORTED_MODULE_0__.pool.query(`\n        INSERT INTO bills (\n          tenant_id, room_id, bill_date, rent_from, rent_to, rent_amount,\n          electric_present_reading, electric_previous_reading, electric_consumption, \n          electric_rate_per_kwh, electric_amount, electric_reading_date, electric_previous_date,\n          water_amount, extra_fee_amount, extra_fee_description, total_amount, status, notes, prepared_by\n        ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20)\n        RETURNING id\n      `, sqlParams);\n            return {\n                id: result.rows[0].id,\n                ...billData,\n                electric_rate_per_kwh: finalElectricRate,\n                water_amount: finalWaterAmount\n            };\n        } catch (error) {\n            console.error(\"Error creating new bill:\", error);\n            throw error;\n        }\n    }\n    // Update bill\n    static async update(id, billData) {\n        const { bill_date, rent_from, rent_to, rent_amount, electric_present_reading, electric_previous_reading, electric_consumption, electric_rate_per_kwh, electric_amount, electric_reading_date, electric_previous_date, water_amount, total_amount, status, notes, prepared_by } = billData;\n        try {\n            // Convert undefined values to null for SQL compatibility\n            const sqlParams = [\n                bill_date ?? null,\n                rent_from ?? null,\n                rent_to ?? null,\n                rent_amount ?? null,\n                electric_present_reading ?? null,\n                electric_previous_reading ?? null,\n                electric_consumption ?? null,\n                electric_rate_per_kwh ?? null,\n                electric_amount ?? null,\n                electric_reading_date ?? null,\n                electric_previous_date ?? null,\n                water_amount ?? null,\n                total_amount ?? null,\n                status ?? null,\n                notes ?? null,\n                prepared_by ?? null,\n                id\n            ];\n            await _lib_database_js__WEBPACK_IMPORTED_MODULE_0__.pool.query(`\n        UPDATE bills SET \n          bill_date = $1, rent_from = $2, rent_to = $3, rent_amount = $4,\n          electric_present_reading = $5, electric_previous_reading = $6, electric_consumption = $7, \n          electric_rate_per_kwh = $8, electric_amount = $9, electric_reading_date = $10, electric_previous_date = $11,\n          water_amount = $12, total_amount = $13, status = $14, notes = $15, prepared_by = $16\n        WHERE id = $17\n      `, sqlParams);\n            return {\n                id,\n                ...billData\n            };\n        } catch (error) {\n            console.error(\"Error updating bill:\", error);\n            throw error;\n        }\n    }\n    // Delete bill\n    static async delete(id) {\n        try {\n            await _lib_database_js__WEBPACK_IMPORTED_MODULE_0__.pool.query(\"DELETE FROM bills WHERE id = $1\", [\n                id\n            ]);\n            return true;\n        } catch (error) {\n            console.error(\"Error deleting bill:\", error);\n            throw error;\n        }\n    }\n    // Update bill status\n    static async updateStatus(id, status) {\n        try {\n            await _lib_database_js__WEBPACK_IMPORTED_MODULE_0__.pool.query(\"UPDATE bills SET status = $1 WHERE id = $2\", [\n                status,\n                id\n            ]);\n            return true;\n        } catch (error) {\n            console.error(\"Error updating bill status:\", error);\n            throw error;\n        }\n    }\n    // Calculate consumption and amounts based on readings and current rates\n    static async calculateUtilityAmounts(presentReading, previousReading) {\n        try {\n            const rates = await _setting_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getBillingRates();\n            const consumption = Math.max(0, presentReading - previousReading);\n            const electricAmount = consumption * rates.electric_rate_per_kwh;\n            return {\n                consumption,\n                electricAmount,\n                waterAmount: rates.water_fixed_amount,\n                electricRate: rates.electric_rate_per_kwh\n            };\n        } catch (error) {\n            console.error(\"Error calculating utility amounts:\", error);\n            throw error;\n        }\n    }\n    // Get bill statistics\n    static async getStats() {\n        try {\n            const result = await _lib_database_js__WEBPACK_IMPORTED_MODULE_0__.pool.query(`\n        SELECT\n          COUNT(*) as total_bills,\n          SUM(total_amount) as total_amount,\n          SUM(CASE WHEN status = 'paid' THEN total_amount ELSE 0 END) as paid_amount,\n          SUM(CASE WHEN status = 'unpaid' THEN total_amount ELSE 0 END) as unpaid_amount,\n          SUM(CASE WHEN status = 'partial' THEN total_amount ELSE 0 END) as partial_amount,\n          AVG(total_amount) as average_bill_amount,\n          COUNT(CASE WHEN status = 'paid' THEN 1 END) as paid_bills,\n          COUNT(CASE WHEN status = 'unpaid' THEN 1 END) as unpaid_bills,\n          COUNT(CASE WHEN status = 'partial' THEN 1 END) as partial_bills\n        FROM bills\n      `);\n            return result.rows[0];\n        } catch (error) {\n            console.error(\"Error getting bill statistics:\", error);\n            throw error;\n        }\n    }\n    // AUTOMATIC BILLING METHODS - DISABLED\n    // Note: Automatic billing has been disabled. Bills must be created manually.\n    /*\n  // Get bills that need next cycle generation (current period ended)\n  static async getBillsNeedingNextCycle() {\n    // DISABLED - Automatic billing cycles removed\n    return [];\n  }\n\n  // Generate next billing cycle\n  static async generateNextCycle(tenantId, roomId, lastBillEndDate, previousElectricReading, monthlyRent) {\n    // DISABLED - Automatic billing cycles removed\n    throw new Error('Automatic billing cycles have been disabled. Please create bills manually.');\n  }\n\n  // Process all automatic billing cycles\n  static async processAutomaticCycles() {\n    // DISABLED - Automatic billing cycles removed\n    return [];\n        }\n  */ // Get bills needing electricity reading update (3 days before cycle ends)\n    static async getBillsNeedingElectricUpdate() {\n        try {\n            const result = await _lib_database_js__WEBPACK_IMPORTED_MODULE_0__.pool.query(`\n        SELECT \n          b.*,\n          t.name as tenant_name,\n          t.email as tenant_email,\n          r.room_number,\n          r.monthly_rent,\n          br.name as branch_name,\n          br.address as branch_address\n        FROM bills b\n        INNER JOIN tenants t ON b.tenant_id = t.id\n        INNER JOIN rooms r ON b.room_id = r.id\n        INNER JOIN branches br ON r.branch_id = br.id\n        WHERE b.status = 'unpaid'\n        AND b.electric_consumption = 0\n        AND EXTRACT(DAY FROM (b.rent_to - CURRENT_DATE)) <= 3\n        AND EXTRACT(DAY FROM (b.rent_to - CURRENT_DATE)) >= 0\n        ORDER BY b.rent_to ASC\n      `);\n            return result.rows;\n        } catch (error) {\n            console.error(\"Error finding bills needing electric update:\", error);\n            throw error;\n        }\n    }\n    // Update electricity reading and auto-calculate amounts\n    static async updateElectricReading(billId, presentReading, readingDate) {\n        try {\n            // Get current bill\n            const bill = await this.findById(billId);\n            if (!bill) {\n                throw new Error(\"Bill not found\");\n            }\n            const previousReading = parseFloat(bill.electric_previous_reading) || 0;\n            const currentReading = parseFloat(presentReading) || 0;\n            // Calculate consumption\n            const consumption = Math.max(0, currentReading - previousReading);\n            // Get current electric rate\n            const rates = await _setting_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getBillingRates();\n            const electricAmount = consumption * rates.electric_rate_per_kwh;\n            // Calculate new total\n            const newTotal = parseFloat(bill.rent_amount) + electricAmount + parseFloat(bill.water_amount);\n            // Update bill\n            const result = await _lib_database_js__WEBPACK_IMPORTED_MODULE_0__.pool.query(`\n        UPDATE bills SET \n          electric_present_reading = $1,\n          electric_consumption = $2,\n          electric_amount = $3,\n          electric_reading_date = $4,\n          total_amount = $5,\n          notes = COALESCE(notes, '') || ' | Electric reading updated: ' || $6 || ' kWh on ' || $7\n        WHERE id = $8\n      `, [\n                currentReading,\n                consumption,\n                electricAmount,\n                readingDate,\n                newTotal,\n                currentReading,\n                readingDate,\n                billId\n            ]);\n            return {\n                success: true,\n                previousReading,\n                currentReading,\n                consumption,\n                electricAmount,\n                newTotal,\n                message: `Electric reading updated: ${consumption} kWh consumed, ₱${electricAmount.toFixed(2)} charged`\n            };\n        } catch (error) {\n            console.error(\"Error updating electric reading:\", error);\n            throw error;\n        }\n    }\n    // Mark bill as ready to send (finalized)\n    static async markAsReadyToSend(billId) {\n        try {\n            const result = await _lib_database_js__WEBPACK_IMPORTED_MODULE_0__.pool.query(`\n        UPDATE bills SET \n          notes = COALESCE(notes, '') || ' | Bill finalized and ready to send',\n          updated_at = CURRENT_TIMESTAMP\n        WHERE id = $1\n      `, [\n                billId\n            ]);\n            return result.rowCount > 0;\n        } catch (error) {\n            console.error(\"Error marking bill as ready to send:\", error);\n            throw error;\n        }\n    }\n    // Get tenants needing bill creation reminders (3 days before billing cycle ends)\n    static async getBillsNeedingReminders() {\n        try {\n            const result = await _lib_database_js__WEBPACK_IMPORTED_MODULE_0__.pool.query(`\n        SELECT \n          t.id as tenant_id,\n          t.name as tenant_name,\n          t.email as tenant_email,\n          t.rent_start,\n          r.id as room_id,\n          r.room_number,\n          r.monthly_rent,\n          br.name as branch_name,\n          br.address as branch_address,\n          -- Calculate next billing period end date\n          CASE \n            WHEN t.rent_start IS NOT NULL THEN\n              CASE \n                -- For first bill: one month from rent_start, same day of month\n                WHEN NOT EXISTS (SELECT 1 FROM bills WHERE tenant_id = t.id) THEN\n                  (t.rent_start + INTERVAL '1 month') - INTERVAL '1 day'\n                -- For subsequent bills: one month from last bill end date\n                ELSE \n                  ((SELECT rent_to FROM bills WHERE tenant_id = t.id ORDER BY bill_date DESC LIMIT 1) + INTERVAL '1 day' + INTERVAL '1 month') - INTERVAL '1 day'\n              END\n            ELSE DATE_TRUNC('month', CURRENT_DATE) + INTERVAL '1 month' - INTERVAL '1 day'\n          END as next_bill_due_date,\n          -- Calculate days until billing cycle ends\n          CASE \n            WHEN t.rent_start IS NOT NULL THEN\n              CASE \n                WHEN NOT EXISTS (SELECT 1 FROM bills WHERE tenant_id = t.id) THEN\n                  EXTRACT(DAY FROM ((t.rent_start + INTERVAL '1 month') - INTERVAL '1 day') - CURRENT_DATE)\n                ELSE \n                  EXTRACT(DAY FROM (((SELECT rent_to FROM bills WHERE tenant_id = t.id ORDER BY bill_date DESC LIMIT 1) + INTERVAL '1 day' + INTERVAL '1 month') - INTERVAL '1 day') - CURRENT_DATE)\n              END\n            ELSE NULL\n          END as days_until_due,\n          -- Check if tenant already has an unpaid bill\n          CASE \n            WHEN EXISTS (\n              SELECT 1 FROM bills b2 \n              WHERE b2.tenant_id = t.id \n              AND b2.status IN ('unpaid', 'partial')\n            ) THEN 'already_has_unpaid_bill'\n            ELSE 'needs_billing'\n          END as billing_status,\n          -- Get last electric reading\n          COALESCE(\n            (SELECT electric_present_reading \n             FROM bills \n             WHERE tenant_id = t.id \n             ORDER BY bill_date DESC \n             LIMIT 1), \n            t.initial_electric_reading,\n            0\n          ) as last_electric_reading\n        FROM tenants t\n        INNER JOIN rooms r ON t.room_id = r.id\n        INNER JOIN branches br ON r.branch_id = br.id\n        WHERE t.contract_status = 'active'\n        AND t.rent_start IS NOT NULL\n        -- Only tenants who don't already have unpaid bills\n        AND NOT EXISTS (\n          SELECT 1 FROM bills b2 \n          WHERE b2.tenant_id = t.id \n          AND b2.status IN ('unpaid', 'partial')\n        )\n        -- Only tenants whose billing cycle is ending in 3 days or less (but not overdue)\n        AND CASE \n          WHEN NOT EXISTS (SELECT 1 FROM bills WHERE tenant_id = t.id) THEN\n            EXTRACT(DAY FROM ((t.rent_start + INTERVAL '1 month') - INTERVAL '1 day') - CURRENT_DATE) <= 3\n            AND EXTRACT(DAY FROM ((t.rent_start + INTERVAL '1 month') - INTERVAL '1 day') - CURRENT_DATE) >= 0\n          ELSE \n            EXTRACT(DAY FROM (((SELECT rent_to FROM bills WHERE tenant_id = t.id ORDER BY bill_date DESC LIMIT 1) + INTERVAL '1 day' + INTERVAL '1 month') - INTERVAL '1 day') - CURRENT_DATE) <= 3\n            AND EXTRACT(DAY FROM (((SELECT rent_to FROM bills WHERE tenant_id = t.id ORDER BY bill_date DESC LIMIT 1) + INTERVAL '1 day' + INTERVAL '1 month') - INTERVAL '1 day') - CURRENT_DATE) >= 0\n        END\n        ORDER BY br.name, r.room_number\n      `);\n            return result.rows;\n        } catch (error) {\n            console.error(\"Error finding tenants needing bill creation reminders:\", error);\n            throw error;\n        }\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Bill);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNBRztnQkFDQVc7Z0JBQ0FFLFNBQVMsQ0FBQywwQkFBMEIsRUFBRWhCLFlBQVksZ0JBQWdCLEVBQUVHLGVBQWVjLE9BQU8sQ0FBQyxHQUFHLFFBQVEsQ0FBQztZQUN6RztRQUNGLEVBQUUsT0FBT3RFLE9BQU87WUFDZEMsUUFBUUQsS0FBSyxDQUFDLG9DQUFvQ0E7WUFDbEQsTUFBTUE7UUFDUjtJQUNGO0lBRUEseUNBQXlDO0lBQ3pDLGFBQWF1RSxrQkFBa0JULE1BQU0sRUFBRTtRQUNyQyxJQUFJO1lBQ0YsTUFBTWpFLFNBQVMsTUFBTUosa0RBQUlBLENBQUNLLEtBQUssQ0FBQyxDQUFDOzs7OztNQUtqQyxDQUFDLEVBQUU7Z0JBQUNnRTthQUFPO1lBRVgsT0FBT2pFLE9BQU8yRSxRQUFRLEdBQUc7UUFDM0IsRUFBRSxPQUFPeEUsT0FBTztZQUNkQyxRQUFRRCxLQUFLLENBQUMsd0NBQXdDQTtZQUN0RCxNQUFNQTtRQUNSO0lBQ0Y7SUFFQSxpRkFBaUY7SUFDakYsYUFBYXlFLDJCQUEyQjtRQUN0QyxJQUFJO1lBQ0YsTUFBTTVFLFNBQVMsTUFBTUosa0RBQUlBLENBQUNLLEtBQUssQ0FBQyxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7TUEyRWpDLENBQUM7WUFFRCxPQUFPRCxPQUFPRSxJQUFJO1FBQ3BCLEVBQUUsT0FBT0MsT0FBTztZQUNkQyxRQUFRRCxLQUFLLENBQUMsMERBQTBEQTtZQUN4RSxNQUFNQTtRQUNSO0lBQ0Y7QUFDRjtBQUVBLGlFQUFlTCxJQUFJQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vai1oLWFwYXJ0bWVudC1uZXh0anMvLi9tb2RlbHMvYmlsbC5qcz81OGE5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHBvb2wgfSBmcm9tICcuLi9saWIvZGF0YWJhc2UuanMnO1xuaW1wb3J0IFNldHRpbmcgZnJvbSAnLi9zZXR0aW5nLmpzJztcblxuY2xhc3MgQmlsbCB7XG4gIC8vIEdldCBhbGwgYmlsbHMgd2l0aCB0ZW5hbnQgYW5kIHJvb20gZGV0YWlsc1xuICBzdGF0aWMgYXN5bmMgZmluZEFsbCgpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcG9vbC5xdWVyeShgXG4gICAgICAgIFNFTEVDVCBiLiosIHQubmFtZSBhcyB0ZW5hbnRfbmFtZSwgci5yb29tX251bWJlciwgYnIubmFtZSBhcyBicmFuY2hfbmFtZVxuICAgICAgICBGUk9NIGJpbGxzIGJcbiAgICAgICAgSk9JTiB0ZW5hbnRzIHQgT04gYi50ZW5hbnRfaWQgPSB0LmlkXG4gICAgICAgIEpPSU4gcm9vbXMgciBPTiBiLnJvb21faWQgPSByLmlkXG4gICAgICAgIEpPSU4gYnJhbmNoZXMgYnIgT04gci5icmFuY2hfaWQgPSBici5pZFxuICAgICAgICBPUkRFUiBCWSBiLmJpbGxfZGF0ZSBERVNDXG4gICAgICBgKTtcbiAgICAgIHJldHVybiByZXN1bHQucm93cztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmluZGluZyBhbGwgYmlsbHM6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLy8gR2V0IHVucGFpZCBiaWxsc1xuICBzdGF0aWMgYXN5bmMgZmluZFVucGFpZCgpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcG9vbC5xdWVyeShgXG4gICAgICAgIFNFTEVDVCBiLiosIHQubmFtZSBhcyB0ZW5hbnRfbmFtZSwgci5yb29tX251bWJlciwgYnIubmFtZSBhcyBicmFuY2hfbmFtZVxuICAgICAgICBGUk9NIGJpbGxzIGJcbiAgICAgICAgSk9JTiB0ZW5hbnRzIHQgT04gYi50ZW5hbnRfaWQgPSB0LmlkXG4gICAgICAgIEpPSU4gcm9vbXMgciBPTiBiLnJvb21faWQgPSByLmlkXG4gICAgICAgIEpPSU4gYnJhbmNoZXMgYnIgT04gci5icmFuY2hfaWQgPSBici5pZFxuICAgICAgICBXSEVSRSBiLnN0YXR1cyA9ICd1bnBhaWQnIE9SIGIuc3RhdHVzID0gJ3BhcnRpYWwnXG4gICAgICAgIE9SREVSIEJZIGIuYmlsbF9kYXRlXG4gICAgICBgKTtcbiAgICAgIHJldHVybiByZXN1bHQucm93cztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmluZGluZyB1bnBhaWQgYmlsbHM6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLy8gR2V0IGFjdGl2ZSBiaWxscyAodW5wYWlkL3BhcnRpYWwpXG4gIHN0YXRpYyBhc3luYyBmaW5kQWN0aXZlKCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwb29sLnF1ZXJ5KGBcbiAgICAgICAgU0VMRUNUIGIuKiwgdC5uYW1lIGFzIHRlbmFudF9uYW1lLCByLnJvb21fbnVtYmVyLCBici5uYW1lIGFzIGJyYW5jaF9uYW1lXG4gICAgICAgIEZST00gYmlsbHMgYlxuICAgICAgICBKT0lOIHRlbmFudHMgdCBPTiBiLnRlbmFudF9pZCA9IHQuaWRcbiAgICAgICAgSk9JTiByb29tcyByIE9OIGIucm9vbV9pZCA9IHIuaWRcbiAgICAgICAgSk9JTiBicmFuY2hlcyBiciBPTiByLmJyYW5jaF9pZCA9IGJyLmlkXG4gICAgICAgIFdIRVJFIGIuc3RhdHVzIElOICgndW5wYWlkJywgJ3BhcnRpYWwnKVxuICAgICAgICBPUkRFUiBCWSBiLmJpbGxfZGF0ZSBERVNDXG4gICAgICBgKTtcbiAgICAgIHJldHVybiByZXN1bHQucm93cztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmluZGluZyBhY3RpdmUgYmlsbHM6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLy8gR2V0IHBhaWQgYmlsbHMgKGFyY2hpdmVkKVxuICBzdGF0aWMgYXN5bmMgZmluZFBhaWQoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHBvb2wucXVlcnkoYFxuICAgICAgICBTRUxFQ1QgYi4qLCB0Lm5hbWUgYXMgdGVuYW50X25hbWUsIHIucm9vbV9udW1iZXIsIGJyLm5hbWUgYXMgYnJhbmNoX25hbWUsXG4gICAgICAgICAgICAgICBwLnBheW1lbnRfZGF0ZSBhcyBwYWlkX2RhdGVcbiAgICAgICAgRlJPTSBiaWxscyBiXG4gICAgICAgIEpPSU4gdGVuYW50cyB0IE9OIGIudGVuYW50X2lkID0gdC5pZFxuICAgICAgICBKT0lOIHJvb21zIHIgT04gYi5yb29tX2lkID0gci5pZFxuICAgICAgICBKT0lOIGJyYW5jaGVzIGJyIE9OIHIuYnJhbmNoX2lkID0gYnIuaWRcbiAgICAgICAgTEVGVCBKT0lOIChcbiAgICAgICAgICBTRUxFQ1QgYmlsbF9pZCwgTUFYKHBheW1lbnRfZGF0ZSkgYXMgcGF5bWVudF9kYXRlXG4gICAgICAgICAgRlJPTSBwYXltZW50c1xuICAgICAgICAgIEdST1VQIEJZIGJpbGxfaWRcbiAgICAgICAgKSBwIE9OIGIuaWQgPSBwLmJpbGxfaWRcbiAgICAgICAgV0hFUkUgYi5zdGF0dXMgPSAncGFpZCdcbiAgICAgICAgT1JERVIgQlkgYi5iaWxsX2RhdGUgREVTQ1xuICAgICAgYCk7XG4gICAgICByZXR1cm4gcmVzdWx0LnJvd3M7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZpbmRpbmcgcGFpZCBiaWxsczonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvLyBHZXQgYmlsbHMgYnkgdGVuYW50IElEXG4gIHN0YXRpYyBhc3luYyBmaW5kQnlUZW5hbnRJZCh0ZW5hbnRJZCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwb29sLnF1ZXJ5KGBcbiAgICAgICAgU0VMRUNUIGIuKiwgci5yb29tX251bWJlciwgYnIubmFtZSBhcyBicmFuY2hfbmFtZSxcbiAgICAgICAgICAoU0VMRUNUIFNVTShhbW91bnQpIEZST00gcGF5bWVudHMgV0hFUkUgYmlsbF9pZCA9IGIuaWQpIGFzIHBhaWRfYW1vdW50XG4gICAgICAgIEZST00gYmlsbHMgYlxuICAgICAgICBKT0lOIHJvb21zIHIgT04gYi5yb29tX2lkID0gci5pZFxuICAgICAgICBKT0lOIGJyYW5jaGVzIGJyIE9OIHIuYnJhbmNoX2lkID0gYnIuaWRcbiAgICAgICAgV0hFUkUgYi50ZW5hbnRfaWQgPSAkMVxuICAgICAgICBPUkRFUiBCWSBiLmJpbGxfZGF0ZSBERVNDXG4gICAgICBgLCBbdGVuYW50SWRdKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIHJlc3VsdC5yb3dzO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmaW5kaW5nIGJpbGxzIGJ5IHRlbmFudCBJRDonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvLyBHZXQgYmlsbCBieSBJRCB3aXRoIHBheW1lbnRzXG4gIHN0YXRpYyBhc3luYyBmaW5kQnlJZChpZCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwb29sLnF1ZXJ5KGBcbiAgICAgICAgU0VMRUNUIGIuKiwgdC5uYW1lIGFzIHRlbmFudF9uYW1lLCByLnJvb21fbnVtYmVyLCBici5uYW1lIGFzIGJyYW5jaF9uYW1lXG4gICAgICAgIEZST00gYmlsbHMgYlxuICAgICAgICBKT0lOIHRlbmFudHMgdCBPTiBiLnRlbmFudF9pZCA9IHQuaWRcbiAgICAgICAgSk9JTiByb29tcyByIE9OIGIucm9vbV9pZCA9IHIuaWRcbiAgICAgICAgSk9JTiBicmFuY2hlcyBiciBPTiByLmJyYW5jaF9pZCA9IGJyLmlkXG4gICAgICAgIFdIRVJFIGIuaWQgPSAkMVxuICAgICAgYCwgW2lkXSk7XG4gICAgICBcbiAgICAgIGlmICghcmVzdWx0LnJvd3MubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCBiaWxsID0gcmVzdWx0LnJvd3NbMF07XG4gICAgICBcbiAgICAgIC8vIEdldCBwYXltZW50cyBmb3IgdGhpcyBiaWxsXG4gICAgICBjb25zdCBwYXltZW50c1Jlc3VsdCA9IGF3YWl0IHBvb2wucXVlcnkoXG4gICAgICAgICdTRUxFQ1QgKiBGUk9NIHBheW1lbnRzIFdIRVJFIGJpbGxfaWQgPSAkMSBPUkRFUiBCWSBwYXltZW50X2RhdGUgREVTQycsXG4gICAgICAgIFtpZF1cbiAgICAgICk7XG4gICAgICBcbiAgICAgIGJpbGwucGF5bWVudHMgPSBwYXltZW50c1Jlc3VsdC5yb3dzO1xuICAgICAgYmlsbC5wYWlkX2Ftb3VudCA9IHBheW1lbnRzUmVzdWx0LnJvd3MucmVkdWNlKChzdW0sIHBheW1lbnQpID0+IHN1bSArIE51bWJlcihwYXltZW50LmFtb3VudCksIDApO1xuICAgICAgXG4gICAgICByZXR1cm4gYmlsbDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmluZGluZyBiaWxsIGJ5IElEOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8vIENyZWF0ZSBhIG5ldyBjb21wcmVoZW5zaXZlIGJpbGxcbiAgc3RhdGljIGFzeW5jIGNyZWF0ZShiaWxsRGF0YSkge1xuICAgIGNvbnN0IHsgXG4gICAgICB0ZW5hbnRfaWQsIFxuICAgICAgcm9vbV9pZCwgXG4gICAgICBiaWxsX2RhdGUsXG4gICAgICByZW50X2Zyb20sXG4gICAgICByZW50X3RvLFxuICAgICAgcmVudF9hbW91bnQsXG4gICAgICBlbGVjdHJpY19wcmVzZW50X3JlYWRpbmcgPSAwLFxuICAgICAgZWxlY3RyaWNfcHJldmlvdXNfcmVhZGluZyA9IDAsXG4gICAgICBlbGVjdHJpY19jb25zdW1wdGlvbiA9IDAsXG4gICAgICBlbGVjdHJpY19hbW91bnQgPSAwLFxuICAgICAgZWxlY3RyaWNfcmVhZGluZ19kYXRlLFxuICAgICAgZWxlY3RyaWNfcHJldmlvdXNfZGF0ZSxcbiAgICAgIHdhdGVyX2Ftb3VudCxcbiAgICAgIGV4dHJhX2ZlZV9hbW91bnQgPSAwLFxuICAgICAgZXh0cmFfZmVlX2Rlc2NyaXB0aW9uID0gbnVsbCxcbiAgICAgIHRvdGFsX2Ftb3VudCxcbiAgICAgIHN0YXR1cyA9ICd1bnBhaWQnLFxuICAgICAgbm90ZXMsXG4gICAgICBwcmVwYXJlZF9ieVxuICAgIH0gPSBiaWxsRGF0YTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgLy8gR2V0IGN1cnJlbnQgcmF0ZXMgZnJvbSBzZXR0aW5nc1xuICAgICAgY29uc3QgcmF0ZXMgPSBhd2FpdCBTZXR0aW5nLmdldEJpbGxpbmdSYXRlcygpO1xuICAgICAgY29uc3QgZmluYWxFbGVjdHJpY1JhdGUgPSBiaWxsRGF0YS5lbGVjdHJpY19yYXRlX3Blcl9rd2ggfHwgcmF0ZXMuZWxlY3RyaWNfcmF0ZV9wZXJfa3doO1xuICAgICAgY29uc3QgZmluYWxXYXRlckFtb3VudCA9IHdhdGVyX2Ftb3VudCB8fCByYXRlcy53YXRlcl9maXhlZF9hbW91bnQ7XG4gICAgICBcbiAgICAgIC8vIENvbnZlcnQgdW5kZWZpbmVkIHZhbHVlcyB0byBudWxsIGZvciBTUUwgY29tcGF0aWJpbGl0eVxuICAgICAgY29uc3Qgc3FsUGFyYW1zID0gW1xuICAgICAgICB0ZW5hbnRfaWQgPz8gbnVsbCxcbiAgICAgICAgcm9vbV9pZCA/PyBudWxsLFxuICAgICAgICBiaWxsX2RhdGUgPz8gbnVsbCxcbiAgICAgICAgcmVudF9mcm9tID8/IG51bGwsXG4gICAgICAgIHJlbnRfdG8gPz8gbnVsbCxcbiAgICAgICAgcmVudF9hbW91bnQgPz8gbnVsbCxcbiAgICAgICAgZWxlY3RyaWNfcHJlc2VudF9yZWFkaW5nID8/IDAsXG4gICAgICAgIGVsZWN0cmljX3ByZXZpb3VzX3JlYWRpbmcgPz8gMCxcbiAgICAgICAgZWxlY3RyaWNfY29uc3VtcHRpb24gPz8gMCxcbiAgICAgICAgZmluYWxFbGVjdHJpY1JhdGUgPz8gbnVsbCxcbiAgICAgICAgZWxlY3RyaWNfYW1vdW50ID8/IDAsXG4gICAgICAgIGVsZWN0cmljX3JlYWRpbmdfZGF0ZSA/PyBudWxsLFxuICAgICAgICBlbGVjdHJpY19wcmV2aW91c19kYXRlID8/IG51bGwsXG4gICAgICAgIGZpbmFsV2F0ZXJBbW91bnQgPz8gbnVsbCxcbiAgICAgICAgZXh0cmFfZmVlX2Ftb3VudCA/PyAwLFxuICAgICAgICBleHRyYV9mZWVfZGVzY3JpcHRpb24gPz8gbnVsbCxcbiAgICAgICAgdG90YWxfYW1vdW50ID8/IG51bGwsXG4gICAgICAgIHN0YXR1cyA/PyAndW5wYWlkJyxcbiAgICAgICAgbm90ZXMgPz8gbnVsbCxcbiAgICAgICAgcHJlcGFyZWRfYnkgPz8gbnVsbFxuICAgICAgXTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcG9vbC5xdWVyeShgXG4gICAgICAgIElOU0VSVCBJTlRPIGJpbGxzIChcbiAgICAgICAgICB0ZW5hbnRfaWQsIHJvb21faWQsIGJpbGxfZGF0ZSwgcmVudF9mcm9tLCByZW50X3RvLCByZW50X2Ftb3VudCxcbiAgICAgICAgICBlbGVjdHJpY19wcmVzZW50X3JlYWRpbmcsIGVsZWN0cmljX3ByZXZpb3VzX3JlYWRpbmcsIGVsZWN0cmljX2NvbnN1bXB0aW9uLCBcbiAgICAgICAgICBlbGVjdHJpY19yYXRlX3Blcl9rd2gsIGVsZWN0cmljX2Ftb3VudCwgZWxlY3RyaWNfcmVhZGluZ19kYXRlLCBlbGVjdHJpY19wcmV2aW91c19kYXRlLFxuICAgICAgICAgIHdhdGVyX2Ftb3VudCwgZXh0cmFfZmVlX2Ftb3VudCwgZXh0cmFfZmVlX2Rlc2NyaXB0aW9uLCB0b3RhbF9hbW91bnQsIHN0YXR1cywgbm90ZXMsIHByZXBhcmVkX2J5XG4gICAgICAgICkgVkFMVUVTICgkMSwgJDIsICQzLCAkNCwgJDUsICQ2LCAkNywgJDgsICQ5LCAkMTAsICQxMSwgJDEyLCAkMTMsICQxNCwgJDE1LCAkMTYsICQxNywgJDE4LCAkMTksICQyMClcbiAgICAgICAgUkVUVVJOSU5HIGlkXG4gICAgICBgLCBzcWxQYXJhbXMpO1xuICAgICAgXG4gICAgICByZXR1cm4ge1xuICAgICAgICBpZDogcmVzdWx0LnJvd3NbMF0uaWQsXG4gICAgICAgIC4uLmJpbGxEYXRhLFxuICAgICAgICBlbGVjdHJpY19yYXRlX3Blcl9rd2g6IGZpbmFsRWxlY3RyaWNSYXRlLFxuICAgICAgICB3YXRlcl9hbW91bnQ6IGZpbmFsV2F0ZXJBbW91bnRcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIG5ldyBiaWxsOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8vIFVwZGF0ZSBiaWxsXG4gIHN0YXRpYyBhc3luYyB1cGRhdGUoaWQsIGJpbGxEYXRhKSB7XG4gICAgY29uc3QgeyBcbiAgICAgIGJpbGxfZGF0ZSxcbiAgICAgIHJlbnRfZnJvbSxcbiAgICAgIHJlbnRfdG8sXG4gICAgICByZW50X2Ftb3VudCxcbiAgICAgIGVsZWN0cmljX3ByZXNlbnRfcmVhZGluZyxcbiAgICAgIGVsZWN0cmljX3ByZXZpb3VzX3JlYWRpbmcsXG4gICAgICBlbGVjdHJpY19jb25zdW1wdGlvbixcbiAgICAgIGVsZWN0cmljX3JhdGVfcGVyX2t3aCxcbiAgICAgIGVsZWN0cmljX2Ftb3VudCxcbiAgICAgIGVsZWN0cmljX3JlYWRpbmdfZGF0ZSxcbiAgICAgIGVsZWN0cmljX3ByZXZpb3VzX2RhdGUsXG4gICAgICB3YXRlcl9hbW91bnQsXG4gICAgICB0b3RhbF9hbW91bnQsXG4gICAgICBzdGF0dXMsXG4gICAgICBub3RlcyxcbiAgICAgIHByZXBhcmVkX2J5XG4gICAgfSA9IGJpbGxEYXRhO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICAvLyBDb252ZXJ0IHVuZGVmaW5lZCB2YWx1ZXMgdG8gbnVsbCBmb3IgU1FMIGNvbXBhdGliaWxpdHlcbiAgICAgIGNvbnN0IHNxbFBhcmFtcyA9IFtcbiAgICAgICAgYmlsbF9kYXRlID8/IG51bGwsXG4gICAgICAgIHJlbnRfZnJvbSA/PyBudWxsLFxuICAgICAgICByZW50X3RvID8/IG51bGwsXG4gICAgICAgIHJlbnRfYW1vdW50ID8/IG51bGwsXG4gICAgICAgIGVsZWN0cmljX3ByZXNlbnRfcmVhZGluZyA/PyBudWxsLFxuICAgICAgICBlbGVjdHJpY19wcmV2aW91c19yZWFkaW5nID8/IG51bGwsXG4gICAgICAgIGVsZWN0cmljX2NvbnN1bXB0aW9uID8/IG51bGwsXG4gICAgICAgIGVsZWN0cmljX3JhdGVfcGVyX2t3aCA/PyBudWxsLFxuICAgICAgICBlbGVjdHJpY19hbW91bnQgPz8gbnVsbCxcbiAgICAgICAgZWxlY3RyaWNfcmVhZGluZ19kYXRlID8/IG51bGwsXG4gICAgICAgIGVsZWN0cmljX3ByZXZpb3VzX2RhdGUgPz8gbnVsbCxcbiAgICAgICAgd2F0ZXJfYW1vdW50ID8/IG51bGwsXG4gICAgICAgIHRvdGFsX2Ftb3VudCA/PyBudWxsLFxuICAgICAgICBzdGF0dXMgPz8gbnVsbCxcbiAgICAgICAgbm90ZXMgPz8gbnVsbCxcbiAgICAgICAgcHJlcGFyZWRfYnkgPz8gbnVsbCxcbiAgICAgICAgaWRcbiAgICAgIF07XG4gICAgICBcbiAgICAgIGF3YWl0IHBvb2wucXVlcnkoYFxuICAgICAgICBVUERBVEUgYmlsbHMgU0VUIFxuICAgICAgICAgIGJpbGxfZGF0ZSA9ICQxLCByZW50X2Zyb20gPSAkMiwgcmVudF90byA9ICQzLCByZW50X2Ftb3VudCA9ICQ0LFxuICAgICAgICAgIGVsZWN0cmljX3ByZXNlbnRfcmVhZGluZyA9ICQ1LCBlbGVjdHJpY19wcmV2aW91c19yZWFkaW5nID0gJDYsIGVsZWN0cmljX2NvbnN1bXB0aW9uID0gJDcsIFxuICAgICAgICAgIGVsZWN0cmljX3JhdGVfcGVyX2t3aCA9ICQ4LCBlbGVjdHJpY19hbW91bnQgPSAkOSwgZWxlY3RyaWNfcmVhZGluZ19kYXRlID0gJDEwLCBlbGVjdHJpY19wcmV2aW91c19kYXRlID0gJDExLFxuICAgICAgICAgIHdhdGVyX2Ftb3VudCA9ICQxMiwgdG90YWxfYW1vdW50ID0gJDEzLCBzdGF0dXMgPSAkMTQsIG5vdGVzID0gJDE1LCBwcmVwYXJlZF9ieSA9ICQxNlxuICAgICAgICBXSEVSRSBpZCA9ICQxN1xuICAgICAgYCwgc3FsUGFyYW1zKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIHsgaWQsIC4uLmJpbGxEYXRhIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIGJpbGw6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLy8gRGVsZXRlIGJpbGxcbiAgc3RhdGljIGFzeW5jIGRlbGV0ZShpZCkge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBwb29sLnF1ZXJ5KCdERUxFVEUgRlJPTSBiaWxscyBXSEVSRSBpZCA9ICQxJywgW2lkXSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZGVsZXRpbmcgYmlsbDonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvLyBVcGRhdGUgYmlsbCBzdGF0dXNcbiAgc3RhdGljIGFzeW5jIHVwZGF0ZVN0YXR1cyhpZCwgc3RhdHVzKSB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHBvb2wucXVlcnkoXG4gICAgICAgICdVUERBVEUgYmlsbHMgU0VUIHN0YXR1cyA9ICQxIFdIRVJFIGlkID0gJDInLFxuICAgICAgICBbc3RhdHVzLCBpZF1cbiAgICAgICk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgYmlsbCBzdGF0dXM6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLy8gQ2FsY3VsYXRlIGNvbnN1bXB0aW9uIGFuZCBhbW91bnRzIGJhc2VkIG9uIHJlYWRpbmdzIGFuZCBjdXJyZW50IHJhdGVzXG4gIHN0YXRpYyBhc3luYyBjYWxjdWxhdGVVdGlsaXR5QW1vdW50cyhwcmVzZW50UmVhZGluZywgcHJldmlvdXNSZWFkaW5nKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJhdGVzID0gYXdhaXQgU2V0dGluZy5nZXRCaWxsaW5nUmF0ZXMoKTtcbiAgICAgIGNvbnN0IGNvbnN1bXB0aW9uID0gTWF0aC5tYXgoMCwgcHJlc2VudFJlYWRpbmcgLSBwcmV2aW91c1JlYWRpbmcpO1xuICAgICAgY29uc3QgZWxlY3RyaWNBbW91bnQgPSBjb25zdW1wdGlvbiAqIHJhdGVzLmVsZWN0cmljX3JhdGVfcGVyX2t3aDtcbiAgICAgIFxuICAgICAgcmV0dXJuIHsgXG4gICAgICAgIGNvbnN1bXB0aW9uLCBcbiAgICAgICAgZWxlY3RyaWNBbW91bnQsXG4gICAgICAgIHdhdGVyQW1vdW50OiByYXRlcy53YXRlcl9maXhlZF9hbW91bnQsXG4gICAgICAgIGVsZWN0cmljUmF0ZTogcmF0ZXMuZWxlY3RyaWNfcmF0ZV9wZXJfa3doXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjYWxjdWxhdGluZyB1dGlsaXR5IGFtb3VudHM6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLy8gR2V0IGJpbGwgc3RhdGlzdGljc1xuICBzdGF0aWMgYXN5bmMgZ2V0U3RhdHMoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHBvb2wucXVlcnkoYFxuICAgICAgICBTRUxFQ1RcbiAgICAgICAgICBDT1VOVCgqKSBhcyB0b3RhbF9iaWxscyxcbiAgICAgICAgICBTVU0odG90YWxfYW1vdW50KSBhcyB0b3RhbF9hbW91bnQsXG4gICAgICAgICAgU1VNKENBU0UgV0hFTiBzdGF0dXMgPSAncGFpZCcgVEhFTiB0b3RhbF9hbW91bnQgRUxTRSAwIEVORCkgYXMgcGFpZF9hbW91bnQsXG4gICAgICAgICAgU1VNKENBU0UgV0hFTiBzdGF0dXMgPSAndW5wYWlkJyBUSEVOIHRvdGFsX2Ftb3VudCBFTFNFIDAgRU5EKSBhcyB1bnBhaWRfYW1vdW50LFxuICAgICAgICAgIFNVTShDQVNFIFdIRU4gc3RhdHVzID0gJ3BhcnRpYWwnIFRIRU4gdG90YWxfYW1vdW50IEVMU0UgMCBFTkQpIGFzIHBhcnRpYWxfYW1vdW50LFxuICAgICAgICAgIEFWRyh0b3RhbF9hbW91bnQpIGFzIGF2ZXJhZ2VfYmlsbF9hbW91bnQsXG4gICAgICAgICAgQ09VTlQoQ0FTRSBXSEVOIHN0YXR1cyA9ICdwYWlkJyBUSEVOIDEgRU5EKSBhcyBwYWlkX2JpbGxzLFxuICAgICAgICAgIENPVU5UKENBU0UgV0hFTiBzdGF0dXMgPSAndW5wYWlkJyBUSEVOIDEgRU5EKSBhcyB1bnBhaWRfYmlsbHMsXG4gICAgICAgICAgQ09VTlQoQ0FTRSBXSEVOIHN0YXR1cyA9ICdwYXJ0aWFsJyBUSEVOIDEgRU5EKSBhcyBwYXJ0aWFsX2JpbGxzXG4gICAgICAgIEZST00gYmlsbHNcbiAgICAgIGApO1xuICAgICAgXG4gICAgICByZXR1cm4gcmVzdWx0LnJvd3NbMF07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgYmlsbCBzdGF0aXN0aWNzOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8vIEFVVE9NQVRJQyBCSUxMSU5HIE1FVEhPRFMgLSBESVNBQkxFRFxuICAvLyBOb3RlOiBBdXRvbWF0aWMgYmlsbGluZyBoYXMgYmVlbiBkaXNhYmxlZC4gQmlsbHMgbXVzdCBiZSBjcmVhdGVkIG1hbnVhbGx5LlxuICBcbiAgLypcbiAgLy8gR2V0IGJpbGxzIHRoYXQgbmVlZCBuZXh0IGN5Y2xlIGdlbmVyYXRpb24gKGN1cnJlbnQgcGVyaW9kIGVuZGVkKVxuICBzdGF0aWMgYXN5bmMgZ2V0QmlsbHNOZWVkaW5nTmV4dEN5Y2xlKCkge1xuICAgIC8vIERJU0FCTEVEIC0gQXV0b21hdGljIGJpbGxpbmcgY3ljbGVzIHJlbW92ZWRcbiAgICByZXR1cm4gW107XG4gIH1cblxuICAvLyBHZW5lcmF0ZSBuZXh0IGJpbGxpbmcgY3ljbGVcbiAgc3RhdGljIGFzeW5jIGdlbmVyYXRlTmV4dEN5Y2xlKHRlbmFudElkLCByb29tSWQsIGxhc3RCaWxsRW5kRGF0ZSwgcHJldmlvdXNFbGVjdHJpY1JlYWRpbmcsIG1vbnRobHlSZW50KSB7XG4gICAgLy8gRElTQUJMRUQgLSBBdXRvbWF0aWMgYmlsbGluZyBjeWNsZXMgcmVtb3ZlZFxuICAgIHRocm93IG5ldyBFcnJvcignQXV0b21hdGljIGJpbGxpbmcgY3ljbGVzIGhhdmUgYmVlbiBkaXNhYmxlZC4gUGxlYXNlIGNyZWF0ZSBiaWxscyBtYW51YWxseS4nKTtcbiAgfVxuXG4gIC8vIFByb2Nlc3MgYWxsIGF1dG9tYXRpYyBiaWxsaW5nIGN5Y2xlc1xuICBzdGF0aWMgYXN5bmMgcHJvY2Vzc0F1dG9tYXRpY0N5Y2xlcygpIHtcbiAgICAvLyBESVNBQkxFRCAtIEF1dG9tYXRpYyBiaWxsaW5nIGN5Y2xlcyByZW1vdmVkXG4gICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG4gICovXG5cbiAgLy8gR2V0IGJpbGxzIG5lZWRpbmcgZWxlY3RyaWNpdHkgcmVhZGluZyB1cGRhdGUgKDMgZGF5cyBiZWZvcmUgY3ljbGUgZW5kcylcbiAgc3RhdGljIGFzeW5jIGdldEJpbGxzTmVlZGluZ0VsZWN0cmljVXBkYXRlKCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwb29sLnF1ZXJ5KGBcbiAgICAgICAgU0VMRUNUIFxuICAgICAgICAgIGIuKixcbiAgICAgICAgICB0Lm5hbWUgYXMgdGVuYW50X25hbWUsXG4gICAgICAgICAgdC5lbWFpbCBhcyB0ZW5hbnRfZW1haWwsXG4gICAgICAgICAgci5yb29tX251bWJlcixcbiAgICAgICAgICByLm1vbnRobHlfcmVudCxcbiAgICAgICAgICBici5uYW1lIGFzIGJyYW5jaF9uYW1lLFxuICAgICAgICAgIGJyLmFkZHJlc3MgYXMgYnJhbmNoX2FkZHJlc3NcbiAgICAgICAgRlJPTSBiaWxscyBiXG4gICAgICAgIElOTkVSIEpPSU4gdGVuYW50cyB0IE9OIGIudGVuYW50X2lkID0gdC5pZFxuICAgICAgICBJTk5FUiBKT0lOIHJvb21zIHIgT04gYi5yb29tX2lkID0gci5pZFxuICAgICAgICBJTk5FUiBKT0lOIGJyYW5jaGVzIGJyIE9OIHIuYnJhbmNoX2lkID0gYnIuaWRcbiAgICAgICAgV0hFUkUgYi5zdGF0dXMgPSAndW5wYWlkJ1xuICAgICAgICBBTkQgYi5lbGVjdHJpY19jb25zdW1wdGlvbiA9IDBcbiAgICAgICAgQU5EIEVYVFJBQ1QoREFZIEZST00gKGIucmVudF90byAtIENVUlJFTlRfREFURSkpIDw9IDNcbiAgICAgICAgQU5EIEVYVFJBQ1QoREFZIEZST00gKGIucmVudF90byAtIENVUlJFTlRfREFURSkpID49IDBcbiAgICAgICAgT1JERVIgQlkgYi5yZW50X3RvIEFTQ1xuICAgICAgYCk7XG4gICAgICBcbiAgICAgIHJldHVybiByZXN1bHQucm93cztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmluZGluZyBiaWxscyBuZWVkaW5nIGVsZWN0cmljIHVwZGF0ZTonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvLyBVcGRhdGUgZWxlY3RyaWNpdHkgcmVhZGluZyBhbmQgYXV0by1jYWxjdWxhdGUgYW1vdW50c1xuICBzdGF0aWMgYXN5bmMgdXBkYXRlRWxlY3RyaWNSZWFkaW5nKGJpbGxJZCwgcHJlc2VudFJlYWRpbmcsIHJlYWRpbmdEYXRlKSB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIEdldCBjdXJyZW50IGJpbGxcbiAgICAgIGNvbnN0IGJpbGwgPSBhd2FpdCB0aGlzLmZpbmRCeUlkKGJpbGxJZCk7XG4gICAgICBpZiAoIWJpbGwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdCaWxsIG5vdCBmb3VuZCcpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBwcmV2aW91c1JlYWRpbmcgPSBwYXJzZUZsb2F0KGJpbGwuZWxlY3RyaWNfcHJldmlvdXNfcmVhZGluZykgfHwgMDtcbiAgICAgIGNvbnN0IGN1cnJlbnRSZWFkaW5nID0gcGFyc2VGbG9hdChwcmVzZW50UmVhZGluZykgfHwgMDtcbiAgICAgIFxuICAgICAgLy8gQ2FsY3VsYXRlIGNvbnN1bXB0aW9uXG4gICAgICBjb25zdCBjb25zdW1wdGlvbiA9IE1hdGgubWF4KDAsIGN1cnJlbnRSZWFkaW5nIC0gcHJldmlvdXNSZWFkaW5nKTtcbiAgICAgIFxuICAgICAgLy8gR2V0IGN1cnJlbnQgZWxlY3RyaWMgcmF0ZVxuICAgICAgY29uc3QgcmF0ZXMgPSBhd2FpdCBTZXR0aW5nLmdldEJpbGxpbmdSYXRlcygpO1xuICAgICAgY29uc3QgZWxlY3RyaWNBbW91bnQgPSBjb25zdW1wdGlvbiAqIHJhdGVzLmVsZWN0cmljX3JhdGVfcGVyX2t3aDtcbiAgICAgIFxuICAgICAgLy8gQ2FsY3VsYXRlIG5ldyB0b3RhbFxuICAgICAgY29uc3QgbmV3VG90YWwgPSBwYXJzZUZsb2F0KGJpbGwucmVudF9hbW91bnQpICsgZWxlY3RyaWNBbW91bnQgKyBwYXJzZUZsb2F0KGJpbGwud2F0ZXJfYW1vdW50KTtcblxuICAgICAgLy8gVXBkYXRlIGJpbGxcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHBvb2wucXVlcnkoYFxuICAgICAgICBVUERBVEUgYmlsbHMgU0VUIFxuICAgICAgICAgIGVsZWN0cmljX3ByZXNlbnRfcmVhZGluZyA9ICQxLFxuICAgICAgICAgIGVsZWN0cmljX2NvbnN1bXB0aW9uID0gJDIsXG4gICAgICAgICAgZWxlY3RyaWNfYW1vdW50ID0gJDMsXG4gICAgICAgICAgZWxlY3RyaWNfcmVhZGluZ19kYXRlID0gJDQsXG4gICAgICAgICAgdG90YWxfYW1vdW50ID0gJDUsXG4gICAgICAgICAgbm90ZXMgPSBDT0FMRVNDRShub3RlcywgJycpIHx8ICcgfCBFbGVjdHJpYyByZWFkaW5nIHVwZGF0ZWQ6ICcgfHwgJDYgfHwgJyBrV2ggb24gJyB8fCAkN1xuICAgICAgICBXSEVSRSBpZCA9ICQ4XG4gICAgICBgLCBbXG4gICAgICAgIGN1cnJlbnRSZWFkaW5nLFxuICAgICAgICBjb25zdW1wdGlvbixcbiAgICAgICAgZWxlY3RyaWNBbW91bnQsXG4gICAgICAgIHJlYWRpbmdEYXRlLFxuICAgICAgICBuZXdUb3RhbCxcbiAgICAgICAgY3VycmVudFJlYWRpbmcsXG4gICAgICAgIHJlYWRpbmdEYXRlLFxuICAgICAgICBiaWxsSWRcbiAgICAgIF0pO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBwcmV2aW91c1JlYWRpbmcsXG4gICAgICAgIGN1cnJlbnRSZWFkaW5nLFxuICAgICAgICBjb25zdW1wdGlvbixcbiAgICAgICAgZWxlY3RyaWNBbW91bnQsXG4gICAgICAgIG5ld1RvdGFsLFxuICAgICAgICBtZXNzYWdlOiBgRWxlY3RyaWMgcmVhZGluZyB1cGRhdGVkOiAke2NvbnN1bXB0aW9ufSBrV2ggY29uc3VtZWQsIOKCsSR7ZWxlY3RyaWNBbW91bnQudG9GaXhlZCgyKX0gY2hhcmdlZGBcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIGVsZWN0cmljIHJlYWRpbmc6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLy8gTWFyayBiaWxsIGFzIHJlYWR5IHRvIHNlbmQgKGZpbmFsaXplZClcbiAgc3RhdGljIGFzeW5jIG1hcmtBc1JlYWR5VG9TZW5kKGJpbGxJZCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwb29sLnF1ZXJ5KGBcbiAgICAgICAgVVBEQVRFIGJpbGxzIFNFVCBcbiAgICAgICAgICBub3RlcyA9IENPQUxFU0NFKG5vdGVzLCAnJykgfHwgJyB8IEJpbGwgZmluYWxpemVkIGFuZCByZWFkeSB0byBzZW5kJyxcbiAgICAgICAgICB1cGRhdGVkX2F0ID0gQ1VSUkVOVF9USU1FU1RBTVBcbiAgICAgICAgV0hFUkUgaWQgPSAkMVxuICAgICAgYCwgW2JpbGxJZF0pO1xuXG4gICAgICByZXR1cm4gcmVzdWx0LnJvd0NvdW50ID4gMDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbWFya2luZyBiaWxsIGFzIHJlYWR5IHRvIHNlbmQ6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLy8gR2V0IHRlbmFudHMgbmVlZGluZyBiaWxsIGNyZWF0aW9uIHJlbWluZGVycyAoMyBkYXlzIGJlZm9yZSBiaWxsaW5nIGN5Y2xlIGVuZHMpXG4gIHN0YXRpYyBhc3luYyBnZXRCaWxsc05lZWRpbmdSZW1pbmRlcnMoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHBvb2wucXVlcnkoYFxuICAgICAgICBTRUxFQ1QgXG4gICAgICAgICAgdC5pZCBhcyB0ZW5hbnRfaWQsXG4gICAgICAgICAgdC5uYW1lIGFzIHRlbmFudF9uYW1lLFxuICAgICAgICAgIHQuZW1haWwgYXMgdGVuYW50X2VtYWlsLFxuICAgICAgICAgIHQucmVudF9zdGFydCxcbiAgICAgICAgICByLmlkIGFzIHJvb21faWQsXG4gICAgICAgICAgci5yb29tX251bWJlcixcbiAgICAgICAgICByLm1vbnRobHlfcmVudCxcbiAgICAgICAgICBici5uYW1lIGFzIGJyYW5jaF9uYW1lLFxuICAgICAgICAgIGJyLmFkZHJlc3MgYXMgYnJhbmNoX2FkZHJlc3MsXG4gICAgICAgICAgLS0gQ2FsY3VsYXRlIG5leHQgYmlsbGluZyBwZXJpb2QgZW5kIGRhdGVcbiAgICAgICAgICBDQVNFIFxuICAgICAgICAgICAgV0hFTiB0LnJlbnRfc3RhcnQgSVMgTk9UIE5VTEwgVEhFTlxuICAgICAgICAgICAgICBDQVNFIFxuICAgICAgICAgICAgICAgIC0tIEZvciBmaXJzdCBiaWxsOiBvbmUgbW9udGggZnJvbSByZW50X3N0YXJ0LCBzYW1lIGRheSBvZiBtb250aFxuICAgICAgICAgICAgICAgIFdIRU4gTk9UIEVYSVNUUyAoU0VMRUNUIDEgRlJPTSBiaWxscyBXSEVSRSB0ZW5hbnRfaWQgPSB0LmlkKSBUSEVOXG4gICAgICAgICAgICAgICAgICAodC5yZW50X3N0YXJ0ICsgSU5URVJWQUwgJzEgbW9udGgnKSAtIElOVEVSVkFMICcxIGRheSdcbiAgICAgICAgICAgICAgICAtLSBGb3Igc3Vic2VxdWVudCBiaWxsczogb25lIG1vbnRoIGZyb20gbGFzdCBiaWxsIGVuZCBkYXRlXG4gICAgICAgICAgICAgICAgRUxTRSBcbiAgICAgICAgICAgICAgICAgICgoU0VMRUNUIHJlbnRfdG8gRlJPTSBiaWxscyBXSEVSRSB0ZW5hbnRfaWQgPSB0LmlkIE9SREVSIEJZIGJpbGxfZGF0ZSBERVNDIExJTUlUIDEpICsgSU5URVJWQUwgJzEgZGF5JyArIElOVEVSVkFMICcxIG1vbnRoJykgLSBJTlRFUlZBTCAnMSBkYXknXG4gICAgICAgICAgICAgIEVORFxuICAgICAgICAgICAgRUxTRSBEQVRFX1RSVU5DKCdtb250aCcsIENVUlJFTlRfREFURSkgKyBJTlRFUlZBTCAnMSBtb250aCcgLSBJTlRFUlZBTCAnMSBkYXknXG4gICAgICAgICAgRU5EIGFzIG5leHRfYmlsbF9kdWVfZGF0ZSxcbiAgICAgICAgICAtLSBDYWxjdWxhdGUgZGF5cyB1bnRpbCBiaWxsaW5nIGN5Y2xlIGVuZHNcbiAgICAgICAgICBDQVNFIFxuICAgICAgICAgICAgV0hFTiB0LnJlbnRfc3RhcnQgSVMgTk9UIE5VTEwgVEhFTlxuICAgICAgICAgICAgICBDQVNFIFxuICAgICAgICAgICAgICAgIFdIRU4gTk9UIEVYSVNUUyAoU0VMRUNUIDEgRlJPTSBiaWxscyBXSEVSRSB0ZW5hbnRfaWQgPSB0LmlkKSBUSEVOXG4gICAgICAgICAgICAgICAgICBFWFRSQUNUKERBWSBGUk9NICgodC5yZW50X3N0YXJ0ICsgSU5URVJWQUwgJzEgbW9udGgnKSAtIElOVEVSVkFMICcxIGRheScpIC0gQ1VSUkVOVF9EQVRFKVxuICAgICAgICAgICAgICAgIEVMU0UgXG4gICAgICAgICAgICAgICAgICBFWFRSQUNUKERBWSBGUk9NICgoKFNFTEVDVCByZW50X3RvIEZST00gYmlsbHMgV0hFUkUgdGVuYW50X2lkID0gdC5pZCBPUkRFUiBCWSBiaWxsX2RhdGUgREVTQyBMSU1JVCAxKSArIElOVEVSVkFMICcxIGRheScgKyBJTlRFUlZBTCAnMSBtb250aCcpIC0gSU5URVJWQUwgJzEgZGF5JykgLSBDVVJSRU5UX0RBVEUpXG4gICAgICAgICAgICAgIEVORFxuICAgICAgICAgICAgRUxTRSBOVUxMXG4gICAgICAgICAgRU5EIGFzIGRheXNfdW50aWxfZHVlLFxuICAgICAgICAgIC0tIENoZWNrIGlmIHRlbmFudCBhbHJlYWR5IGhhcyBhbiB1bnBhaWQgYmlsbFxuICAgICAgICAgIENBU0UgXG4gICAgICAgICAgICBXSEVOIEVYSVNUUyAoXG4gICAgICAgICAgICAgIFNFTEVDVCAxIEZST00gYmlsbHMgYjIgXG4gICAgICAgICAgICAgIFdIRVJFIGIyLnRlbmFudF9pZCA9IHQuaWQgXG4gICAgICAgICAgICAgIEFORCBiMi5zdGF0dXMgSU4gKCd1bnBhaWQnLCAncGFydGlhbCcpXG4gICAgICAgICAgICApIFRIRU4gJ2FscmVhZHlfaGFzX3VucGFpZF9iaWxsJ1xuICAgICAgICAgICAgRUxTRSAnbmVlZHNfYmlsbGluZydcbiAgICAgICAgICBFTkQgYXMgYmlsbGluZ19zdGF0dXMsXG4gICAgICAgICAgLS0gR2V0IGxhc3QgZWxlY3RyaWMgcmVhZGluZ1xuICAgICAgICAgIENPQUxFU0NFKFxuICAgICAgICAgICAgKFNFTEVDVCBlbGVjdHJpY19wcmVzZW50X3JlYWRpbmcgXG4gICAgICAgICAgICAgRlJPTSBiaWxscyBcbiAgICAgICAgICAgICBXSEVSRSB0ZW5hbnRfaWQgPSB0LmlkIFxuICAgICAgICAgICAgIE9SREVSIEJZIGJpbGxfZGF0ZSBERVNDIFxuICAgICAgICAgICAgIExJTUlUIDEpLCBcbiAgICAgICAgICAgIHQuaW5pdGlhbF9lbGVjdHJpY19yZWFkaW5nLFxuICAgICAgICAgICAgMFxuICAgICAgICAgICkgYXMgbGFzdF9lbGVjdHJpY19yZWFkaW5nXG4gICAgICAgIEZST00gdGVuYW50cyB0XG4gICAgICAgIElOTkVSIEpPSU4gcm9vbXMgciBPTiB0LnJvb21faWQgPSByLmlkXG4gICAgICAgIElOTkVSIEpPSU4gYnJhbmNoZXMgYnIgT04gci5icmFuY2hfaWQgPSBici5pZFxuICAgICAgICBXSEVSRSB0LmNvbnRyYWN0X3N0YXR1cyA9ICdhY3RpdmUnXG4gICAgICAgIEFORCB0LnJlbnRfc3RhcnQgSVMgTk9UIE5VTExcbiAgICAgICAgLS0gT25seSB0ZW5hbnRzIHdobyBkb24ndCBhbHJlYWR5IGhhdmUgdW5wYWlkIGJpbGxzXG4gICAgICAgIEFORCBOT1QgRVhJU1RTIChcbiAgICAgICAgICBTRUxFQ1QgMSBGUk9NIGJpbGxzIGIyIFxuICAgICAgICAgIFdIRVJFIGIyLnRlbmFudF9pZCA9IHQuaWQgXG4gICAgICAgICAgQU5EIGIyLnN0YXR1cyBJTiAoJ3VucGFpZCcsICdwYXJ0aWFsJylcbiAgICAgICAgKVxuICAgICAgICAtLSBPbmx5IHRlbmFudHMgd2hvc2UgYmlsbGluZyBjeWNsZSBpcyBlbmRpbmcgaW4gMyBkYXlzIG9yIGxlc3MgKGJ1dCBub3Qgb3ZlcmR1ZSlcbiAgICAgICAgQU5EIENBU0UgXG4gICAgICAgICAgV0hFTiBOT1QgRVhJU1RTIChTRUxFQ1QgMSBGUk9NIGJpbGxzIFdIRVJFIHRlbmFudF9pZCA9IHQuaWQpIFRIRU5cbiAgICAgICAgICAgIEVYVFJBQ1QoREFZIEZST00gKCh0LnJlbnRfc3RhcnQgKyBJTlRFUlZBTCAnMSBtb250aCcpIC0gSU5URVJWQUwgJzEgZGF5JykgLSBDVVJSRU5UX0RBVEUpIDw9IDNcbiAgICAgICAgICAgIEFORCBFWFRSQUNUKERBWSBGUk9NICgodC5yZW50X3N0YXJ0ICsgSU5URVJWQUwgJzEgbW9udGgnKSAtIElOVEVSVkFMICcxIGRheScpIC0gQ1VSUkVOVF9EQVRFKSA+PSAwXG4gICAgICAgICAgRUxTRSBcbiAgICAgICAgICAgIEVYVFJBQ1QoREFZIEZST00gKCgoU0VMRUNUIHJlbnRfdG8gRlJPTSBiaWxscyBXSEVSRSB0ZW5hbnRfaWQgPSB0LmlkIE9SREVSIEJZIGJpbGxfZGF0ZSBERVNDIExJTUlUIDEpICsgSU5URVJWQUwgJzEgZGF5JyArIElOVEVSVkFMICcxIG1vbnRoJykgLSBJTlRFUlZBTCAnMSBkYXknKSAtIENVUlJFTlRfREFURSkgPD0gM1xuICAgICAgICAgICAgQU5EIEVYVFJBQ1QoREFZIEZST00gKCgoU0VMRUNUIHJlbnRfdG8gRlJPTSBiaWxscyBXSEVSRSB0ZW5hbnRfaWQgPSB0LmlkIE9SREVSIEJZIGJpbGxfZGF0ZSBERVNDIExJTUlUIDEpICsgSU5URVJWQUwgJzEgZGF5JyArIElOVEVSVkFMICcxIG1vbnRoJykgLSBJTlRFUlZBTCAnMSBkYXknKSAtIENVUlJFTlRfREFURSkgPj0gMFxuICAgICAgICBFTkRcbiAgICAgICAgT1JERVIgQlkgYnIubmFtZSwgci5yb29tX251bWJlclxuICAgICAgYCk7XG4gICAgICBcbiAgICAgIHJldHVybiByZXN1bHQucm93cztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmluZGluZyB0ZW5hbnRzIG5lZWRpbmcgYmlsbCBjcmVhdGlvbiByZW1pbmRlcnM6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEJpbGw7ICJdLCJuYW1lcyI6WyJwb29sIiwiU2V0dGluZyIsIkJpbGwiLCJmaW5kQWxsIiwicmVzdWx0IiwicXVlcnkiLCJyb3dzIiwiZXJyb3IiLCJjb25zb2xlIiwiZmluZFVucGFpZCIsImZpbmRBY3RpdmUiLCJmaW5kUGFpZCIsImZpbmRCeVRlbmFudElkIiwidGVuYW50SWQiLCJmaW5kQnlJZCIsImlkIiwibGVuZ3RoIiwiYmlsbCIsInBheW1lbnRzUmVzdWx0IiwicGF5bWVudHMiLCJwYWlkX2Ftb3VudCIsInJlZHVjZSIsInN1bSIsInBheW1lbnQiLCJOdW1iZXIiLCJhbW91bnQiLCJjcmVhdGUiLCJiaWxsRGF0YSIsInRlbmFudF9pZCIsInJvb21faWQiLCJiaWxsX2RhdGUiLCJyZW50X2Zyb20iLCJyZW50X3RvIiwicmVudF9hbW91bnQiLCJlbGVjdHJpY19wcmVzZW50X3JlYWRpbmciLCJlbGVjdHJpY19wcmV2aW91c19yZWFkaW5nIiwiZWxlY3RyaWNfY29uc3VtcHRpb24iLCJlbGVjdHJpY19hbW91bnQiLCJlbGVjdHJpY19yZWFkaW5nX2RhdGUiLCJlbGVjdHJpY19wcmV2aW91c19kYXRlIiwid2F0ZXJfYW1vdW50IiwiZXh0cmFfZmVlX2Ftb3VudCIsImV4dHJhX2ZlZV9kZXNjcmlwdGlvbiIsInRvdGFsX2Ftb3VudCIsInN0YXR1cyIsIm5vdGVzIiwicHJlcGFyZWRfYnkiLCJyYXRlcyIsImdldEJpbGxpbmdSYXRlcyIsImZpbmFsRWxlY3RyaWNSYXRlIiwiZWxlY3RyaWNfcmF0ZV9wZXJfa3doIiwiZmluYWxXYXRlckFtb3VudCIsIndhdGVyX2ZpeGVkX2Ftb3VudCIsInNxbFBhcmFtcyIsInVwZGF0ZSIsImRlbGV0ZSIsInVwZGF0ZVN0YXR1cyIsImNhbGN1bGF0ZVV0aWxpdHlBbW91bnRzIiwicHJlc2VudFJlYWRpbmciLCJwcmV2aW91c1JlYWRpbmciLCJjb25zdW1wdGlvbiIsIk1hdGgiLCJtYXgiLCJlbGVjdHJpY0Ftb3VudCIsIndhdGVyQW1vdW50IiwiZWxlY3RyaWNSYXRlIiwiZ2V0U3RhdHMiLCJnZXRCaWxsc05lZWRpbmdFbGVjdHJpY1VwZGF0ZSIsInVwZGF0ZUVsZWN0cmljUmVhZGluZyIsImJpbGxJZCIsInJlYWRpbmdEYXRlIiwiRXJyb3IiLCJwYXJzZUZsb2F0IiwiY3VycmVudFJlYWRpbmciLCJuZXdUb3RhbCIsInN1Y2Nlc3MiLCJtZXNzYWdlIiwidG9GaXhlZCIsIm1hcmtBc1JlYWR5VG9TZW5kIiwicm93Q291bnQiLCJnZXRCaWxsc05lZWRpbmdSZW1pbmRlcnMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./models/bill.js\n");

/***/ }),

/***/ "(rsc)/./models/setting.js":
/*!***************************!*\
  !*** ./models/setting.js ***!
  \***************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _lib_database_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/database.js */ \"(rsc)/./lib/database.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_database_js__WEBPACK_IMPORTED_MODULE_0__]);\n_lib_database_js__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\nclass Setting {\n    // Get all settings\n    static async findAll() {\n        try {\n            const result = await _lib_database_js__WEBPACK_IMPORTED_MODULE_0__.pool.query(\"SELECT * FROM settings ORDER BY setting_key\");\n            return result.rows;\n        } catch (error) {\n            console.error(\"Error finding all settings:\", error);\n            throw error;\n        }\n    }\n    // Get setting by key\n    static async findByKey(key) {\n        try {\n            const result = await _lib_database_js__WEBPACK_IMPORTED_MODULE_0__.pool.query(\"SELECT * FROM settings WHERE setting_key = $1\", [\n                key\n            ]);\n            return result.rows[0] || null;\n        } catch (error) {\n            console.error(\"Error finding setting by key:\", error);\n            throw error;\n        }\n    }\n    // Get setting value by key\n    static async getValue(key) {\n        try {\n            const setting = await this.findByKey(key);\n            return setting ? parseFloat(setting.setting_value) : null;\n        } catch (error) {\n            console.error(\"Error getting setting value:\", error);\n            throw error;\n        }\n    }\n    // Update setting value (create if doesn't exist)\n    static async updateValue(key, value, description = null) {\n        try {\n            console.log(\"Setting.updateValue called:\", {\n                key,\n                value,\n                description\n            });\n            // Use INSERT ... ON CONFLICT for upsert functionality (PostgreSQL)\n            const result = await _lib_database_js__WEBPACK_IMPORTED_MODULE_0__.pool.query(`\r\n        INSERT INTO settings (setting_key, setting_value, description) \r\n        VALUES ($1, $2, $3)\r\n        ON CONFLICT (setting_key) DO UPDATE SET \r\n        setting_value = EXCLUDED.setting_value,\r\n        description = COALESCE(EXCLUDED.description, settings.description)\r\n      `, [\n                key,\n                value.toString(),\n                description\n            ]);\n            console.log(\"Database update result:\", result);\n            return true; // Always return true since upsert always succeeds\n        } catch (error) {\n            console.error(\"Error updating setting:\", error);\n            throw error;\n        }\n    }\n    // Create new setting\n    static async create(key, value, description = null) {\n        try {\n            const result = await _lib_database_js__WEBPACK_IMPORTED_MODULE_0__.pool.query(\"INSERT INTO settings (setting_key, setting_value, description) VALUES ($1, $2, $3) RETURNING id\", [\n                key,\n                value,\n                description\n            ]);\n            return {\n                id: result.rows[0].id,\n                setting_key: key,\n                setting_value: value,\n                description\n            };\n        } catch (error) {\n            console.error(\"Error creating setting:\", error);\n            throw error;\n        }\n    }\n    // Get current rates for billing\n    static async getBillingRates() {\n        try {\n            const electricRate = await this.getValue(\"electric_rate_per_kwh\") || 11.00;\n            const waterAmount = await this.getValue(\"water_fixed_amount\") || 200.00;\n            const roomRate = await this.getValue(\"default_room_rate\") || 3500.00;\n            return {\n                electric_rate_per_kwh: electricRate,\n                water_fixed_amount: waterAmount,\n                default_room_rate: roomRate\n            };\n        } catch (error) {\n            console.error(\"Error getting billing rates:\", error);\n            throw error;\n        }\n    }\n    // Update multiple billing rates at once\n    static async updateBillingRates(rates) {\n        try {\n            const updates = [];\n            if (rates.electric_rate_per_kwh !== undefined) {\n                updates.push(this.updateValue(\"electric_rate_per_kwh\", rates.electric_rate_per_kwh));\n            }\n            if (rates.water_fixed_amount !== undefined) {\n                updates.push(this.updateValue(\"water_fixed_amount\", rates.water_fixed_amount));\n            }\n            if (rates.default_room_rate !== undefined) {\n                updates.push(this.updateValue(\"default_room_rate\", rates.default_room_rate));\n            }\n            await Promise.all(updates);\n            return true;\n        } catch (error) {\n            console.error(\"Error updating billing rates:\", error);\n            throw error;\n        }\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Setting);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TUFBTUMsVUFBVSxFQUFFO1lBRWxCLElBQUlELE1BQU1KLHFCQUFxQixLQUFLTSxXQUFXO2dCQUM3Q0QsUUFBUUUsSUFBSSxDQUFDLElBQUksQ0FBQ25CLFdBQVcsQ0FBQyx5QkFBeUJnQixNQUFNSixxQkFBcUI7WUFDcEY7WUFFQSxJQUFJSSxNQUFNSCxrQkFBa0IsS0FBS0ssV0FBVztnQkFDMUNELFFBQVFFLElBQUksQ0FBQyxJQUFJLENBQUNuQixXQUFXLENBQUMsc0JBQXNCZ0IsTUFBTUgsa0JBQWtCO1lBQzlFO1lBRUEsSUFBSUcsTUFBTUYsaUJBQWlCLEtBQUtJLFdBQVc7Z0JBQ3pDRCxRQUFRRSxJQUFJLENBQUMsSUFBSSxDQUFDbkIsV0FBVyxDQUFDLHFCQUFxQmdCLE1BQU1GLGlCQUFpQjtZQUM1RTtZQUVBLE1BQU1NLFFBQVFDLEdBQUcsQ0FBQ0o7WUFDbEIsT0FBTztRQUNULEVBQUUsT0FBT3pCLE9BQU87WUFDZEMsUUFBUUQsS0FBSyxDQUFDLGlDQUFpQ0E7WUFDL0MsTUFBTUE7UUFDUjtJQUNGO0FBQ0Y7QUFFQSxpRUFBZUwsT0FBT0EsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2otaC1hcGFydG1lbnQtbmV4dGpzLy4vbW9kZWxzL3NldHRpbmcuanM/ZjQwZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwb29sIH0gZnJvbSAnLi4vbGliL2RhdGFiYXNlLmpzJztcclxuXHJcbmNsYXNzIFNldHRpbmcge1xyXG4gIC8vIEdldCBhbGwgc2V0dGluZ3NcclxuICBzdGF0aWMgYXN5bmMgZmluZEFsbCgpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHBvb2wucXVlcnkoXHJcbiAgICAgICAgJ1NFTEVDVCAqIEZST00gc2V0dGluZ3MgT1JERVIgQlkgc2V0dGluZ19rZXknXHJcbiAgICAgICk7XHJcbiAgICAgIHJldHVybiByZXN1bHQucm93cztcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZpbmRpbmcgYWxsIHNldHRpbmdzOicsIGVycm9yKTtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBHZXQgc2V0dGluZyBieSBrZXlcclxuICBzdGF0aWMgYXN5bmMgZmluZEJ5S2V5KGtleSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcG9vbC5xdWVyeShcclxuICAgICAgICAnU0VMRUNUICogRlJPTSBzZXR0aW5ncyBXSEVSRSBzZXR0aW5nX2tleSA9ICQxJyxcclxuICAgICAgICBba2V5XVxyXG4gICAgICApO1xyXG4gICAgICByZXR1cm4gcmVzdWx0LnJvd3NbMF0gfHwgbnVsbDtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZpbmRpbmcgc2V0dGluZyBieSBrZXk6JywgZXJyb3IpO1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIEdldCBzZXR0aW5nIHZhbHVlIGJ5IGtleVxyXG4gIHN0YXRpYyBhc3luYyBnZXRWYWx1ZShrZXkpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHNldHRpbmcgPSBhd2FpdCB0aGlzLmZpbmRCeUtleShrZXkpO1xyXG4gICAgICByZXR1cm4gc2V0dGluZyA/IHBhcnNlRmxvYXQoc2V0dGluZy5zZXR0aW5nX3ZhbHVlKSA6IG51bGw7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIHNldHRpbmcgdmFsdWU6JywgZXJyb3IpO1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIFVwZGF0ZSBzZXR0aW5nIHZhbHVlIChjcmVhdGUgaWYgZG9lc24ndCBleGlzdClcclxuICBzdGF0aWMgYXN5bmMgdXBkYXRlVmFsdWUoa2V5LCB2YWx1ZSwgZGVzY3JpcHRpb24gPSBudWxsKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zb2xlLmxvZygnU2V0dGluZy51cGRhdGVWYWx1ZSBjYWxsZWQ6JywgeyBrZXksIHZhbHVlLCBkZXNjcmlwdGlvbiB9KTtcclxuICAgICAgXHJcbiAgICAgIC8vIFVzZSBJTlNFUlQgLi4uIE9OIENPTkZMSUNUIGZvciB1cHNlcnQgZnVuY3Rpb25hbGl0eSAoUG9zdGdyZVNRTClcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcG9vbC5xdWVyeShgXHJcbiAgICAgICAgSU5TRVJUIElOVE8gc2V0dGluZ3MgKHNldHRpbmdfa2V5LCBzZXR0aW5nX3ZhbHVlLCBkZXNjcmlwdGlvbikgXHJcbiAgICAgICAgVkFMVUVTICgkMSwgJDIsICQzKVxyXG4gICAgICAgIE9OIENPTkZMSUNUIChzZXR0aW5nX2tleSkgRE8gVVBEQVRFIFNFVCBcclxuICAgICAgICBzZXR0aW5nX3ZhbHVlID0gRVhDTFVERUQuc2V0dGluZ192YWx1ZSxcclxuICAgICAgICBkZXNjcmlwdGlvbiA9IENPQUxFU0NFKEVYQ0xVREVELmRlc2NyaXB0aW9uLCBzZXR0aW5ncy5kZXNjcmlwdGlvbilcclxuICAgICAgYCwgW2tleSwgdmFsdWUudG9TdHJpbmcoKSwgZGVzY3JpcHRpb25dKTtcclxuICAgICAgXHJcbiAgICAgIGNvbnNvbGUubG9nKCdEYXRhYmFzZSB1cGRhdGUgcmVzdWx0OicsIHJlc3VsdCk7XHJcbiAgICAgIHJldHVybiB0cnVlOyAvLyBBbHdheXMgcmV0dXJuIHRydWUgc2luY2UgdXBzZXJ0IGFsd2F5cyBzdWNjZWVkc1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgc2V0dGluZzonLCBlcnJvcik7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gQ3JlYXRlIG5ldyBzZXR0aW5nXHJcbiAgc3RhdGljIGFzeW5jIGNyZWF0ZShrZXksIHZhbHVlLCBkZXNjcmlwdGlvbiA9IG51bGwpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHBvb2wucXVlcnkoXHJcbiAgICAgICAgJ0lOU0VSVCBJTlRPIHNldHRpbmdzIChzZXR0aW5nX2tleSwgc2V0dGluZ192YWx1ZSwgZGVzY3JpcHRpb24pIFZBTFVFUyAoJDEsICQyLCAkMykgUkVUVVJOSU5HIGlkJyxcclxuICAgICAgICBba2V5LCB2YWx1ZSwgZGVzY3JpcHRpb25dXHJcbiAgICAgICk7XHJcbiAgICAgIFxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIGlkOiByZXN1bHQucm93c1swXS5pZCxcclxuICAgICAgICBzZXR0aW5nX2tleToga2V5LFxyXG4gICAgICAgIHNldHRpbmdfdmFsdWU6IHZhbHVlLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uXHJcbiAgICAgIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBzZXR0aW5nOicsIGVycm9yKTtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBHZXQgY3VycmVudCByYXRlcyBmb3IgYmlsbGluZ1xyXG4gIHN0YXRpYyBhc3luYyBnZXRCaWxsaW5nUmF0ZXMoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBlbGVjdHJpY1JhdGUgPSBhd2FpdCB0aGlzLmdldFZhbHVlKCdlbGVjdHJpY19yYXRlX3Blcl9rd2gnKSB8fCAxMS4wMDtcclxuICAgICAgY29uc3Qgd2F0ZXJBbW91bnQgPSBhd2FpdCB0aGlzLmdldFZhbHVlKCd3YXRlcl9maXhlZF9hbW91bnQnKSB8fCAyMDAuMDA7XHJcbiAgICAgIGNvbnN0IHJvb21SYXRlID0gYXdhaXQgdGhpcy5nZXRWYWx1ZSgnZGVmYXVsdF9yb29tX3JhdGUnKSB8fCAzNTAwLjAwO1xyXG4gICAgICBcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBlbGVjdHJpY19yYXRlX3Blcl9rd2g6IGVsZWN0cmljUmF0ZSxcclxuICAgICAgICB3YXRlcl9maXhlZF9hbW91bnQ6IHdhdGVyQW1vdW50LFxyXG4gICAgICAgIGRlZmF1bHRfcm9vbV9yYXRlOiByb29tUmF0ZVxyXG4gICAgICB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyBiaWxsaW5nIHJhdGVzOicsIGVycm9yKTtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBVcGRhdGUgbXVsdGlwbGUgYmlsbGluZyByYXRlcyBhdCBvbmNlXHJcbiAgc3RhdGljIGFzeW5jIHVwZGF0ZUJpbGxpbmdSYXRlcyhyYXRlcykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgdXBkYXRlcyA9IFtdO1xyXG4gICAgICBcclxuICAgICAgaWYgKHJhdGVzLmVsZWN0cmljX3JhdGVfcGVyX2t3aCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgdXBkYXRlcy5wdXNoKHRoaXMudXBkYXRlVmFsdWUoJ2VsZWN0cmljX3JhdGVfcGVyX2t3aCcsIHJhdGVzLmVsZWN0cmljX3JhdGVfcGVyX2t3aCkpO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBpZiAocmF0ZXMud2F0ZXJfZml4ZWRfYW1vdW50ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICB1cGRhdGVzLnB1c2godGhpcy51cGRhdGVWYWx1ZSgnd2F0ZXJfZml4ZWRfYW1vdW50JywgcmF0ZXMud2F0ZXJfZml4ZWRfYW1vdW50KSk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGlmIChyYXRlcy5kZWZhdWx0X3Jvb21fcmF0ZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgdXBkYXRlcy5wdXNoKHRoaXMudXBkYXRlVmFsdWUoJ2RlZmF1bHRfcm9vbV9yYXRlJywgcmF0ZXMuZGVmYXVsdF9yb29tX3JhdGUpKTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodXBkYXRlcyk7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgYmlsbGluZyByYXRlczonLCBlcnJvcik7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgU2V0dGluZzsgIl0sIm5hbWVzIjpbInBvb2wiLCJTZXR0aW5nIiwiZmluZEFsbCIsInJlc3VsdCIsInF1ZXJ5Iiwicm93cyIsImVycm9yIiwiY29uc29sZSIsImZpbmRCeUtleSIsImtleSIsImdldFZhbHVlIiwic2V0dGluZyIsInBhcnNlRmxvYXQiLCJzZXR0aW5nX3ZhbHVlIiwidXBkYXRlVmFsdWUiLCJ2YWx1ZSIsImRlc2NyaXB0aW9uIiwibG9nIiwidG9TdHJpbmciLCJjcmVhdGUiLCJpZCIsInNldHRpbmdfa2V5IiwiZ2V0QmlsbGluZ1JhdGVzIiwiZWxlY3RyaWNSYXRlIiwid2F0ZXJBbW91bnQiLCJyb29tUmF0ZSIsImVsZWN0cmljX3JhdGVfcGVyX2t3aCIsIndhdGVyX2ZpeGVkX2Ftb3VudCIsImRlZmF1bHRfcm9vbV9yYXRlIiwidXBkYXRlQmlsbGluZ1JhdGVzIiwicmF0ZXMiLCJ1cGRhdGVzIiwidW5kZWZpbmVkIiwicHVzaCIsIlByb21pc2UiLCJhbGwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./models/setting.js\n");

/***/ }),

/***/ "(rsc)/./services/emailService.js":
/*!**********************************!*\
  !*** ./services/emailService.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var nodemailer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! nodemailer */ \"nodemailer\");\n/* harmony import */ var nodemailer__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(nodemailer__WEBPACK_IMPORTED_MODULE_0__);\n\n// Create email transporter\nconst createTransporter = ()=>{\n    return nodemailer__WEBPACK_IMPORTED_MODULE_0___default().createTransport({\n        service: \"gmail\",\n        auth: {\n            user: \"official.jhapartment@gmail.com\" || 0,\n            pass: \"gcme okaj qiyf ubki\" || 0 // Replace with your Gmail App Password\n        }\n    });\n};\n// Format currency for display\nconst formatCurrency = (amount)=>{\n    return new Intl.NumberFormat(\"en-PH\", {\n        style: \"currency\",\n        currency: \"PHP\"\n    }).format(amount);\n};\n// Format date for display\nconst formatDate = (date)=>{\n    if (!date) return \"N/A\";\n    try {\n        const dateObj = new Date(date);\n        if (isNaN(dateObj.getTime())) return \"N/A\";\n        return new Intl.DateTimeFormat(\"en-PH\", {\n            year: \"numeric\",\n            month: \"long\",\n            day: \"numeric\"\n        }).format(dateObj);\n    } catch (error) {\n        return \"N/A\";\n    }\n};\n// Generate HTML bill template\nconst generateBillHTML = (bill)=>{\n    const electricReading = bill.electric_present_reading && bill.electric_previous_reading ? `${bill.electric_previous_reading} → ${bill.electric_present_reading}` : \"N/A\";\n    const electricConsumption = bill.electric_consumption || 0;\n    return `\n    <!DOCTYPE html>\n    <html>\n    <head>\n      <meta charset=\"utf-8\">\n      <style>\n        body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background-color: #f4f4f4; }\n        .bill-container { max-width: 600px; margin: 0 auto; background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }\n        .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; text-align: center; }\n        .header h1 { margin: 0; font-size: 28px; }\n        .header p { margin: 5px 0 0 0; opacity: 0.9; }\n        .content { padding: 30px; }\n        .bill-info { background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 25px; }\n        .bill-info h3 { margin: 0 0 15px 0; color: #333; }\n        .info-row { display: flex; justify-content: space-between; margin-bottom: 10px; }\n        .info-label { font-weight: bold; color: #666; }\n        .info-value { color: #333; }\n        .charges-section { margin-bottom: 25px; }\n        .charges-section h3 { border-bottom: 2px solid #667eea; padding-bottom: 10px; margin-bottom: 20px; color: #333; }\n        .charge-item { display: flex; justify-content: space-between; padding: 15px; margin-bottom: 10px; border-radius: 6px; }\n        .charge-rent { background: #e3f2fd; border-left: 4px solid #2196f3; }\n        .charge-electric { background: #fff3e0; border-left: 4px solid #ff9800; }\n        .charge-water { background: #e8f5e8; border-left: 4px solid #4caf50; }\n        .total-section { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 8px; text-align: center; }\n        .total-amount { font-size: 32px; font-weight: bold; margin: 10px 0; }\n        .footer { padding: 20px; text-align: center; color: #666; border-top: 1px solid #eee; }\n        .payment-note { background: #f0f8ff; border: 1px solid #b3d9ff; padding: 15px; border-radius: 6px; margin: 20px 0; }\n      </style>\n    </head>\n    <body>\n      <div class=\"bill-container\">\n        <!-- Header -->\n        <div class=\"header\">\n          <h1>${bill.branch_name || \"JH APARTMENT\"}</h1>\n          <p>${bill.branch_address || \"Patin-ay, Prosperidad, Agusan del Sur\"}</p>\n        </div>\n\n        <!-- Content -->\n        <div class=\"content\">\n          <!-- Bill Information -->\n          <div class=\"bill-info\">\n            <h3>Bill Information</h3>\n            <div class=\"info-row\">\n              <span class=\"info-label\">Tenant Name:</span>\n              <span class=\"info-value\">${bill.tenant_name}</span>\n            </div>\n            <div class=\"info-row\">\n              <span class=\"info-label\">Room Number:</span>\n              <span class=\"info-value\">${bill.room_number}</span>\n            </div>\n            <div class=\"info-row\">\n              <span class=\"info-label\">Bill Period:</span>\n              <span class=\"info-value\">${formatDate(bill.rent_from)} - ${formatDate(bill.rent_to)}</span>\n            </div>\n            <div class=\"info-row\">\n              <span class=\"info-label\">Bill Date:</span>\n              <span class=\"info-value\">${formatDate(bill.bill_date)}</span>\n            </div>\n            <div class=\"info-row\">\n              <span class=\"info-label\">Due Date:</span>\n              <span class=\"info-value\">${formatDate(bill.rent_to)}</span>\n            </div>\n          </div>\n\n          <!-- Charges Breakdown -->\n          <div class=\"charges-section\">\n            <h3>Charges Breakdown</h3>\n            \n            <!-- Rent -->\n            <div class=\"charge-item charge-rent\">\n              <div>\n                <strong>Monthly Rent</strong>\n                <br><small>Period: ${formatDate(bill.rent_from)} - ${formatDate(bill.rent_to)}</small>\n              </div>\n              <div style=\"text-align: right;\">\n                <strong>${formatCurrency(bill.rent_amount)}</strong>\n              </div>\n            </div>\n\n            <!-- Electric -->\n            <div class=\"charge-item charge-electric\">\n              <div>\n                <strong>Electricity</strong>\n                <br><small>Reading: ${electricReading} (${electricConsumption} kWh)</small>\n                <br><small>Rate: ₱${bill.electric_rate_per_kwh}/kWh</small>\n              </div>\n              <div style=\"text-align: right;\">\n                <strong>${formatCurrency(bill.electric_amount || 0)}</strong>\n              </div>\n            </div>\n\n            <!-- Water -->\n            <div class=\"charge-item charge-water\">\n              <div>\n                <strong>Water</strong>\n                <br><small>Fixed monthly charge</small>\n              </div>\n              <div style=\"text-align: right;\">\n                <strong>${formatCurrency(bill.water_amount)}</strong>\n              </div>\n            </div>\n\n            ${bill.extra_fee_amount > 0 ? `\n            <!-- Extra Fees -->\n            <div class=\"charge-item\" style=\"background: #f3e5f5; border-left: 4px solid #9c27b0;\">\n              <div>\n                <strong>Extra Fees</strong>\n                <br><small>${bill.extra_fee_description || \"Additional charges\"}</small>\n              </div>\n              <div style=\"text-align: right;\">\n                <strong>${formatCurrency(bill.extra_fee_amount)}</strong>\n              </div>\n            </div>\n            ` : \"\"}\n          </div>\n\n          <!-- Total -->\n          <div class=\"total-section\">\n            <div>Total Amount Due</div>\n            <div class=\"total-amount\">${formatCurrency(bill.total_amount)}</div>\n            <div>Status: ${bill.status.toUpperCase()}</div>\n          </div>\n\n          <!-- Payment Note -->\n          <div class=\"payment-note\">\n            <strong>Payment Instructions:</strong><br>\n            Please pay your bill on or before the due date to avoid any late fees. \n            Contact the management office for payment methods and assistance.\n          </div>\n        </div>\n\n        <!-- Footer -->\n        <div class=\"footer\">\n          <p>This is an automatically generated bill. For questions or concerns, please contact the management office.</p>\n          <p><strong>Generated on:</strong> ${formatDate(new Date())}</p>\n        </div>\n      </div>\n    </body>\n    </html>\n  `;\n};\n// Send bill to tenant via email\nconst sendBillToTenant = async (bill, recipientEmail, customMessage = \"\")=>{\n    try {\n        const transporter = createTransporter();\n        const subject = `Monthly Bill - Room ${bill.room_number} - ${formatDate(bill.bill_date)}`;\n        const htmlContent = generateBillHTML(bill);\n        let textMessage = `\nDear ${bill.tenant_name},\n\nYour monthly bill for Room ${bill.room_number} is ready.\n\nBill Period: ${formatDate(bill.rent_from)} - ${formatDate(bill.rent_to)}\nTotal Amount: ${formatCurrency(bill.total_amount)}\nDue Date: ${formatDate(bill.rent_to)}\n\nBreakdown:\n- Rent: ${formatCurrency(bill.rent_amount)}\n- Electricity: ${formatCurrency(bill.electric_amount || 0)}\n- Water: ${formatCurrency(bill.water_amount)}${bill.extra_fee_amount > 0 ? `\n- Extra Fees: ${formatCurrency(bill.extra_fee_amount)} (${bill.extra_fee_description || \"Additional charges\"})` : \"\"}\n\nPlease pay on or before the due date.\n\nThank you,\n${bill.branch_name || \"JH Apartment\"} Management\n    `;\n        if (customMessage) {\n            textMessage = `${customMessage}\\n\\n${textMessage}`;\n        }\n        const mailOptions = {\n            from: \"official.jhapartment@gmail.com\" || 0,\n            to: recipientEmail,\n            subject: subject,\n            text: textMessage,\n            html: htmlContent,\n            attachments: [] // Could add PDF attachment in the future\n        };\n        const result = await transporter.sendMail(mailOptions);\n        return {\n            success: true,\n            messageId: result.messageId,\n            message: \"Email sent successfully\"\n        };\n    } catch (error) {\n        console.error(\"Email sending error:\", error);\n        return {\n            success: false,\n            error: error.message\n        };\n    }\n};\n// Test email configuration\nconst testEmailConfig = async ()=>{\n    try {\n        const transporter = createTransporter();\n        await transporter.verify();\n        return {\n            success: true,\n            message: \"Email configuration is valid\"\n        };\n    } catch (error) {\n        return {\n            success: false,\n            error: error.message\n        };\n    }\n};\n// Send receipt to tenant via email\nconst sendReceiptToTenant = async (bill, payments, recipientEmail, pdfBuffer, penaltyPercentage = 1.00)=>{\n    try {\n        const transporter = createTransporter();\n        const subject = `Payment Receipt - Room ${bill.room_number} - ${formatDate(new Date())}`;\n        // Check if penalty fee was applied\n        const hasPenaltyFee = bill.penalty_applied || bill.penalty_fee_amount > 0;\n        const penaltyFeeAmount = parseFloat(bill.penalty_fee_amount || 0);\n        let textMessage = `\nDear ${bill.tenant_name},\n\nThank you for your payment! Please find your official receipt attached.\n\nReceipt Details:\n- Bill Period: ${formatDate(bill.rent_from)} - ${formatDate(bill.rent_to)}\n- Total Amount: ${formatCurrency(bill.total_amount)}\n- Amount Paid: ${formatCurrency(payments.reduce((sum, p)=>sum + parseFloat(p.amount), 0))}\n- Payment Date: ${formatDate(payments[payments.length - 1].actual_payment_date || payments[payments.length - 1].payment_date)}\n- Status: FULLY PAID\n${hasPenaltyFee ? `- Late Payment Fee: ${formatCurrency(penaltyFeeAmount)} (${penaltyPercentage}% penalty applied)` : \"\"}\n\nThis receipt serves as official proof of payment.\n\nThank you for choosing ${bill.branch_name || \"J&H Apartment\"}!\n\nBest regards,\n${bill.branch_name || \"J&H Apartment\"} Management\n    `;\n        const mailOptions = {\n            from: \"official.jhapartment@gmail.com\" || 0,\n            to: recipientEmail,\n            subject: subject,\n            text: textMessage,\n            attachments: [\n                {\n                    filename: `receipt-${bill.id}-${Date.now()}.pdf`,\n                    content: pdfBuffer,\n                    contentType: \"application/pdf\"\n                }\n            ]\n        };\n        const result = await transporter.sendMail(mailOptions);\n        return {\n            success: true,\n            message: \"Receipt sent successfully via email\",\n            messageId: result.messageId\n        };\n    } catch (error) {\n        console.error(\"Receipt email sending error:\", error);\n        return {\n            success: false,\n            error: error.message\n        };\n    }\n};\n// Send welcome email to new tenant\nconst sendWelcomeEmail = async (tenant, roomInfo)=>{\n    try {\n        // Emails are now enabled - attempting to send welcome email\n        const transporter = createTransporter();\n        const subject = `Welcome to J&H Apartment! - Room ${roomInfo.room_number}`;\n        const htmlContent = `\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <meta charset=\"utf-8\">\n        <style>\n          body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background-color: #f4f4f4; }\n          .email-container { max-width: 600px; margin: 0 auto; background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }\n          .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; text-align: center; }\n          .header h1 { margin: 0; font-size: 28px; }\n          .content { padding: 30px; }\n          .welcome-section { background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0; }\n          .info-box { background: #e3f2fd; border-left: 4px solid #2196f3; padding: 15px; margin: 15px 0; }\n          .deposit-info { background: #fff3e0; border-left: 4px solid #ff9800; padding: 15px; margin: 15px 0; }\n          .contract-info { background: #e8f5e8; border-left: 4px solid #4caf50; padding: 15px; margin: 15px 0; }\n          .footer { padding: 20px; text-align: center; color: #666; border-top: 1px solid #eee; }\n        </style>\n      </head>\n      <body>\n        <div class=\"email-container\">\n          <div class=\"header\">\n            <h1>🏠 Welcome to J&H Apartment!</h1>\n            <p>Your new home awaits you</p>\n          </div>\n          \n          <div class=\"content\">\n            <div class=\"welcome-section\">\n              <h2>Dear ${tenant.name},</h2>\n              <p>We are thrilled to welcome you to J&H Apartment! Thank you for choosing us as your new home. We're committed to providing you with a comfortable and pleasant living experience.</p>\n            </div>\n            \n            <div class=\"info-box\">\n              <h3>📋 Your Tenancy Details</h3>\n              <p><strong>Room Number:</strong> ${roomInfo.room_number}</p>\n              <p><strong>Monthly Rent:</strong> ${formatCurrency(roomInfo.monthly_rent)}</p>\n              <p><strong>Contract Start:</strong> ${formatDate(tenant.contract_start_date)}</p>\n              <p><strong>Contract End:</strong> ${formatDate(tenant.contract_end_date)}</p>\n              <p><strong>Contract Duration:</strong> ${tenant.contract_duration_months} months</p>\n            </div>\n            \n            <div class=\"deposit-info\">\n              <h3>💰 Deposit Information</h3>\n              <p><strong>Advance Payment:</strong> ${formatCurrency(tenant.advance_payment)}</p>\n              <p><strong>Security Deposit:</strong> ${formatCurrency(tenant.security_deposit)}</p>\n              <p><strong>Total Required:</strong> ${formatCurrency(parseFloat(tenant.advance_payment) + parseFloat(tenant.security_deposit))}</p>\n              <p><em>A separate deposit receipt will be sent to you once payment is confirmed.</em></p>\n            </div>\n            \n            <div class=\"contract-info\">\n              <h3>📋 Important Information</h3>\n              <ul>\n                <li>Your rent is due monthly in advance</li>\n                <li>Water and electricity bills will be calculated based on usage</li>\n                <li>We'll notify you 1 month before your contract expires</li>\n                <li>Please keep your deposit receipts for future reference</li>\n                <li>Contact management for any maintenance requests</li>\n              </ul>\n            </div>\n            \n            <div class=\"welcome-section\">\n              <h3>📞 Contact Information</h3>\n              <p><strong>Management Office:</strong> Available during business hours</p>\n              <p><strong>Email:</strong> official.jhapartment@gmail.com</p>\n              <p><strong>Address:</strong> Patin-ay, Prosperidad, Agusan Del Sur</p>\n            </div>\n            \n            <div style=\"text-align: center; margin: 30px 0;\">\n              <p style=\"font-size: 18px; color: #667eea;\"><strong>Welcome to your new home! 🏡</strong></p>\n            </div>\n          </div>\n          \n          <div class=\"footer\">\n            <p>This email was sent automatically by J&H Apartment Management System</p>\n            <p>If you have any questions, please contact our management office</p>\n          </div>\n        </div>\n      </body>\n      </html>\n    `;\n        const textContent = `\nDear ${tenant.name},\n\nWelcome to J&H Apartment! \n\nYour Tenancy Details:\n- Room Number: ${roomInfo.room_number}\n- Monthly Rent: ${formatCurrency(roomInfo.monthly_rent)}\n- Contract Period: ${formatDate(tenant.contract_start_date)} to ${formatDate(tenant.contract_end_date)}\n- Duration: ${tenant.contract_duration_months} months\n\nDeposit Information:\n- Advance Payment: ${formatCurrency(tenant.advance_payment)}\n- Security Deposit: ${formatCurrency(tenant.security_deposit)}\n- Total Required: ${formatCurrency(parseFloat(tenant.advance_payment) + parseFloat(tenant.security_deposit))}\n\nImportant Notes:\n- Monthly rent is due in advance\n- We'll notify you 1 month before contract expiry\n- Keep deposit receipts for reference\n- Contact management for maintenance requests\n\nWelcome to your new home!\n\nBest regards,\nJ&H Apartment Management\n    `;\n        const mailOptions = {\n            from: \"official.jhapartment@gmail.com\" || 0,\n            to: tenant.email,\n            subject: subject,\n            text: textContent,\n            html: htmlContent\n        };\n        const result = await transporter.sendMail(mailOptions);\n        return {\n            success: true,\n            messageId: result.messageId,\n            message: \"Welcome email sent successfully\"\n        };\n    } catch (error) {\n        console.error(\"Welcome email sending error:\", error);\n        return {\n            success: false,\n            error: error.message\n        };\n    }\n};\n// Send deposit receipt email\nconst sendDepositReceiptEmail = async (tenant, roomInfo, depositReceiptBuffer)=>{\n    try {\n        // Emails are now enabled - attempting to send deposit receipt email\n        const transporter = createTransporter();\n        const subject = `Deposit Receipt - Room ${roomInfo.room_number} - J&H Apartment`;\n        const htmlContent = `\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <meta charset=\"utf-8\">\n        <style>\n          body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background-color: #f4f4f4; }\n          .email-container { max-width: 600px; margin: 0 auto; background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }\n          .header { background: linear-gradient(135deg, #28a745 0%, #20c997 100%); color: white; padding: 30px; text-align: center; }\n          .content { padding: 30px; }\n          .receipt-info { background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0; }\n          .amount-box { background: #e8f5e8; border: 2px solid #28a745; padding: 20px; border-radius: 8px; text-align: center; margin: 20px 0; }\n          .footer { padding: 20px; text-align: center; color: #666; border-top: 1px solid #eee; }\n        </style>\n      </head>\n      <body>\n        <div class=\"email-container\">\n          <div class=\"header\">\n            <h1>💰 Deposit Receipt</h1>\n            <p>Official Payment Confirmation</p>\n          </div>\n          \n          <div class=\"content\">\n            <div class=\"receipt-info\">\n              <h3>Dear ${tenant.name},</h3>\n              <p>Thank you for your payment! We have received your advance payment and security deposit for Room ${roomInfo.room_number}.</p>\n            </div>\n            \n            <div class=\"amount-box\">\n              <h3>Payment Summary</h3>\n              <p><strong>Advance Payment:</strong> ${formatCurrency(tenant.advance_payment)}</p>\n              <p><strong>Security Deposit:</strong> ${formatCurrency(tenant.security_deposit)}</p>\n              <hr style=\"margin: 15px 0;\">\n              <p style=\"font-size: 18px;\"><strong>Total Paid: ${formatCurrency(parseFloat(tenant.advance_payment) + parseFloat(tenant.security_deposit))}</strong></p>\n            </div>\n            \n            <div class=\"receipt-info\">\n              <h3>📋 Receipt Details</h3>\n              <p><strong>Receipt Date:</strong> ${formatDate(new Date())}</p>\n              <p><strong>Tenant:</strong> ${tenant.name}</p>\n              <p><strong>Room:</strong> ${roomInfo.room_number}</p>\n              <p><strong>Contract Period:</strong> ${formatDate(tenant.contract_start_date)} to ${formatDate(tenant.contract_end_date)}</p>\n            </div>\n            \n            <div style=\"background: #fff3cd; border: 1px solid #ffeaa7; padding: 15px; border-radius: 6px; margin: 20px 0;\">\n              <h4>📄 Official Receipt Attached</h4>\n              <p>Please find your official deposit receipt attached to this email. Keep this receipt for your records as proof of payment.</p>\n            </div>\n            \n            <div style=\"text-align: center; margin: 30px 0;\">\n              <p style=\"color: #28a745; font-weight: bold;\">✅ Payment Confirmed - Welcome to J&H Apartment!</p>\n            </div>\n          </div>\n          \n          <div class=\"footer\">\n            <p>This receipt is automatically generated and serves as official proof of payment</p>\n            <p>For any questions, please contact our management office</p>\n          </div>\n        </div>\n      </body>\n      </html>\n    `;\n        const textContent = `\nDear ${tenant.name},\n\nDEPOSIT RECEIPT - J&H APARTMENT\n\nThank you for your payment! We have received your deposits for Room ${roomInfo.room_number}.\n\nPayment Summary:\n- Advance Payment: ${formatCurrency(tenant.advance_payment)}\n- Security Deposit: ${formatCurrency(tenant.security_deposit)}\n- Total Paid: ${formatCurrency(parseFloat(tenant.advance_payment) + parseFloat(tenant.security_deposit))}\n\nReceipt Details:\n- Date: ${formatDate(new Date())}\n- Tenant: ${tenant.name}\n- Room: ${roomInfo.room_number}\n- Contract: ${formatDate(tenant.contract_start_date)} to ${formatDate(tenant.contract_end_date)}\n\nYour official receipt is attached to this email. Please keep it for your records.\n\nWelcome to J&H Apartment!\n\nBest regards,\nJ&H Apartment Management\n    `;\n        const mailOptions = {\n            from: \"official.jhapartment@gmail.com\" || 0,\n            to: tenant.email,\n            subject: subject,\n            text: textContent,\n            html: htmlContent,\n            attachments: [\n                {\n                    filename: `deposit-receipt-${tenant.id}-${Date.now()}.pdf`,\n                    content: depositReceiptBuffer,\n                    contentType: \"application/pdf\"\n                }\n            ]\n        };\n        const result = await transporter.sendMail(mailOptions);\n        return {\n            success: true,\n            messageId: result.messageId,\n            message: \"Deposit receipt email sent successfully\"\n        };\n    } catch (error) {\n        console.error(\"Deposit receipt email sending error:\", error);\n        return {\n            success: false,\n            error: error.message\n        };\n    }\n};\n// Send contract expiry notification\nconst sendContractExpiryNotification = async (tenant, roomInfo)=>{\n    try {\n        // Emails are now enabled - attempting to send contract expiry notification\n        const transporter = createTransporter();\n        const subject = `Contract Expiry Notice - Room ${roomInfo.room_number} - Action Required`;\n        const daysUntilExpiry = Math.ceil((new Date(tenant.contract_end_date) - new Date()) / (1000 * 60 * 60 * 24));\n        const htmlContent = `\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <meta charset=\"utf-8\">\n        <style>\n          body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background-color: #f4f4f4; }\n          .email-container { max-width: 600px; margin: 0 auto; background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }\n          .header { background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%); color: white; padding: 30px; text-align: center; }\n          .content { padding: 30px; }\n          .notice-box { background: #fff3cd; border: 2px solid #ffc107; padding: 20px; border-radius: 8px; margin: 20px 0; }\n          .info-section { background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0; }\n          .action-box { background: #e3f2fd; border-left: 4px solid #2196f3; padding: 20px; margin: 20px 0; }\n          .footer { padding: 20px; text-align: center; color: #666; border-top: 1px solid #eee; }\n        </style>\n      </head>\n      <body>\n        <div class=\"email-container\">\n          <div class=\"header\">\n            <h1>⚠️ Contract Expiry Notice</h1>\n            <p>Important: Action Required</p>\n          </div>\n          \n          <div class=\"content\">\n            <div class=\"notice-box\">\n              <h3>Dear ${tenant.name},</h3>\n              <p style=\"font-size: 16px;\"><strong>Your tenancy contract will expire in ${daysUntilExpiry} days.</strong></p>\n              <p>Contract End Date: <strong>${formatDate(tenant.contract_end_date)}</strong></p>\n            </div>\n            \n            <div class=\"info-section\">\n              <h3>📋 Current Contract Details</h3>\n              <p><strong>Room Number:</strong> ${roomInfo.room_number}</p>\n              <p><strong>Contract Start:</strong> ${formatDate(tenant.contract_start_date)}</p>\n              <p><strong>Contract End:</strong> ${formatDate(tenant.contract_end_date)}</p>\n              <p><strong>Monthly Rent:</strong> ${formatCurrency(roomInfo.monthly_rent)}</p>\n            </div>\n            \n            <div class=\"action-box\">\n              <h3>🔄 Renewal Options</h3>\n              <p>If you wish to continue staying with us, please contact our management office to discuss renewal terms:</p>\n              <ul>\n                <li>Standard 6-month contract renewal</li>\n                <li>Custom contract duration options available</li>\n                <li>Current rent rates may apply</li>\n                <li>New contract to be signed before expiry date</li>\n              </ul>\n            </div>\n            \n            <div style=\"background: #f8d7da; border: 1px solid #f5c6cb; padding: 15px; border-radius: 6px; margin: 20px 0;\">\n              <h4>⏰ Important Deadlines</h4>\n              <p><strong>Please notify us of your intentions by:</strong> ${formatDate(new Date(Date.now() + 7 * 24 * 60 * 60 * 1000))}</p>\n              <p>This will allow us sufficient time to process your renewal or arrange for a smooth transition.</p>\n            </div>\n            \n            <div class=\"info-section\">\n              <h3>📞 Contact Management</h3>\n              <p><strong>Email:</strong> official.jhapartment@gmail.com</p>\n              <p><strong>Visit:</strong> Management Office during business hours</p>\n              <p><strong>Address:</strong> Patin-ay, Prosperidad, Agusan Del Sur</p>\n            </div>\n            \n            <div style=\"text-align: center; margin: 30px 0;\">\n              <p style=\"color: #ff6b6b; font-weight: bold;\">⚠️ Please respond within 7 days to avoid any complications</p>\n            </div>\n          </div>\n          \n          <div class=\"footer\">\n            <p>This is an automated reminder sent 30 days before contract expiry</p>\n            <p>Thank you for being a valued tenant at J&H Apartment</p>\n          </div>\n        </div>\n      </body>\n      </html>\n    `;\n        const textContent = `\nDear ${tenant.name},\n\nCONTRACT EXPIRY NOTICE - J&H APARTMENT\n\nYour tenancy contract will expire in ${daysUntilExpiry} days.\n\nContract Details:\n- Room: ${roomInfo.room_number}\n- Contract End: ${formatDate(tenant.contract_end_date)}\n- Monthly Rent: ${formatCurrency(roomInfo.monthly_rent)}\n\nRenewal Options:\n- Standard 6-month renewal available\n- Custom duration options\n- Contact management office to discuss terms\n\nImportant:\nPlease notify us of your intentions by ${formatDate(new Date(Date.now() + 7 * 24 * 60 * 60 * 1000))}\n\nContact Information:\nEmail: official.jhapartment@gmail.com\nVisit: Management Office during business hours\n\nPlease respond within 7 days to avoid complications.\n\nThank you for being a valued tenant.\n\nBest regards,\nJ&H Apartment Management\n    `;\n        const mailOptions = {\n            from: \"official.jhapartment@gmail.com\" || 0,\n            to: tenant.email,\n            subject: subject,\n            text: textContent,\n            html: htmlContent\n        };\n        const result = await transporter.sendMail(mailOptions);\n        return {\n            success: true,\n            messageId: result.messageId,\n            message: \"Contract expiry notification sent successfully\"\n        };\n    } catch (error) {\n        console.error(\"Contract expiry email sending error:\", error);\n        return {\n            success: false,\n            error: error.message\n        };\n    }\n};\n// Send departure notification email\nconst sendDepartureEmail = async (recipientEmail, departureInfo)=>{\n    try {\n        const transporter = createTransporter();\n        const subject = `Departure Confirmation - Room ${departureInfo.room_number} - J&H Apartment`;\n        const htmlContent = `\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <meta charset=\"utf-8\">\n        <style>\n          body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background-color: #f4f4f4; }\n          .email-container { max-width: 600px; margin: 0 auto; background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }\n          .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; text-align: center; }\n          .content { padding: 30px; }\n          .info-section { background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0; }\n          .summary-box { background: #e3f2fd; border-left: 4px solid #2196f3; padding: 20px; margin: 20px 0; }\n          .refund-box { background: #e8f5e8; border-left: 4px solid #4caf50; padding: 20px; margin: 20px 0; }\n          .footer { padding: 20px; text-align: center; color: #666; border-top: 1px solid #eee; }\n          .status-badge { display: inline-block; padding: 5px 15px; border-radius: 20px; font-size: 12px; font-weight: bold; }\n          .completed { background: #d4edda; color: #155724; }\n          .early { background: #fff3cd; color: #856404; }\n        </style>\n      </head>\n      <body>\n        <div class=\"email-container\">\n          <div class=\"header\">\n            <h1>🏠 Departure Confirmation</h1>\n            <p>J&H Apartment - Thank You for Staying With Us</p>\n          </div>\n          \n          <div class=\"content\">\n            <h3>Dear ${departureInfo.tenant_name},</h3>\n            <p>We confirm that your tenancy at J&H Apartment has been processed and your records have been updated.</p>\n            \n            <div class=\"info-section\">\n              <h3>📋 Tenancy Summary</h3>\n              <p><strong>Room Number:</strong> ${departureInfo.room_number}</p>\n              <p><strong>Branch:</strong> ${departureInfo.branch_name}</p>\n              <p><strong>Tenancy Period:</strong> ${formatDate(departureInfo.rent_start)} - ${formatDate(departureInfo.rent_end)}</p>\n              <p><strong>Contract Status:</strong> \n                <span class=\"status-badge ${departureInfo.contract_completed ? \"completed\" : \"early\"}\">\n                  ${departureInfo.contract_completed ? \"Contract Completed\" : \"Early Departure\"}\n                </span>\n              </p>\n              <p><strong>Departure Reason:</strong> ${departureInfo.reason_for_leaving?.replace(\"_\", \" \") || \"Not specified\"}</p>\n            </div>\n            \n            <div class=\"summary-box\">\n              <h3>💰 Financial Summary</h3>\n              <p><strong>Total Bills Paid:</strong> ${formatCurrency(departureInfo.total_bills_paid || 0)}</p>\n              ${departureInfo.total_bills_unpaid > 0 ? `\n                <p><strong>Outstanding Amount:</strong> <span style=\"color: #dc3545;\">${formatCurrency(departureInfo.total_bills_unpaid)}</span></p>\n                <p><small style=\"color: #dc3545;\">Please settle any outstanding amounts as soon as possible.</small></p>\n              ` : `\n                <p style=\"color: #28a745;\"><strong>✅ All bills have been settled</strong></p>\n              `}\n            </div>\n            \n            ${departureInfo.security_deposit_refund > 0 ? `\n            <div class=\"refund-box\">\n              <h3>💵 Security Deposit Refund</h3>\n              <p><strong>Refund Amount:</strong> ${formatCurrency(departureInfo.security_deposit_refund)}</p>\n              <p>Your security deposit refund will be processed according to our standard procedures. Please contact the management office for refund collection details.</p>\n            </div>\n            ` : \"\"}\n            \n            <div class=\"info-section\">\n              <h3>📞 Contact Information</h3>\n              <p>If you have any questions or need assistance, please contact us:</p>\n              <p><strong>Email:</strong> official.jhapartment@gmail.com</p>\n              <p><strong>Address:</strong> Patin-ay, Prosperidad, Agusan Del Sur</p>\n            </div>\n            \n            <div style=\"text-align: center; margin: 30px 0; padding: 20px; background: #f0f8ff; border-radius: 8px;\">\n              <h3>🙏 Thank You!</h3>\n              <p>Thank you for choosing J&H Apartment as your home. We appreciate your tenancy and wish you all the best in your future endeavors.</p>\n              <p><em>You're always welcome back!</em></p>\n            </div>\n          </div>\n          \n          <div class=\"footer\">\n            <p>This is an automated confirmation email</p>\n            <p>J&H Apartment Management Team</p>\n          </div>\n        </div>\n      </body>\n      </html>\n    `;\n        const textContent = `\nDear ${departureInfo.tenant_name},\n\nDEPARTURE CONFIRMATION - J&H APARTMENT\n\nWe confirm that your tenancy has been processed and your records have been updated.\n\nTenancy Summary:\n- Room: ${departureInfo.room_number}\n- Branch: ${departureInfo.branch_name}\n- Period: ${formatDate(departureInfo.rent_start)} - ${formatDate(departureInfo.rent_end)}\n- Status: ${departureInfo.contract_completed ? \"Contract Completed\" : \"Early Departure\"}\n- Reason: ${departureInfo.reason_for_leaving?.replace(\"_\", \" \") || \"Not specified\"}\n\nFinancial Summary:\n- Total Bills Paid: ${formatCurrency(departureInfo.total_bills_paid || 0)}\n${departureInfo.total_bills_unpaid > 0 ? `- Outstanding Amount: ${formatCurrency(departureInfo.total_bills_unpaid)}` : \"- All bills settled ✅\"}\n\n${departureInfo.security_deposit_refund > 0 ? `\nSecurity Deposit Refund: ${formatCurrency(departureInfo.security_deposit_refund)}\nPlease contact the management office for refund collection details.\n` : \"\"}\n\nContact Information:\nEmail: official.jhapartment@gmail.com\nAddress: Patin-ay, Prosperidad, Agusan Del Sur\n\nThank you for choosing J&H Apartment as your home. We appreciate your tenancy and wish you all the best!\n\nYou're always welcome back!\n\nBest regards,\nJ&H Apartment Management Team\n    `;\n        const mailOptions = {\n            from: \"official.jhapartment@gmail.com\" || 0,\n            to: recipientEmail,\n            subject: subject,\n            text: textContent,\n            html: htmlContent\n        };\n        const result = await transporter.sendMail(mailOptions);\n        return {\n            success: true,\n            messageId: result.messageId,\n            message: \"Departure email sent successfully\"\n        };\n    } catch (error) {\n        console.error(\"Departure email sending error:\", error);\n        return {\n            success: false,\n            error: error.message\n        };\n    }\n};\n// Send monthly business report\nconst sendMonthlyReport = async (recipientEmail, reportData)=>{\n    try {\n        const transporter = createTransporter();\n        const monthName = reportData.report_period.month_name;\n        const totalRevenue = reportData.financial_summary.total_revenue.toLocaleString();\n        const occupancyRate = reportData.occupancy_metrics.occupancy_rate;\n        const activeTenants = reportData.tenant_statistics.active_tenants;\n        const revenueGrowth = reportData.financial_summary.revenue_growth;\n        // Create branch performance table\n        const branchTable = reportData.branch_performance.map((branch)=>`\n      <tr>\n        <td style=\"padding: 8px; border: 1px solid #ddd;\">${branch.branch_name}</td>\n        <td style=\"padding: 8px; border: 1px solid #ddd; text-align: center;\">${branch.occupied_rooms}/${branch.total_rooms}</td>\n        <td style=\"padding: 8px; border: 1px solid #ddd; text-align: center;\">${branch.occupancy_rate}%</td>\n        <td style=\"padding: 8px; border: 1px solid #ddd; text-align: right;\">₱${branch.revenue.toLocaleString()}</td>\n      </tr>\n    `).join(\"\");\n        // Create payment methods table\n        const paymentTable = reportData.payment_analysis.by_method.map((method)=>`\n      <tr>\n        <td style=\"padding: 8px; border: 1px solid #ddd;\">${method.payment_method}</td>\n        <td style=\"padding: 8px; border: 1px solid #ddd; text-align: center;\">${method.transaction_count}</td>\n        <td style=\"padding: 8px; border: 1px solid #ddd; text-align: right;\">₱${method.total_amount.toLocaleString()}</td>\n        <td style=\"padding: 8px; border: 1px solid #ddd; text-align: center;\">${method.percentage}%</td>\n      </tr>\n    `).join(\"\");\n        // Create top performers table\n        const topPerformersTable = reportData.top_performers.map((tenant)=>`\n      <tr>\n        <td style=\"padding: 8px; border: 1px solid #ddd;\">${tenant.tenant_name}</td>\n        <td style=\"padding: 8px; border: 1px solid #ddd; text-align: center;\">${tenant.room_number}</td>\n        <td style=\"padding: 8px; border: 1px solid #ddd; text-align: right;\">₱${tenant.total_paid.toLocaleString()}</td>\n      </tr>\n    `).join(\"\");\n        const htmlContent = `\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <meta charset=\"utf-8\">\n        <title>Monthly Business Report - ${monthName}</title>\n        <style>\n          body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }\n          .container { max-width: 800px; margin: 0 auto; padding: 20px; }\n          .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; text-align: center; border-radius: 10px; margin-bottom: 30px; }\n          .metric-card { background: #f8f9fa; border-left: 4px solid #007bff; padding: 20px; margin: 15px 0; border-radius: 5px; }\n          .metric-value { font-size: 2em; font-weight: bold; color: #007bff; }\n          .metric-label { color: #666; font-size: 0.9em; }\n          .growth-positive { color: #28a745; }\n          .growth-negative { color: #dc3545; }\n          .section { margin: 30px 0; }\n          .section-title { font-size: 1.5em; color: #333; border-bottom: 2px solid #007bff; padding-bottom: 10px; margin-bottom: 20px; }\n          table { width: 100%; border-collapse: collapse; margin: 15px 0; }\n          th { background: #007bff; color: white; padding: 12px; text-align: left; }\n          .summary-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 20px 0; }\n          .alert { background: #fff3cd; border: 1px solid #ffeaa7; color: #856404; padding: 15px; border-radius: 5px; margin: 15px 0; }\n          .footer { text-align: center; margin-top: 40px; padding: 20px; background: #f8f9fa; border-radius: 5px; }\n        </style>\n      </head>\n      <body>\n        <div class=\"container\">\n          <div class=\"header\">\n            <h1>📊 J&H Apartment Monthly Report</h1>\n            <h2>${monthName}</h2>\n            <p>Generated on ${new Date(reportData.report_period.generated_at).toLocaleDateString()}</p>\n          </div>\n\n          <!-- Executive Summary -->\n          <div class=\"section\">\n            <h2 class=\"section-title\">📈 Executive Summary</h2>\n            <div class=\"summary-grid\">\n              <div class=\"metric-card\">\n                <div class=\"metric-value\">₱${totalRevenue}</div>\n                <div class=\"metric-label\">Total Revenue</div>\n                <div class=\"${revenueGrowth >= 0 ? \"growth-positive\" : \"growth-negative\"}\">\n                  ${revenueGrowth >= 0 ? \"↗\" : \"↘\"} ${Math.abs(revenueGrowth)}% vs last month\n                </div>\n              </div>\n              <div class=\"metric-card\">\n                <div class=\"metric-value\">${occupancyRate}%</div>\n                <div class=\"metric-label\">Occupancy Rate</div>\n                <div class=\"metric-label\">${reportData.occupancy_metrics.occupied_rooms}/${reportData.occupancy_metrics.total_rooms} rooms occupied</div>\n              </div>\n              <div class=\"metric-card\">\n                <div class=\"metric-value\">${activeTenants}</div>\n                <div class=\"metric-label\">Active Tenants</div>\n                <div class=\"metric-label\">Net change: ${reportData.tenant_statistics.net_tenant_change >= 0 ? \"+\" : \"\"}${reportData.tenant_statistics.net_tenant_change}</div>\n              </div>\n              <div class=\"metric-card\">\n                <div class=\"metric-value\">${reportData.financial_summary.collection_rate}%</div>\n                <div class=\"metric-label\">Collection Rate</div>\n                <div class=\"metric-label\">₱${reportData.financial_summary.total_billed.toLocaleString()} billed</div>\n              </div>\n            </div>\n          </div>\n\n          <!-- Financial Performance -->\n          <div class=\"section\">\n            <h2 class=\"section-title\">💰 Financial Performance</h2>\n            <div class=\"summary-grid\">\n              <div class=\"metric-card\">\n                <div class=\"metric-value\">${reportData.financial_summary.total_transactions}</div>\n                <div class=\"metric-label\">Total Transactions</div>\n              </div>\n              <div class=\"metric-card\">\n                <div class=\"metric-value\">₱${reportData.outstanding_summary.total_outstanding.toLocaleString()}</div>\n                <div class=\"metric-label\">Outstanding Amount</div>\n                <div class=\"metric-label\">${reportData.outstanding_summary.unpaid_bills_count + reportData.outstanding_summary.partial_bills_count} bills pending</div>\n              </div>\n            </div>\n\n            <h3>Payment Methods Breakdown</h3>\n            <table>\n              <thead>\n                <tr>\n                  <th>Payment Method</th>\n                  <th>Transactions</th>\n                  <th>Amount</th>\n                  <th>Percentage</th>\n                </tr>\n              </thead>\n              <tbody>\n                ${paymentTable}\n              </tbody>\n            </table>\n          </div>\n\n          <!-- Branch Performance -->\n          <div class=\"section\">\n            <h2 class=\"section-title\">🏢 Branch Performance</h2>\n            <table>\n              <thead>\n                <tr>\n                  <th>Branch</th>\n                  <th>Occupancy</th>\n                  <th>Rate</th>\n                  <th>Revenue</th>\n                </tr>\n              </thead>\n              <tbody>\n                ${branchTable}\n              </tbody>\n            </table>\n          </div>\n\n          <!-- Tenant Statistics -->\n          <div class=\"section\">\n            <h2 class=\"section-title\">👥 Tenant Statistics</h2>\n            <div class=\"summary-grid\">\n              <div class=\"metric-card\">\n                <div class=\"metric-value\">${reportData.tenant_statistics.new_tenants}</div>\n                <div class=\"metric-label\">New Tenants</div>\n              </div>\n              <div class=\"metric-card\">\n                <div class=\"metric-value\">${reportData.tenant_statistics.departed_tenants}</div>\n                <div class=\"metric-label\">Departed Tenants</div>\n              </div>\n              <div class=\"metric-card\">\n                <div class=\"metric-value\">${reportData.tenant_statistics.expiring_contracts}</div>\n                <div class=\"metric-label\">Expiring Contracts</div>\n                <div class=\"metric-label\">Next 30 days</div>\n              </div>\n            </div>\n          </div>\n\n          <!-- Top Performers -->\n          ${reportData.top_performers.length > 0 ? `\n          <div class=\"section\">\n            <h2 class=\"section-title\">🌟 Top Paying Tenants</h2>\n            <table>\n              <thead>\n                <tr>\n                  <th>Tenant Name</th>\n                  <th>Room</th>\n                  <th>Amount Paid</th>\n                </tr>\n              </thead>\n              <tbody>\n                ${topPerformersTable}\n              </tbody>\n            </table>\n          </div>\n          ` : \"\"}\n\n          <!-- Alerts & Recommendations -->\n          ${reportData.outstanding_summary.total_outstanding > 0 ? `\n          <div class=\"alert\">\n            <strong>⚠️ Action Required:</strong> There are ₱${reportData.outstanding_summary.total_outstanding.toLocaleString()} in outstanding payments that need attention.\n          </div>\n          ` : \"\"}\n\n          ${reportData.tenant_statistics.expiring_contracts > 0 ? `\n          <div class=\"alert\">\n            <strong>📅 Contract Renewals:</strong> ${reportData.tenant_statistics.expiring_contracts} contracts are expiring in the next 30 days.\n          </div>\n          ` : \"\"}\n\n          ${occupancyRate < 80 ? `\n          <div class=\"alert\">\n            <strong>🏠 Occupancy Alert:</strong> Current occupancy rate is ${occupancyRate}%. Consider marketing strategies to increase occupancy.\n          </div>\n          ` : \"\"}\n\n          <div class=\"footer\">\n            <p><strong>J&H Apartment Management System</strong></p>\n            <p>This report was automatically generated on ${new Date().toLocaleDateString()}</p>\n            <p>For questions or support, please contact the management team.</p>\n          </div>\n        </div>\n      </body>\n      </html>\n    `;\n        const textContent = `\nJ&H APARTMENT MONTHLY REPORT - ${monthName}\nGenerated: ${new Date(reportData.report_period.generated_at).toLocaleDateString()}\n\nEXECUTIVE SUMMARY\n=================\nTotal Revenue: ₱${totalRevenue} (${revenueGrowth >= 0 ? \"+\" : \"\"}${revenueGrowth}% vs last month)\nOccupancy Rate: ${occupancyRate}% (${reportData.occupancy_metrics.occupied_rooms}/${reportData.occupancy_metrics.total_rooms} rooms)\nActive Tenants: ${activeTenants} (Net change: ${reportData.tenant_statistics.net_tenant_change >= 0 ? \"+\" : \"\"}${reportData.tenant_statistics.net_tenant_change})\nCollection Rate: ${reportData.financial_summary.collection_rate}%\n\nFINANCIAL PERFORMANCE\n=====================\nTotal Transactions: ${reportData.financial_summary.total_transactions}\nTotal Billed: ₱${reportData.financial_summary.total_billed.toLocaleString()}\nOutstanding Amount: ₱${reportData.outstanding_summary.total_outstanding.toLocaleString()}\n\nTENANT STATISTICS\n=================\nNew Tenants: ${reportData.tenant_statistics.new_tenants}\nDeparted Tenants: ${reportData.tenant_statistics.departed_tenants}\nExpiring Contracts (30 days): ${reportData.tenant_statistics.expiring_contracts}\n\nBRANCH PERFORMANCE\n==================\n${reportData.branch_performance.map((branch)=>`${branch.branch_name}: ${branch.occupancy_rate}% occupancy, ₱${branch.revenue.toLocaleString()} revenue`).join(\"\\n\")}\n\nThis report was automatically generated by J&H Apartment Management System.\n    `;\n        const mailOptions = {\n            from: process.env.EMAIL_FROM || \"official.jhapartment@gmail.com\",\n            to: recipientEmail,\n            subject: `📊 Monthly Business Report - ${monthName} | J&H Apartment`,\n            text: textContent,\n            html: htmlContent\n        };\n        const result = await transporter.sendMail(mailOptions);\n        console.log(\"Monthly report email sent successfully:\", result.messageId);\n        return {\n            success: true,\n            message: \"Monthly report email sent successfully\",\n            messageId: result.messageId\n        };\n    } catch (error) {\n        console.error(\"Error sending monthly report email:\", error);\n        throw error;\n    }\n};\n// Send billing reminder to management office\nconst sendBillingReminderToManagement = async (tenants)=>{\n    try {\n        const transporter = createTransporter();\n        const subject = `Bill Creation Reminder - ${tenants.length} Tenant${tenants.length > 1 ? \"s\" : \"\"} Need${tenants.length === 1 ? \"s\" : \"\"} Billing`;\n        // Group tenants by due date\n        const tenantsByDueDate = tenants.reduce((acc, tenant)=>{\n            const dueDate = formatDate(tenant.next_bill_due_date);\n            if (!acc[dueDate]) {\n                acc[dueDate] = [];\n            }\n            acc[dueDate].push(tenant);\n            return acc;\n        }, {});\n        const htmlContent = `\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <meta charset=\"utf-8\">\n        <style>\n          body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background-color: #f4f4f4; }\n          .email-container { max-width: 800px; margin: 0 auto; background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }\n          .header { background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%); color: white; padding: 30px; text-align: center; }\n          .content { padding: 30px; }\n          .alert-box { background: #fff3cd; border: 2px solid #ffc107; padding: 20px; border-radius: 8px; margin: 20px 0; }\n          .bills-section { margin: 20px 0; }\n          .due-date-group { margin-bottom: 30px; }\n          .due-date-header { background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 15px; }\n          .bill-item { background: #ffffff; border: 1px solid #dee2e6; padding: 15px; margin-bottom: 10px; border-radius: 6px; display: flex; justify-content: space-between; align-items: center; }\n          .bill-info { flex: 1; }\n          .bill-amount { font-weight: bold; color: #dc3545; }\n          .overdue { border-left: 4px solid #dc3545; }\n          .due-today { border-left: 4px solid #fd7e14; }\n          .due-soon { border-left: 4px solid #ffc107; }\n          .footer { padding: 20px; text-align: center; color: #666; border-top: 1px solid #eee; }\n          .summary-stats { display: flex; justify-content: space-around; background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0; }\n          .stat-item { text-align: center; }\n          .stat-number { font-size: 24px; font-weight: bold; color: #dc3545; }\n          .stat-label { font-size: 12px; color: #666; text-transform: uppercase; }\n        </style>\n      </head>\n      <body>\n        <div class=\"email-container\">\n          <div class=\"header\">\n            <h1>📝 Bill Creation Reminder</h1>\n            <p>Tenants requiring bill generation</p>\n          </div>\n          \n          <div class=\"content\">\n            <div class=\"alert-box\">\n              <h3>⚠️ Action Required</h3>\n              <p>The following tenants' billing cycles are ending within the next 3 days and need bills created:</p>\n            </div>\n            \n            <div class=\"summary-stats\">\n              <div class=\"stat-item\">\n                <div class=\"stat-number\">${tenants.length}</div>\n                <div class=\"stat-label\">Tenants Need Billing</div>\n              </div>\n              <div class=\"stat-item\">\n                <div class=\"stat-number\">${formatCurrency(tenants.reduce((sum, tenant)=>sum + parseFloat(tenant.monthly_rent || 0), 0))}</div>\n                <div class=\"stat-label\">Estimated Rent Amount</div>\n              </div>\n              <div class=\"stat-item\">\n                <div class=\"stat-number\">${tenants.filter((tenant)=>tenant.days_until_due <= 0).length}</div>\n                <div class=\"stat-label\">Overdue for Billing</div>\n              </div>\n            </div>\n            \n            <div class=\"bills-section\">\n              ${Object.entries(tenantsByDueDate).map(([dueDate, dateTenants])=>{\n            const daysUntilDue = dateTenants[0].days_until_due;\n            let dueDateClass = \"due-soon\";\n            let dueDateLabel = `Bill due in ${daysUntilDue} day${daysUntilDue !== 1 ? \"s\" : \"\"}`;\n            if (daysUntilDue <= 0) {\n                dueDateClass = \"overdue\";\n                dueDateLabel = `Overdue for billing by ${Math.abs(daysUntilDue)} day${Math.abs(daysUntilDue) !== 1 ? \"s\" : \"\"}`;\n            } else if (daysUntilDue === 0) {\n                dueDateClass = \"due-today\";\n                dueDateLabel = \"Billing cycle ends today\";\n            }\n            return `\n                  <div class=\"due-date-group\">\n                    <div class=\"due-date-header ${dueDateClass}\">\n                      <h3>📅 ${dueDate} - ${dueDateLabel}</h3>\n                      <p>${dateTenants.length} tenant${dateTenants.length > 1 ? \"s\" : \"\"} • Estimated Rent: ${formatCurrency(dateTenants.reduce((sum, tenant)=>sum + parseFloat(tenant.monthly_rent || 0), 0))}</p>\n                    </div>\n                    ${dateTenants.map((tenant)=>`\n                      <div class=\"bill-item ${dueDateClass}\">\n                        <div class=\"bill-info\">\n                          <strong>${tenant.tenant_name}</strong> - Room ${tenant.room_number}\n                          <br>\n                          <small>${tenant.branch_name} • Last Reading: ${tenant.last_electric_reading} kWh</small>\n                          <br><small style=\"color: #2196f3;\">📝 Need to create bill for billing period ending ${formatDate(tenant.next_bill_due_date)}</small>\n                        </div>\n                        <div class=\"bill-amount\">\n                          ${formatCurrency(tenant.monthly_rent)}<br><small>+ utilities</small>\n                        </div>\n                      </div>\n                    `).join(\"\")}\n                  </div>\n                `;\n        }).join(\"\")}\n            </div>\n            \n            <div style=\"background: #e3f2fd; border-left: 4px solid #2196f3; padding: 20px; margin: 20px 0;\">\n              <h3>📋 Recommended Actions</h3>\n              <ul>\n                <li>Create bills for tenants whose billing cycle ends today</li>\n                <li>Take electricity readings for overdue tenants and generate their bills immediately</li>\n                <li>Prepare bills for tenants whose cycle ends in 1-3 days</li>\n                <li>Check the \"Generate Bill\" button in the Billing page for each tenant</li>\n                <li>Send created bills to tenants via email</li>\n              </ul>\n            </div>\n          </div>\n          \n          <div class=\"footer\">\n            <p>This is an automated bill creation reminder sent daily at 9:00 AM</p>\n            <p>Generated on: ${formatDate(new Date())} at ${new Date().toLocaleTimeString()}</p>\n          </div>\n        </div>\n      </body>\n      </html>\n    `;\n        const textContent = `\nBILL CREATION REMINDER - J&H APARTMENT MANAGEMENT\n\n${tenants.length} Tenant${tenants.length > 1 ? \"s\" : \"\"} Need${tenants.length === 1 ? \"s\" : \"\"} Bill Creation\n\nSummary:\n- Tenants Needing Bills: ${tenants.length}\n- Estimated Rent Amount: ${formatCurrency(tenants.reduce((sum, tenant)=>sum + parseFloat(tenant.monthly_rent || 0), 0))}\n- Overdue for Billing: ${tenants.filter((tenant)=>tenant.days_until_due <= 0).length}\n\nTenants by Billing Due Date:\n${Object.entries(tenantsByDueDate).map(([dueDate, dateTenants])=>{\n            const daysUntilDue = dateTenants[0].days_until_due;\n            let dueDateLabel = `Bill due in ${daysUntilDue} day${daysUntilDue !== 1 ? \"s\" : \"\"}`;\n            if (daysUntilDue <= 0) {\n                dueDateLabel = `Overdue for billing by ${Math.abs(daysUntilDue)} day${Math.abs(daysUntilDue) !== 1 ? \"s\" : \"\"}`;\n            } else if (daysUntilDue === 0) {\n                dueDateLabel = \"Billing cycle ends today\";\n            }\n            return `\n${dueDate} - ${dueDateLabel}\n${dateTenants.map((tenant)=>`  • ${tenant.tenant_name} - Room ${tenant.room_number} (${tenant.branch_name})\n    Rent: ${formatCurrency(tenant.monthly_rent)} + utilities\n    Last Electric Reading: ${tenant.last_electric_reading} kWh\n    Action: Create bill for billing period ending ${formatDate(tenant.next_bill_due_date)}`).join(\"\\n\")}`;\n        }).join(\"\\n\")}\n\nRecommended Actions:\n- Create bills for tenants whose billing cycle ends today\n- Take electricity readings for overdue tenants and generate their bills immediately\n- Prepare bills for tenants whose cycle ends in 1-3 days\n- Check the \"Generate Bill\" button in the Billing page for each tenant\n- Send created bills to tenants via email\n\nGenerated on: ${formatDate(new Date())} at ${new Date().toLocaleTimeString()}\n    `;\n        const mailOptions = {\n            from: \"official.jhapartment@gmail.com\" || 0,\n            to: \"official.jhapartment@gmail.com\",\n            subject: subject,\n            text: textContent,\n            html: htmlContent\n        };\n        const result = await transporter.sendMail(mailOptions);\n        return {\n            success: true,\n            messageId: result.messageId,\n            message: \"Bill creation reminder sent to management successfully\",\n            tenantsCount: tenants.length\n        };\n    } catch (error) {\n        console.error(\"Billing reminder email sending error:\", error);\n        return {\n            success: false,\n            error: error.message\n        };\n    }\n};\n// Generate HTML for final bill template with deposit information\nconst generateFinalBillHTML = (bill)=>{\n    const electricReading = bill.electric_present_reading && bill.electric_previous_reading ? `${bill.electric_previous_reading} → ${bill.electric_present_reading}` : \"N/A\";\n    const electricConsumption = bill.electric_consumption || 0;\n    // Get deposit information if available\n    const depositApplied = parseFloat(bill.deposit_applied || 0);\n    const originalBillAmount = parseFloat(bill.original_bill_amount || bill.total_amount);\n    const hasDepositApplied = depositApplied > 0;\n    return `\n    <!DOCTYPE html>\n    <html>\n    <head>\n      <meta charset=\"utf-8\">\n      <style>\n        body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background-color: #f4f4f4; }\n        .bill-container { max-width: 600px; margin: 0 auto; background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }\n        .header { background: linear-gradient(135deg, #e53935 0%, #8e24aa 100%); color: white; padding: 30px; text-align: center; }\n        .header h1 { margin: 0; font-size: 28px; }\n        .header p { margin: 5px 0 0 0; opacity: 0.9; }\n        .final-bill-badge { background: #ff5252; color: white; padding: 5px 10px; border-radius: 4px; font-size: 14px; margin-top: 10px; display: inline-block; }\n        .content { padding: 30px; }\n        .bill-info { background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 25px; }\n        .bill-info h3 { margin: 0 0 15px 0; color: #333; }\n        .info-row { display: flex; justify-content: space-between; margin-bottom: 10px; }\n        .info-label { font-weight: bold; color: #666; }\n        .info-value { color: #333; }\n        .charges-section { margin-bottom: 25px; }\n        .charges-section h3 { border-bottom: 2px solid #e53935; padding-bottom: 10px; margin-bottom: 20px; color: #333; }\n        .charge-item { display: flex; justify-content: space-between; padding: 15px; margin-bottom: 10px; border-radius: 6px; }\n        .charge-rent { background: #e3f2fd; border-left: 4px solid #2196f3; }\n        .charge-electric { background: #fff3e0; border-left: 4px solid #ff9800; }\n        .charge-water { background: #e8f5e8; border-left: 4px solid #4caf50; }\n        .deposit-section { background: #e8eaf6; padding: 20px; border-radius: 8px; margin-bottom: 25px; border-left: 4px solid #3f51b5; }\n        .deposit-row { display: flex; justify-content: space-between; margin-bottom: 10px; }\n        .total-section { background: linear-gradient(135deg, #e53935 0%, #8e24aa 100%); color: white; padding: 20px; border-radius: 8px; text-align: center; }\n        .total-amount { font-size: 32px; font-weight: bold; margin: 10px 0; }\n        .footer { padding: 20px; text-align: center; color: #666; border-top: 1px solid #eee; }\n        .payment-note { background: #ffebee; border: 1px solid #ffcdd2; padding: 15px; border-radius: 6px; margin: 20px 0; }\n      </style>\n    </head>\n    <body>\n      <div class=\"bill-container\">\n        <!-- Header -->\n        <div class=\"header\">\n          <h1>${bill.branch_name || \"JH APARTMENT\"}</h1>\n          <p>${bill.branch_address || \"Patin-ay, Prosperidad, Agusan del Sur\"}</p>\n          <div class=\"final-bill-badge\">FINAL BILL</div>\n        </div>\n\n        <!-- Content -->\n        <div class=\"content\">\n          <!-- Bill Information -->\n          <div class=\"bill-info\">\n            <h3>Final Bill Information</h3>\n            <div class=\"info-row\">\n              <span class=\"info-label\">Tenant Name:</span>\n              <span class=\"info-value\">${bill.tenant_name}</span>\n            </div>\n            <div class=\"info-row\">\n              <span class=\"info-label\">Room Number:</span>\n              <span class=\"info-value\">${bill.room_number}</span>\n            </div>\n            <div class=\"info-row\">\n              <span class=\"info-label\">Final Bill Period:</span>\n              <span class=\"info-value\">${formatDate(bill.rent_from)} - ${formatDate(bill.rent_to)}</span>\n            </div>\n            <div class=\"info-row\">\n              <span class=\"info-label\">Bill Date:</span>\n              <span class=\"info-value\">${formatDate(bill.bill_date)}</span>\n            </div>\n            <div class=\"info-row\">\n              <span class=\"info-label\">Due Date:</span>\n              <span class=\"info-value\">${formatDate(bill.rent_to)}</span>\n            </div>\n          </div>\n\n          <!-- Charges Breakdown -->\n          <div class=\"charges-section\">\n            <h3>Charges Breakdown</h3>\n            \n            <!-- Rent -->\n            <div class=\"charge-item charge-rent\">\n              <div>\n                <strong>Prorated Rent</strong>\n                <br><small>Period: ${formatDate(bill.rent_from)} - ${formatDate(bill.rent_to)}</small>\n              </div>\n              <div style=\"text-align: right;\">\n                <strong>${formatCurrency(bill.rent_amount)}</strong>\n              </div>\n            </div>\n\n            <!-- Electric -->\n            <div class=\"charge-item charge-electric\">\n              <div>\n                <strong>Electricity</strong>\n                <br><small>Reading: ${electricReading} (${electricConsumption} kWh)</small>\n                <br><small>Rate: ₱${bill.electric_rate_per_kwh}/kWh</small>\n              </div>\n              <div style=\"text-align: right;\">\n                <strong>${formatCurrency(bill.electric_amount || 0)}</strong>\n              </div>\n            </div>\n\n            <!-- Water -->\n            <div class=\"charge-item charge-water\">\n              <div>\n                <strong>Water</strong>\n                <br><small>Fixed charge</small>\n              </div>\n              <div style=\"text-align: right;\">\n                <strong>${formatCurrency(bill.water_amount)}</strong>\n              </div>\n            </div>\n\n            ${bill.extra_fee_amount > 0 ? `\n            <!-- Extra Fees -->\n            <div class=\"charge-item\" style=\"background: #f3e5f5; border-left: 4px solid #9c27b0;\">\n              <div>\n                <strong>Extra Fees</strong>\n                <br><small>${bill.extra_fee_description || \"Additional charges\"}</small>\n              </div>\n              <div style=\"text-align: right;\">\n                <strong>${formatCurrency(bill.extra_fee_amount)}</strong>\n              </div>\n            </div>\n            ` : \"\"}\n          </div>\n\n          ${hasDepositApplied ? `\n          <!-- Deposit Applied Section -->\n          <div class=\"deposit-section\">\n            <h3>Deposit Applied</h3>\n            <div class=\"deposit-row\">\n              <span class=\"info-label\">Original Bill Amount:</span>\n              <span class=\"info-value\">${formatCurrency(originalBillAmount)}</span>\n            </div>\n            <div class=\"deposit-row\">\n              <span class=\"info-label\">Deposit Applied:</span>\n              <span class=\"info-value\">- ${formatCurrency(depositApplied)}</span>\n            </div>\n            <div class=\"deposit-row\" style=\"border-top: 1px solid #ccc; padding-top: 10px; font-weight: bold;\">\n              <span class=\"info-label\">Remaining Balance Due:</span>\n              <span class=\"info-value\">${formatCurrency(bill.total_amount)}</span>\n            </div>\n          </div>\n          ` : \"\"}\n\n          <!-- Total -->\n          <div class=\"total-section\">\n            <div>Total Amount Due</div>\n            <div class=\"total-amount\">${formatCurrency(bill.total_amount)}</div>\n            <div>Status: ${(bill.status || \"PENDING\").toUpperCase()}</div>\n          </div>\n\n          <!-- Payment Note -->\n          <div class=\"payment-note\">\n            <strong>IMPORTANT: Final Bill Payment</strong><br>\n            This is your FINAL BILL for your tenancy. Please settle this amount to complete your move-out process.\n            Your room will only be officially vacated and your contract terminated after this bill is paid in full.\n            ${hasDepositApplied ? `Your security deposit of ${formatCurrency(depositApplied)} has been applied to reduce the original bill amount.` : \"\"}\n          </div>\n        </div>\n\n        <!-- Footer -->\n        <div class=\"footer\">\n          <p>This is an automatically generated final bill. For questions or concerns, please contact the management office.</p>\n          <p><strong>Generated on:</strong> ${formatDate(new Date())}</p>\n        </div>\n      </div>\n    </body>\n    </html>\n  `;\n};\n// Send final bill to tenant via email\nconst sendFinalBillToTenant = async (bill, recipientEmail)=>{\n    try {\n        const transporter = createTransporter();\n        // Determine if deposit was applied\n        const depositApplied = parseFloat(bill.deposit_applied || 0);\n        const hasDepositApplied = depositApplied > 0;\n        const subject = `FINAL BILL - Room ${bill.room_number} - Move Out`;\n        const htmlContent = generateFinalBillHTML(bill);\n        let textMessage = `\nDear ${bill.tenant_name},\n\nThis is your FINAL BILL for Room ${bill.room_number} at ${bill.branch_name || \"JH APARTMENT\"}.\n\nFinal Bill Period: ${formatDate(bill.rent_from)} - ${formatDate(bill.rent_to)}\nBill Date: ${formatDate(bill.bill_date)}\nDue Date: ${formatDate(bill.rent_to)}\n\nCHARGES BREAKDOWN:\n- Prorated Rent: ${formatCurrency(bill.rent_amount)}\n- Electricity: ${formatCurrency(bill.electric_amount || 0)}\n- Water: ${formatCurrency(bill.water_amount)}\n${bill.extra_fee_amount > 0 ? `- Extra Fees (${bill.extra_fee_description || \"Additional charges\"}): ${formatCurrency(bill.extra_fee_amount)}\\n` : \"\"}\n\n${hasDepositApplied ? `\nDEPOSIT APPLIED:\n- Original Bill Amount: ${formatCurrency(parseFloat(bill.original_bill_amount || bill.total_amount))}\n- Deposit Applied: - ${formatCurrency(depositApplied)}\n- Remaining Balance Due: ${formatCurrency(bill.total_amount)}\n` : \"\"}\n\nTOTAL AMOUNT DUE: ${formatCurrency(bill.total_amount)}\n\nIMPORTANT: This is your FINAL BILL. Please settle this amount to complete your move-out process.\nYour room will only be officially vacated and your contract terminated after this bill is paid in full.\n${hasDepositApplied ? `Your security deposit of ${formatCurrency(depositApplied)} has been applied to reduce the original bill amount.` : \"\"}\n\nFor questions or concerns, please contact the management office.\n\nThank you for choosing ${bill.branch_name || \"JH APARTMENT\"}.\n`;\n        const mailOptions = {\n            from: \"official.jhapartment@gmail.com\" || 0,\n            to: recipientEmail,\n            subject: subject,\n            text: textMessage,\n            html: htmlContent\n        };\n        await transporter.sendMail(mailOptions);\n        console.log(`✅ Final bill email sent to ${recipientEmail}`);\n        return true;\n    } catch (error) {\n        console.error(\"Error sending final bill email:\", error);\n        return false;\n    }\n};\n// Send refund notification email to tenant\nconst sendRefundNotificationEmail = async (bill, recipientEmail, refundAmount)=>{\n    try {\n        const transporter = createTransporter();\n        const subject = `💰 Refund Due - Room ${bill.room_number} - Move Out`;\n        const htmlContent = `\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <meta charset=\"utf-8\">\n        <style>\n          body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background-color: #f4f4f4; }\n          .email-container { max-width: 600px; margin: 0 auto; background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }\n          .header { background: linear-gradient(135deg, #28a745 0%, #20c997 100%); color: white; padding: 30px; text-align: center; }\n          .content { padding: 30px; }\n          .refund-info { background: #e8f5e8; border-left: 4px solid #28a745; padding: 20px; margin: 20px 0; border-radius: 8px; }\n          .bill-info { background: #f8f9fa; padding: 20px; margin: 20px 0; border-radius: 8px; }\n          .amount-box { background: #d4edda; border: 2px solid #28a745; padding: 20px; border-radius: 8px; text-align: center; margin: 20px 0; }\n          .footer { padding: 20px; text-align: center; color: #666; border-top: 1px solid #eee; }\n        </style>\n      </head>\n      <body>\n        <div class=\"email-container\">\n          <div class=\"header\">\n            <h1>💰 Great News! Refund Available</h1>\n            <p>Your Move-Out Process - Refund Due</p>\n          </div>\n          \n          <div class=\"content\">\n            <div class=\"refund-info\">\n              <h3>Dear ${bill.tenant_name},</h3>\n              <p>Excellent news! After covering all your bills, you have a refund due from your deposits.</p>\n            </div>\n            \n            <div class=\"amount-box\">\n              <h3>💰 Refund Amount</h3>\n              <h2 style=\"color: #28a745; font-size: 32px; margin: 10px 0;\">₱${refundAmount.toFixed(2)}</h2>\n              <p>This amount will be processed and returned to you</p>\n            </div>\n            \n            <div class=\"bill-info\">\n              <h3>📋 Bill Summary</h3>\n              <p><strong>Room:</strong> ${bill.room_number}</p>\n              <p><strong>Final Bill Period:</strong> ${formatDate(bill.rent_from)} - ${formatDate(bill.rent_to)}</p>\n              <p><strong>Total Bills Covered:</strong> ₱${bill.total_amount.toFixed(2)}</p>\n              <p><strong>Your Deposits Applied:</strong> ₱${(bill.total_amount + refundAmount).toFixed(2)}</p>\n              <p><strong>Refund Due:</strong> <span style=\"color: #28a745; font-weight: bold;\">₱${refundAmount.toFixed(2)}</span></p>\n            </div>\n            \n            <div style=\"background: #fff3cd; border: 1px solid #ffeaa7; padding: 15px; border-radius: 6px; margin: 20px 0;\">\n              <h4>📋 What Happens Next?</h4>\n              <ol>\n                <li>Your bills have been automatically covered by your deposits</li>\n                <li>The admin will process your refund</li>\n                <li>You will be contacted for refund collection details</li>\n                <li>Your move-out will be completed once the refund is processed</li>\n              </ol>\n            </div>\n            \n            <div style=\"background: #d1ecf1; border: 1px solid #bee5eb; padding: 15px; border-radius: 6px; margin: 20px 0;\">\n              <h4>💡 Important Information</h4>\n              <p>• No action required from you at this time</p>\n              <p>• Your room contract is being processed for termination</p>\n              <p>• Please wait for admin contact regarding refund collection</p>\n              <p>• Keep this email for your records</p>\n            </div>\n            \n            <div style=\"text-align: center; margin: 30px 0;\">\n              <p style=\"font-size: 18px; color: #28a745;\"><strong>Thank you for being a valued tenant! 🏡</strong></p>\n            </div>\n          </div>\n          \n          <div class=\"footer\">\n            <p>This is an automated refund notification</p>\n            <p>For questions, please contact: official.jhapartment@gmail.com</p>\n            <p>J&H Apartment Management Team</p>\n          </div>\n        </div>\n      </body>\n      </html>\n    `;\n        const textContent = `\nDear ${bill.tenant_name},\n\nREFUND NOTIFICATION - MOVE OUT\n\nGreat news! After covering all your bills, you have a refund due from your deposits.\n\nREFUND AMOUNT: ₱${refundAmount.toFixed(2)}\n\nBill Summary:\n- Room: ${bill.room_number}\n- Final Bill Period: ${formatDate(bill.rent_from)} - ${formatDate(bill.rent_to)}\n- Total Bills Covered: ₱${bill.total_amount.toFixed(2)}\n- Your Deposits Applied: ₱${(bill.total_amount + refundAmount).toFixed(2)}\n- Refund Due: ₱${refundAmount.toFixed(2)}\n\nWhat Happens Next:\n1. Your bills have been automatically covered by your deposits\n2. The admin will process your refund\n3. You will be contacted for refund collection details\n4. Your move-out will be completed once the refund is processed\n\nImportant Information:\n• No action required from you at this time\n• Your room contract is being processed for termination\n• Please wait for admin contact regarding refund collection\n• Keep this email for your records\n\nThank you for being a valued tenant!\n\nBest regards,\nJ&H Apartment Management Team\n    `;\n        const mailOptions = {\n            from: \"official.jhapartment@gmail.com\" || 0,\n            to: recipientEmail,\n            subject: subject,\n            text: textContent,\n            html: htmlContent\n        };\n        const result = await transporter.sendMail(mailOptions);\n        return {\n            success: true,\n            messageId: result.messageId,\n            message: \"Refund notification email sent successfully\"\n        };\n    } catch (error) {\n        console.error(\"Refund notification email sending error:\", error);\n        return {\n            success: false,\n            error: error.message\n        };\n    }\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n    sendBillToTenant,\n    sendReceiptToTenant,\n    testEmailConfig,\n    generateBillHTML,\n    sendWelcomeEmail,\n    sendDepositReceiptEmail,\n    sendContractExpiryNotification,\n    sendDepartureEmail,\n    sendMonthlyReport,\n    sendBillingReminderToManagement,\n    sendFinalBillToTenant,\n    sendRefundNotificationEmail\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QTFDO0lBQ0FnRTtJQUNBWTtJQUNBRTtJQUNBSTtJQUNBVTtJQUNBbUQ7SUFDQXdCO0lBQ0FDO0FBQ0YsQ0FBQyxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vai1oLWFwYXJ0bWVudC1uZXh0anMvLi9zZXJ2aWNlcy9lbWFpbFNlcnZpY2UuanM/YWIzOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbm9kZW1haWxlciBmcm9tICdub2RlbWFpbGVyJ1xuXG4vLyBDcmVhdGUgZW1haWwgdHJhbnNwb3J0ZXJcbmNvbnN0IGNyZWF0ZVRyYW5zcG9ydGVyID0gKCkgPT4ge1xuICByZXR1cm4gbm9kZW1haWxlci5jcmVhdGVUcmFuc3BvcnQoe1xuICAgIHNlcnZpY2U6ICdnbWFpbCcsIC8vIFlvdSBjYW4gY2hhbmdlIHRoaXMgdG8geW91ciBwcmVmZXJyZWQgZW1haWwgc2VydmljZVxuICAgIGF1dGg6IHtcbiAgICAgIHVzZXI6IHByb2Nlc3MuZW52LkVNQUlMX1VTRVIgfHwgJ29mZmljaWFsLmpoYXBhcnRtZW50QGdtYWlsLmNvbScsXG4gICAgICBwYXNzOiBwcm9jZXNzLmVudi5FTUFJTF9QQVNTIHx8ICdnY21lIG9rYWogcWl5ZiB1YmtpJyAvLyBSZXBsYWNlIHdpdGggeW91ciBHbWFpbCBBcHAgUGFzc3dvcmRcbiAgICB9XG4gIH0pXG59XG5cbi8vIEZvcm1hdCBjdXJyZW5jeSBmb3IgZGlzcGxheVxuY29uc3QgZm9ybWF0Q3VycmVuY3kgPSAoYW1vdW50KSA9PiB7XG4gIHJldHVybiBuZXcgSW50bC5OdW1iZXJGb3JtYXQoJ2VuLVBIJywge1xuICAgIHN0eWxlOiAnY3VycmVuY3knLFxuICAgIGN1cnJlbmN5OiAnUEhQJ1xuICB9KS5mb3JtYXQoYW1vdW50KTtcbn07XG5cbi8vIEZvcm1hdCBkYXRlIGZvciBkaXNwbGF5XG5jb25zdCBmb3JtYXREYXRlID0gKGRhdGUpID0+IHtcbiAgaWYgKCFkYXRlKSByZXR1cm4gJ04vQSc7XG4gIFxuICB0cnkge1xuICAgIGNvbnN0IGRhdGVPYmogPSBuZXcgRGF0ZShkYXRlKTtcbiAgICBpZiAoaXNOYU4oZGF0ZU9iai5nZXRUaW1lKCkpKSByZXR1cm4gJ04vQSc7XG4gICAgXG4gICAgcmV0dXJuIG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KCdlbi1QSCcsIHtcbiAgICAgIHllYXI6ICdudW1lcmljJyxcbiAgICAgIG1vbnRoOiAnbG9uZycsXG4gICAgICBkYXk6ICdudW1lcmljJ1xuICAgIH0pLmZvcm1hdChkYXRlT2JqKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4gJ04vQSc7XG4gIH1cbn07XG5cbi8vIEdlbmVyYXRlIEhUTUwgYmlsbCB0ZW1wbGF0ZVxuY29uc3QgZ2VuZXJhdGVCaWxsSFRNTCA9IChiaWxsKSA9PiB7XG4gIGNvbnN0IGVsZWN0cmljUmVhZGluZyA9IGJpbGwuZWxlY3RyaWNfcHJlc2VudF9yZWFkaW5nICYmIGJpbGwuZWxlY3RyaWNfcHJldmlvdXNfcmVhZGluZyBcbiAgICA/IGAke2JpbGwuZWxlY3RyaWNfcHJldmlvdXNfcmVhZGluZ30g4oaSICR7YmlsbC5lbGVjdHJpY19wcmVzZW50X3JlYWRpbmd9YCBcbiAgICA6ICdOL0EnO1xuICBcbiAgY29uc3QgZWxlY3RyaWNDb25zdW1wdGlvbiA9IGJpbGwuZWxlY3RyaWNfY29uc3VtcHRpb24gfHwgMDtcbiAgXG4gIHJldHVybiBgXG4gICAgPCFET0NUWVBFIGh0bWw+XG4gICAgPGh0bWw+XG4gICAgPGhlYWQ+XG4gICAgICA8bWV0YSBjaGFyc2V0PVwidXRmLThcIj5cbiAgICAgIDxzdHlsZT5cbiAgICAgICAgYm9keSB7IGZvbnQtZmFtaWx5OiBBcmlhbCwgc2Fucy1zZXJpZjsgbWFyZ2luOiAwOyBwYWRkaW5nOiAyMHB4OyBiYWNrZ3JvdW5kLWNvbG9yOiAjZjRmNGY0OyB9XG4gICAgICAgIC5iaWxsLWNvbnRhaW5lciB7IG1heC13aWR0aDogNjAwcHg7IG1hcmdpbjogMCBhdXRvOyBiYWNrZ3JvdW5kOiB3aGl0ZTsgYm9yZGVyLXJhZGl1czogOHB4OyBvdmVyZmxvdzogaGlkZGVuOyBib3gtc2hhZG93OiAwIDJweCAxMHB4IHJnYmEoMCwwLDAsMC4xKTsgfVxuICAgICAgICAuaGVhZGVyIHsgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzY2N2VlYSAwJSwgIzc2NGJhMiAxMDAlKTsgY29sb3I6IHdoaXRlOyBwYWRkaW5nOiAzMHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IH1cbiAgICAgICAgLmhlYWRlciBoMSB7IG1hcmdpbjogMDsgZm9udC1zaXplOiAyOHB4OyB9XG4gICAgICAgIC5oZWFkZXIgcCB7IG1hcmdpbjogNXB4IDAgMCAwOyBvcGFjaXR5OiAwLjk7IH1cbiAgICAgICAgLmNvbnRlbnQgeyBwYWRkaW5nOiAzMHB4OyB9XG4gICAgICAgIC5iaWxsLWluZm8geyBiYWNrZ3JvdW5kOiAjZjhmOWZhOyBwYWRkaW5nOiAyMHB4OyBib3JkZXItcmFkaXVzOiA4cHg7IG1hcmdpbi1ib3R0b206IDI1cHg7IH1cbiAgICAgICAgLmJpbGwtaW5mbyBoMyB7IG1hcmdpbjogMCAwIDE1cHggMDsgY29sb3I6ICMzMzM7IH1cbiAgICAgICAgLmluZm8tcm93IHsgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBtYXJnaW4tYm90dG9tOiAxMHB4OyB9XG4gICAgICAgIC5pbmZvLWxhYmVsIHsgZm9udC13ZWlnaHQ6IGJvbGQ7IGNvbG9yOiAjNjY2OyB9XG4gICAgICAgIC5pbmZvLXZhbHVlIHsgY29sb3I6ICMzMzM7IH1cbiAgICAgICAgLmNoYXJnZXMtc2VjdGlvbiB7IG1hcmdpbi1ib3R0b206IDI1cHg7IH1cbiAgICAgICAgLmNoYXJnZXMtc2VjdGlvbiBoMyB7IGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjNjY3ZWVhOyBwYWRkaW5nLWJvdHRvbTogMTBweDsgbWFyZ2luLWJvdHRvbTogMjBweDsgY29sb3I6ICMzMzM7IH1cbiAgICAgICAgLmNoYXJnZS1pdGVtIHsgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBwYWRkaW5nOiAxNXB4OyBtYXJnaW4tYm90dG9tOiAxMHB4OyBib3JkZXItcmFkaXVzOiA2cHg7IH1cbiAgICAgICAgLmNoYXJnZS1yZW50IHsgYmFja2dyb3VuZDogI2UzZjJmZDsgYm9yZGVyLWxlZnQ6IDRweCBzb2xpZCAjMjE5NmYzOyB9XG4gICAgICAgIC5jaGFyZ2UtZWxlY3RyaWMgeyBiYWNrZ3JvdW5kOiAjZmZmM2UwOyBib3JkZXItbGVmdDogNHB4IHNvbGlkICNmZjk4MDA7IH1cbiAgICAgICAgLmNoYXJnZS13YXRlciB7IGJhY2tncm91bmQ6ICNlOGY1ZTg7IGJvcmRlci1sZWZ0OiA0cHggc29saWQgIzRjYWY1MDsgfVxuICAgICAgICAudG90YWwtc2VjdGlvbiB7IGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICM2NjdlZWEgMCUsICM3NjRiYTIgMTAwJSk7IGNvbG9yOiB3aGl0ZTsgcGFkZGluZzogMjBweDsgYm9yZGVyLXJhZGl1czogOHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IH1cbiAgICAgICAgLnRvdGFsLWFtb3VudCB7IGZvbnQtc2l6ZTogMzJweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IG1hcmdpbjogMTBweCAwOyB9XG4gICAgICAgIC5mb290ZXIgeyBwYWRkaW5nOiAyMHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IGNvbG9yOiAjNjY2OyBib3JkZXItdG9wOiAxcHggc29saWQgI2VlZTsgfVxuICAgICAgICAucGF5bWVudC1ub3RlIHsgYmFja2dyb3VuZDogI2YwZjhmZjsgYm9yZGVyOiAxcHggc29saWQgI2IzZDlmZjsgcGFkZGluZzogMTVweDsgYm9yZGVyLXJhZGl1czogNnB4OyBtYXJnaW46IDIwcHggMDsgfVxuICAgICAgPC9zdHlsZT5cbiAgICA8L2hlYWQ+XG4gICAgPGJvZHk+XG4gICAgICA8ZGl2IGNsYXNzPVwiYmlsbC1jb250YWluZXJcIj5cbiAgICAgICAgPCEtLSBIZWFkZXIgLS0+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJoZWFkZXJcIj5cbiAgICAgICAgICA8aDE+JHtiaWxsLmJyYW5jaF9uYW1lIHx8ICdKSCBBUEFSVE1FTlQnfTwvaDE+XG4gICAgICAgICAgPHA+JHtiaWxsLmJyYW5jaF9hZGRyZXNzIHx8ICdQYXRpbi1heSwgUHJvc3BlcmlkYWQsIEFndXNhbiBkZWwgU3VyJ308L3A+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDwhLS0gQ29udGVudCAtLT5cbiAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRlbnRcIj5cbiAgICAgICAgICA8IS0tIEJpbGwgSW5mb3JtYXRpb24gLS0+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImJpbGwtaW5mb1wiPlxuICAgICAgICAgICAgPGgzPkJpbGwgSW5mb3JtYXRpb248L2gzPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImluZm8tcm93XCI+XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiaW5mby1sYWJlbFwiPlRlbmFudCBOYW1lOjwvc3Bhbj5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJpbmZvLXZhbHVlXCI+JHtiaWxsLnRlbmFudF9uYW1lfTwvc3Bhbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImluZm8tcm93XCI+XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiaW5mby1sYWJlbFwiPlJvb20gTnVtYmVyOjwvc3Bhbj5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJpbmZvLXZhbHVlXCI+JHtiaWxsLnJvb21fbnVtYmVyfTwvc3Bhbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImluZm8tcm93XCI+XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiaW5mby1sYWJlbFwiPkJpbGwgUGVyaW9kOjwvc3Bhbj5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJpbmZvLXZhbHVlXCI+JHtmb3JtYXREYXRlKGJpbGwucmVudF9mcm9tKX0gLSAke2Zvcm1hdERhdGUoYmlsbC5yZW50X3RvKX08L3NwYW4+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbmZvLXJvd1wiPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImluZm8tbGFiZWxcIj5CaWxsIERhdGU6PC9zcGFuPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImluZm8tdmFsdWVcIj4ke2Zvcm1hdERhdGUoYmlsbC5iaWxsX2RhdGUpfTwvc3Bhbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImluZm8tcm93XCI+XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiaW5mby1sYWJlbFwiPkR1ZSBEYXRlOjwvc3Bhbj5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJpbmZvLXZhbHVlXCI+JHtmb3JtYXREYXRlKGJpbGwucmVudF90byl9PC9zcGFuPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICA8IS0tIENoYXJnZXMgQnJlYWtkb3duIC0tPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJjaGFyZ2VzLXNlY3Rpb25cIj5cbiAgICAgICAgICAgIDxoMz5DaGFyZ2VzIEJyZWFrZG93bjwvaDM+XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIDwhLS0gUmVudCAtLT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjaGFyZ2UtaXRlbSBjaGFyZ2UtcmVudFwiPlxuICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgIDxzdHJvbmc+TW9udGhseSBSZW50PC9zdHJvbmc+XG4gICAgICAgICAgICAgICAgPGJyPjxzbWFsbD5QZXJpb2Q6ICR7Zm9ybWF0RGF0ZShiaWxsLnJlbnRfZnJvbSl9IC0gJHtmb3JtYXREYXRlKGJpbGwucmVudF90byl9PC9zbWFsbD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJ0ZXh0LWFsaWduOiByaWdodDtcIj5cbiAgICAgICAgICAgICAgICA8c3Ryb25nPiR7Zm9ybWF0Q3VycmVuY3koYmlsbC5yZW50X2Ftb3VudCl9PC9zdHJvbmc+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIDwhLS0gRWxlY3RyaWMgLS0+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2hhcmdlLWl0ZW0gY2hhcmdlLWVsZWN0cmljXCI+XG4gICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgPHN0cm9uZz5FbGVjdHJpY2l0eTwvc3Ryb25nPlxuICAgICAgICAgICAgICAgIDxicj48c21hbGw+UmVhZGluZzogJHtlbGVjdHJpY1JlYWRpbmd9ICgke2VsZWN0cmljQ29uc3VtcHRpb259IGtXaCk8L3NtYWxsPlxuICAgICAgICAgICAgICAgIDxicj48c21hbGw+UmF0ZTog4oKxJHtiaWxsLmVsZWN0cmljX3JhdGVfcGVyX2t3aH0va1doPC9zbWFsbD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJ0ZXh0LWFsaWduOiByaWdodDtcIj5cbiAgICAgICAgICAgICAgICA8c3Ryb25nPiR7Zm9ybWF0Q3VycmVuY3koYmlsbC5lbGVjdHJpY19hbW91bnQgfHwgMCl9PC9zdHJvbmc+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIDwhLS0gV2F0ZXIgLS0+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2hhcmdlLWl0ZW0gY2hhcmdlLXdhdGVyXCI+XG4gICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgPHN0cm9uZz5XYXRlcjwvc3Ryb25nPlxuICAgICAgICAgICAgICAgIDxicj48c21hbGw+Rml4ZWQgbW9udGhseSBjaGFyZ2U8L3NtYWxsPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdiBzdHlsZT1cInRleHQtYWxpZ246IHJpZ2h0O1wiPlxuICAgICAgICAgICAgICAgIDxzdHJvbmc+JHtmb3JtYXRDdXJyZW5jeShiaWxsLndhdGVyX2Ftb3VudCl9PC9zdHJvbmc+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICR7YmlsbC5leHRyYV9mZWVfYW1vdW50ID4gMCA/IGBcbiAgICAgICAgICAgIDwhLS0gRXh0cmEgRmVlcyAtLT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjaGFyZ2UtaXRlbVwiIHN0eWxlPVwiYmFja2dyb3VuZDogI2YzZTVmNTsgYm9yZGVyLWxlZnQ6IDRweCBzb2xpZCAjOWMyN2IwO1wiPlxuICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgIDxzdHJvbmc+RXh0cmEgRmVlczwvc3Ryb25nPlxuICAgICAgICAgICAgICAgIDxicj48c21hbGw+JHtiaWxsLmV4dHJhX2ZlZV9kZXNjcmlwdGlvbiB8fCAnQWRkaXRpb25hbCBjaGFyZ2VzJ308L3NtYWxsPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdiBzdHlsZT1cInRleHQtYWxpZ246IHJpZ2h0O1wiPlxuICAgICAgICAgICAgICAgIDxzdHJvbmc+JHtmb3JtYXRDdXJyZW5jeShiaWxsLmV4dHJhX2ZlZV9hbW91bnQpfTwvc3Ryb25nPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgYCA6ICcnfVxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgPCEtLSBUb3RhbCAtLT5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwidG90YWwtc2VjdGlvblwiPlxuICAgICAgICAgICAgPGRpdj5Ub3RhbCBBbW91bnQgRHVlPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwidG90YWwtYW1vdW50XCI+JHtmb3JtYXRDdXJyZW5jeShiaWxsLnRvdGFsX2Ftb3VudCl9PC9kaXY+XG4gICAgICAgICAgICA8ZGl2PlN0YXR1czogJHtiaWxsLnN0YXR1cy50b1VwcGVyQ2FzZSgpfTwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgPCEtLSBQYXltZW50IE5vdGUgLS0+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cInBheW1lbnQtbm90ZVwiPlxuICAgICAgICAgICAgPHN0cm9uZz5QYXltZW50IEluc3RydWN0aW9uczo8L3N0cm9uZz48YnI+XG4gICAgICAgICAgICBQbGVhc2UgcGF5IHlvdXIgYmlsbCBvbiBvciBiZWZvcmUgdGhlIGR1ZSBkYXRlIHRvIGF2b2lkIGFueSBsYXRlIGZlZXMuIFxuICAgICAgICAgICAgQ29udGFjdCB0aGUgbWFuYWdlbWVudCBvZmZpY2UgZm9yIHBheW1lbnQgbWV0aG9kcyBhbmQgYXNzaXN0YW5jZS5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgPCEtLSBGb290ZXIgLS0+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJmb290ZXJcIj5cbiAgICAgICAgICA8cD5UaGlzIGlzIGFuIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVkIGJpbGwuIEZvciBxdWVzdGlvbnMgb3IgY29uY2VybnMsIHBsZWFzZSBjb250YWN0IHRoZSBtYW5hZ2VtZW50IG9mZmljZS48L3A+XG4gICAgICAgICAgPHA+PHN0cm9uZz5HZW5lcmF0ZWQgb246PC9zdHJvbmc+ICR7Zm9ybWF0RGF0ZShuZXcgRGF0ZSgpKX08L3A+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9ib2R5PlxuICAgIDwvaHRtbD5cbiAgYDtcbn07XG5cbi8vIFNlbmQgYmlsbCB0byB0ZW5hbnQgdmlhIGVtYWlsXG5jb25zdCBzZW5kQmlsbFRvVGVuYW50ID0gYXN5bmMgKGJpbGwsIHJlY2lwaWVudEVtYWlsLCBjdXN0b21NZXNzYWdlID0gJycpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB0cmFuc3BvcnRlciA9IGNyZWF0ZVRyYW5zcG9ydGVyKCk7XG4gICAgXG4gICAgY29uc3Qgc3ViamVjdCA9IGBNb250aGx5IEJpbGwgLSBSb29tICR7YmlsbC5yb29tX251bWJlcn0gLSAke2Zvcm1hdERhdGUoYmlsbC5iaWxsX2RhdGUpfWA7XG4gICAgY29uc3QgaHRtbENvbnRlbnQgPSBnZW5lcmF0ZUJpbGxIVE1MKGJpbGwpO1xuICAgIFxuICAgIGxldCB0ZXh0TWVzc2FnZSA9IGBcbkRlYXIgJHtiaWxsLnRlbmFudF9uYW1lfSxcblxuWW91ciBtb250aGx5IGJpbGwgZm9yIFJvb20gJHtiaWxsLnJvb21fbnVtYmVyfSBpcyByZWFkeS5cblxuQmlsbCBQZXJpb2Q6ICR7Zm9ybWF0RGF0ZShiaWxsLnJlbnRfZnJvbSl9IC0gJHtmb3JtYXREYXRlKGJpbGwucmVudF90byl9XG5Ub3RhbCBBbW91bnQ6ICR7Zm9ybWF0Q3VycmVuY3koYmlsbC50b3RhbF9hbW91bnQpfVxuRHVlIERhdGU6ICR7Zm9ybWF0RGF0ZShiaWxsLnJlbnRfdG8pfVxuXG5CcmVha2Rvd246XG4tIFJlbnQ6ICR7Zm9ybWF0Q3VycmVuY3koYmlsbC5yZW50X2Ftb3VudCl9XG4tIEVsZWN0cmljaXR5OiAke2Zvcm1hdEN1cnJlbmN5KGJpbGwuZWxlY3RyaWNfYW1vdW50IHx8IDApfVxuLSBXYXRlcjogJHtmb3JtYXRDdXJyZW5jeShiaWxsLndhdGVyX2Ftb3VudCl9JHtiaWxsLmV4dHJhX2ZlZV9hbW91bnQgPiAwID8gYFxuLSBFeHRyYSBGZWVzOiAke2Zvcm1hdEN1cnJlbmN5KGJpbGwuZXh0cmFfZmVlX2Ftb3VudCl9ICgke2JpbGwuZXh0cmFfZmVlX2Rlc2NyaXB0aW9uIHx8ICdBZGRpdGlvbmFsIGNoYXJnZXMnfSlgIDogJyd9XG5cblBsZWFzZSBwYXkgb24gb3IgYmVmb3JlIHRoZSBkdWUgZGF0ZS5cblxuVGhhbmsgeW91LFxuJHtiaWxsLmJyYW5jaF9uYW1lIHx8ICdKSCBBcGFydG1lbnQnfSBNYW5hZ2VtZW50XG4gICAgYDtcblxuICAgIGlmIChjdXN0b21NZXNzYWdlKSB7XG4gICAgICB0ZXh0TWVzc2FnZSA9IGAke2N1c3RvbU1lc3NhZ2V9XFxuXFxuJHt0ZXh0TWVzc2FnZX1gO1xuICAgIH1cblxuICAgIGNvbnN0IG1haWxPcHRpb25zID0ge1xuICAgICAgZnJvbTogcHJvY2Vzcy5lbnYuRU1BSUxfVVNFUiB8fCAnbm9yZXBseUBqaGFwYXJ0bWVudC5jb20nLFxuICAgICAgdG86IHJlY2lwaWVudEVtYWlsLFxuICAgICAgc3ViamVjdDogc3ViamVjdCxcbiAgICAgIHRleHQ6IHRleHRNZXNzYWdlLFxuICAgICAgaHRtbDogaHRtbENvbnRlbnQsXG4gICAgICBhdHRhY2htZW50czogW10gLy8gQ291bGQgYWRkIFBERiBhdHRhY2htZW50IGluIHRoZSBmdXR1cmVcbiAgICB9O1xuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdHJhbnNwb3J0ZXIuc2VuZE1haWwobWFpbE9wdGlvbnMpO1xuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgbWVzc2FnZUlkOiByZXN1bHQubWVzc2FnZUlkLFxuICAgICAgbWVzc2FnZTogJ0VtYWlsIHNlbnQgc3VjY2Vzc2Z1bGx5J1xuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRW1haWwgc2VuZGluZyBlcnJvcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2VcbiAgICB9O1xuICB9XG59O1xuXG4vLyBUZXN0IGVtYWlsIGNvbmZpZ3VyYXRpb25cbmNvbnN0IHRlc3RFbWFpbENvbmZpZyA9IGFzeW5jICgpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB0cmFuc3BvcnRlciA9IGNyZWF0ZVRyYW5zcG9ydGVyKCk7XG4gICAgYXdhaXQgdHJhbnNwb3J0ZXIudmVyaWZ5KCk7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgbWVzc2FnZTogJ0VtYWlsIGNvbmZpZ3VyYXRpb24gaXMgdmFsaWQnIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XG4gIH1cbn07XG5cbi8vIFNlbmQgcmVjZWlwdCB0byB0ZW5hbnQgdmlhIGVtYWlsXG5jb25zdCBzZW5kUmVjZWlwdFRvVGVuYW50ID0gYXN5bmMgKGJpbGwsIHBheW1lbnRzLCByZWNpcGllbnRFbWFpbCwgcGRmQnVmZmVyLCBwZW5hbHR5UGVyY2VudGFnZSA9IDEuMDApID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB0cmFuc3BvcnRlciA9IGNyZWF0ZVRyYW5zcG9ydGVyKCk7XG4gICAgXG4gICAgY29uc3Qgc3ViamVjdCA9IGBQYXltZW50IFJlY2VpcHQgLSBSb29tICR7YmlsbC5yb29tX251bWJlcn0gLSAke2Zvcm1hdERhdGUobmV3IERhdGUoKSl9YDtcbiAgICBcbiAgICAvLyBDaGVjayBpZiBwZW5hbHR5IGZlZSB3YXMgYXBwbGllZFxuICAgIGNvbnN0IGhhc1BlbmFsdHlGZWUgPSBiaWxsLnBlbmFsdHlfYXBwbGllZCB8fCBiaWxsLnBlbmFsdHlfZmVlX2Ftb3VudCA+IDA7XG4gICAgY29uc3QgcGVuYWx0eUZlZUFtb3VudCA9IHBhcnNlRmxvYXQoYmlsbC5wZW5hbHR5X2ZlZV9hbW91bnQgfHwgMCk7XG4gICAgXG4gICAgbGV0IHRleHRNZXNzYWdlID0gYFxuRGVhciAke2JpbGwudGVuYW50X25hbWV9LFxuXG5UaGFuayB5b3UgZm9yIHlvdXIgcGF5bWVudCEgUGxlYXNlIGZpbmQgeW91ciBvZmZpY2lhbCByZWNlaXB0IGF0dGFjaGVkLlxuXG5SZWNlaXB0IERldGFpbHM6XG4tIEJpbGwgUGVyaW9kOiAke2Zvcm1hdERhdGUoYmlsbC5yZW50X2Zyb20pfSAtICR7Zm9ybWF0RGF0ZShiaWxsLnJlbnRfdG8pfVxuLSBUb3RhbCBBbW91bnQ6ICR7Zm9ybWF0Q3VycmVuY3koYmlsbC50b3RhbF9hbW91bnQpfVxuLSBBbW91bnQgUGFpZDogJHtmb3JtYXRDdXJyZW5jeShwYXltZW50cy5yZWR1Y2UoKHN1bSwgcCkgPT4gc3VtICsgcGFyc2VGbG9hdChwLmFtb3VudCksIDApKX1cbi0gUGF5bWVudCBEYXRlOiAke2Zvcm1hdERhdGUocGF5bWVudHNbcGF5bWVudHMubGVuZ3RoIC0gMV0uYWN0dWFsX3BheW1lbnRfZGF0ZSB8fCBwYXltZW50c1twYXltZW50cy5sZW5ndGggLSAxXS5wYXltZW50X2RhdGUpfVxuLSBTdGF0dXM6IEZVTExZIFBBSURcbiR7aGFzUGVuYWx0eUZlZSA/IGAtIExhdGUgUGF5bWVudCBGZWU6ICR7Zm9ybWF0Q3VycmVuY3kocGVuYWx0eUZlZUFtb3VudCl9ICgke3BlbmFsdHlQZXJjZW50YWdlfSUgcGVuYWx0eSBhcHBsaWVkKWAgOiAnJ31cblxuVGhpcyByZWNlaXB0IHNlcnZlcyBhcyBvZmZpY2lhbCBwcm9vZiBvZiBwYXltZW50LlxuXG5UaGFuayB5b3UgZm9yIGNob29zaW5nICR7YmlsbC5icmFuY2hfbmFtZSB8fCAnSiZIIEFwYXJ0bWVudCd9IVxuXG5CZXN0IHJlZ2FyZHMsXG4ke2JpbGwuYnJhbmNoX25hbWUgfHwgJ0omSCBBcGFydG1lbnQnfSBNYW5hZ2VtZW50XG4gICAgYDtcblxuICAgIGNvbnN0IG1haWxPcHRpb25zID0ge1xuICAgICAgZnJvbTogcHJvY2Vzcy5lbnYuRU1BSUxfVVNFUiB8fCAnbm9yZXBseUBqaGFwYXJ0bWVudC5jb20nLFxuICAgICAgdG86IHJlY2lwaWVudEVtYWlsLFxuICAgICAgc3ViamVjdDogc3ViamVjdCxcbiAgICAgIHRleHQ6IHRleHRNZXNzYWdlLFxuICAgICAgYXR0YWNobWVudHM6IFtcbiAgICAgICAge1xuICAgICAgICAgIGZpbGVuYW1lOiBgcmVjZWlwdC0ke2JpbGwuaWR9LSR7RGF0ZS5ub3coKX0ucGRmYCxcbiAgICAgICAgICBjb250ZW50OiBwZGZCdWZmZXIsXG4gICAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9wZGYnXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9O1xuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdHJhbnNwb3J0ZXIuc2VuZE1haWwobWFpbE9wdGlvbnMpO1xuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgbWVzc2FnZTogJ1JlY2VpcHQgc2VudCBzdWNjZXNzZnVsbHkgdmlhIGVtYWlsJyxcbiAgICAgIG1lc3NhZ2VJZDogcmVzdWx0Lm1lc3NhZ2VJZFxuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignUmVjZWlwdCBlbWFpbCBzZW5kaW5nIGVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBlcnJvcjogZXJyb3IubWVzc2FnZVxuICAgIH07XG4gIH1cbn07XG5cbi8vIFNlbmQgd2VsY29tZSBlbWFpbCB0byBuZXcgdGVuYW50XG5jb25zdCBzZW5kV2VsY29tZUVtYWlsID0gYXN5bmMgKHRlbmFudCwgcm9vbUluZm8pID0+IHtcbiAgdHJ5IHtcbiAgICAvLyBFbWFpbHMgYXJlIG5vdyBlbmFibGVkIC0gYXR0ZW1wdGluZyB0byBzZW5kIHdlbGNvbWUgZW1haWxcbiAgICBcbiAgICBjb25zdCB0cmFuc3BvcnRlciA9IGNyZWF0ZVRyYW5zcG9ydGVyKCk7XG4gICAgXG4gICAgY29uc3Qgc3ViamVjdCA9IGBXZWxjb21lIHRvIEomSCBBcGFydG1lbnQhIC0gUm9vbSAke3Jvb21JbmZvLnJvb21fbnVtYmVyfWA7XG4gICAgXG4gICAgY29uc3QgaHRtbENvbnRlbnQgPSBgXG4gICAgICA8IURPQ1RZUEUgaHRtbD5cbiAgICAgIDxodG1sPlxuICAgICAgPGhlYWQ+XG4gICAgICAgIDxtZXRhIGNoYXJzZXQ9XCJ1dGYtOFwiPlxuICAgICAgICA8c3R5bGU+XG4gICAgICAgICAgYm9keSB7IGZvbnQtZmFtaWx5OiBBcmlhbCwgc2Fucy1zZXJpZjsgbWFyZ2luOiAwOyBwYWRkaW5nOiAyMHB4OyBiYWNrZ3JvdW5kLWNvbG9yOiAjZjRmNGY0OyB9XG4gICAgICAgICAgLmVtYWlsLWNvbnRhaW5lciB7IG1heC13aWR0aDogNjAwcHg7IG1hcmdpbjogMCBhdXRvOyBiYWNrZ3JvdW5kOiB3aGl0ZTsgYm9yZGVyLXJhZGl1czogOHB4OyBvdmVyZmxvdzogaGlkZGVuOyBib3gtc2hhZG93OiAwIDJweCAxMHB4IHJnYmEoMCwwLDAsMC4xKTsgfVxuICAgICAgICAgIC5oZWFkZXIgeyBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjNjY3ZWVhIDAlLCAjNzY0YmEyIDEwMCUpOyBjb2xvcjogd2hpdGU7IHBhZGRpbmc6IDMwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsgfVxuICAgICAgICAgIC5oZWFkZXIgaDEgeyBtYXJnaW46IDA7IGZvbnQtc2l6ZTogMjhweDsgfVxuICAgICAgICAgIC5jb250ZW50IHsgcGFkZGluZzogMzBweDsgfVxuICAgICAgICAgIC53ZWxjb21lLXNlY3Rpb24geyBiYWNrZ3JvdW5kOiAjZjhmOWZhOyBwYWRkaW5nOiAyMHB4OyBib3JkZXItcmFkaXVzOiA4cHg7IG1hcmdpbjogMjBweCAwOyB9XG4gICAgICAgICAgLmluZm8tYm94IHsgYmFja2dyb3VuZDogI2UzZjJmZDsgYm9yZGVyLWxlZnQ6IDRweCBzb2xpZCAjMjE5NmYzOyBwYWRkaW5nOiAxNXB4OyBtYXJnaW46IDE1cHggMDsgfVxuICAgICAgICAgIC5kZXBvc2l0LWluZm8geyBiYWNrZ3JvdW5kOiAjZmZmM2UwOyBib3JkZXItbGVmdDogNHB4IHNvbGlkICNmZjk4MDA7IHBhZGRpbmc6IDE1cHg7IG1hcmdpbjogMTVweCAwOyB9XG4gICAgICAgICAgLmNvbnRyYWN0LWluZm8geyBiYWNrZ3JvdW5kOiAjZThmNWU4OyBib3JkZXItbGVmdDogNHB4IHNvbGlkICM0Y2FmNTA7IHBhZGRpbmc6IDE1cHg7IG1hcmdpbjogMTVweCAwOyB9XG4gICAgICAgICAgLmZvb3RlciB7IHBhZGRpbmc6IDIwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsgY29sb3I6ICM2NjY7IGJvcmRlci10b3A6IDFweCBzb2xpZCAjZWVlOyB9XG4gICAgICAgIDwvc3R5bGU+XG4gICAgICA8L2hlYWQ+XG4gICAgICA8Ym9keT5cbiAgICAgICAgPGRpdiBjbGFzcz1cImVtYWlsLWNvbnRhaW5lclwiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJoZWFkZXJcIj5cbiAgICAgICAgICAgIDxoMT7wn4+gIFdlbGNvbWUgdG8gSiZIIEFwYXJ0bWVudCE8L2gxPlxuICAgICAgICAgICAgPHA+WW91ciBuZXcgaG9tZSBhd2FpdHMgeW91PC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIFxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250ZW50XCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwid2VsY29tZS1zZWN0aW9uXCI+XG4gICAgICAgICAgICAgIDxoMj5EZWFyICR7dGVuYW50Lm5hbWV9LDwvaDI+XG4gICAgICAgICAgICAgIDxwPldlIGFyZSB0aHJpbGxlZCB0byB3ZWxjb21lIHlvdSB0byBKJkggQXBhcnRtZW50ISBUaGFuayB5b3UgZm9yIGNob29zaW5nIHVzIGFzIHlvdXIgbmV3IGhvbWUuIFdlJ3JlIGNvbW1pdHRlZCB0byBwcm92aWRpbmcgeW91IHdpdGggYSBjb21mb3J0YWJsZSBhbmQgcGxlYXNhbnQgbGl2aW5nIGV4cGVyaWVuY2UuPC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbmZvLWJveFwiPlxuICAgICAgICAgICAgICA8aDM+8J+TiyBZb3VyIFRlbmFuY3kgRGV0YWlsczwvaDM+XG4gICAgICAgICAgICAgIDxwPjxzdHJvbmc+Um9vbSBOdW1iZXI6PC9zdHJvbmc+ICR7cm9vbUluZm8ucm9vbV9udW1iZXJ9PC9wPlxuICAgICAgICAgICAgICA8cD48c3Ryb25nPk1vbnRobHkgUmVudDo8L3N0cm9uZz4gJHtmb3JtYXRDdXJyZW5jeShyb29tSW5mby5tb250aGx5X3JlbnQpfTwvcD5cbiAgICAgICAgICAgICAgPHA+PHN0cm9uZz5Db250cmFjdCBTdGFydDo8L3N0cm9uZz4gJHtmb3JtYXREYXRlKHRlbmFudC5jb250cmFjdF9zdGFydF9kYXRlKX08L3A+XG4gICAgICAgICAgICAgIDxwPjxzdHJvbmc+Q29udHJhY3QgRW5kOjwvc3Ryb25nPiAke2Zvcm1hdERhdGUodGVuYW50LmNvbnRyYWN0X2VuZF9kYXRlKX08L3A+XG4gICAgICAgICAgICAgIDxwPjxzdHJvbmc+Q29udHJhY3QgRHVyYXRpb246PC9zdHJvbmc+ICR7dGVuYW50LmNvbnRyYWN0X2R1cmF0aW9uX21vbnRoc30gbW9udGhzPC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZXBvc2l0LWluZm9cIj5cbiAgICAgICAgICAgICAgPGgzPvCfkrAgRGVwb3NpdCBJbmZvcm1hdGlvbjwvaDM+XG4gICAgICAgICAgICAgIDxwPjxzdHJvbmc+QWR2YW5jZSBQYXltZW50Ojwvc3Ryb25nPiAke2Zvcm1hdEN1cnJlbmN5KHRlbmFudC5hZHZhbmNlX3BheW1lbnQpfTwvcD5cbiAgICAgICAgICAgICAgPHA+PHN0cm9uZz5TZWN1cml0eSBEZXBvc2l0Ojwvc3Ryb25nPiAke2Zvcm1hdEN1cnJlbmN5KHRlbmFudC5zZWN1cml0eV9kZXBvc2l0KX08L3A+XG4gICAgICAgICAgICAgIDxwPjxzdHJvbmc+VG90YWwgUmVxdWlyZWQ6PC9zdHJvbmc+ICR7Zm9ybWF0Q3VycmVuY3kocGFyc2VGbG9hdCh0ZW5hbnQuYWR2YW5jZV9wYXltZW50KSArIHBhcnNlRmxvYXQodGVuYW50LnNlY3VyaXR5X2RlcG9zaXQpKX08L3A+XG4gICAgICAgICAgICAgIDxwPjxlbT5BIHNlcGFyYXRlIGRlcG9zaXQgcmVjZWlwdCB3aWxsIGJlIHNlbnQgdG8geW91IG9uY2UgcGF5bWVudCBpcyBjb25maXJtZWQuPC9lbT48L3A+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRyYWN0LWluZm9cIj5cbiAgICAgICAgICAgICAgPGgzPvCfk4sgSW1wb3J0YW50IEluZm9ybWF0aW9uPC9oMz5cbiAgICAgICAgICAgICAgPHVsPlxuICAgICAgICAgICAgICAgIDxsaT5Zb3VyIHJlbnQgaXMgZHVlIG1vbnRobHkgaW4gYWR2YW5jZTwvbGk+XG4gICAgICAgICAgICAgICAgPGxpPldhdGVyIGFuZCBlbGVjdHJpY2l0eSBiaWxscyB3aWxsIGJlIGNhbGN1bGF0ZWQgYmFzZWQgb24gdXNhZ2U8L2xpPlxuICAgICAgICAgICAgICAgIDxsaT5XZSdsbCBub3RpZnkgeW91IDEgbW9udGggYmVmb3JlIHlvdXIgY29udHJhY3QgZXhwaXJlczwvbGk+XG4gICAgICAgICAgICAgICAgPGxpPlBsZWFzZSBrZWVwIHlvdXIgZGVwb3NpdCByZWNlaXB0cyBmb3IgZnV0dXJlIHJlZmVyZW5jZTwvbGk+XG4gICAgICAgICAgICAgICAgPGxpPkNvbnRhY3QgbWFuYWdlbWVudCBmb3IgYW55IG1haW50ZW5hbmNlIHJlcXVlc3RzPC9saT5cbiAgICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwid2VsY29tZS1zZWN0aW9uXCI+XG4gICAgICAgICAgICAgIDxoMz7wn5OeIENvbnRhY3QgSW5mb3JtYXRpb248L2gzPlxuICAgICAgICAgICAgICA8cD48c3Ryb25nPk1hbmFnZW1lbnQgT2ZmaWNlOjwvc3Ryb25nPiBBdmFpbGFibGUgZHVyaW5nIGJ1c2luZXNzIGhvdXJzPC9wPlxuICAgICAgICAgICAgICA8cD48c3Ryb25nPkVtYWlsOjwvc3Ryb25nPiBvZmZpY2lhbC5qaGFwYXJ0bWVudEBnbWFpbC5jb208L3A+XG4gICAgICAgICAgICAgIDxwPjxzdHJvbmc+QWRkcmVzczo8L3N0cm9uZz4gUGF0aW4tYXksIFByb3NwZXJpZGFkLCBBZ3VzYW4gRGVsIFN1cjwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgXG4gICAgICAgICAgICA8ZGl2IHN0eWxlPVwidGV4dC1hbGlnbjogY2VudGVyOyBtYXJnaW46IDMwcHggMDtcIj5cbiAgICAgICAgICAgICAgPHAgc3R5bGU9XCJmb250LXNpemU6IDE4cHg7IGNvbG9yOiAjNjY3ZWVhO1wiPjxzdHJvbmc+V2VsY29tZSB0byB5b3VyIG5ldyBob21lISDwn4+hPC9zdHJvbmc+PC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImZvb3RlclwiPlxuICAgICAgICAgICAgPHA+VGhpcyBlbWFpbCB3YXMgc2VudCBhdXRvbWF0aWNhbGx5IGJ5IEomSCBBcGFydG1lbnQgTWFuYWdlbWVudCBTeXN0ZW08L3A+XG4gICAgICAgICAgICA8cD5JZiB5b3UgaGF2ZSBhbnkgcXVlc3Rpb25zLCBwbGVhc2UgY29udGFjdCBvdXIgbWFuYWdlbWVudCBvZmZpY2U8L3A+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9ib2R5PlxuICAgICAgPC9odG1sPlxuICAgIGA7XG4gICAgXG4gICAgY29uc3QgdGV4dENvbnRlbnQgPSBgXG5EZWFyICR7dGVuYW50Lm5hbWV9LFxuXG5XZWxjb21lIHRvIEomSCBBcGFydG1lbnQhIFxuXG5Zb3VyIFRlbmFuY3kgRGV0YWlsczpcbi0gUm9vbSBOdW1iZXI6ICR7cm9vbUluZm8ucm9vbV9udW1iZXJ9XG4tIE1vbnRobHkgUmVudDogJHtmb3JtYXRDdXJyZW5jeShyb29tSW5mby5tb250aGx5X3JlbnQpfVxuLSBDb250cmFjdCBQZXJpb2Q6ICR7Zm9ybWF0RGF0ZSh0ZW5hbnQuY29udHJhY3Rfc3RhcnRfZGF0ZSl9IHRvICR7Zm9ybWF0RGF0ZSh0ZW5hbnQuY29udHJhY3RfZW5kX2RhdGUpfVxuLSBEdXJhdGlvbjogJHt0ZW5hbnQuY29udHJhY3RfZHVyYXRpb25fbW9udGhzfSBtb250aHNcblxuRGVwb3NpdCBJbmZvcm1hdGlvbjpcbi0gQWR2YW5jZSBQYXltZW50OiAke2Zvcm1hdEN1cnJlbmN5KHRlbmFudC5hZHZhbmNlX3BheW1lbnQpfVxuLSBTZWN1cml0eSBEZXBvc2l0OiAke2Zvcm1hdEN1cnJlbmN5KHRlbmFudC5zZWN1cml0eV9kZXBvc2l0KX1cbi0gVG90YWwgUmVxdWlyZWQ6ICR7Zm9ybWF0Q3VycmVuY3kocGFyc2VGbG9hdCh0ZW5hbnQuYWR2YW5jZV9wYXltZW50KSArIHBhcnNlRmxvYXQodGVuYW50LnNlY3VyaXR5X2RlcG9zaXQpKX1cblxuSW1wb3J0YW50IE5vdGVzOlxuLSBNb250aGx5IHJlbnQgaXMgZHVlIGluIGFkdmFuY2Vcbi0gV2UnbGwgbm90aWZ5IHlvdSAxIG1vbnRoIGJlZm9yZSBjb250cmFjdCBleHBpcnlcbi0gS2VlcCBkZXBvc2l0IHJlY2VpcHRzIGZvciByZWZlcmVuY2Vcbi0gQ29udGFjdCBtYW5hZ2VtZW50IGZvciBtYWludGVuYW5jZSByZXF1ZXN0c1xuXG5XZWxjb21lIHRvIHlvdXIgbmV3IGhvbWUhXG5cbkJlc3QgcmVnYXJkcyxcbkomSCBBcGFydG1lbnQgTWFuYWdlbWVudFxuICAgIGA7XG5cbiAgICBjb25zdCBtYWlsT3B0aW9ucyA9IHtcbiAgICAgIGZyb206IHByb2Nlc3MuZW52LkVNQUlMX1VTRVIgfHwgJ29mZmljaWFsLmpoYXBhcnRtZW50QGdtYWlsLmNvbScsXG4gICAgICB0bzogdGVuYW50LmVtYWlsLFxuICAgICAgc3ViamVjdDogc3ViamVjdCxcbiAgICAgIHRleHQ6IHRleHRDb250ZW50LFxuICAgICAgaHRtbDogaHRtbENvbnRlbnRcbiAgICB9O1xuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdHJhbnNwb3J0ZXIuc2VuZE1haWwobWFpbE9wdGlvbnMpO1xuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgbWVzc2FnZUlkOiByZXN1bHQubWVzc2FnZUlkLFxuICAgICAgbWVzc2FnZTogJ1dlbGNvbWUgZW1haWwgc2VudCBzdWNjZXNzZnVsbHknXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdXZWxjb21lIGVtYWlsIHNlbmRpbmcgZXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlXG4gICAgfTtcbiAgfVxufTtcblxuLy8gU2VuZCBkZXBvc2l0IHJlY2VpcHQgZW1haWxcbmNvbnN0IHNlbmREZXBvc2l0UmVjZWlwdEVtYWlsID0gYXN5bmMgKHRlbmFudCwgcm9vbUluZm8sIGRlcG9zaXRSZWNlaXB0QnVmZmVyKSA9PiB7XG4gIHRyeSB7XG4gICAgLy8gRW1haWxzIGFyZSBub3cgZW5hYmxlZCAtIGF0dGVtcHRpbmcgdG8gc2VuZCBkZXBvc2l0IHJlY2VpcHQgZW1haWxcbiAgICBcbiAgICBjb25zdCB0cmFuc3BvcnRlciA9IGNyZWF0ZVRyYW5zcG9ydGVyKCk7XG4gICAgXG4gICAgY29uc3Qgc3ViamVjdCA9IGBEZXBvc2l0IFJlY2VpcHQgLSBSb29tICR7cm9vbUluZm8ucm9vbV9udW1iZXJ9IC0gSiZIIEFwYXJ0bWVudGA7XG4gICAgXG4gICAgY29uc3QgaHRtbENvbnRlbnQgPSBgXG4gICAgICA8IURPQ1RZUEUgaHRtbD5cbiAgICAgIDxodG1sPlxuICAgICAgPGhlYWQ+XG4gICAgICAgIDxtZXRhIGNoYXJzZXQ9XCJ1dGYtOFwiPlxuICAgICAgICA8c3R5bGU+XG4gICAgICAgICAgYm9keSB7IGZvbnQtZmFtaWx5OiBBcmlhbCwgc2Fucy1zZXJpZjsgbWFyZ2luOiAwOyBwYWRkaW5nOiAyMHB4OyBiYWNrZ3JvdW5kLWNvbG9yOiAjZjRmNGY0OyB9XG4gICAgICAgICAgLmVtYWlsLWNvbnRhaW5lciB7IG1heC13aWR0aDogNjAwcHg7IG1hcmdpbjogMCBhdXRvOyBiYWNrZ3JvdW5kOiB3aGl0ZTsgYm9yZGVyLXJhZGl1czogOHB4OyBvdmVyZmxvdzogaGlkZGVuOyBib3gtc2hhZG93OiAwIDJweCAxMHB4IHJnYmEoMCwwLDAsMC4xKTsgfVxuICAgICAgICAgIC5oZWFkZXIgeyBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjMjhhNzQ1IDAlLCAjMjBjOTk3IDEwMCUpOyBjb2xvcjogd2hpdGU7IHBhZGRpbmc6IDMwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsgfVxuICAgICAgICAgIC5jb250ZW50IHsgcGFkZGluZzogMzBweDsgfVxuICAgICAgICAgIC5yZWNlaXB0LWluZm8geyBiYWNrZ3JvdW5kOiAjZjhmOWZhOyBwYWRkaW5nOiAyMHB4OyBib3JkZXItcmFkaXVzOiA4cHg7IG1hcmdpbjogMjBweCAwOyB9XG4gICAgICAgICAgLmFtb3VudC1ib3ggeyBiYWNrZ3JvdW5kOiAjZThmNWU4OyBib3JkZXI6IDJweCBzb2xpZCAjMjhhNzQ1OyBwYWRkaW5nOiAyMHB4OyBib3JkZXItcmFkaXVzOiA4cHg7IHRleHQtYWxpZ246IGNlbnRlcjsgbWFyZ2luOiAyMHB4IDA7IH1cbiAgICAgICAgICAuZm9vdGVyIHsgcGFkZGluZzogMjBweDsgdGV4dC1hbGlnbjogY2VudGVyOyBjb2xvcjogIzY2NjsgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNlZWU7IH1cbiAgICAgICAgPC9zdHlsZT5cbiAgICAgIDwvaGVhZD5cbiAgICAgIDxib2R5PlxuICAgICAgICA8ZGl2IGNsYXNzPVwiZW1haWwtY29udGFpbmVyXCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImhlYWRlclwiPlxuICAgICAgICAgICAgPGgxPvCfkrAgRGVwb3NpdCBSZWNlaXB0PC9oMT5cbiAgICAgICAgICAgIDxwPk9mZmljaWFsIFBheW1lbnQgQ29uZmlybWF0aW9uPC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIFxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250ZW50XCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicmVjZWlwdC1pbmZvXCI+XG4gICAgICAgICAgICAgIDxoMz5EZWFyICR7dGVuYW50Lm5hbWV9LDwvaDM+XG4gICAgICAgICAgICAgIDxwPlRoYW5rIHlvdSBmb3IgeW91ciBwYXltZW50ISBXZSBoYXZlIHJlY2VpdmVkIHlvdXIgYWR2YW5jZSBwYXltZW50IGFuZCBzZWN1cml0eSBkZXBvc2l0IGZvciBSb29tICR7cm9vbUluZm8ucm9vbV9udW1iZXJ9LjwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYW1vdW50LWJveFwiPlxuICAgICAgICAgICAgICA8aDM+UGF5bWVudCBTdW1tYXJ5PC9oMz5cbiAgICAgICAgICAgICAgPHA+PHN0cm9uZz5BZHZhbmNlIFBheW1lbnQ6PC9zdHJvbmc+ICR7Zm9ybWF0Q3VycmVuY3kodGVuYW50LmFkdmFuY2VfcGF5bWVudCl9PC9wPlxuICAgICAgICAgICAgICA8cD48c3Ryb25nPlNlY3VyaXR5IERlcG9zaXQ6PC9zdHJvbmc+ICR7Zm9ybWF0Q3VycmVuY3kodGVuYW50LnNlY3VyaXR5X2RlcG9zaXQpfTwvcD5cbiAgICAgICAgICAgICAgPGhyIHN0eWxlPVwibWFyZ2luOiAxNXB4IDA7XCI+XG4gICAgICAgICAgICAgIDxwIHN0eWxlPVwiZm9udC1zaXplOiAxOHB4O1wiPjxzdHJvbmc+VG90YWwgUGFpZDogJHtmb3JtYXRDdXJyZW5jeShwYXJzZUZsb2F0KHRlbmFudC5hZHZhbmNlX3BheW1lbnQpICsgcGFyc2VGbG9hdCh0ZW5hbnQuc2VjdXJpdHlfZGVwb3NpdCkpfTwvc3Ryb25nPjwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicmVjZWlwdC1pbmZvXCI+XG4gICAgICAgICAgICAgIDxoMz7wn5OLIFJlY2VpcHQgRGV0YWlsczwvaDM+XG4gICAgICAgICAgICAgIDxwPjxzdHJvbmc+UmVjZWlwdCBEYXRlOjwvc3Ryb25nPiAke2Zvcm1hdERhdGUobmV3IERhdGUoKSl9PC9wPlxuICAgICAgICAgICAgICA8cD48c3Ryb25nPlRlbmFudDo8L3N0cm9uZz4gJHt0ZW5hbnQubmFtZX08L3A+XG4gICAgICAgICAgICAgIDxwPjxzdHJvbmc+Um9vbTo8L3N0cm9uZz4gJHtyb29tSW5mby5yb29tX251bWJlcn08L3A+XG4gICAgICAgICAgICAgIDxwPjxzdHJvbmc+Q29udHJhY3QgUGVyaW9kOjwvc3Ryb25nPiAke2Zvcm1hdERhdGUodGVuYW50LmNvbnRyYWN0X3N0YXJ0X2RhdGUpfSB0byAke2Zvcm1hdERhdGUodGVuYW50LmNvbnRyYWN0X2VuZF9kYXRlKX08L3A+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgPGRpdiBzdHlsZT1cImJhY2tncm91bmQ6ICNmZmYzY2Q7IGJvcmRlcjogMXB4IHNvbGlkICNmZmVhYTc7IHBhZGRpbmc6IDE1cHg7IGJvcmRlci1yYWRpdXM6IDZweDsgbWFyZ2luOiAyMHB4IDA7XCI+XG4gICAgICAgICAgICAgIDxoND7wn5OEIE9mZmljaWFsIFJlY2VpcHQgQXR0YWNoZWQ8L2g0PlxuICAgICAgICAgICAgICA8cD5QbGVhc2UgZmluZCB5b3VyIG9mZmljaWFsIGRlcG9zaXQgcmVjZWlwdCBhdHRhY2hlZCB0byB0aGlzIGVtYWlsLiBLZWVwIHRoaXMgcmVjZWlwdCBmb3IgeW91ciByZWNvcmRzIGFzIHByb29mIG9mIHBheW1lbnQuPC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJ0ZXh0LWFsaWduOiBjZW50ZXI7IG1hcmdpbjogMzBweCAwO1wiPlxuICAgICAgICAgICAgICA8cCBzdHlsZT1cImNvbG9yOiAjMjhhNzQ1OyBmb250LXdlaWdodDogYm9sZDtcIj7inIUgUGF5bWVudCBDb25maXJtZWQgLSBXZWxjb21lIHRvIEomSCBBcGFydG1lbnQhPC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImZvb3RlclwiPlxuICAgICAgICAgICAgPHA+VGhpcyByZWNlaXB0IGlzIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVkIGFuZCBzZXJ2ZXMgYXMgb2ZmaWNpYWwgcHJvb2Ygb2YgcGF5bWVudDwvcD5cbiAgICAgICAgICAgIDxwPkZvciBhbnkgcXVlc3Rpb25zLCBwbGVhc2UgY29udGFjdCBvdXIgbWFuYWdlbWVudCBvZmZpY2U8L3A+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9ib2R5PlxuICAgICAgPC9odG1sPlxuICAgIGA7XG4gICAgXG4gICAgY29uc3QgdGV4dENvbnRlbnQgPSBgXG5EZWFyICR7dGVuYW50Lm5hbWV9LFxuXG5ERVBPU0lUIFJFQ0VJUFQgLSBKJkggQVBBUlRNRU5UXG5cblRoYW5rIHlvdSBmb3IgeW91ciBwYXltZW50ISBXZSBoYXZlIHJlY2VpdmVkIHlvdXIgZGVwb3NpdHMgZm9yIFJvb20gJHtyb29tSW5mby5yb29tX251bWJlcn0uXG5cblBheW1lbnQgU3VtbWFyeTpcbi0gQWR2YW5jZSBQYXltZW50OiAke2Zvcm1hdEN1cnJlbmN5KHRlbmFudC5hZHZhbmNlX3BheW1lbnQpfVxuLSBTZWN1cml0eSBEZXBvc2l0OiAke2Zvcm1hdEN1cnJlbmN5KHRlbmFudC5zZWN1cml0eV9kZXBvc2l0KX1cbi0gVG90YWwgUGFpZDogJHtmb3JtYXRDdXJyZW5jeShwYXJzZUZsb2F0KHRlbmFudC5hZHZhbmNlX3BheW1lbnQpICsgcGFyc2VGbG9hdCh0ZW5hbnQuc2VjdXJpdHlfZGVwb3NpdCkpfVxuXG5SZWNlaXB0IERldGFpbHM6XG4tIERhdGU6ICR7Zm9ybWF0RGF0ZShuZXcgRGF0ZSgpKX1cbi0gVGVuYW50OiAke3RlbmFudC5uYW1lfVxuLSBSb29tOiAke3Jvb21JbmZvLnJvb21fbnVtYmVyfVxuLSBDb250cmFjdDogJHtmb3JtYXREYXRlKHRlbmFudC5jb250cmFjdF9zdGFydF9kYXRlKX0gdG8gJHtmb3JtYXREYXRlKHRlbmFudC5jb250cmFjdF9lbmRfZGF0ZSl9XG5cbllvdXIgb2ZmaWNpYWwgcmVjZWlwdCBpcyBhdHRhY2hlZCB0byB0aGlzIGVtYWlsLiBQbGVhc2Uga2VlcCBpdCBmb3IgeW91ciByZWNvcmRzLlxuXG5XZWxjb21lIHRvIEomSCBBcGFydG1lbnQhXG5cbkJlc3QgcmVnYXJkcyxcbkomSCBBcGFydG1lbnQgTWFuYWdlbWVudFxuICAgIGA7XG5cbiAgICBjb25zdCBtYWlsT3B0aW9ucyA9IHtcbiAgICAgIGZyb206IHByb2Nlc3MuZW52LkVNQUlMX1VTRVIgfHwgJ29mZmljaWFsLmpoYXBhcnRtZW50QGdtYWlsLmNvbScsXG4gICAgICB0bzogdGVuYW50LmVtYWlsLFxuICAgICAgc3ViamVjdDogc3ViamVjdCxcbiAgICAgIHRleHQ6IHRleHRDb250ZW50LFxuICAgICAgaHRtbDogaHRtbENvbnRlbnQsXG4gICAgICBhdHRhY2htZW50czogW1xuICAgICAgICB7XG4gICAgICAgICAgZmlsZW5hbWU6IGBkZXBvc2l0LXJlY2VpcHQtJHt0ZW5hbnQuaWR9LSR7RGF0ZS5ub3coKX0ucGRmYCxcbiAgICAgICAgICBjb250ZW50OiBkZXBvc2l0UmVjZWlwdEJ1ZmZlcixcbiAgICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL3BkZidcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH07XG5cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0cmFuc3BvcnRlci5zZW5kTWFpbChtYWlsT3B0aW9ucyk7XG4gICAgXG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBtZXNzYWdlSWQ6IHJlc3VsdC5tZXNzYWdlSWQsXG4gICAgICBtZXNzYWdlOiAnRGVwb3NpdCByZWNlaXB0IGVtYWlsIHNlbnQgc3VjY2Vzc2Z1bGx5J1xuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRGVwb3NpdCByZWNlaXB0IGVtYWlsIHNlbmRpbmcgZXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlXG4gICAgfTtcbiAgfVxufTtcblxuLy8gU2VuZCBjb250cmFjdCBleHBpcnkgbm90aWZpY2F0aW9uXG5jb25zdCBzZW5kQ29udHJhY3RFeHBpcnlOb3RpZmljYXRpb24gPSBhc3luYyAodGVuYW50LCByb29tSW5mbykgPT4ge1xuICB0cnkge1xuICAgIC8vIEVtYWlscyBhcmUgbm93IGVuYWJsZWQgLSBhdHRlbXB0aW5nIHRvIHNlbmQgY29udHJhY3QgZXhwaXJ5IG5vdGlmaWNhdGlvblxuICAgIFxuICAgIGNvbnN0IHRyYW5zcG9ydGVyID0gY3JlYXRlVHJhbnNwb3J0ZXIoKTtcbiAgICBcbiAgICBjb25zdCBzdWJqZWN0ID0gYENvbnRyYWN0IEV4cGlyeSBOb3RpY2UgLSBSb29tICR7cm9vbUluZm8ucm9vbV9udW1iZXJ9IC0gQWN0aW9uIFJlcXVpcmVkYDtcbiAgICBcbiAgICBjb25zdCBkYXlzVW50aWxFeHBpcnkgPSBNYXRoLmNlaWwoKG5ldyBEYXRlKHRlbmFudC5jb250cmFjdF9lbmRfZGF0ZSkgLSBuZXcgRGF0ZSgpKSAvICgxMDAwICogNjAgKiA2MCAqIDI0KSk7XG4gICAgXG4gICAgY29uc3QgaHRtbENvbnRlbnQgPSBgXG4gICAgICA8IURPQ1RZUEUgaHRtbD5cbiAgICAgIDxodG1sPlxuICAgICAgPGhlYWQ+XG4gICAgICAgIDxtZXRhIGNoYXJzZXQ9XCJ1dGYtOFwiPlxuICAgICAgICA8c3R5bGU+XG4gICAgICAgICAgYm9keSB7IGZvbnQtZmFtaWx5OiBBcmlhbCwgc2Fucy1zZXJpZjsgbWFyZ2luOiAwOyBwYWRkaW5nOiAyMHB4OyBiYWNrZ3JvdW5kLWNvbG9yOiAjZjRmNGY0OyB9XG4gICAgICAgICAgLmVtYWlsLWNvbnRhaW5lciB7IG1heC13aWR0aDogNjAwcHg7IG1hcmdpbjogMCBhdXRvOyBiYWNrZ3JvdW5kOiB3aGl0ZTsgYm9yZGVyLXJhZGl1czogOHB4OyBvdmVyZmxvdzogaGlkZGVuOyBib3gtc2hhZG93OiAwIDJweCAxMHB4IHJnYmEoMCwwLDAsMC4xKTsgfVxuICAgICAgICAgIC5oZWFkZXIgeyBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjZmY2YjZiIDAlLCAjZWU1YTI0IDEwMCUpOyBjb2xvcjogd2hpdGU7IHBhZGRpbmc6IDMwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsgfVxuICAgICAgICAgIC5jb250ZW50IHsgcGFkZGluZzogMzBweDsgfVxuICAgICAgICAgIC5ub3RpY2UtYm94IHsgYmFja2dyb3VuZDogI2ZmZjNjZDsgYm9yZGVyOiAycHggc29saWQgI2ZmYzEwNzsgcGFkZGluZzogMjBweDsgYm9yZGVyLXJhZGl1czogOHB4OyBtYXJnaW46IDIwcHggMDsgfVxuICAgICAgICAgIC5pbmZvLXNlY3Rpb24geyBiYWNrZ3JvdW5kOiAjZjhmOWZhOyBwYWRkaW5nOiAyMHB4OyBib3JkZXItcmFkaXVzOiA4cHg7IG1hcmdpbjogMjBweCAwOyB9XG4gICAgICAgICAgLmFjdGlvbi1ib3ggeyBiYWNrZ3JvdW5kOiAjZTNmMmZkOyBib3JkZXItbGVmdDogNHB4IHNvbGlkICMyMTk2ZjM7IHBhZGRpbmc6IDIwcHg7IG1hcmdpbjogMjBweCAwOyB9XG4gICAgICAgICAgLmZvb3RlciB7IHBhZGRpbmc6IDIwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsgY29sb3I6ICM2NjY7IGJvcmRlci10b3A6IDFweCBzb2xpZCAjZWVlOyB9XG4gICAgICAgIDwvc3R5bGU+XG4gICAgICA8L2hlYWQ+XG4gICAgICA8Ym9keT5cbiAgICAgICAgPGRpdiBjbGFzcz1cImVtYWlsLWNvbnRhaW5lclwiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJoZWFkZXJcIj5cbiAgICAgICAgICAgIDxoMT7imqDvuI8gQ29udHJhY3QgRXhwaXJ5IE5vdGljZTwvaDE+XG4gICAgICAgICAgICA8cD5JbXBvcnRhbnQ6IEFjdGlvbiBSZXF1aXJlZDwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICBcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29udGVudFwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm5vdGljZS1ib3hcIj5cbiAgICAgICAgICAgICAgPGgzPkRlYXIgJHt0ZW5hbnQubmFtZX0sPC9oMz5cbiAgICAgICAgICAgICAgPHAgc3R5bGU9XCJmb250LXNpemU6IDE2cHg7XCI+PHN0cm9uZz5Zb3VyIHRlbmFuY3kgY29udHJhY3Qgd2lsbCBleHBpcmUgaW4gJHtkYXlzVW50aWxFeHBpcnl9IGRheXMuPC9zdHJvbmc+PC9wPlxuICAgICAgICAgICAgICA8cD5Db250cmFjdCBFbmQgRGF0ZTogPHN0cm9uZz4ke2Zvcm1hdERhdGUodGVuYW50LmNvbnRyYWN0X2VuZF9kYXRlKX08L3N0cm9uZz48L3A+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImluZm8tc2VjdGlvblwiPlxuICAgICAgICAgICAgICA8aDM+8J+TiyBDdXJyZW50IENvbnRyYWN0IERldGFpbHM8L2gzPlxuICAgICAgICAgICAgICA8cD48c3Ryb25nPlJvb20gTnVtYmVyOjwvc3Ryb25nPiAke3Jvb21JbmZvLnJvb21fbnVtYmVyfTwvcD5cbiAgICAgICAgICAgICAgPHA+PHN0cm9uZz5Db250cmFjdCBTdGFydDo8L3N0cm9uZz4gJHtmb3JtYXREYXRlKHRlbmFudC5jb250cmFjdF9zdGFydF9kYXRlKX08L3A+XG4gICAgICAgICAgICAgIDxwPjxzdHJvbmc+Q29udHJhY3QgRW5kOjwvc3Ryb25nPiAke2Zvcm1hdERhdGUodGVuYW50LmNvbnRyYWN0X2VuZF9kYXRlKX08L3A+XG4gICAgICAgICAgICAgIDxwPjxzdHJvbmc+TW9udGhseSBSZW50Ojwvc3Ryb25nPiAke2Zvcm1hdEN1cnJlbmN5KHJvb21JbmZvLm1vbnRobHlfcmVudCl9PC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJhY3Rpb24tYm94XCI+XG4gICAgICAgICAgICAgIDxoMz7wn5SEIFJlbmV3YWwgT3B0aW9uczwvaDM+XG4gICAgICAgICAgICAgIDxwPklmIHlvdSB3aXNoIHRvIGNvbnRpbnVlIHN0YXlpbmcgd2l0aCB1cywgcGxlYXNlIGNvbnRhY3Qgb3VyIG1hbmFnZW1lbnQgb2ZmaWNlIHRvIGRpc2N1c3MgcmVuZXdhbCB0ZXJtczo8L3A+XG4gICAgICAgICAgICAgIDx1bD5cbiAgICAgICAgICAgICAgICA8bGk+U3RhbmRhcmQgNi1tb250aCBjb250cmFjdCByZW5ld2FsPC9saT5cbiAgICAgICAgICAgICAgICA8bGk+Q3VzdG9tIGNvbnRyYWN0IGR1cmF0aW9uIG9wdGlvbnMgYXZhaWxhYmxlPC9saT5cbiAgICAgICAgICAgICAgICA8bGk+Q3VycmVudCByZW50IHJhdGVzIG1heSBhcHBseTwvbGk+XG4gICAgICAgICAgICAgICAgPGxpPk5ldyBjb250cmFjdCB0byBiZSBzaWduZWQgYmVmb3JlIGV4cGlyeSBkYXRlPC9saT5cbiAgICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgXG4gICAgICAgICAgICA8ZGl2IHN0eWxlPVwiYmFja2dyb3VuZDogI2Y4ZDdkYTsgYm9yZGVyOiAxcHggc29saWQgI2Y1YzZjYjsgcGFkZGluZzogMTVweDsgYm9yZGVyLXJhZGl1czogNnB4OyBtYXJnaW46IDIwcHggMDtcIj5cbiAgICAgICAgICAgICAgPGg0PuKPsCBJbXBvcnRhbnQgRGVhZGxpbmVzPC9oND5cbiAgICAgICAgICAgICAgPHA+PHN0cm9uZz5QbGVhc2Ugbm90aWZ5IHVzIG9mIHlvdXIgaW50ZW50aW9ucyBieTo8L3N0cm9uZz4gJHtmb3JtYXREYXRlKG5ldyBEYXRlKERhdGUubm93KCkgKyA3ICogMjQgKiA2MCAqIDYwICogMTAwMCkpfTwvcD5cbiAgICAgICAgICAgICAgPHA+VGhpcyB3aWxsIGFsbG93IHVzIHN1ZmZpY2llbnQgdGltZSB0byBwcm9jZXNzIHlvdXIgcmVuZXdhbCBvciBhcnJhbmdlIGZvciBhIHNtb290aCB0cmFuc2l0aW9uLjwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaW5mby1zZWN0aW9uXCI+XG4gICAgICAgICAgICAgIDxoMz7wn5OeIENvbnRhY3QgTWFuYWdlbWVudDwvaDM+XG4gICAgICAgICAgICAgIDxwPjxzdHJvbmc+RW1haWw6PC9zdHJvbmc+IG9mZmljaWFsLmpoYXBhcnRtZW50QGdtYWlsLmNvbTwvcD5cbiAgICAgICAgICAgICAgPHA+PHN0cm9uZz5WaXNpdDo8L3N0cm9uZz4gTWFuYWdlbWVudCBPZmZpY2UgZHVyaW5nIGJ1c2luZXNzIGhvdXJzPC9wPlxuICAgICAgICAgICAgICA8cD48c3Ryb25nPkFkZHJlc3M6PC9zdHJvbmc+IFBhdGluLWF5LCBQcm9zcGVyaWRhZCwgQWd1c2FuIERlbCBTdXI8L3A+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgPGRpdiBzdHlsZT1cInRleHQtYWxpZ246IGNlbnRlcjsgbWFyZ2luOiAzMHB4IDA7XCI+XG4gICAgICAgICAgICAgIDxwIHN0eWxlPVwiY29sb3I6ICNmZjZiNmI7IGZvbnQtd2VpZ2h0OiBib2xkO1wiPuKaoO+4jyBQbGVhc2UgcmVzcG9uZCB3aXRoaW4gNyBkYXlzIHRvIGF2b2lkIGFueSBjb21wbGljYXRpb25zPC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImZvb3RlclwiPlxuICAgICAgICAgICAgPHA+VGhpcyBpcyBhbiBhdXRvbWF0ZWQgcmVtaW5kZXIgc2VudCAzMCBkYXlzIGJlZm9yZSBjb250cmFjdCBleHBpcnk8L3A+XG4gICAgICAgICAgICA8cD5UaGFuayB5b3UgZm9yIGJlaW5nIGEgdmFsdWVkIHRlbmFudCBhdCBKJkggQXBhcnRtZW50PC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvYm9keT5cbiAgICAgIDwvaHRtbD5cbiAgICBgO1xuICAgIFxuICAgIGNvbnN0IHRleHRDb250ZW50ID0gYFxuRGVhciAke3RlbmFudC5uYW1lfSxcblxuQ09OVFJBQ1QgRVhQSVJZIE5PVElDRSAtIEomSCBBUEFSVE1FTlRcblxuWW91ciB0ZW5hbmN5IGNvbnRyYWN0IHdpbGwgZXhwaXJlIGluICR7ZGF5c1VudGlsRXhwaXJ5fSBkYXlzLlxuXG5Db250cmFjdCBEZXRhaWxzOlxuLSBSb29tOiAke3Jvb21JbmZvLnJvb21fbnVtYmVyfVxuLSBDb250cmFjdCBFbmQ6ICR7Zm9ybWF0RGF0ZSh0ZW5hbnQuY29udHJhY3RfZW5kX2RhdGUpfVxuLSBNb250aGx5IFJlbnQ6ICR7Zm9ybWF0Q3VycmVuY3kocm9vbUluZm8ubW9udGhseV9yZW50KX1cblxuUmVuZXdhbCBPcHRpb25zOlxuLSBTdGFuZGFyZCA2LW1vbnRoIHJlbmV3YWwgYXZhaWxhYmxlXG4tIEN1c3RvbSBkdXJhdGlvbiBvcHRpb25zXG4tIENvbnRhY3QgbWFuYWdlbWVudCBvZmZpY2UgdG8gZGlzY3VzcyB0ZXJtc1xuXG5JbXBvcnRhbnQ6XG5QbGVhc2Ugbm90aWZ5IHVzIG9mIHlvdXIgaW50ZW50aW9ucyBieSAke2Zvcm1hdERhdGUobmV3IERhdGUoRGF0ZS5ub3coKSArIDcgKiAyNCAqIDYwICogNjAgKiAxMDAwKSl9XG5cbkNvbnRhY3QgSW5mb3JtYXRpb246XG5FbWFpbDogb2ZmaWNpYWwuamhhcGFydG1lbnRAZ21haWwuY29tXG5WaXNpdDogTWFuYWdlbWVudCBPZmZpY2UgZHVyaW5nIGJ1c2luZXNzIGhvdXJzXG5cblBsZWFzZSByZXNwb25kIHdpdGhpbiA3IGRheXMgdG8gYXZvaWQgY29tcGxpY2F0aW9ucy5cblxuVGhhbmsgeW91IGZvciBiZWluZyBhIHZhbHVlZCB0ZW5hbnQuXG5cbkJlc3QgcmVnYXJkcyxcbkomSCBBcGFydG1lbnQgTWFuYWdlbWVudFxuICAgIGA7XG5cbiAgICBjb25zdCBtYWlsT3B0aW9ucyA9IHtcbiAgICAgIGZyb206IHByb2Nlc3MuZW52LkVNQUlMX1VTRVIgfHwgJ29mZmljaWFsLmpoYXBhcnRtZW50QGdtYWlsLmNvbScsXG4gICAgICB0bzogdGVuYW50LmVtYWlsLFxuICAgICAgc3ViamVjdDogc3ViamVjdCxcbiAgICAgIHRleHQ6IHRleHRDb250ZW50LFxuICAgICAgaHRtbDogaHRtbENvbnRlbnRcbiAgICB9O1xuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdHJhbnNwb3J0ZXIuc2VuZE1haWwobWFpbE9wdGlvbnMpO1xuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgbWVzc2FnZUlkOiByZXN1bHQubWVzc2FnZUlkLFxuICAgICAgbWVzc2FnZTogJ0NvbnRyYWN0IGV4cGlyeSBub3RpZmljYXRpb24gc2VudCBzdWNjZXNzZnVsbHknXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdDb250cmFjdCBleHBpcnkgZW1haWwgc2VuZGluZyBlcnJvcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2VcbiAgICB9O1xuICB9XG59O1xuXG4vLyBTZW5kIGRlcGFydHVyZSBub3RpZmljYXRpb24gZW1haWxcbmNvbnN0IHNlbmREZXBhcnR1cmVFbWFpbCA9IGFzeW5jIChyZWNpcGllbnRFbWFpbCwgZGVwYXJ0dXJlSW5mbykgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHRyYW5zcG9ydGVyID0gY3JlYXRlVHJhbnNwb3J0ZXIoKTtcbiAgICBcbiAgICBjb25zdCBzdWJqZWN0ID0gYERlcGFydHVyZSBDb25maXJtYXRpb24gLSBSb29tICR7ZGVwYXJ0dXJlSW5mby5yb29tX251bWJlcn0gLSBKJkggQXBhcnRtZW50YDtcbiAgICBcbiAgICBjb25zdCBodG1sQ29udGVudCA9IGBcbiAgICAgIDwhRE9DVFlQRSBodG1sPlxuICAgICAgPGh0bWw+XG4gICAgICA8aGVhZD5cbiAgICAgICAgPG1ldGEgY2hhcnNldD1cInV0Zi04XCI+XG4gICAgICAgIDxzdHlsZT5cbiAgICAgICAgICBib2R5IHsgZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmOyBtYXJnaW46IDA7IHBhZGRpbmc6IDIwcHg7IGJhY2tncm91bmQtY29sb3I6ICNmNGY0ZjQ7IH1cbiAgICAgICAgICAuZW1haWwtY29udGFpbmVyIHsgbWF4LXdpZHRoOiA2MDBweDsgbWFyZ2luOiAwIGF1dG87IGJhY2tncm91bmQ6IHdoaXRlOyBib3JkZXItcmFkaXVzOiA4cHg7IG92ZXJmbG93OiBoaWRkZW47IGJveC1zaGFkb3c6IDAgMnB4IDEwcHggcmdiYSgwLDAsMCwwLjEpOyB9XG4gICAgICAgICAgLmhlYWRlciB7IGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICM2NjdlZWEgMCUsICM3NjRiYTIgMTAwJSk7IGNvbG9yOiB3aGl0ZTsgcGFkZGluZzogMzBweDsgdGV4dC1hbGlnbjogY2VudGVyOyB9XG4gICAgICAgICAgLmNvbnRlbnQgeyBwYWRkaW5nOiAzMHB4OyB9XG4gICAgICAgICAgLmluZm8tc2VjdGlvbiB7IGJhY2tncm91bmQ6ICNmOGY5ZmE7IHBhZGRpbmc6IDIwcHg7IGJvcmRlci1yYWRpdXM6IDhweDsgbWFyZ2luOiAyMHB4IDA7IH1cbiAgICAgICAgICAuc3VtbWFyeS1ib3ggeyBiYWNrZ3JvdW5kOiAjZTNmMmZkOyBib3JkZXItbGVmdDogNHB4IHNvbGlkICMyMTk2ZjM7IHBhZGRpbmc6IDIwcHg7IG1hcmdpbjogMjBweCAwOyB9XG4gICAgICAgICAgLnJlZnVuZC1ib3ggeyBiYWNrZ3JvdW5kOiAjZThmNWU4OyBib3JkZXItbGVmdDogNHB4IHNvbGlkICM0Y2FmNTA7IHBhZGRpbmc6IDIwcHg7IG1hcmdpbjogMjBweCAwOyB9XG4gICAgICAgICAgLmZvb3RlciB7IHBhZGRpbmc6IDIwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsgY29sb3I6ICM2NjY7IGJvcmRlci10b3A6IDFweCBzb2xpZCAjZWVlOyB9XG4gICAgICAgICAgLnN0YXR1cy1iYWRnZSB7IGRpc3BsYXk6IGlubGluZS1ibG9jazsgcGFkZGluZzogNXB4IDE1cHg7IGJvcmRlci1yYWRpdXM6IDIwcHg7IGZvbnQtc2l6ZTogMTJweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IH1cbiAgICAgICAgICAuY29tcGxldGVkIHsgYmFja2dyb3VuZDogI2Q0ZWRkYTsgY29sb3I6ICMxNTU3MjQ7IH1cbiAgICAgICAgICAuZWFybHkgeyBiYWNrZ3JvdW5kOiAjZmZmM2NkOyBjb2xvcjogIzg1NjQwNDsgfVxuICAgICAgICA8L3N0eWxlPlxuICAgICAgPC9oZWFkPlxuICAgICAgPGJvZHk+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJlbWFpbC1jb250YWluZXJcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiaGVhZGVyXCI+XG4gICAgICAgICAgICA8aDE+8J+PoCBEZXBhcnR1cmUgQ29uZmlybWF0aW9uPC9oMT5cbiAgICAgICAgICAgIDxwPkomSCBBcGFydG1lbnQgLSBUaGFuayBZb3UgZm9yIFN0YXlpbmcgV2l0aCBVczwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICBcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29udGVudFwiPlxuICAgICAgICAgICAgPGgzPkRlYXIgJHtkZXBhcnR1cmVJbmZvLnRlbmFudF9uYW1lfSw8L2gzPlxuICAgICAgICAgICAgPHA+V2UgY29uZmlybSB0aGF0IHlvdXIgdGVuYW5jeSBhdCBKJkggQXBhcnRtZW50IGhhcyBiZWVuIHByb2Nlc3NlZCBhbmQgeW91ciByZWNvcmRzIGhhdmUgYmVlbiB1cGRhdGVkLjwvcD5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImluZm8tc2VjdGlvblwiPlxuICAgICAgICAgICAgICA8aDM+8J+TiyBUZW5hbmN5IFN1bW1hcnk8L2gzPlxuICAgICAgICAgICAgICA8cD48c3Ryb25nPlJvb20gTnVtYmVyOjwvc3Ryb25nPiAke2RlcGFydHVyZUluZm8ucm9vbV9udW1iZXJ9PC9wPlxuICAgICAgICAgICAgICA8cD48c3Ryb25nPkJyYW5jaDo8L3N0cm9uZz4gJHtkZXBhcnR1cmVJbmZvLmJyYW5jaF9uYW1lfTwvcD5cbiAgICAgICAgICAgICAgPHA+PHN0cm9uZz5UZW5hbmN5IFBlcmlvZDo8L3N0cm9uZz4gJHtmb3JtYXREYXRlKGRlcGFydHVyZUluZm8ucmVudF9zdGFydCl9IC0gJHtmb3JtYXREYXRlKGRlcGFydHVyZUluZm8ucmVudF9lbmQpfTwvcD5cbiAgICAgICAgICAgICAgPHA+PHN0cm9uZz5Db250cmFjdCBTdGF0dXM6PC9zdHJvbmc+IFxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic3RhdHVzLWJhZGdlICR7ZGVwYXJ0dXJlSW5mby5jb250cmFjdF9jb21wbGV0ZWQgPyAnY29tcGxldGVkJyA6ICdlYXJseSd9XCI+XG4gICAgICAgICAgICAgICAgICAke2RlcGFydHVyZUluZm8uY29udHJhY3RfY29tcGxldGVkID8gJ0NvbnRyYWN0IENvbXBsZXRlZCcgOiAnRWFybHkgRGVwYXJ0dXJlJ31cbiAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgPHA+PHN0cm9uZz5EZXBhcnR1cmUgUmVhc29uOjwvc3Ryb25nPiAke2RlcGFydHVyZUluZm8ucmVhc29uX2Zvcl9sZWF2aW5nPy5yZXBsYWNlKCdfJywgJyAnKSB8fCAnTm90IHNwZWNpZmllZCd9PC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzdW1tYXJ5LWJveFwiPlxuICAgICAgICAgICAgICA8aDM+8J+SsCBGaW5hbmNpYWwgU3VtbWFyeTwvaDM+XG4gICAgICAgICAgICAgIDxwPjxzdHJvbmc+VG90YWwgQmlsbHMgUGFpZDo8L3N0cm9uZz4gJHtmb3JtYXRDdXJyZW5jeShkZXBhcnR1cmVJbmZvLnRvdGFsX2JpbGxzX3BhaWQgfHwgMCl9PC9wPlxuICAgICAgICAgICAgICAke2RlcGFydHVyZUluZm8udG90YWxfYmlsbHNfdW5wYWlkID4gMCA/IGBcbiAgICAgICAgICAgICAgICA8cD48c3Ryb25nPk91dHN0YW5kaW5nIEFtb3VudDo8L3N0cm9uZz4gPHNwYW4gc3R5bGU9XCJjb2xvcjogI2RjMzU0NTtcIj4ke2Zvcm1hdEN1cnJlbmN5KGRlcGFydHVyZUluZm8udG90YWxfYmlsbHNfdW5wYWlkKX08L3NwYW4+PC9wPlxuICAgICAgICAgICAgICAgIDxwPjxzbWFsbCBzdHlsZT1cImNvbG9yOiAjZGMzNTQ1O1wiPlBsZWFzZSBzZXR0bGUgYW55IG91dHN0YW5kaW5nIGFtb3VudHMgYXMgc29vbiBhcyBwb3NzaWJsZS48L3NtYWxsPjwvcD5cbiAgICAgICAgICAgICAgYCA6IGBcbiAgICAgICAgICAgICAgICA8cCBzdHlsZT1cImNvbG9yOiAjMjhhNzQ1O1wiPjxzdHJvbmc+4pyFIEFsbCBiaWxscyBoYXZlIGJlZW4gc2V0dGxlZDwvc3Ryb25nPjwvcD5cbiAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgXG4gICAgICAgICAgICAke2RlcGFydHVyZUluZm8uc2VjdXJpdHlfZGVwb3NpdF9yZWZ1bmQgPiAwID8gYFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInJlZnVuZC1ib3hcIj5cbiAgICAgICAgICAgICAgPGgzPvCfkrUgU2VjdXJpdHkgRGVwb3NpdCBSZWZ1bmQ8L2gzPlxuICAgICAgICAgICAgICA8cD48c3Ryb25nPlJlZnVuZCBBbW91bnQ6PC9zdHJvbmc+ICR7Zm9ybWF0Q3VycmVuY3koZGVwYXJ0dXJlSW5mby5zZWN1cml0eV9kZXBvc2l0X3JlZnVuZCl9PC9wPlxuICAgICAgICAgICAgICA8cD5Zb3VyIHNlY3VyaXR5IGRlcG9zaXQgcmVmdW5kIHdpbGwgYmUgcHJvY2Vzc2VkIGFjY29yZGluZyB0byBvdXIgc3RhbmRhcmQgcHJvY2VkdXJlcy4gUGxlYXNlIGNvbnRhY3QgdGhlIG1hbmFnZW1lbnQgb2ZmaWNlIGZvciByZWZ1bmQgY29sbGVjdGlvbiBkZXRhaWxzLjwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgYCA6ICcnfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaW5mby1zZWN0aW9uXCI+XG4gICAgICAgICAgICAgIDxoMz7wn5OeIENvbnRhY3QgSW5mb3JtYXRpb248L2gzPlxuICAgICAgICAgICAgICA8cD5JZiB5b3UgaGF2ZSBhbnkgcXVlc3Rpb25zIG9yIG5lZWQgYXNzaXN0YW5jZSwgcGxlYXNlIGNvbnRhY3QgdXM6PC9wPlxuICAgICAgICAgICAgICA8cD48c3Ryb25nPkVtYWlsOjwvc3Ryb25nPiBvZmZpY2lhbC5qaGFwYXJ0bWVudEBnbWFpbC5jb208L3A+XG4gICAgICAgICAgICAgIDxwPjxzdHJvbmc+QWRkcmVzczo8L3N0cm9uZz4gUGF0aW4tYXksIFByb3NwZXJpZGFkLCBBZ3VzYW4gRGVsIFN1cjwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgXG4gICAgICAgICAgICA8ZGl2IHN0eWxlPVwidGV4dC1hbGlnbjogY2VudGVyOyBtYXJnaW46IDMwcHggMDsgcGFkZGluZzogMjBweDsgYmFja2dyb3VuZDogI2YwZjhmZjsgYm9yZGVyLXJhZGl1czogOHB4O1wiPlxuICAgICAgICAgICAgICA8aDM+8J+ZjyBUaGFuayBZb3UhPC9oMz5cbiAgICAgICAgICAgICAgPHA+VGhhbmsgeW91IGZvciBjaG9vc2luZyBKJkggQXBhcnRtZW50IGFzIHlvdXIgaG9tZS4gV2UgYXBwcmVjaWF0ZSB5b3VyIHRlbmFuY3kgYW5kIHdpc2ggeW91IGFsbCB0aGUgYmVzdCBpbiB5b3VyIGZ1dHVyZSBlbmRlYXZvcnMuPC9wPlxuICAgICAgICAgICAgICA8cD48ZW0+WW91J3JlIGFsd2F5cyB3ZWxjb21lIGJhY2shPC9lbT48L3A+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICBcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9vdGVyXCI+XG4gICAgICAgICAgICA8cD5UaGlzIGlzIGFuIGF1dG9tYXRlZCBjb25maXJtYXRpb24gZW1haWw8L3A+XG4gICAgICAgICAgICA8cD5KJkggQXBhcnRtZW50IE1hbmFnZW1lbnQgVGVhbTwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2JvZHk+XG4gICAgICA8L2h0bWw+XG4gICAgYDtcbiAgICBcbiAgICBjb25zdCB0ZXh0Q29udGVudCA9IGBcbkRlYXIgJHtkZXBhcnR1cmVJbmZvLnRlbmFudF9uYW1lfSxcblxuREVQQVJUVVJFIENPTkZJUk1BVElPTiAtIEomSCBBUEFSVE1FTlRcblxuV2UgY29uZmlybSB0aGF0IHlvdXIgdGVuYW5jeSBoYXMgYmVlbiBwcm9jZXNzZWQgYW5kIHlvdXIgcmVjb3JkcyBoYXZlIGJlZW4gdXBkYXRlZC5cblxuVGVuYW5jeSBTdW1tYXJ5OlxuLSBSb29tOiAke2RlcGFydHVyZUluZm8ucm9vbV9udW1iZXJ9XG4tIEJyYW5jaDogJHtkZXBhcnR1cmVJbmZvLmJyYW5jaF9uYW1lfVxuLSBQZXJpb2Q6ICR7Zm9ybWF0RGF0ZShkZXBhcnR1cmVJbmZvLnJlbnRfc3RhcnQpfSAtICR7Zm9ybWF0RGF0ZShkZXBhcnR1cmVJbmZvLnJlbnRfZW5kKX1cbi0gU3RhdHVzOiAke2RlcGFydHVyZUluZm8uY29udHJhY3RfY29tcGxldGVkID8gJ0NvbnRyYWN0IENvbXBsZXRlZCcgOiAnRWFybHkgRGVwYXJ0dXJlJ31cbi0gUmVhc29uOiAke2RlcGFydHVyZUluZm8ucmVhc29uX2Zvcl9sZWF2aW5nPy5yZXBsYWNlKCdfJywgJyAnKSB8fCAnTm90IHNwZWNpZmllZCd9XG5cbkZpbmFuY2lhbCBTdW1tYXJ5OlxuLSBUb3RhbCBCaWxscyBQYWlkOiAke2Zvcm1hdEN1cnJlbmN5KGRlcGFydHVyZUluZm8udG90YWxfYmlsbHNfcGFpZCB8fCAwKX1cbiR7ZGVwYXJ0dXJlSW5mby50b3RhbF9iaWxsc191bnBhaWQgPiAwID8gYC0gT3V0c3RhbmRpbmcgQW1vdW50OiAke2Zvcm1hdEN1cnJlbmN5KGRlcGFydHVyZUluZm8udG90YWxfYmlsbHNfdW5wYWlkKX1gIDogJy0gQWxsIGJpbGxzIHNldHRsZWQg4pyFJ31cblxuJHtkZXBhcnR1cmVJbmZvLnNlY3VyaXR5X2RlcG9zaXRfcmVmdW5kID4gMCA/IGBcblNlY3VyaXR5IERlcG9zaXQgUmVmdW5kOiAke2Zvcm1hdEN1cnJlbmN5KGRlcGFydHVyZUluZm8uc2VjdXJpdHlfZGVwb3NpdF9yZWZ1bmQpfVxuUGxlYXNlIGNvbnRhY3QgdGhlIG1hbmFnZW1lbnQgb2ZmaWNlIGZvciByZWZ1bmQgY29sbGVjdGlvbiBkZXRhaWxzLlxuYCA6ICcnfVxuXG5Db250YWN0IEluZm9ybWF0aW9uOlxuRW1haWw6IG9mZmljaWFsLmpoYXBhcnRtZW50QGdtYWlsLmNvbVxuQWRkcmVzczogUGF0aW4tYXksIFByb3NwZXJpZGFkLCBBZ3VzYW4gRGVsIFN1clxuXG5UaGFuayB5b3UgZm9yIGNob29zaW5nIEomSCBBcGFydG1lbnQgYXMgeW91ciBob21lLiBXZSBhcHByZWNpYXRlIHlvdXIgdGVuYW5jeSBhbmQgd2lzaCB5b3UgYWxsIHRoZSBiZXN0IVxuXG5Zb3UncmUgYWx3YXlzIHdlbGNvbWUgYmFjayFcblxuQmVzdCByZWdhcmRzLFxuSiZIIEFwYXJ0bWVudCBNYW5hZ2VtZW50IFRlYW1cbiAgICBgO1xuXG4gICAgY29uc3QgbWFpbE9wdGlvbnMgPSB7XG4gICAgICBmcm9tOiBwcm9jZXNzLmVudi5FTUFJTF9VU0VSIHx8ICdvZmZpY2lhbC5qaGFwYXJ0bWVudEBnbWFpbC5jb20nLFxuICAgICAgdG86IHJlY2lwaWVudEVtYWlsLFxuICAgICAgc3ViamVjdDogc3ViamVjdCxcbiAgICAgIHRleHQ6IHRleHRDb250ZW50LFxuICAgICAgaHRtbDogaHRtbENvbnRlbnRcbiAgICB9O1xuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdHJhbnNwb3J0ZXIuc2VuZE1haWwobWFpbE9wdGlvbnMpO1xuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgbWVzc2FnZUlkOiByZXN1bHQubWVzc2FnZUlkLFxuICAgICAgbWVzc2FnZTogJ0RlcGFydHVyZSBlbWFpbCBzZW50IHN1Y2Nlc3NmdWxseSdcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0RlcGFydHVyZSBlbWFpbCBzZW5kaW5nIGVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBlcnJvcjogZXJyb3IubWVzc2FnZVxuICAgIH07XG4gIH1cbn07XG5cbi8vIFNlbmQgbW9udGhseSBidXNpbmVzcyByZXBvcnRcbmNvbnN0IHNlbmRNb250aGx5UmVwb3J0ID0gYXN5bmMgKHJlY2lwaWVudEVtYWlsLCByZXBvcnREYXRhKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgdHJhbnNwb3J0ZXIgPSBjcmVhdGVUcmFuc3BvcnRlcigpO1xuICAgIFxuICAgIGNvbnN0IG1vbnRoTmFtZSA9IHJlcG9ydERhdGEucmVwb3J0X3BlcmlvZC5tb250aF9uYW1lXG4gICAgY29uc3QgdG90YWxSZXZlbnVlID0gcmVwb3J0RGF0YS5maW5hbmNpYWxfc3VtbWFyeS50b3RhbF9yZXZlbnVlLnRvTG9jYWxlU3RyaW5nKClcbiAgICBjb25zdCBvY2N1cGFuY3lSYXRlID0gcmVwb3J0RGF0YS5vY2N1cGFuY3lfbWV0cmljcy5vY2N1cGFuY3lfcmF0ZVxuICAgIGNvbnN0IGFjdGl2ZVRlbmFudHMgPSByZXBvcnREYXRhLnRlbmFudF9zdGF0aXN0aWNzLmFjdGl2ZV90ZW5hbnRzXG4gICAgY29uc3QgcmV2ZW51ZUdyb3d0aCA9IHJlcG9ydERhdGEuZmluYW5jaWFsX3N1bW1hcnkucmV2ZW51ZV9ncm93dGhcblxuICAgIC8vIENyZWF0ZSBicmFuY2ggcGVyZm9ybWFuY2UgdGFibGVcbiAgICBjb25zdCBicmFuY2hUYWJsZSA9IHJlcG9ydERhdGEuYnJhbmNoX3BlcmZvcm1hbmNlLm1hcChicmFuY2ggPT4gYFxuICAgICAgPHRyPlxuICAgICAgICA8dGQgc3R5bGU9XCJwYWRkaW5nOiA4cHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7XCI+JHticmFuY2guYnJhbmNoX25hbWV9PC90ZD5cbiAgICAgICAgPHRkIHN0eWxlPVwicGFkZGluZzogOHB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyB0ZXh0LWFsaWduOiBjZW50ZXI7XCI+JHticmFuY2gub2NjdXBpZWRfcm9vbXN9LyR7YnJhbmNoLnRvdGFsX3Jvb21zfTwvdGQ+XG4gICAgICAgIDx0ZCBzdHlsZT1cInBhZGRpbmc6IDhweDsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsgdGV4dC1hbGlnbjogY2VudGVyO1wiPiR7YnJhbmNoLm9jY3VwYW5jeV9yYXRlfSU8L3RkPlxuICAgICAgICA8dGQgc3R5bGU9XCJwYWRkaW5nOiA4cHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7IHRleHQtYWxpZ246IHJpZ2h0O1wiPuKCsSR7YnJhbmNoLnJldmVudWUudG9Mb2NhbGVTdHJpbmcoKX08L3RkPlxuICAgICAgPC90cj5cbiAgICBgKS5qb2luKCcnKVxuXG4gICAgLy8gQ3JlYXRlIHBheW1lbnQgbWV0aG9kcyB0YWJsZVxuICAgIGNvbnN0IHBheW1lbnRUYWJsZSA9IHJlcG9ydERhdGEucGF5bWVudF9hbmFseXNpcy5ieV9tZXRob2QubWFwKG1ldGhvZCA9PiBgXG4gICAgICA8dHI+XG4gICAgICAgIDx0ZCBzdHlsZT1cInBhZGRpbmc6IDhweDsgYm9yZGVyOiAxcHggc29saWQgI2RkZDtcIj4ke21ldGhvZC5wYXltZW50X21ldGhvZH08L3RkPlxuICAgICAgICA8dGQgc3R5bGU9XCJwYWRkaW5nOiA4cHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7IHRleHQtYWxpZ246IGNlbnRlcjtcIj4ke21ldGhvZC50cmFuc2FjdGlvbl9jb3VudH08L3RkPlxuICAgICAgICA8dGQgc3R5bGU9XCJwYWRkaW5nOiA4cHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7IHRleHQtYWxpZ246IHJpZ2h0O1wiPuKCsSR7bWV0aG9kLnRvdGFsX2Ftb3VudC50b0xvY2FsZVN0cmluZygpfTwvdGQ+XG4gICAgICAgIDx0ZCBzdHlsZT1cInBhZGRpbmc6IDhweDsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsgdGV4dC1hbGlnbjogY2VudGVyO1wiPiR7bWV0aG9kLnBlcmNlbnRhZ2V9JTwvdGQ+XG4gICAgICA8L3RyPlxuICAgIGApLmpvaW4oJycpXG5cbiAgICAvLyBDcmVhdGUgdG9wIHBlcmZvcm1lcnMgdGFibGVcbiAgICBjb25zdCB0b3BQZXJmb3JtZXJzVGFibGUgPSByZXBvcnREYXRhLnRvcF9wZXJmb3JtZXJzLm1hcCh0ZW5hbnQgPT4gYFxuICAgICAgPHRyPlxuICAgICAgICA8dGQgc3R5bGU9XCJwYWRkaW5nOiA4cHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7XCI+JHt0ZW5hbnQudGVuYW50X25hbWV9PC90ZD5cbiAgICAgICAgPHRkIHN0eWxlPVwicGFkZGluZzogOHB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyB0ZXh0LWFsaWduOiBjZW50ZXI7XCI+JHt0ZW5hbnQucm9vbV9udW1iZXJ9PC90ZD5cbiAgICAgICAgPHRkIHN0eWxlPVwicGFkZGluZzogOHB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyB0ZXh0LWFsaWduOiByaWdodDtcIj7igrEke3RlbmFudC50b3RhbF9wYWlkLnRvTG9jYWxlU3RyaW5nKCl9PC90ZD5cbiAgICAgIDwvdHI+XG4gICAgYCkuam9pbignJylcblxuICAgIGNvbnN0IGh0bWxDb250ZW50ID0gYFxuICAgICAgPCFET0NUWVBFIGh0bWw+XG4gICAgICA8aHRtbD5cbiAgICAgIDxoZWFkPlxuICAgICAgICA8bWV0YSBjaGFyc2V0PVwidXRmLThcIj5cbiAgICAgICAgPHRpdGxlPk1vbnRobHkgQnVzaW5lc3MgUmVwb3J0IC0gJHttb250aE5hbWV9PC90aXRsZT5cbiAgICAgICAgPHN0eWxlPlxuICAgICAgICAgIGJvZHkgeyBmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7IGxpbmUtaGVpZ2h0OiAxLjY7IGNvbG9yOiAjMzMzOyB9XG4gICAgICAgICAgLmNvbnRhaW5lciB7IG1heC13aWR0aDogODAwcHg7IG1hcmdpbjogMCBhdXRvOyBwYWRkaW5nOiAyMHB4OyB9XG4gICAgICAgICAgLmhlYWRlciB7IGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICM2NjdlZWEgMCUsICM3NjRiYTIgMTAwJSk7IGNvbG9yOiB3aGl0ZTsgcGFkZGluZzogMzBweDsgdGV4dC1hbGlnbjogY2VudGVyOyBib3JkZXItcmFkaXVzOiAxMHB4OyBtYXJnaW4tYm90dG9tOiAzMHB4OyB9XG4gICAgICAgICAgLm1ldHJpYy1jYXJkIHsgYmFja2dyb3VuZDogI2Y4ZjlmYTsgYm9yZGVyLWxlZnQ6IDRweCBzb2xpZCAjMDA3YmZmOyBwYWRkaW5nOiAyMHB4OyBtYXJnaW46IDE1cHggMDsgYm9yZGVyLXJhZGl1czogNXB4OyB9XG4gICAgICAgICAgLm1ldHJpYy12YWx1ZSB7IGZvbnQtc2l6ZTogMmVtOyBmb250LXdlaWdodDogYm9sZDsgY29sb3I6ICMwMDdiZmY7IH1cbiAgICAgICAgICAubWV0cmljLWxhYmVsIHsgY29sb3I6ICM2NjY7IGZvbnQtc2l6ZTogMC45ZW07IH1cbiAgICAgICAgICAuZ3Jvd3RoLXBvc2l0aXZlIHsgY29sb3I6ICMyOGE3NDU7IH1cbiAgICAgICAgICAuZ3Jvd3RoLW5lZ2F0aXZlIHsgY29sb3I6ICNkYzM1NDU7IH1cbiAgICAgICAgICAuc2VjdGlvbiB7IG1hcmdpbjogMzBweCAwOyB9XG4gICAgICAgICAgLnNlY3Rpb24tdGl0bGUgeyBmb250LXNpemU6IDEuNWVtOyBjb2xvcjogIzMzMzsgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICMwMDdiZmY7IHBhZGRpbmctYm90dG9tOiAxMHB4OyBtYXJnaW4tYm90dG9tOiAyMHB4OyB9XG4gICAgICAgICAgdGFibGUgeyB3aWR0aDogMTAwJTsgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTsgbWFyZ2luOiAxNXB4IDA7IH1cbiAgICAgICAgICB0aCB7IGJhY2tncm91bmQ6ICMwMDdiZmY7IGNvbG9yOiB3aGl0ZTsgcGFkZGluZzogMTJweDsgdGV4dC1hbGlnbjogbGVmdDsgfVxuICAgICAgICAgIC5zdW1tYXJ5LWdyaWQgeyBkaXNwbGF5OiBncmlkOyBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdChhdXRvLWZpdCwgbWlubWF4KDIwMHB4LCAxZnIpKTsgZ2FwOiAxNXB4OyBtYXJnaW46IDIwcHggMDsgfVxuICAgICAgICAgIC5hbGVydCB7IGJhY2tncm91bmQ6ICNmZmYzY2Q7IGJvcmRlcjogMXB4IHNvbGlkICNmZmVhYTc7IGNvbG9yOiAjODU2NDA0OyBwYWRkaW5nOiAxNXB4OyBib3JkZXItcmFkaXVzOiA1cHg7IG1hcmdpbjogMTVweCAwOyB9XG4gICAgICAgICAgLmZvb3RlciB7IHRleHQtYWxpZ246IGNlbnRlcjsgbWFyZ2luLXRvcDogNDBweDsgcGFkZGluZzogMjBweDsgYmFja2dyb3VuZDogI2Y4ZjlmYTsgYm9yZGVyLXJhZGl1czogNXB4OyB9XG4gICAgICAgIDwvc3R5bGU+XG4gICAgICA8L2hlYWQ+XG4gICAgICA8Ym9keT5cbiAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRhaW5lclwiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJoZWFkZXJcIj5cbiAgICAgICAgICAgIDxoMT7wn5OKIEomSCBBcGFydG1lbnQgTW9udGhseSBSZXBvcnQ8L2gxPlxuICAgICAgICAgICAgPGgyPiR7bW9udGhOYW1lfTwvaDI+XG4gICAgICAgICAgICA8cD5HZW5lcmF0ZWQgb24gJHtuZXcgRGF0ZShyZXBvcnREYXRhLnJlcG9ydF9wZXJpb2QuZ2VuZXJhdGVkX2F0KS50b0xvY2FsZURhdGVTdHJpbmcoKX08L3A+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICA8IS0tIEV4ZWN1dGl2ZSBTdW1tYXJ5IC0tPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJzZWN0aW9uXCI+XG4gICAgICAgICAgICA8aDIgY2xhc3M9XCJzZWN0aW9uLXRpdGxlXCI+8J+TiCBFeGVjdXRpdmUgU3VtbWFyeTwvaDI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwic3VtbWFyeS1ncmlkXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtZXRyaWMtY2FyZFwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtZXRyaWMtdmFsdWVcIj7igrEke3RvdGFsUmV2ZW51ZX08L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibWV0cmljLWxhYmVsXCI+VG90YWwgUmV2ZW51ZTwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCIke3JldmVudWVHcm93dGggPj0gMCA/ICdncm93dGgtcG9zaXRpdmUnIDogJ2dyb3d0aC1uZWdhdGl2ZSd9XCI+XG4gICAgICAgICAgICAgICAgICAke3JldmVudWVHcm93dGggPj0gMCA/ICfihpcnIDogJ+KGmCd9ICR7TWF0aC5hYnMocmV2ZW51ZUdyb3d0aCl9JSB2cyBsYXN0IG1vbnRoXG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibWV0cmljLWNhcmRcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibWV0cmljLXZhbHVlXCI+JHtvY2N1cGFuY3lSYXRlfSU8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibWV0cmljLWxhYmVsXCI+T2NjdXBhbmN5IFJhdGU8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibWV0cmljLWxhYmVsXCI+JHtyZXBvcnREYXRhLm9jY3VwYW5jeV9tZXRyaWNzLm9jY3VwaWVkX3Jvb21zfS8ke3JlcG9ydERhdGEub2NjdXBhbmN5X21ldHJpY3MudG90YWxfcm9vbXN9IHJvb21zIG9jY3VwaWVkPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibWV0cmljLWNhcmRcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibWV0cmljLXZhbHVlXCI+JHthY3RpdmVUZW5hbnRzfTwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtZXRyaWMtbGFiZWxcIj5BY3RpdmUgVGVuYW50czwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtZXRyaWMtbGFiZWxcIj5OZXQgY2hhbmdlOiAke3JlcG9ydERhdGEudGVuYW50X3N0YXRpc3RpY3MubmV0X3RlbmFudF9jaGFuZ2UgPj0gMCA/ICcrJyA6ICcnfSR7cmVwb3J0RGF0YS50ZW5hbnRfc3RhdGlzdGljcy5uZXRfdGVuYW50X2NoYW5nZX08L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtZXRyaWMtY2FyZFwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtZXRyaWMtdmFsdWVcIj4ke3JlcG9ydERhdGEuZmluYW5jaWFsX3N1bW1hcnkuY29sbGVjdGlvbl9yYXRlfSU8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibWV0cmljLWxhYmVsXCI+Q29sbGVjdGlvbiBSYXRlPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1ldHJpYy1sYWJlbFwiPuKCsSR7cmVwb3J0RGF0YS5maW5hbmNpYWxfc3VtbWFyeS50b3RhbF9iaWxsZWQudG9Mb2NhbGVTdHJpbmcoKX0gYmlsbGVkPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICA8IS0tIEZpbmFuY2lhbCBQZXJmb3JtYW5jZSAtLT5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwic2VjdGlvblwiPlxuICAgICAgICAgICAgPGgyIGNsYXNzPVwic2VjdGlvbi10aXRsZVwiPvCfkrAgRmluYW5jaWFsIFBlcmZvcm1hbmNlPC9oMj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzdW1tYXJ5LWdyaWRcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1ldHJpYy1jYXJkXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1ldHJpYy12YWx1ZVwiPiR7cmVwb3J0RGF0YS5maW5hbmNpYWxfc3VtbWFyeS50b3RhbF90cmFuc2FjdGlvbnN9PC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1ldHJpYy1sYWJlbFwiPlRvdGFsIFRyYW5zYWN0aW9uczwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1ldHJpYy1jYXJkXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1ldHJpYy12YWx1ZVwiPuKCsSR7cmVwb3J0RGF0YS5vdXRzdGFuZGluZ19zdW1tYXJ5LnRvdGFsX291dHN0YW5kaW5nLnRvTG9jYWxlU3RyaW5nKCl9PC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1ldHJpYy1sYWJlbFwiPk91dHN0YW5kaW5nIEFtb3VudDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtZXRyaWMtbGFiZWxcIj4ke3JlcG9ydERhdGEub3V0c3RhbmRpbmdfc3VtbWFyeS51bnBhaWRfYmlsbHNfY291bnQgKyByZXBvcnREYXRhLm91dHN0YW5kaW5nX3N1bW1hcnkucGFydGlhbF9iaWxsc19jb3VudH0gYmlsbHMgcGVuZGluZzwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICA8aDM+UGF5bWVudCBNZXRob2RzIEJyZWFrZG93bjwvaDM+XG4gICAgICAgICAgICA8dGFibGU+XG4gICAgICAgICAgICAgIDx0aGVhZD5cbiAgICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgICA8dGg+UGF5bWVudCBNZXRob2Q8L3RoPlxuICAgICAgICAgICAgICAgICAgPHRoPlRyYW5zYWN0aW9uczwvdGg+XG4gICAgICAgICAgICAgICAgICA8dGg+QW1vdW50PC90aD5cbiAgICAgICAgICAgICAgICAgIDx0aD5QZXJjZW50YWdlPC90aD5cbiAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICA8L3RoZWFkPlxuICAgICAgICAgICAgICA8dGJvZHk+XG4gICAgICAgICAgICAgICAgJHtwYXltZW50VGFibGV9XG4gICAgICAgICAgICAgIDwvdGJvZHk+XG4gICAgICAgICAgICA8L3RhYmxlPlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgPCEtLSBCcmFuY2ggUGVyZm9ybWFuY2UgLS0+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cInNlY3Rpb25cIj5cbiAgICAgICAgICAgIDxoMiBjbGFzcz1cInNlY3Rpb24tdGl0bGVcIj7wn4+iIEJyYW5jaCBQZXJmb3JtYW5jZTwvaDI+XG4gICAgICAgICAgICA8dGFibGU+XG4gICAgICAgICAgICAgIDx0aGVhZD5cbiAgICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgICA8dGg+QnJhbmNoPC90aD5cbiAgICAgICAgICAgICAgICAgIDx0aD5PY2N1cGFuY3k8L3RoPlxuICAgICAgICAgICAgICAgICAgPHRoPlJhdGU8L3RoPlxuICAgICAgICAgICAgICAgICAgPHRoPlJldmVudWU8L3RoPlxuICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgIDwvdGhlYWQ+XG4gICAgICAgICAgICAgIDx0Ym9keT5cbiAgICAgICAgICAgICAgICAke2JyYW5jaFRhYmxlfVxuICAgICAgICAgICAgICA8L3Rib2R5PlxuICAgICAgICAgICAgPC90YWJsZT5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIDwhLS0gVGVuYW50IFN0YXRpc3RpY3MgLS0+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cInNlY3Rpb25cIj5cbiAgICAgICAgICAgIDxoMiBjbGFzcz1cInNlY3Rpb24tdGl0bGVcIj7wn5GlIFRlbmFudCBTdGF0aXN0aWNzPC9oMj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzdW1tYXJ5LWdyaWRcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1ldHJpYy1jYXJkXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1ldHJpYy12YWx1ZVwiPiR7cmVwb3J0RGF0YS50ZW5hbnRfc3RhdGlzdGljcy5uZXdfdGVuYW50c308L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibWV0cmljLWxhYmVsXCI+TmV3IFRlbmFudHM8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtZXRyaWMtY2FyZFwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtZXRyaWMtdmFsdWVcIj4ke3JlcG9ydERhdGEudGVuYW50X3N0YXRpc3RpY3MuZGVwYXJ0ZWRfdGVuYW50c308L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibWV0cmljLWxhYmVsXCI+RGVwYXJ0ZWQgVGVuYW50czwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1ldHJpYy1jYXJkXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1ldHJpYy12YWx1ZVwiPiR7cmVwb3J0RGF0YS50ZW5hbnRfc3RhdGlzdGljcy5leHBpcmluZ19jb250cmFjdHN9PC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1ldHJpYy1sYWJlbFwiPkV4cGlyaW5nIENvbnRyYWN0czwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtZXRyaWMtbGFiZWxcIj5OZXh0IDMwIGRheXM8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIDwhLS0gVG9wIFBlcmZvcm1lcnMgLS0+XG4gICAgICAgICAgJHtyZXBvcnREYXRhLnRvcF9wZXJmb3JtZXJzLmxlbmd0aCA+IDAgPyBgXG4gICAgICAgICAgPGRpdiBjbGFzcz1cInNlY3Rpb25cIj5cbiAgICAgICAgICAgIDxoMiBjbGFzcz1cInNlY3Rpb24tdGl0bGVcIj7wn4yfIFRvcCBQYXlpbmcgVGVuYW50czwvaDI+XG4gICAgICAgICAgICA8dGFibGU+XG4gICAgICAgICAgICAgIDx0aGVhZD5cbiAgICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgICA8dGg+VGVuYW50IE5hbWU8L3RoPlxuICAgICAgICAgICAgICAgICAgPHRoPlJvb208L3RoPlxuICAgICAgICAgICAgICAgICAgPHRoPkFtb3VudCBQYWlkPC90aD5cbiAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICA8L3RoZWFkPlxuICAgICAgICAgICAgICA8dGJvZHk+XG4gICAgICAgICAgICAgICAgJHt0b3BQZXJmb3JtZXJzVGFibGV9XG4gICAgICAgICAgICAgIDwvdGJvZHk+XG4gICAgICAgICAgICA8L3RhYmxlPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIGAgOiAnJ31cblxuICAgICAgICAgIDwhLS0gQWxlcnRzICYgUmVjb21tZW5kYXRpb25zIC0tPlxuICAgICAgICAgICR7cmVwb3J0RGF0YS5vdXRzdGFuZGluZ19zdW1tYXJ5LnRvdGFsX291dHN0YW5kaW5nID4gMCA/IGBcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiYWxlcnRcIj5cbiAgICAgICAgICAgIDxzdHJvbmc+4pqg77iPIEFjdGlvbiBSZXF1aXJlZDo8L3N0cm9uZz4gVGhlcmUgYXJlIOKCsSR7cmVwb3J0RGF0YS5vdXRzdGFuZGluZ19zdW1tYXJ5LnRvdGFsX291dHN0YW5kaW5nLnRvTG9jYWxlU3RyaW5nKCl9IGluIG91dHN0YW5kaW5nIHBheW1lbnRzIHRoYXQgbmVlZCBhdHRlbnRpb24uXG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgYCA6ICcnfVxuXG4gICAgICAgICAgJHtyZXBvcnREYXRhLnRlbmFudF9zdGF0aXN0aWNzLmV4cGlyaW5nX2NvbnRyYWN0cyA+IDAgPyBgXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImFsZXJ0XCI+XG4gICAgICAgICAgICA8c3Ryb25nPvCfk4UgQ29udHJhY3QgUmVuZXdhbHM6PC9zdHJvbmc+ICR7cmVwb3J0RGF0YS50ZW5hbnRfc3RhdGlzdGljcy5leHBpcmluZ19jb250cmFjdHN9IGNvbnRyYWN0cyBhcmUgZXhwaXJpbmcgaW4gdGhlIG5leHQgMzAgZGF5cy5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICBgIDogJyd9XG5cbiAgICAgICAgICAke29jY3VwYW5jeVJhdGUgPCA4MCA/IGBcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiYWxlcnRcIj5cbiAgICAgICAgICAgIDxzdHJvbmc+8J+PoCBPY2N1cGFuY3kgQWxlcnQ6PC9zdHJvbmc+IEN1cnJlbnQgb2NjdXBhbmN5IHJhdGUgaXMgJHtvY2N1cGFuY3lSYXRlfSUuIENvbnNpZGVyIG1hcmtldGluZyBzdHJhdGVnaWVzIHRvIGluY3JlYXNlIG9jY3VwYW5jeS5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICBgIDogJyd9XG5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9vdGVyXCI+XG4gICAgICAgICAgICA8cD48c3Ryb25nPkomSCBBcGFydG1lbnQgTWFuYWdlbWVudCBTeXN0ZW08L3N0cm9uZz48L3A+XG4gICAgICAgICAgICA8cD5UaGlzIHJlcG9ydCB3YXMgYXV0b21hdGljYWxseSBnZW5lcmF0ZWQgb24gJHtuZXcgRGF0ZSgpLnRvTG9jYWxlRGF0ZVN0cmluZygpfTwvcD5cbiAgICAgICAgICAgIDxwPkZvciBxdWVzdGlvbnMgb3Igc3VwcG9ydCwgcGxlYXNlIGNvbnRhY3QgdGhlIG1hbmFnZW1lbnQgdGVhbS48L3A+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9ib2R5PlxuICAgICAgPC9odG1sPlxuICAgIGBcblxuICAgIGNvbnN0IHRleHRDb250ZW50ID0gYFxuSiZIIEFQQVJUTUVOVCBNT05USExZIFJFUE9SVCAtICR7bW9udGhOYW1lfVxuR2VuZXJhdGVkOiAke25ldyBEYXRlKHJlcG9ydERhdGEucmVwb3J0X3BlcmlvZC5nZW5lcmF0ZWRfYXQpLnRvTG9jYWxlRGF0ZVN0cmluZygpfVxuXG5FWEVDVVRJVkUgU1VNTUFSWVxuPT09PT09PT09PT09PT09PT1cblRvdGFsIFJldmVudWU6IOKCsSR7dG90YWxSZXZlbnVlfSAoJHtyZXZlbnVlR3Jvd3RoID49IDAgPyAnKycgOiAnJ30ke3JldmVudWVHcm93dGh9JSB2cyBsYXN0IG1vbnRoKVxuT2NjdXBhbmN5IFJhdGU6ICR7b2NjdXBhbmN5UmF0ZX0lICgke3JlcG9ydERhdGEub2NjdXBhbmN5X21ldHJpY3Mub2NjdXBpZWRfcm9vbXN9LyR7cmVwb3J0RGF0YS5vY2N1cGFuY3lfbWV0cmljcy50b3RhbF9yb29tc30gcm9vbXMpXG5BY3RpdmUgVGVuYW50czogJHthY3RpdmVUZW5hbnRzfSAoTmV0IGNoYW5nZTogJHtyZXBvcnREYXRhLnRlbmFudF9zdGF0aXN0aWNzLm5ldF90ZW5hbnRfY2hhbmdlID49IDAgPyAnKycgOiAnJ30ke3JlcG9ydERhdGEudGVuYW50X3N0YXRpc3RpY3MubmV0X3RlbmFudF9jaGFuZ2V9KVxuQ29sbGVjdGlvbiBSYXRlOiAke3JlcG9ydERhdGEuZmluYW5jaWFsX3N1bW1hcnkuY29sbGVjdGlvbl9yYXRlfSVcblxuRklOQU5DSUFMIFBFUkZPUk1BTkNFXG49PT09PT09PT09PT09PT09PT09PT1cblRvdGFsIFRyYW5zYWN0aW9uczogJHtyZXBvcnREYXRhLmZpbmFuY2lhbF9zdW1tYXJ5LnRvdGFsX3RyYW5zYWN0aW9uc31cblRvdGFsIEJpbGxlZDog4oKxJHtyZXBvcnREYXRhLmZpbmFuY2lhbF9zdW1tYXJ5LnRvdGFsX2JpbGxlZC50b0xvY2FsZVN0cmluZygpfVxuT3V0c3RhbmRpbmcgQW1vdW50OiDigrEke3JlcG9ydERhdGEub3V0c3RhbmRpbmdfc3VtbWFyeS50b3RhbF9vdXRzdGFuZGluZy50b0xvY2FsZVN0cmluZygpfVxuXG5URU5BTlQgU1RBVElTVElDU1xuPT09PT09PT09PT09PT09PT1cbk5ldyBUZW5hbnRzOiAke3JlcG9ydERhdGEudGVuYW50X3N0YXRpc3RpY3MubmV3X3RlbmFudHN9XG5EZXBhcnRlZCBUZW5hbnRzOiAke3JlcG9ydERhdGEudGVuYW50X3N0YXRpc3RpY3MuZGVwYXJ0ZWRfdGVuYW50c31cbkV4cGlyaW5nIENvbnRyYWN0cyAoMzAgZGF5cyk6ICR7cmVwb3J0RGF0YS50ZW5hbnRfc3RhdGlzdGljcy5leHBpcmluZ19jb250cmFjdHN9XG5cbkJSQU5DSCBQRVJGT1JNQU5DRVxuPT09PT09PT09PT09PT09PT09XG4ke3JlcG9ydERhdGEuYnJhbmNoX3BlcmZvcm1hbmNlLm1hcChicmFuY2ggPT4gXG4gIGAke2JyYW5jaC5icmFuY2hfbmFtZX06ICR7YnJhbmNoLm9jY3VwYW5jeV9yYXRlfSUgb2NjdXBhbmN5LCDigrEke2JyYW5jaC5yZXZlbnVlLnRvTG9jYWxlU3RyaW5nKCl9IHJldmVudWVgXG4pLmpvaW4oJ1xcbicpfVxuXG5UaGlzIHJlcG9ydCB3YXMgYXV0b21hdGljYWxseSBnZW5lcmF0ZWQgYnkgSiZIIEFwYXJ0bWVudCBNYW5hZ2VtZW50IFN5c3RlbS5cbiAgICBgXG5cbiAgICBjb25zdCBtYWlsT3B0aW9ucyA9IHtcbiAgICAgIGZyb206IHByb2Nlc3MuZW52LkVNQUlMX0ZST00gfHwgJ29mZmljaWFsLmpoYXBhcnRtZW50QGdtYWlsLmNvbScsXG4gICAgICB0bzogcmVjaXBpZW50RW1haWwsXG4gICAgICBzdWJqZWN0OiBg8J+TiiBNb250aGx5IEJ1c2luZXNzIFJlcG9ydCAtICR7bW9udGhOYW1lfSB8IEomSCBBcGFydG1lbnRgLFxuICAgICAgdGV4dDogdGV4dENvbnRlbnQsXG4gICAgICBodG1sOiBodG1sQ29udGVudFxuICAgIH1cblxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRyYW5zcG9ydGVyLnNlbmRNYWlsKG1haWxPcHRpb25zKVxuICAgIGNvbnNvbGUubG9nKCdNb250aGx5IHJlcG9ydCBlbWFpbCBzZW50IHN1Y2Nlc3NmdWxseTonLCByZXN1bHQubWVzc2FnZUlkKVxuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgbWVzc2FnZTogJ01vbnRobHkgcmVwb3J0IGVtYWlsIHNlbnQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgIG1lc3NhZ2VJZDogcmVzdWx0Lm1lc3NhZ2VJZFxuICAgIH1cblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNlbmRpbmcgbW9udGhseSByZXBvcnQgZW1haWw6JywgZXJyb3IpXG4gICAgdGhyb3cgZXJyb3JcbiAgfVxufVxuXG4vLyBTZW5kIGJpbGxpbmcgcmVtaW5kZXIgdG8gbWFuYWdlbWVudCBvZmZpY2VcbmNvbnN0IHNlbmRCaWxsaW5nUmVtaW5kZXJUb01hbmFnZW1lbnQgPSBhc3luYyAodGVuYW50cykgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHRyYW5zcG9ydGVyID0gY3JlYXRlVHJhbnNwb3J0ZXIoKTtcbiAgICBcbiAgICBjb25zdCBzdWJqZWN0ID0gYEJpbGwgQ3JlYXRpb24gUmVtaW5kZXIgLSAke3RlbmFudHMubGVuZ3RofSBUZW5hbnQke3RlbmFudHMubGVuZ3RoID4gMSA/ICdzJyA6ICcnfSBOZWVkJHt0ZW5hbnRzLmxlbmd0aCA9PT0gMSA/ICdzJyA6ICcnfSBCaWxsaW5nYDtcbiAgICBcbiAgICAvLyBHcm91cCB0ZW5hbnRzIGJ5IGR1ZSBkYXRlXG4gICAgY29uc3QgdGVuYW50c0J5RHVlRGF0ZSA9IHRlbmFudHMucmVkdWNlKChhY2MsIHRlbmFudCkgPT4ge1xuICAgICAgY29uc3QgZHVlRGF0ZSA9IGZvcm1hdERhdGUodGVuYW50Lm5leHRfYmlsbF9kdWVfZGF0ZSk7XG4gICAgICBpZiAoIWFjY1tkdWVEYXRlXSkge1xuICAgICAgICBhY2NbZHVlRGF0ZV0gPSBbXTtcbiAgICAgIH1cbiAgICAgIGFjY1tkdWVEYXRlXS5wdXNoKHRlbmFudCk7XG4gICAgICByZXR1cm4gYWNjO1xuICAgIH0sIHt9KTtcbiAgICBcbiAgICBjb25zdCBodG1sQ29udGVudCA9IGBcbiAgICAgIDwhRE9DVFlQRSBodG1sPlxuICAgICAgPGh0bWw+XG4gICAgICA8aGVhZD5cbiAgICAgICAgPG1ldGEgY2hhcnNldD1cInV0Zi04XCI+XG4gICAgICAgIDxzdHlsZT5cbiAgICAgICAgICBib2R5IHsgZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmOyBtYXJnaW46IDA7IHBhZGRpbmc6IDIwcHg7IGJhY2tncm91bmQtY29sb3I6ICNmNGY0ZjQ7IH1cbiAgICAgICAgICAuZW1haWwtY29udGFpbmVyIHsgbWF4LXdpZHRoOiA4MDBweDsgbWFyZ2luOiAwIGF1dG87IGJhY2tncm91bmQ6IHdoaXRlOyBib3JkZXItcmFkaXVzOiA4cHg7IG92ZXJmbG93OiBoaWRkZW47IGJveC1zaGFkb3c6IDAgMnB4IDEwcHggcmdiYSgwLDAsMCwwLjEpOyB9XG4gICAgICAgICAgLmhlYWRlciB7IGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICNmZjZiNmIgMCUsICNlZTVhMjQgMTAwJSk7IGNvbG9yOiB3aGl0ZTsgcGFkZGluZzogMzBweDsgdGV4dC1hbGlnbjogY2VudGVyOyB9XG4gICAgICAgICAgLmNvbnRlbnQgeyBwYWRkaW5nOiAzMHB4OyB9XG4gICAgICAgICAgLmFsZXJ0LWJveCB7IGJhY2tncm91bmQ6ICNmZmYzY2Q7IGJvcmRlcjogMnB4IHNvbGlkICNmZmMxMDc7IHBhZGRpbmc6IDIwcHg7IGJvcmRlci1yYWRpdXM6IDhweDsgbWFyZ2luOiAyMHB4IDA7IH1cbiAgICAgICAgICAuYmlsbHMtc2VjdGlvbiB7IG1hcmdpbjogMjBweCAwOyB9XG4gICAgICAgICAgLmR1ZS1kYXRlLWdyb3VwIHsgbWFyZ2luLWJvdHRvbTogMzBweDsgfVxuICAgICAgICAgIC5kdWUtZGF0ZS1oZWFkZXIgeyBiYWNrZ3JvdW5kOiAjZjhmOWZhOyBwYWRkaW5nOiAxNXB4OyBib3JkZXItcmFkaXVzOiA4cHg7IG1hcmdpbi1ib3R0b206IDE1cHg7IH1cbiAgICAgICAgICAuYmlsbC1pdGVtIHsgYmFja2dyb3VuZDogI2ZmZmZmZjsgYm9yZGVyOiAxcHggc29saWQgI2RlZTJlNjsgcGFkZGluZzogMTVweDsgbWFyZ2luLWJvdHRvbTogMTBweDsgYm9yZGVyLXJhZGl1czogNnB4OyBkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IGFsaWduLWl0ZW1zOiBjZW50ZXI7IH1cbiAgICAgICAgICAuYmlsbC1pbmZvIHsgZmxleDogMTsgfVxuICAgICAgICAgIC5iaWxsLWFtb3VudCB7IGZvbnQtd2VpZ2h0OiBib2xkOyBjb2xvcjogI2RjMzU0NTsgfVxuICAgICAgICAgIC5vdmVyZHVlIHsgYm9yZGVyLWxlZnQ6IDRweCBzb2xpZCAjZGMzNTQ1OyB9XG4gICAgICAgICAgLmR1ZS10b2RheSB7IGJvcmRlci1sZWZ0OiA0cHggc29saWQgI2ZkN2UxNDsgfVxuICAgICAgICAgIC5kdWUtc29vbiB7IGJvcmRlci1sZWZ0OiA0cHggc29saWQgI2ZmYzEwNzsgfVxuICAgICAgICAgIC5mb290ZXIgeyBwYWRkaW5nOiAyMHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IGNvbG9yOiAjNjY2OyBib3JkZXItdG9wOiAxcHggc29saWQgI2VlZTsgfVxuICAgICAgICAgIC5zdW1tYXJ5LXN0YXRzIHsgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1hcm91bmQ7IGJhY2tncm91bmQ6ICNmOGY5ZmE7IHBhZGRpbmc6IDIwcHg7IGJvcmRlci1yYWRpdXM6IDhweDsgbWFyZ2luOiAyMHB4IDA7IH1cbiAgICAgICAgICAuc3RhdC1pdGVtIHsgdGV4dC1hbGlnbjogY2VudGVyOyB9XG4gICAgICAgICAgLnN0YXQtbnVtYmVyIHsgZm9udC1zaXplOiAyNHB4OyBmb250LXdlaWdodDogYm9sZDsgY29sb3I6ICNkYzM1NDU7IH1cbiAgICAgICAgICAuc3RhdC1sYWJlbCB7IGZvbnQtc2l6ZTogMTJweDsgY29sb3I6ICM2NjY7IHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7IH1cbiAgICAgICAgPC9zdHlsZT5cbiAgICAgIDwvaGVhZD5cbiAgICAgIDxib2R5PlxuICAgICAgICA8ZGl2IGNsYXNzPVwiZW1haWwtY29udGFpbmVyXCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImhlYWRlclwiPlxuICAgICAgICAgICAgPGgxPvCfk50gQmlsbCBDcmVhdGlvbiBSZW1pbmRlcjwvaDE+XG4gICAgICAgICAgICA8cD5UZW5hbnRzIHJlcXVpcmluZyBiaWxsIGdlbmVyYXRpb248L3A+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRlbnRcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJhbGVydC1ib3hcIj5cbiAgICAgICAgICAgICAgPGgzPuKaoO+4jyBBY3Rpb24gUmVxdWlyZWQ8L2gzPlxuICAgICAgICAgICAgICA8cD5UaGUgZm9sbG93aW5nIHRlbmFudHMnIGJpbGxpbmcgY3ljbGVzIGFyZSBlbmRpbmcgd2l0aGluIHRoZSBuZXh0IDMgZGF5cyBhbmQgbmVlZCBiaWxscyBjcmVhdGVkOjwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwic3VtbWFyeS1zdGF0c1wiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic3RhdC1pdGVtXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInN0YXQtbnVtYmVyXCI+JHt0ZW5hbnRzLmxlbmd0aH08L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic3RhdC1sYWJlbFwiPlRlbmFudHMgTmVlZCBCaWxsaW5nPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic3RhdC1pdGVtXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInN0YXQtbnVtYmVyXCI+JHtmb3JtYXRDdXJyZW5jeSh0ZW5hbnRzLnJlZHVjZSgoc3VtLCB0ZW5hbnQpID0+IHN1bSArIHBhcnNlRmxvYXQodGVuYW50Lm1vbnRobHlfcmVudCB8fCAwKSwgMCkpfTwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzdGF0LWxhYmVsXCI+RXN0aW1hdGVkIFJlbnQgQW1vdW50PC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic3RhdC1pdGVtXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInN0YXQtbnVtYmVyXCI+JHt0ZW5hbnRzLmZpbHRlcih0ZW5hbnQgPT4gdGVuYW50LmRheXNfdW50aWxfZHVlIDw9IDApLmxlbmd0aH08L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic3RhdC1sYWJlbFwiPk92ZXJkdWUgZm9yIEJpbGxpbmc8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImJpbGxzLXNlY3Rpb25cIj5cbiAgICAgICAgICAgICAgJHtPYmplY3QuZW50cmllcyh0ZW5hbnRzQnlEdWVEYXRlKS5tYXAoKFtkdWVEYXRlLCBkYXRlVGVuYW50c10pID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXlzVW50aWxEdWUgPSBkYXRlVGVuYW50c1swXS5kYXlzX3VudGlsX2R1ZTtcbiAgICAgICAgICAgICAgICBsZXQgZHVlRGF0ZUNsYXNzID0gJ2R1ZS1zb29uJztcbiAgICAgICAgICAgICAgICBsZXQgZHVlRGF0ZUxhYmVsID0gYEJpbGwgZHVlIGluICR7ZGF5c1VudGlsRHVlfSBkYXkke2RheXNVbnRpbER1ZSAhPT0gMSA/ICdzJyA6ICcnfWA7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKGRheXNVbnRpbER1ZSA8PSAwKSB7XG4gICAgICAgICAgICAgICAgICBkdWVEYXRlQ2xhc3MgPSAnb3ZlcmR1ZSc7XG4gICAgICAgICAgICAgICAgICBkdWVEYXRlTGFiZWwgPSBgT3ZlcmR1ZSBmb3IgYmlsbGluZyBieSAke01hdGguYWJzKGRheXNVbnRpbER1ZSl9IGRheSR7TWF0aC5hYnMoZGF5c1VudGlsRHVlKSAhPT0gMSA/ICdzJyA6ICcnfWA7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkYXlzVW50aWxEdWUgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgIGR1ZURhdGVDbGFzcyA9ICdkdWUtdG9kYXknO1xuICAgICAgICAgICAgICAgICAgZHVlRGF0ZUxhYmVsID0gJ0JpbGxpbmcgY3ljbGUgZW5kcyB0b2RheSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBgXG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZHVlLWRhdGUtZ3JvdXBcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImR1ZS1kYXRlLWhlYWRlciAke2R1ZURhdGVDbGFzc31cIj5cbiAgICAgICAgICAgICAgICAgICAgICA8aDM+8J+ThSAke2R1ZURhdGV9IC0gJHtkdWVEYXRlTGFiZWx9PC9oMz5cbiAgICAgICAgICAgICAgICAgICAgICA8cD4ke2RhdGVUZW5hbnRzLmxlbmd0aH0gdGVuYW50JHtkYXRlVGVuYW50cy5sZW5ndGggPiAxID8gJ3MnIDogJyd9IOKAoiBFc3RpbWF0ZWQgUmVudDogJHtmb3JtYXRDdXJyZW5jeShkYXRlVGVuYW50cy5yZWR1Y2UoKHN1bSwgdGVuYW50KSA9PiBzdW0gKyBwYXJzZUZsb2F0KHRlbmFudC5tb250aGx5X3JlbnQgfHwgMCksIDApKX08L3A+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAke2RhdGVUZW5hbnRzLm1hcCh0ZW5hbnQgPT4gYFxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJiaWxsLWl0ZW0gJHtkdWVEYXRlQ2xhc3N9XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYmlsbC1pbmZvXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxzdHJvbmc+JHt0ZW5hbnQudGVuYW50X25hbWV9PC9zdHJvbmc+IC0gUm9vbSAke3RlbmFudC5yb29tX251bWJlcn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGJyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8c21hbGw+JHt0ZW5hbnQuYnJhbmNoX25hbWV9IOKAoiBMYXN0IFJlYWRpbmc6ICR7dGVuYW50Lmxhc3RfZWxlY3RyaWNfcmVhZGluZ30ga1doPC9zbWFsbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGJyPjxzbWFsbCBzdHlsZT1cImNvbG9yOiAjMjE5NmYzO1wiPvCfk50gTmVlZCB0byBjcmVhdGUgYmlsbCBmb3IgYmlsbGluZyBwZXJpb2QgZW5kaW5nICR7Zm9ybWF0RGF0ZSh0ZW5hbnQubmV4dF9iaWxsX2R1ZV9kYXRlKX08L3NtYWxsPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYmlsbC1hbW91bnRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgJHtmb3JtYXRDdXJyZW5jeSh0ZW5hbnQubW9udGhseV9yZW50KX08YnI+PHNtYWxsPisgdXRpbGl0aWVzPC9zbWFsbD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICBgKS5qb2luKCcnKX1cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIGA7XG4gICAgICAgICAgICAgIH0pLmpvaW4oJycpfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJiYWNrZ3JvdW5kOiAjZTNmMmZkOyBib3JkZXItbGVmdDogNHB4IHNvbGlkICMyMTk2ZjM7IHBhZGRpbmc6IDIwcHg7IG1hcmdpbjogMjBweCAwO1wiPlxuICAgICAgICAgICAgICA8aDM+8J+TiyBSZWNvbW1lbmRlZCBBY3Rpb25zPC9oMz5cbiAgICAgICAgICAgICAgPHVsPlxuICAgICAgICAgICAgICAgIDxsaT5DcmVhdGUgYmlsbHMgZm9yIHRlbmFudHMgd2hvc2UgYmlsbGluZyBjeWNsZSBlbmRzIHRvZGF5PC9saT5cbiAgICAgICAgICAgICAgICA8bGk+VGFrZSBlbGVjdHJpY2l0eSByZWFkaW5ncyBmb3Igb3ZlcmR1ZSB0ZW5hbnRzIGFuZCBnZW5lcmF0ZSB0aGVpciBiaWxscyBpbW1lZGlhdGVseTwvbGk+XG4gICAgICAgICAgICAgICAgPGxpPlByZXBhcmUgYmlsbHMgZm9yIHRlbmFudHMgd2hvc2UgY3ljbGUgZW5kcyBpbiAxLTMgZGF5czwvbGk+XG4gICAgICAgICAgICAgICAgPGxpPkNoZWNrIHRoZSBcIkdlbmVyYXRlIEJpbGxcIiBidXR0b24gaW4gdGhlIEJpbGxpbmcgcGFnZSBmb3IgZWFjaCB0ZW5hbnQ8L2xpPlxuICAgICAgICAgICAgICAgIDxsaT5TZW5kIGNyZWF0ZWQgYmlsbHMgdG8gdGVuYW50cyB2aWEgZW1haWw8L2xpPlxuICAgICAgICAgICAgICA8L3VsPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImZvb3RlclwiPlxuICAgICAgICAgICAgPHA+VGhpcyBpcyBhbiBhdXRvbWF0ZWQgYmlsbCBjcmVhdGlvbiByZW1pbmRlciBzZW50IGRhaWx5IGF0IDk6MDAgQU08L3A+XG4gICAgICAgICAgICA8cD5HZW5lcmF0ZWQgb246ICR7Zm9ybWF0RGF0ZShuZXcgRGF0ZSgpKX0gYXQgJHtuZXcgRGF0ZSgpLnRvTG9jYWxlVGltZVN0cmluZygpfTwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2JvZHk+XG4gICAgICA8L2h0bWw+XG4gICAgYDtcbiAgICBcbiAgICBjb25zdCB0ZXh0Q29udGVudCA9IGBcbkJJTEwgQ1JFQVRJT04gUkVNSU5ERVIgLSBKJkggQVBBUlRNRU5UIE1BTkFHRU1FTlRcblxuJHt0ZW5hbnRzLmxlbmd0aH0gVGVuYW50JHt0ZW5hbnRzLmxlbmd0aCA+IDEgPyAncycgOiAnJ30gTmVlZCR7dGVuYW50cy5sZW5ndGggPT09IDEgPyAncycgOiAnJ30gQmlsbCBDcmVhdGlvblxuXG5TdW1tYXJ5OlxuLSBUZW5hbnRzIE5lZWRpbmcgQmlsbHM6ICR7dGVuYW50cy5sZW5ndGh9XG4tIEVzdGltYXRlZCBSZW50IEFtb3VudDogJHtmb3JtYXRDdXJyZW5jeSh0ZW5hbnRzLnJlZHVjZSgoc3VtLCB0ZW5hbnQpID0+IHN1bSArIHBhcnNlRmxvYXQodGVuYW50Lm1vbnRobHlfcmVudCB8fCAwKSwgMCkpfVxuLSBPdmVyZHVlIGZvciBCaWxsaW5nOiAke3RlbmFudHMuZmlsdGVyKHRlbmFudCA9PiB0ZW5hbnQuZGF5c191bnRpbF9kdWUgPD0gMCkubGVuZ3RofVxuXG5UZW5hbnRzIGJ5IEJpbGxpbmcgRHVlIERhdGU6XG4ke09iamVjdC5lbnRyaWVzKHRlbmFudHNCeUR1ZURhdGUpLm1hcCgoW2R1ZURhdGUsIGRhdGVUZW5hbnRzXSkgPT4ge1xuICBjb25zdCBkYXlzVW50aWxEdWUgPSBkYXRlVGVuYW50c1swXS5kYXlzX3VudGlsX2R1ZTtcbiAgbGV0IGR1ZURhdGVMYWJlbCA9IGBCaWxsIGR1ZSBpbiAke2RheXNVbnRpbER1ZX0gZGF5JHtkYXlzVW50aWxEdWUgIT09IDEgPyAncycgOiAnJ31gO1xuICBcbiAgaWYgKGRheXNVbnRpbER1ZSA8PSAwKSB7XG4gICAgZHVlRGF0ZUxhYmVsID0gYE92ZXJkdWUgZm9yIGJpbGxpbmcgYnkgJHtNYXRoLmFicyhkYXlzVW50aWxEdWUpfSBkYXkke01hdGguYWJzKGRheXNVbnRpbER1ZSkgIT09IDEgPyAncycgOiAnJ31gO1xuICB9IGVsc2UgaWYgKGRheXNVbnRpbER1ZSA9PT0gMCkge1xuICAgIGR1ZURhdGVMYWJlbCA9ICdCaWxsaW5nIGN5Y2xlIGVuZHMgdG9kYXknO1xuICB9XG4gIFxuICByZXR1cm4gYFxuJHtkdWVEYXRlfSAtICR7ZHVlRGF0ZUxhYmVsfVxuJHtkYXRlVGVuYW50cy5tYXAodGVuYW50ID0+IFxuICBgICDigKIgJHt0ZW5hbnQudGVuYW50X25hbWV9IC0gUm9vbSAke3RlbmFudC5yb29tX251bWJlcn0gKCR7dGVuYW50LmJyYW5jaF9uYW1lfSlcbiAgICBSZW50OiAke2Zvcm1hdEN1cnJlbmN5KHRlbmFudC5tb250aGx5X3JlbnQpfSArIHV0aWxpdGllc1xuICAgIExhc3QgRWxlY3RyaWMgUmVhZGluZzogJHt0ZW5hbnQubGFzdF9lbGVjdHJpY19yZWFkaW5nfSBrV2hcbiAgICBBY3Rpb246IENyZWF0ZSBiaWxsIGZvciBiaWxsaW5nIHBlcmlvZCBlbmRpbmcgJHtmb3JtYXREYXRlKHRlbmFudC5uZXh0X2JpbGxfZHVlX2RhdGUpfWBcbikuam9pbignXFxuJyl9YDtcbn0pLmpvaW4oJ1xcbicpfVxuXG5SZWNvbW1lbmRlZCBBY3Rpb25zOlxuLSBDcmVhdGUgYmlsbHMgZm9yIHRlbmFudHMgd2hvc2UgYmlsbGluZyBjeWNsZSBlbmRzIHRvZGF5XG4tIFRha2UgZWxlY3RyaWNpdHkgcmVhZGluZ3MgZm9yIG92ZXJkdWUgdGVuYW50cyBhbmQgZ2VuZXJhdGUgdGhlaXIgYmlsbHMgaW1tZWRpYXRlbHlcbi0gUHJlcGFyZSBiaWxscyBmb3IgdGVuYW50cyB3aG9zZSBjeWNsZSBlbmRzIGluIDEtMyBkYXlzXG4tIENoZWNrIHRoZSBcIkdlbmVyYXRlIEJpbGxcIiBidXR0b24gaW4gdGhlIEJpbGxpbmcgcGFnZSBmb3IgZWFjaCB0ZW5hbnRcbi0gU2VuZCBjcmVhdGVkIGJpbGxzIHRvIHRlbmFudHMgdmlhIGVtYWlsXG5cbkdlbmVyYXRlZCBvbjogJHtmb3JtYXREYXRlKG5ldyBEYXRlKCkpfSBhdCAke25ldyBEYXRlKCkudG9Mb2NhbGVUaW1lU3RyaW5nKCl9XG4gICAgYDtcblxuICAgIGNvbnN0IG1haWxPcHRpb25zID0ge1xuICAgICAgZnJvbTogcHJvY2Vzcy5lbnYuRU1BSUxfVVNFUiB8fCAnbm9yZXBseUBqaGFwYXJ0bWVudC5jb20nLFxuICAgICAgdG86ICdvZmZpY2lhbC5qaGFwYXJ0bWVudEBnbWFpbC5jb20nLFxuICAgICAgc3ViamVjdDogc3ViamVjdCxcbiAgICAgIHRleHQ6IHRleHRDb250ZW50LFxuICAgICAgaHRtbDogaHRtbENvbnRlbnRcbiAgICB9O1xuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdHJhbnNwb3J0ZXIuc2VuZE1haWwobWFpbE9wdGlvbnMpO1xuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgbWVzc2FnZUlkOiByZXN1bHQubWVzc2FnZUlkLFxuICAgICAgbWVzc2FnZTogJ0JpbGwgY3JlYXRpb24gcmVtaW5kZXIgc2VudCB0byBtYW5hZ2VtZW50IHN1Y2Nlc3NmdWxseScsXG4gICAgICB0ZW5hbnRzQ291bnQ6IHRlbmFudHMubGVuZ3RoXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdCaWxsaW5nIHJlbWluZGVyIGVtYWlsIHNlbmRpbmcgZXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlXG4gICAgfTtcbiAgfVxufTtcblxuLy8gR2VuZXJhdGUgSFRNTCBmb3IgZmluYWwgYmlsbCB0ZW1wbGF0ZSB3aXRoIGRlcG9zaXQgaW5mb3JtYXRpb25cbmNvbnN0IGdlbmVyYXRlRmluYWxCaWxsSFRNTCA9IChiaWxsKSA9PiB7XG4gIGNvbnN0IGVsZWN0cmljUmVhZGluZyA9IGJpbGwuZWxlY3RyaWNfcHJlc2VudF9yZWFkaW5nICYmIGJpbGwuZWxlY3RyaWNfcHJldmlvdXNfcmVhZGluZyBcbiAgICA/IGAke2JpbGwuZWxlY3RyaWNfcHJldmlvdXNfcmVhZGluZ30g4oaSICR7YmlsbC5lbGVjdHJpY19wcmVzZW50X3JlYWRpbmd9YCBcbiAgICA6ICdOL0EnO1xuICBcbiAgY29uc3QgZWxlY3RyaWNDb25zdW1wdGlvbiA9IGJpbGwuZWxlY3RyaWNfY29uc3VtcHRpb24gfHwgMDtcbiAgXG4gIC8vIEdldCBkZXBvc2l0IGluZm9ybWF0aW9uIGlmIGF2YWlsYWJsZVxuICBjb25zdCBkZXBvc2l0QXBwbGllZCA9IHBhcnNlRmxvYXQoYmlsbC5kZXBvc2l0X2FwcGxpZWQgfHwgMCk7XG4gIGNvbnN0IG9yaWdpbmFsQmlsbEFtb3VudCA9IHBhcnNlRmxvYXQoYmlsbC5vcmlnaW5hbF9iaWxsX2Ftb3VudCB8fCBiaWxsLnRvdGFsX2Ftb3VudCk7XG4gIGNvbnN0IGhhc0RlcG9zaXRBcHBsaWVkID0gZGVwb3NpdEFwcGxpZWQgPiAwO1xuICBcbiAgcmV0dXJuIGBcbiAgICA8IURPQ1RZUEUgaHRtbD5cbiAgICA8aHRtbD5cbiAgICA8aGVhZD5cbiAgICAgIDxtZXRhIGNoYXJzZXQ9XCJ1dGYtOFwiPlxuICAgICAgPHN0eWxlPlxuICAgICAgICBib2R5IHsgZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmOyBtYXJnaW46IDA7IHBhZGRpbmc6IDIwcHg7IGJhY2tncm91bmQtY29sb3I6ICNmNGY0ZjQ7IH1cbiAgICAgICAgLmJpbGwtY29udGFpbmVyIHsgbWF4LXdpZHRoOiA2MDBweDsgbWFyZ2luOiAwIGF1dG87IGJhY2tncm91bmQ6IHdoaXRlOyBib3JkZXItcmFkaXVzOiA4cHg7IG92ZXJmbG93OiBoaWRkZW47IGJveC1zaGFkb3c6IDAgMnB4IDEwcHggcmdiYSgwLDAsMCwwLjEpOyB9XG4gICAgICAgIC5oZWFkZXIgeyBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjZTUzOTM1IDAlLCAjOGUyNGFhIDEwMCUpOyBjb2xvcjogd2hpdGU7IHBhZGRpbmc6IDMwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsgfVxuICAgICAgICAuaGVhZGVyIGgxIHsgbWFyZ2luOiAwOyBmb250LXNpemU6IDI4cHg7IH1cbiAgICAgICAgLmhlYWRlciBwIHsgbWFyZ2luOiA1cHggMCAwIDA7IG9wYWNpdHk6IDAuOTsgfVxuICAgICAgICAuZmluYWwtYmlsbC1iYWRnZSB7IGJhY2tncm91bmQ6ICNmZjUyNTI7IGNvbG9yOiB3aGl0ZTsgcGFkZGluZzogNXB4IDEwcHg7IGJvcmRlci1yYWRpdXM6IDRweDsgZm9udC1zaXplOiAxNHB4OyBtYXJnaW4tdG9wOiAxMHB4OyBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IH1cbiAgICAgICAgLmNvbnRlbnQgeyBwYWRkaW5nOiAzMHB4OyB9XG4gICAgICAgIC5iaWxsLWluZm8geyBiYWNrZ3JvdW5kOiAjZjhmOWZhOyBwYWRkaW5nOiAyMHB4OyBib3JkZXItcmFkaXVzOiA4cHg7IG1hcmdpbi1ib3R0b206IDI1cHg7IH1cbiAgICAgICAgLmJpbGwtaW5mbyBoMyB7IG1hcmdpbjogMCAwIDE1cHggMDsgY29sb3I6ICMzMzM7IH1cbiAgICAgICAgLmluZm8tcm93IHsgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBtYXJnaW4tYm90dG9tOiAxMHB4OyB9XG4gICAgICAgIC5pbmZvLWxhYmVsIHsgZm9udC13ZWlnaHQ6IGJvbGQ7IGNvbG9yOiAjNjY2OyB9XG4gICAgICAgIC5pbmZvLXZhbHVlIHsgY29sb3I6ICMzMzM7IH1cbiAgICAgICAgLmNoYXJnZXMtc2VjdGlvbiB7IG1hcmdpbi1ib3R0b206IDI1cHg7IH1cbiAgICAgICAgLmNoYXJnZXMtc2VjdGlvbiBoMyB7IGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjZTUzOTM1OyBwYWRkaW5nLWJvdHRvbTogMTBweDsgbWFyZ2luLWJvdHRvbTogMjBweDsgY29sb3I6ICMzMzM7IH1cbiAgICAgICAgLmNoYXJnZS1pdGVtIHsgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBwYWRkaW5nOiAxNXB4OyBtYXJnaW4tYm90dG9tOiAxMHB4OyBib3JkZXItcmFkaXVzOiA2cHg7IH1cbiAgICAgICAgLmNoYXJnZS1yZW50IHsgYmFja2dyb3VuZDogI2UzZjJmZDsgYm9yZGVyLWxlZnQ6IDRweCBzb2xpZCAjMjE5NmYzOyB9XG4gICAgICAgIC5jaGFyZ2UtZWxlY3RyaWMgeyBiYWNrZ3JvdW5kOiAjZmZmM2UwOyBib3JkZXItbGVmdDogNHB4IHNvbGlkICNmZjk4MDA7IH1cbiAgICAgICAgLmNoYXJnZS13YXRlciB7IGJhY2tncm91bmQ6ICNlOGY1ZTg7IGJvcmRlci1sZWZ0OiA0cHggc29saWQgIzRjYWY1MDsgfVxuICAgICAgICAuZGVwb3NpdC1zZWN0aW9uIHsgYmFja2dyb3VuZDogI2U4ZWFmNjsgcGFkZGluZzogMjBweDsgYm9yZGVyLXJhZGl1czogOHB4OyBtYXJnaW4tYm90dG9tOiAyNXB4OyBib3JkZXItbGVmdDogNHB4IHNvbGlkICMzZjUxYjU7IH1cbiAgICAgICAgLmRlcG9zaXQtcm93IHsgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBtYXJnaW4tYm90dG9tOiAxMHB4OyB9XG4gICAgICAgIC50b3RhbC1zZWN0aW9uIHsgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgI2U1MzkzNSAwJSwgIzhlMjRhYSAxMDAlKTsgY29sb3I6IHdoaXRlOyBwYWRkaW5nOiAyMHB4OyBib3JkZXItcmFkaXVzOiA4cHg7IHRleHQtYWxpZ246IGNlbnRlcjsgfVxuICAgICAgICAudG90YWwtYW1vdW50IHsgZm9udC1zaXplOiAzMnB4OyBmb250LXdlaWdodDogYm9sZDsgbWFyZ2luOiAxMHB4IDA7IH1cbiAgICAgICAgLmZvb3RlciB7IHBhZGRpbmc6IDIwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsgY29sb3I6ICM2NjY7IGJvcmRlci10b3A6IDFweCBzb2xpZCAjZWVlOyB9XG4gICAgICAgIC5wYXltZW50LW5vdGUgeyBiYWNrZ3JvdW5kOiAjZmZlYmVlOyBib3JkZXI6IDFweCBzb2xpZCAjZmZjZGQyOyBwYWRkaW5nOiAxNXB4OyBib3JkZXItcmFkaXVzOiA2cHg7IG1hcmdpbjogMjBweCAwOyB9XG4gICAgICA8L3N0eWxlPlxuICAgIDwvaGVhZD5cbiAgICA8Ym9keT5cbiAgICAgIDxkaXYgY2xhc3M9XCJiaWxsLWNvbnRhaW5lclwiPlxuICAgICAgICA8IS0tIEhlYWRlciAtLT5cbiAgICAgICAgPGRpdiBjbGFzcz1cImhlYWRlclwiPlxuICAgICAgICAgIDxoMT4ke2JpbGwuYnJhbmNoX25hbWUgfHwgJ0pIIEFQQVJUTUVOVCd9PC9oMT5cbiAgICAgICAgICA8cD4ke2JpbGwuYnJhbmNoX2FkZHJlc3MgfHwgJ1BhdGluLWF5LCBQcm9zcGVyaWRhZCwgQWd1c2FuIGRlbCBTdXInfTwvcD5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmluYWwtYmlsbC1iYWRnZVwiPkZJTkFMIEJJTEw8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgPCEtLSBDb250ZW50IC0tPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiY29udGVudFwiPlxuICAgICAgICAgIDwhLS0gQmlsbCBJbmZvcm1hdGlvbiAtLT5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiYmlsbC1pbmZvXCI+XG4gICAgICAgICAgICA8aDM+RmluYWwgQmlsbCBJbmZvcm1hdGlvbjwvaDM+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaW5mby1yb3dcIj5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJpbmZvLWxhYmVsXCI+VGVuYW50IE5hbWU6PC9zcGFuPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImluZm8tdmFsdWVcIj4ke2JpbGwudGVuYW50X25hbWV9PC9zcGFuPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaW5mby1yb3dcIj5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJpbmZvLWxhYmVsXCI+Um9vbSBOdW1iZXI6PC9zcGFuPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImluZm8tdmFsdWVcIj4ke2JpbGwucm9vbV9udW1iZXJ9PC9zcGFuPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaW5mby1yb3dcIj5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJpbmZvLWxhYmVsXCI+RmluYWwgQmlsbCBQZXJpb2Q6PC9zcGFuPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImluZm8tdmFsdWVcIj4ke2Zvcm1hdERhdGUoYmlsbC5yZW50X2Zyb20pfSAtICR7Zm9ybWF0RGF0ZShiaWxsLnJlbnRfdG8pfTwvc3Bhbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImluZm8tcm93XCI+XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiaW5mby1sYWJlbFwiPkJpbGwgRGF0ZTo8L3NwYW4+XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiaW5mby12YWx1ZVwiPiR7Zm9ybWF0RGF0ZShiaWxsLmJpbGxfZGF0ZSl9PC9zcGFuPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaW5mby1yb3dcIj5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJpbmZvLWxhYmVsXCI+RHVlIERhdGU6PC9zcGFuPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImluZm8tdmFsdWVcIj4ke2Zvcm1hdERhdGUoYmlsbC5yZW50X3RvKX08L3NwYW4+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIDwhLS0gQ2hhcmdlcyBCcmVha2Rvd24gLS0+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImNoYXJnZXMtc2VjdGlvblwiPlxuICAgICAgICAgICAgPGgzPkNoYXJnZXMgQnJlYWtkb3duPC9oMz5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgPCEtLSBSZW50IC0tPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNoYXJnZS1pdGVtIGNoYXJnZS1yZW50XCI+XG4gICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgPHN0cm9uZz5Qcm9yYXRlZCBSZW50PC9zdHJvbmc+XG4gICAgICAgICAgICAgICAgPGJyPjxzbWFsbD5QZXJpb2Q6ICR7Zm9ybWF0RGF0ZShiaWxsLnJlbnRfZnJvbSl9IC0gJHtmb3JtYXREYXRlKGJpbGwucmVudF90byl9PC9zbWFsbD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJ0ZXh0LWFsaWduOiByaWdodDtcIj5cbiAgICAgICAgICAgICAgICA8c3Ryb25nPiR7Zm9ybWF0Q3VycmVuY3koYmlsbC5yZW50X2Ftb3VudCl9PC9zdHJvbmc+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIDwhLS0gRWxlY3RyaWMgLS0+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2hhcmdlLWl0ZW0gY2hhcmdlLWVsZWN0cmljXCI+XG4gICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgPHN0cm9uZz5FbGVjdHJpY2l0eTwvc3Ryb25nPlxuICAgICAgICAgICAgICAgIDxicj48c21hbGw+UmVhZGluZzogJHtlbGVjdHJpY1JlYWRpbmd9ICgke2VsZWN0cmljQ29uc3VtcHRpb259IGtXaCk8L3NtYWxsPlxuICAgICAgICAgICAgICAgIDxicj48c21hbGw+UmF0ZTog4oKxJHtiaWxsLmVsZWN0cmljX3JhdGVfcGVyX2t3aH0va1doPC9zbWFsbD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJ0ZXh0LWFsaWduOiByaWdodDtcIj5cbiAgICAgICAgICAgICAgICA8c3Ryb25nPiR7Zm9ybWF0Q3VycmVuY3koYmlsbC5lbGVjdHJpY19hbW91bnQgfHwgMCl9PC9zdHJvbmc+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIDwhLS0gV2F0ZXIgLS0+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2hhcmdlLWl0ZW0gY2hhcmdlLXdhdGVyXCI+XG4gICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgPHN0cm9uZz5XYXRlcjwvc3Ryb25nPlxuICAgICAgICAgICAgICAgIDxicj48c21hbGw+Rml4ZWQgY2hhcmdlPC9zbWFsbD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJ0ZXh0LWFsaWduOiByaWdodDtcIj5cbiAgICAgICAgICAgICAgICA8c3Ryb25nPiR7Zm9ybWF0Q3VycmVuY3koYmlsbC53YXRlcl9hbW91bnQpfTwvc3Ryb25nPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAke2JpbGwuZXh0cmFfZmVlX2Ftb3VudCA+IDAgPyBgXG4gICAgICAgICAgICA8IS0tIEV4dHJhIEZlZXMgLS0+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2hhcmdlLWl0ZW1cIiBzdHlsZT1cImJhY2tncm91bmQ6ICNmM2U1ZjU7IGJvcmRlci1sZWZ0OiA0cHggc29saWQgIzljMjdiMDtcIj5cbiAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICA8c3Ryb25nPkV4dHJhIEZlZXM8L3N0cm9uZz5cbiAgICAgICAgICAgICAgICA8YnI+PHNtYWxsPiR7YmlsbC5leHRyYV9mZWVfZGVzY3JpcHRpb24gfHwgJ0FkZGl0aW9uYWwgY2hhcmdlcyd9PC9zbWFsbD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJ0ZXh0LWFsaWduOiByaWdodDtcIj5cbiAgICAgICAgICAgICAgICA8c3Ryb25nPiR7Zm9ybWF0Q3VycmVuY3koYmlsbC5leHRyYV9mZWVfYW1vdW50KX08L3N0cm9uZz5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIGAgOiAnJ31cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICR7aGFzRGVwb3NpdEFwcGxpZWQgPyBgXG4gICAgICAgICAgPCEtLSBEZXBvc2l0IEFwcGxpZWQgU2VjdGlvbiAtLT5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVwb3NpdC1zZWN0aW9uXCI+XG4gICAgICAgICAgICA8aDM+RGVwb3NpdCBBcHBsaWVkPC9oMz5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZXBvc2l0LXJvd1wiPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImluZm8tbGFiZWxcIj5PcmlnaW5hbCBCaWxsIEFtb3VudDo8L3NwYW4+XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiaW5mby12YWx1ZVwiPiR7Zm9ybWF0Q3VycmVuY3kob3JpZ2luYWxCaWxsQW1vdW50KX08L3NwYW4+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZXBvc2l0LXJvd1wiPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImluZm8tbGFiZWxcIj5EZXBvc2l0IEFwcGxpZWQ6PC9zcGFuPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImluZm8tdmFsdWVcIj4tICR7Zm9ybWF0Q3VycmVuY3koZGVwb3NpdEFwcGxpZWQpfTwvc3Bhbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlcG9zaXQtcm93XCIgc3R5bGU9XCJib3JkZXItdG9wOiAxcHggc29saWQgI2NjYzsgcGFkZGluZy10b3A6IDEwcHg7IGZvbnQtd2VpZ2h0OiBib2xkO1wiPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImluZm8tbGFiZWxcIj5SZW1haW5pbmcgQmFsYW5jZSBEdWU6PC9zcGFuPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImluZm8tdmFsdWVcIj4ke2Zvcm1hdEN1cnJlbmN5KGJpbGwudG90YWxfYW1vdW50KX08L3NwYW4+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICBgIDogJyd9XG5cbiAgICAgICAgICA8IS0tIFRvdGFsIC0tPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0b3RhbC1zZWN0aW9uXCI+XG4gICAgICAgICAgICA8ZGl2PlRvdGFsIEFtb3VudCBEdWU8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0b3RhbC1hbW91bnRcIj4ke2Zvcm1hdEN1cnJlbmN5KGJpbGwudG90YWxfYW1vdW50KX08L2Rpdj5cbiAgICAgICAgICAgIDxkaXY+U3RhdHVzOiAkeyhiaWxsLnN0YXR1cyB8fCAnUEVORElORycpLnRvVXBwZXJDYXNlKCl9PC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICA8IS0tIFBheW1lbnQgTm90ZSAtLT5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwicGF5bWVudC1ub3RlXCI+XG4gICAgICAgICAgICA8c3Ryb25nPklNUE9SVEFOVDogRmluYWwgQmlsbCBQYXltZW50PC9zdHJvbmc+PGJyPlxuICAgICAgICAgICAgVGhpcyBpcyB5b3VyIEZJTkFMIEJJTEwgZm9yIHlvdXIgdGVuYW5jeS4gUGxlYXNlIHNldHRsZSB0aGlzIGFtb3VudCB0byBjb21wbGV0ZSB5b3VyIG1vdmUtb3V0IHByb2Nlc3MuXG4gICAgICAgICAgICBZb3VyIHJvb20gd2lsbCBvbmx5IGJlIG9mZmljaWFsbHkgdmFjYXRlZCBhbmQgeW91ciBjb250cmFjdCB0ZXJtaW5hdGVkIGFmdGVyIHRoaXMgYmlsbCBpcyBwYWlkIGluIGZ1bGwuXG4gICAgICAgICAgICAke2hhc0RlcG9zaXRBcHBsaWVkID8gYFlvdXIgc2VjdXJpdHkgZGVwb3NpdCBvZiAke2Zvcm1hdEN1cnJlbmN5KGRlcG9zaXRBcHBsaWVkKX0gaGFzIGJlZW4gYXBwbGllZCB0byByZWR1Y2UgdGhlIG9yaWdpbmFsIGJpbGwgYW1vdW50LmAgOiAnJ31cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgPCEtLSBGb290ZXIgLS0+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJmb290ZXJcIj5cbiAgICAgICAgICA8cD5UaGlzIGlzIGFuIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVkIGZpbmFsIGJpbGwuIEZvciBxdWVzdGlvbnMgb3IgY29uY2VybnMsIHBsZWFzZSBjb250YWN0IHRoZSBtYW5hZ2VtZW50IG9mZmljZS48L3A+XG4gICAgICAgICAgPHA+PHN0cm9uZz5HZW5lcmF0ZWQgb246PC9zdHJvbmc+ICR7Zm9ybWF0RGF0ZShuZXcgRGF0ZSgpKX08L3A+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9ib2R5PlxuICAgIDwvaHRtbD5cbiAgYDtcbn07XG5cbi8vIFNlbmQgZmluYWwgYmlsbCB0byB0ZW5hbnQgdmlhIGVtYWlsXG5jb25zdCBzZW5kRmluYWxCaWxsVG9UZW5hbnQgPSBhc3luYyAoYmlsbCwgcmVjaXBpZW50RW1haWwpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB0cmFuc3BvcnRlciA9IGNyZWF0ZVRyYW5zcG9ydGVyKCk7XG4gICAgXG4gICAgLy8gRGV0ZXJtaW5lIGlmIGRlcG9zaXQgd2FzIGFwcGxpZWRcbiAgICBjb25zdCBkZXBvc2l0QXBwbGllZCA9IHBhcnNlRmxvYXQoYmlsbC5kZXBvc2l0X2FwcGxpZWQgfHwgMCk7XG4gICAgY29uc3QgaGFzRGVwb3NpdEFwcGxpZWQgPSBkZXBvc2l0QXBwbGllZCA+IDA7XG4gICAgXG4gICAgY29uc3Qgc3ViamVjdCA9IGBGSU5BTCBCSUxMIC0gUm9vbSAke2JpbGwucm9vbV9udW1iZXJ9IC0gTW92ZSBPdXRgO1xuICAgIGNvbnN0IGh0bWxDb250ZW50ID0gZ2VuZXJhdGVGaW5hbEJpbGxIVE1MKGJpbGwpO1xuICAgIFxuICAgIGxldCB0ZXh0TWVzc2FnZSA9IGBcbkRlYXIgJHtiaWxsLnRlbmFudF9uYW1lfSxcblxuVGhpcyBpcyB5b3VyIEZJTkFMIEJJTEwgZm9yIFJvb20gJHtiaWxsLnJvb21fbnVtYmVyfSBhdCAke2JpbGwuYnJhbmNoX25hbWUgfHwgJ0pIIEFQQVJUTUVOVCd9LlxuXG5GaW5hbCBCaWxsIFBlcmlvZDogJHtmb3JtYXREYXRlKGJpbGwucmVudF9mcm9tKX0gLSAke2Zvcm1hdERhdGUoYmlsbC5yZW50X3RvKX1cbkJpbGwgRGF0ZTogJHtmb3JtYXREYXRlKGJpbGwuYmlsbF9kYXRlKX1cbkR1ZSBEYXRlOiAke2Zvcm1hdERhdGUoYmlsbC5yZW50X3RvKX1cblxuQ0hBUkdFUyBCUkVBS0RPV046XG4tIFByb3JhdGVkIFJlbnQ6ICR7Zm9ybWF0Q3VycmVuY3koYmlsbC5yZW50X2Ftb3VudCl9XG4tIEVsZWN0cmljaXR5OiAke2Zvcm1hdEN1cnJlbmN5KGJpbGwuZWxlY3RyaWNfYW1vdW50IHx8IDApfVxuLSBXYXRlcjogJHtmb3JtYXRDdXJyZW5jeShiaWxsLndhdGVyX2Ftb3VudCl9XG4ke2JpbGwuZXh0cmFfZmVlX2Ftb3VudCA+IDAgPyBgLSBFeHRyYSBGZWVzICgke2JpbGwuZXh0cmFfZmVlX2Rlc2NyaXB0aW9uIHx8ICdBZGRpdGlvbmFsIGNoYXJnZXMnfSk6ICR7Zm9ybWF0Q3VycmVuY3koYmlsbC5leHRyYV9mZWVfYW1vdW50KX1cXG5gIDogJyd9XG5cbiR7aGFzRGVwb3NpdEFwcGxpZWQgPyBgXG5ERVBPU0lUIEFQUExJRUQ6XG4tIE9yaWdpbmFsIEJpbGwgQW1vdW50OiAke2Zvcm1hdEN1cnJlbmN5KHBhcnNlRmxvYXQoYmlsbC5vcmlnaW5hbF9iaWxsX2Ftb3VudCB8fCBiaWxsLnRvdGFsX2Ftb3VudCkpfVxuLSBEZXBvc2l0IEFwcGxpZWQ6IC0gJHtmb3JtYXRDdXJyZW5jeShkZXBvc2l0QXBwbGllZCl9XG4tIFJlbWFpbmluZyBCYWxhbmNlIER1ZTogJHtmb3JtYXRDdXJyZW5jeShiaWxsLnRvdGFsX2Ftb3VudCl9XG5gIDogJyd9XG5cblRPVEFMIEFNT1VOVCBEVUU6ICR7Zm9ybWF0Q3VycmVuY3koYmlsbC50b3RhbF9hbW91bnQpfVxuXG5JTVBPUlRBTlQ6IFRoaXMgaXMgeW91ciBGSU5BTCBCSUxMLiBQbGVhc2Ugc2V0dGxlIHRoaXMgYW1vdW50IHRvIGNvbXBsZXRlIHlvdXIgbW92ZS1vdXQgcHJvY2Vzcy5cbllvdXIgcm9vbSB3aWxsIG9ubHkgYmUgb2ZmaWNpYWxseSB2YWNhdGVkIGFuZCB5b3VyIGNvbnRyYWN0IHRlcm1pbmF0ZWQgYWZ0ZXIgdGhpcyBiaWxsIGlzIHBhaWQgaW4gZnVsbC5cbiR7aGFzRGVwb3NpdEFwcGxpZWQgPyBgWW91ciBzZWN1cml0eSBkZXBvc2l0IG9mICR7Zm9ybWF0Q3VycmVuY3koZGVwb3NpdEFwcGxpZWQpfSBoYXMgYmVlbiBhcHBsaWVkIHRvIHJlZHVjZSB0aGUgb3JpZ2luYWwgYmlsbCBhbW91bnQuYCA6ICcnfVxuXG5Gb3IgcXVlc3Rpb25zIG9yIGNvbmNlcm5zLCBwbGVhc2UgY29udGFjdCB0aGUgbWFuYWdlbWVudCBvZmZpY2UuXG5cblRoYW5rIHlvdSBmb3IgY2hvb3NpbmcgJHtiaWxsLmJyYW5jaF9uYW1lIHx8ICdKSCBBUEFSVE1FTlQnfS5cbmA7XG5cbiAgICBjb25zdCBtYWlsT3B0aW9ucyA9IHtcbiAgICAgIGZyb206IHByb2Nlc3MuZW52LkVNQUlMX1VTRVIgfHwgJ29mZmljaWFsLmpoYXBhcnRtZW50QGdtYWlsLmNvbScsXG4gICAgICB0bzogcmVjaXBpZW50RW1haWwsXG4gICAgICBzdWJqZWN0OiBzdWJqZWN0LFxuICAgICAgdGV4dDogdGV4dE1lc3NhZ2UsXG4gICAgICBodG1sOiBodG1sQ29udGVudFxuICAgIH07XG5cbiAgICBhd2FpdCB0cmFuc3BvcnRlci5zZW5kTWFpbChtYWlsT3B0aW9ucyk7XG4gICAgY29uc29sZS5sb2coYOKchSBGaW5hbCBiaWxsIGVtYWlsIHNlbnQgdG8gJHtyZWNpcGllbnRFbWFpbH1gKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzZW5kaW5nIGZpbmFsIGJpbGwgZW1haWw6JywgZXJyb3IpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufTtcblxuLy8gU2VuZCByZWZ1bmQgbm90aWZpY2F0aW9uIGVtYWlsIHRvIHRlbmFudFxuY29uc3Qgc2VuZFJlZnVuZE5vdGlmaWNhdGlvbkVtYWlsID0gYXN5bmMgKGJpbGwsIHJlY2lwaWVudEVtYWlsLCByZWZ1bmRBbW91bnQpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB0cmFuc3BvcnRlciA9IGNyZWF0ZVRyYW5zcG9ydGVyKCk7XG4gICAgXG4gICAgY29uc3Qgc3ViamVjdCA9IGDwn5KwIFJlZnVuZCBEdWUgLSBSb29tICR7YmlsbC5yb29tX251bWJlcn0gLSBNb3ZlIE91dGA7XG4gICAgXG4gICAgY29uc3QgaHRtbENvbnRlbnQgPSBgXG4gICAgICA8IURPQ1RZUEUgaHRtbD5cbiAgICAgIDxodG1sPlxuICAgICAgPGhlYWQ+XG4gICAgICAgIDxtZXRhIGNoYXJzZXQ9XCJ1dGYtOFwiPlxuICAgICAgICA8c3R5bGU+XG4gICAgICAgICAgYm9keSB7IGZvbnQtZmFtaWx5OiBBcmlhbCwgc2Fucy1zZXJpZjsgbWFyZ2luOiAwOyBwYWRkaW5nOiAyMHB4OyBiYWNrZ3JvdW5kLWNvbG9yOiAjZjRmNGY0OyB9XG4gICAgICAgICAgLmVtYWlsLWNvbnRhaW5lciB7IG1heC13aWR0aDogNjAwcHg7IG1hcmdpbjogMCBhdXRvOyBiYWNrZ3JvdW5kOiB3aGl0ZTsgYm9yZGVyLXJhZGl1czogOHB4OyBvdmVyZmxvdzogaGlkZGVuOyBib3gtc2hhZG93OiAwIDJweCAxMHB4IHJnYmEoMCwwLDAsMC4xKTsgfVxuICAgICAgICAgIC5oZWFkZXIgeyBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjMjhhNzQ1IDAlLCAjMjBjOTk3IDEwMCUpOyBjb2xvcjogd2hpdGU7IHBhZGRpbmc6IDMwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsgfVxuICAgICAgICAgIC5jb250ZW50IHsgcGFkZGluZzogMzBweDsgfVxuICAgICAgICAgIC5yZWZ1bmQtaW5mbyB7IGJhY2tncm91bmQ6ICNlOGY1ZTg7IGJvcmRlci1sZWZ0OiA0cHggc29saWQgIzI4YTc0NTsgcGFkZGluZzogMjBweDsgbWFyZ2luOiAyMHB4IDA7IGJvcmRlci1yYWRpdXM6IDhweDsgfVxuICAgICAgICAgIC5iaWxsLWluZm8geyBiYWNrZ3JvdW5kOiAjZjhmOWZhOyBwYWRkaW5nOiAyMHB4OyBtYXJnaW46IDIwcHggMDsgYm9yZGVyLXJhZGl1czogOHB4OyB9XG4gICAgICAgICAgLmFtb3VudC1ib3ggeyBiYWNrZ3JvdW5kOiAjZDRlZGRhOyBib3JkZXI6IDJweCBzb2xpZCAjMjhhNzQ1OyBwYWRkaW5nOiAyMHB4OyBib3JkZXItcmFkaXVzOiA4cHg7IHRleHQtYWxpZ246IGNlbnRlcjsgbWFyZ2luOiAyMHB4IDA7IH1cbiAgICAgICAgICAuZm9vdGVyIHsgcGFkZGluZzogMjBweDsgdGV4dC1hbGlnbjogY2VudGVyOyBjb2xvcjogIzY2NjsgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNlZWU7IH1cbiAgICAgICAgPC9zdHlsZT5cbiAgICAgIDwvaGVhZD5cbiAgICAgIDxib2R5PlxuICAgICAgICA8ZGl2IGNsYXNzPVwiZW1haWwtY29udGFpbmVyXCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImhlYWRlclwiPlxuICAgICAgICAgICAgPGgxPvCfkrAgR3JlYXQgTmV3cyEgUmVmdW5kIEF2YWlsYWJsZTwvaDE+XG4gICAgICAgICAgICA8cD5Zb3VyIE1vdmUtT3V0IFByb2Nlc3MgLSBSZWZ1bmQgRHVlPC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIFxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250ZW50XCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicmVmdW5kLWluZm9cIj5cbiAgICAgICAgICAgICAgPGgzPkRlYXIgJHtiaWxsLnRlbmFudF9uYW1lfSw8L2gzPlxuICAgICAgICAgICAgICA8cD5FeGNlbGxlbnQgbmV3cyEgQWZ0ZXIgY292ZXJpbmcgYWxsIHlvdXIgYmlsbHMsIHlvdSBoYXZlIGEgcmVmdW5kIGR1ZSBmcm9tIHlvdXIgZGVwb3NpdHMuPC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJhbW91bnQtYm94XCI+XG4gICAgICAgICAgICAgIDxoMz7wn5KwIFJlZnVuZCBBbW91bnQ8L2gzPlxuICAgICAgICAgICAgICA8aDIgc3R5bGU9XCJjb2xvcjogIzI4YTc0NTsgZm9udC1zaXplOiAzMnB4OyBtYXJnaW46IDEwcHggMDtcIj7igrEke3JlZnVuZEFtb3VudC50b0ZpeGVkKDIpfTwvaDI+XG4gICAgICAgICAgICAgIDxwPlRoaXMgYW1vdW50IHdpbGwgYmUgcHJvY2Vzc2VkIGFuZCByZXR1cm5lZCB0byB5b3U8L3A+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImJpbGwtaW5mb1wiPlxuICAgICAgICAgICAgICA8aDM+8J+TiyBCaWxsIFN1bW1hcnk8L2gzPlxuICAgICAgICAgICAgICA8cD48c3Ryb25nPlJvb206PC9zdHJvbmc+ICR7YmlsbC5yb29tX251bWJlcn08L3A+XG4gICAgICAgICAgICAgIDxwPjxzdHJvbmc+RmluYWwgQmlsbCBQZXJpb2Q6PC9zdHJvbmc+ICR7Zm9ybWF0RGF0ZShiaWxsLnJlbnRfZnJvbSl9IC0gJHtmb3JtYXREYXRlKGJpbGwucmVudF90byl9PC9wPlxuICAgICAgICAgICAgICA8cD48c3Ryb25nPlRvdGFsIEJpbGxzIENvdmVyZWQ6PC9zdHJvbmc+IOKCsSR7YmlsbC50b3RhbF9hbW91bnQudG9GaXhlZCgyKX08L3A+XG4gICAgICAgICAgICAgIDxwPjxzdHJvbmc+WW91ciBEZXBvc2l0cyBBcHBsaWVkOjwvc3Ryb25nPiDigrEkeyhiaWxsLnRvdGFsX2Ftb3VudCArIHJlZnVuZEFtb3VudCkudG9GaXhlZCgyKX08L3A+XG4gICAgICAgICAgICAgIDxwPjxzdHJvbmc+UmVmdW5kIER1ZTo8L3N0cm9uZz4gPHNwYW4gc3R5bGU9XCJjb2xvcjogIzI4YTc0NTsgZm9udC13ZWlnaHQ6IGJvbGQ7XCI+4oKxJHtyZWZ1bmRBbW91bnQudG9GaXhlZCgyKX08L3NwYW4+PC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJiYWNrZ3JvdW5kOiAjZmZmM2NkOyBib3JkZXI6IDFweCBzb2xpZCAjZmZlYWE3OyBwYWRkaW5nOiAxNXB4OyBib3JkZXItcmFkaXVzOiA2cHg7IG1hcmdpbjogMjBweCAwO1wiPlxuICAgICAgICAgICAgICA8aDQ+8J+TiyBXaGF0IEhhcHBlbnMgTmV4dD88L2g0PlxuICAgICAgICAgICAgICA8b2w+XG4gICAgICAgICAgICAgICAgPGxpPllvdXIgYmlsbHMgaGF2ZSBiZWVuIGF1dG9tYXRpY2FsbHkgY292ZXJlZCBieSB5b3VyIGRlcG9zaXRzPC9saT5cbiAgICAgICAgICAgICAgICA8bGk+VGhlIGFkbWluIHdpbGwgcHJvY2VzcyB5b3VyIHJlZnVuZDwvbGk+XG4gICAgICAgICAgICAgICAgPGxpPllvdSB3aWxsIGJlIGNvbnRhY3RlZCBmb3IgcmVmdW5kIGNvbGxlY3Rpb24gZGV0YWlsczwvbGk+XG4gICAgICAgICAgICAgICAgPGxpPllvdXIgbW92ZS1vdXQgd2lsbCBiZSBjb21wbGV0ZWQgb25jZSB0aGUgcmVmdW5kIGlzIHByb2Nlc3NlZDwvbGk+XG4gICAgICAgICAgICAgIDwvb2w+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgPGRpdiBzdHlsZT1cImJhY2tncm91bmQ6ICNkMWVjZjE7IGJvcmRlcjogMXB4IHNvbGlkICNiZWU1ZWI7IHBhZGRpbmc6IDE1cHg7IGJvcmRlci1yYWRpdXM6IDZweDsgbWFyZ2luOiAyMHB4IDA7XCI+XG4gICAgICAgICAgICAgIDxoND7wn5KhIEltcG9ydGFudCBJbmZvcm1hdGlvbjwvaDQ+XG4gICAgICAgICAgICAgIDxwPuKAoiBObyBhY3Rpb24gcmVxdWlyZWQgZnJvbSB5b3UgYXQgdGhpcyB0aW1lPC9wPlxuICAgICAgICAgICAgICA8cD7igKIgWW91ciByb29tIGNvbnRyYWN0IGlzIGJlaW5nIHByb2Nlc3NlZCBmb3IgdGVybWluYXRpb248L3A+XG4gICAgICAgICAgICAgIDxwPuKAoiBQbGVhc2Ugd2FpdCBmb3IgYWRtaW4gY29udGFjdCByZWdhcmRpbmcgcmVmdW5kIGNvbGxlY3Rpb248L3A+XG4gICAgICAgICAgICAgIDxwPuKAoiBLZWVwIHRoaXMgZW1haWwgZm9yIHlvdXIgcmVjb3JkczwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgXG4gICAgICAgICAgICA8ZGl2IHN0eWxlPVwidGV4dC1hbGlnbjogY2VudGVyOyBtYXJnaW46IDMwcHggMDtcIj5cbiAgICAgICAgICAgICAgPHAgc3R5bGU9XCJmb250LXNpemU6IDE4cHg7IGNvbG9yOiAjMjhhNzQ1O1wiPjxzdHJvbmc+VGhhbmsgeW91IGZvciBiZWluZyBhIHZhbHVlZCB0ZW5hbnQhIPCfj6E8L3N0cm9uZz48L3A+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICBcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9vdGVyXCI+XG4gICAgICAgICAgICA8cD5UaGlzIGlzIGFuIGF1dG9tYXRlZCByZWZ1bmQgbm90aWZpY2F0aW9uPC9wPlxuICAgICAgICAgICAgPHA+Rm9yIHF1ZXN0aW9ucywgcGxlYXNlIGNvbnRhY3Q6IG9mZmljaWFsLmpoYXBhcnRtZW50QGdtYWlsLmNvbTwvcD5cbiAgICAgICAgICAgIDxwPkomSCBBcGFydG1lbnQgTWFuYWdlbWVudCBUZWFtPC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvYm9keT5cbiAgICAgIDwvaHRtbD5cbiAgICBgO1xuICAgIFxuICAgIGNvbnN0IHRleHRDb250ZW50ID0gYFxuRGVhciAke2JpbGwudGVuYW50X25hbWV9LFxuXG5SRUZVTkQgTk9USUZJQ0FUSU9OIC0gTU9WRSBPVVRcblxuR3JlYXQgbmV3cyEgQWZ0ZXIgY292ZXJpbmcgYWxsIHlvdXIgYmlsbHMsIHlvdSBoYXZlIGEgcmVmdW5kIGR1ZSBmcm9tIHlvdXIgZGVwb3NpdHMuXG5cblJFRlVORCBBTU9VTlQ6IOKCsSR7cmVmdW5kQW1vdW50LnRvRml4ZWQoMil9XG5cbkJpbGwgU3VtbWFyeTpcbi0gUm9vbTogJHtiaWxsLnJvb21fbnVtYmVyfVxuLSBGaW5hbCBCaWxsIFBlcmlvZDogJHtmb3JtYXREYXRlKGJpbGwucmVudF9mcm9tKX0gLSAke2Zvcm1hdERhdGUoYmlsbC5yZW50X3RvKX1cbi0gVG90YWwgQmlsbHMgQ292ZXJlZDog4oKxJHtiaWxsLnRvdGFsX2Ftb3VudC50b0ZpeGVkKDIpfVxuLSBZb3VyIERlcG9zaXRzIEFwcGxpZWQ6IOKCsSR7KGJpbGwudG90YWxfYW1vdW50ICsgcmVmdW5kQW1vdW50KS50b0ZpeGVkKDIpfVxuLSBSZWZ1bmQgRHVlOiDigrEke3JlZnVuZEFtb3VudC50b0ZpeGVkKDIpfVxuXG5XaGF0IEhhcHBlbnMgTmV4dDpcbjEuIFlvdXIgYmlsbHMgaGF2ZSBiZWVuIGF1dG9tYXRpY2FsbHkgY292ZXJlZCBieSB5b3VyIGRlcG9zaXRzXG4yLiBUaGUgYWRtaW4gd2lsbCBwcm9jZXNzIHlvdXIgcmVmdW5kXG4zLiBZb3Ugd2lsbCBiZSBjb250YWN0ZWQgZm9yIHJlZnVuZCBjb2xsZWN0aW9uIGRldGFpbHNcbjQuIFlvdXIgbW92ZS1vdXQgd2lsbCBiZSBjb21wbGV0ZWQgb25jZSB0aGUgcmVmdW5kIGlzIHByb2Nlc3NlZFxuXG5JbXBvcnRhbnQgSW5mb3JtYXRpb246XG7igKIgTm8gYWN0aW9uIHJlcXVpcmVkIGZyb20geW91IGF0IHRoaXMgdGltZVxu4oCiIFlvdXIgcm9vbSBjb250cmFjdCBpcyBiZWluZyBwcm9jZXNzZWQgZm9yIHRlcm1pbmF0aW9uXG7igKIgUGxlYXNlIHdhaXQgZm9yIGFkbWluIGNvbnRhY3QgcmVnYXJkaW5nIHJlZnVuZCBjb2xsZWN0aW9uXG7igKIgS2VlcCB0aGlzIGVtYWlsIGZvciB5b3VyIHJlY29yZHNcblxuVGhhbmsgeW91IGZvciBiZWluZyBhIHZhbHVlZCB0ZW5hbnQhXG5cbkJlc3QgcmVnYXJkcyxcbkomSCBBcGFydG1lbnQgTWFuYWdlbWVudCBUZWFtXG4gICAgYDtcblxuICAgIGNvbnN0IG1haWxPcHRpb25zID0ge1xuICAgICAgZnJvbTogcHJvY2Vzcy5lbnYuRU1BSUxfVVNFUiB8fCAnb2ZmaWNpYWwuamhhcGFydG1lbnRAZ21haWwuY29tJyxcbiAgICAgIHRvOiByZWNpcGllbnRFbWFpbCxcbiAgICAgIHN1YmplY3Q6IHN1YmplY3QsXG4gICAgICB0ZXh0OiB0ZXh0Q29udGVudCxcbiAgICAgIGh0bWw6IGh0bWxDb250ZW50XG4gICAgfTtcblxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRyYW5zcG9ydGVyLnNlbmRNYWlsKG1haWxPcHRpb25zKTtcbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIG1lc3NhZ2VJZDogcmVzdWx0Lm1lc3NhZ2VJZCxcbiAgICAgIG1lc3NhZ2U6ICdSZWZ1bmQgbm90aWZpY2F0aW9uIGVtYWlsIHNlbnQgc3VjY2Vzc2Z1bGx5J1xuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignUmVmdW5kIG5vdGlmaWNhdGlvbiBlbWFpbCBzZW5kaW5nIGVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBlcnJvcjogZXJyb3IubWVzc2FnZVxuICAgIH07XG4gIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgc2VuZEJpbGxUb1RlbmFudCxcbiAgc2VuZFJlY2VpcHRUb1RlbmFudCxcbiAgdGVzdEVtYWlsQ29uZmlnLFxuICBnZW5lcmF0ZUJpbGxIVE1MLFxuICBzZW5kV2VsY29tZUVtYWlsLFxuICBzZW5kRGVwb3NpdFJlY2VpcHRFbWFpbCxcbiAgc2VuZENvbnRyYWN0RXhwaXJ5Tm90aWZpY2F0aW9uLFxuICBzZW5kRGVwYXJ0dXJlRW1haWwsXG4gIHNlbmRNb250aGx5UmVwb3J0LFxuICBzZW5kQmlsbGluZ1JlbWluZGVyVG9NYW5hZ2VtZW50LFxuICBzZW5kRmluYWxCaWxsVG9UZW5hbnQsXG4gIHNlbmRSZWZ1bmROb3RpZmljYXRpb25FbWFpbFxufTsgIl0sIm5hbWVzIjpbIm5vZGVtYWlsZXIiLCJjcmVhdGVUcmFuc3BvcnRlciIsImNyZWF0ZVRyYW5zcG9ydCIsInNlcnZpY2UiLCJhdXRoIiwidXNlciIsInByb2Nlc3MiLCJlbnYiLCJFTUFJTF9VU0VSIiwicGFzcyIsIkVNQUlMX1BBU1MiLCJmb3JtYXRDdXJyZW5jeSIsImFtb3VudCIsIkludGwiLCJOdW1iZXJGb3JtYXQiLCJzdHlsZSIsImN1cnJlbmN5IiwiZm9ybWF0IiwiZm9ybWF0RGF0ZSIsImRhdGUiLCJkYXRlT2JqIiwiRGF0ZSIsImlzTmFOIiwiZ2V0VGltZSIsIkRhdGVUaW1lRm9ybWF0IiwieWVhciIsIm1vbnRoIiwiZGF5IiwiZXJyb3IiLCJnZW5lcmF0ZUJpbGxIVE1MIiwiYmlsbCIsImVsZWN0cmljUmVhZGluZyIsImVsZWN0cmljX3ByZXNlbnRfcmVhZGluZyIsImVsZWN0cmljX3ByZXZpb3VzX3JlYWRpbmciLCJlbGVjdHJpY0NvbnN1bXB0aW9uIiwiZWxlY3RyaWNfY29uc3VtcHRpb24iLCJicmFuY2hfbmFtZSIsImJyYW5jaF9hZGRyZXNzIiwidGVuYW50X25hbWUiLCJyb29tX251bWJlciIsInJlbnRfZnJvbSIsInJlbnRfdG8iLCJiaWxsX2RhdGUiLCJyZW50X2Ftb3VudCIsImVsZWN0cmljX3JhdGVfcGVyX2t3aCIsImVsZWN0cmljX2Ftb3VudCIsIndhdGVyX2Ftb3VudCIsImV4dHJhX2ZlZV9hbW91bnQiLCJleHRyYV9mZWVfZGVzY3JpcHRpb24iLCJ0b3RhbF9hbW91bnQiLCJzdGF0dXMiLCJ0b1VwcGVyQ2FzZSIsInNlbmRCaWxsVG9UZW5hbnQiLCJyZWNpcGllbnRFbWFpbCIsImN1c3RvbU1lc3NhZ2UiLCJ0cmFuc3BvcnRlciIsInN1YmplY3QiLCJodG1sQ29udGVudCIsInRleHRNZXNzYWdlIiwibWFpbE9wdGlvbnMiLCJmcm9tIiwidG8iLCJ0ZXh0IiwiaHRtbCIsImF0dGFjaG1lbnRzIiwicmVzdWx0Iiwic2VuZE1haWwiLCJzdWNjZXNzIiwibWVzc2FnZUlkIiwibWVzc2FnZSIsImNvbnNvbGUiLCJ0ZXN0RW1haWxDb25maWciLCJ2ZXJpZnkiLCJzZW5kUmVjZWlwdFRvVGVuYW50IiwicGF5bWVudHMiLCJwZGZCdWZmZXIiLCJwZW5hbHR5UGVyY2VudGFnZSIsImhhc1BlbmFsdHlGZWUiLCJwZW5hbHR5X2FwcGxpZWQiLCJwZW5hbHR5X2ZlZV9hbW91bnQiLCJwZW5hbHR5RmVlQW1vdW50IiwicGFyc2VGbG9hdCIsInJlZHVjZSIsInN1bSIsInAiLCJsZW5ndGgiLCJhY3R1YWxfcGF5bWVudF9kYXRlIiwicGF5bWVudF9kYXRlIiwiZmlsZW5hbWUiLCJpZCIsIm5vdyIsImNvbnRlbnQiLCJjb250ZW50VHlwZSIsInNlbmRXZWxjb21lRW1haWwiLCJ0ZW5hbnQiLCJyb29tSW5mbyIsIm5hbWUiLCJtb250aGx5X3JlbnQiLCJjb250cmFjdF9zdGFydF9kYXRlIiwiY29udHJhY3RfZW5kX2RhdGUiLCJjb250cmFjdF9kdXJhdGlvbl9tb250aHMiLCJhZHZhbmNlX3BheW1lbnQiLCJzZWN1cml0eV9kZXBvc2l0IiwidGV4dENvbnRlbnQiLCJlbWFpbCIsInNlbmREZXBvc2l0UmVjZWlwdEVtYWlsIiwiZGVwb3NpdFJlY2VpcHRCdWZmZXIiLCJzZW5kQ29udHJhY3RFeHBpcnlOb3RpZmljYXRpb24iLCJkYXlzVW50aWxFeHBpcnkiLCJNYXRoIiwiY2VpbCIsInNlbmREZXBhcnR1cmVFbWFpbCIsImRlcGFydHVyZUluZm8iLCJyZW50X3N0YXJ0IiwicmVudF9lbmQiLCJjb250cmFjdF9jb21wbGV0ZWQiLCJyZWFzb25fZm9yX2xlYXZpbmciLCJyZXBsYWNlIiwidG90YWxfYmlsbHNfcGFpZCIsInRvdGFsX2JpbGxzX3VucGFpZCIsInNlY3VyaXR5X2RlcG9zaXRfcmVmdW5kIiwic2VuZE1vbnRobHlSZXBvcnQiLCJyZXBvcnREYXRhIiwibW9udGhOYW1lIiwicmVwb3J0X3BlcmlvZCIsIm1vbnRoX25hbWUiLCJ0b3RhbFJldmVudWUiLCJmaW5hbmNpYWxfc3VtbWFyeSIsInRvdGFsX3JldmVudWUiLCJ0b0xvY2FsZVN0cmluZyIsIm9jY3VwYW5jeVJhdGUiLCJvY2N1cGFuY3lfbWV0cmljcyIsIm9jY3VwYW5jeV9yYXRlIiwiYWN0aXZlVGVuYW50cyIsInRlbmFudF9zdGF0aXN0aWNzIiwiYWN0aXZlX3RlbmFudHMiLCJyZXZlbnVlR3Jvd3RoIiwicmV2ZW51ZV9ncm93dGgiLCJicmFuY2hUYWJsZSIsImJyYW5jaF9wZXJmb3JtYW5jZSIsIm1hcCIsImJyYW5jaCIsIm9jY3VwaWVkX3Jvb21zIiwidG90YWxfcm9vbXMiLCJyZXZlbnVlIiwiam9pbiIsInBheW1lbnRUYWJsZSIsInBheW1lbnRfYW5hbHlzaXMiLCJieV9tZXRob2QiLCJtZXRob2QiLCJwYXltZW50X21ldGhvZCIsInRyYW5zYWN0aW9uX2NvdW50IiwicGVyY2VudGFnZSIsInRvcFBlcmZvcm1lcnNUYWJsZSIsInRvcF9wZXJmb3JtZXJzIiwidG90YWxfcGFpZCIsImdlbmVyYXRlZF9hdCIsInRvTG9jYWxlRGF0ZVN0cmluZyIsImFicyIsIm5ldF90ZW5hbnRfY2hhbmdlIiwiY29sbGVjdGlvbl9yYXRlIiwidG90YWxfYmlsbGVkIiwidG90YWxfdHJhbnNhY3Rpb25zIiwib3V0c3RhbmRpbmdfc3VtbWFyeSIsInRvdGFsX291dHN0YW5kaW5nIiwidW5wYWlkX2JpbGxzX2NvdW50IiwicGFydGlhbF9iaWxsc19jb3VudCIsIm5ld190ZW5hbnRzIiwiZGVwYXJ0ZWRfdGVuYW50cyIsImV4cGlyaW5nX2NvbnRyYWN0cyIsIkVNQUlMX0ZST00iLCJsb2ciLCJzZW5kQmlsbGluZ1JlbWluZGVyVG9NYW5hZ2VtZW50IiwidGVuYW50cyIsInRlbmFudHNCeUR1ZURhdGUiLCJhY2MiLCJkdWVEYXRlIiwibmV4dF9iaWxsX2R1ZV9kYXRlIiwicHVzaCIsImZpbHRlciIsImRheXNfdW50aWxfZHVlIiwiT2JqZWN0IiwiZW50cmllcyIsImRhdGVUZW5hbnRzIiwiZGF5c1VudGlsRHVlIiwiZHVlRGF0ZUNsYXNzIiwiZHVlRGF0ZUxhYmVsIiwibGFzdF9lbGVjdHJpY19yZWFkaW5nIiwidG9Mb2NhbGVUaW1lU3RyaW5nIiwidGVuYW50c0NvdW50IiwiZ2VuZXJhdGVGaW5hbEJpbGxIVE1MIiwiZGVwb3NpdEFwcGxpZWQiLCJkZXBvc2l0X2FwcGxpZWQiLCJvcmlnaW5hbEJpbGxBbW91bnQiLCJvcmlnaW5hbF9iaWxsX2Ftb3VudCIsImhhc0RlcG9zaXRBcHBsaWVkIiwic2VuZEZpbmFsQmlsbFRvVGVuYW50Iiwic2VuZFJlZnVuZE5vdGlmaWNhdGlvbkVtYWlsIiwicmVmdW5kQW1vdW50IiwidG9GaXhlZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./services/emailService.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tr46","vendor-chunks/ws","vendor-chunks/semver","vendor-chunks/whatwg-url","vendor-chunks/jsonwebtoken","vendor-chunks/lodash.includes","vendor-chunks/jws","vendor-chunks/lodash.once","vendor-chunks/jwa","vendor-chunks/lodash.isinteger","vendor-chunks/ecdsa-sig-formatter","vendor-chunks/webidl-conversions","vendor-chunks/lodash.isplainobject","vendor-chunks/ms","vendor-chunks/lodash.isstring","vendor-chunks/lodash.isnumber","vendor-chunks/lodash.isboolean","vendor-chunks/safe-buffer","vendor-chunks/buffer-equal-constant-time"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fbills%2Freminders%2Froute&page=%2Fapi%2Fbills%2Freminders%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbills%2Freminders%2Froute.js&appDir=C%3A%5CUsers%5Cjoshu_mnu8z3u%5CDownloads%5Cj-h-apartment-1%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cjoshu_mnu8z3u%5CDownloads%5Cj-h-apartment-1&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();